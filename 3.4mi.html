<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.75);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.75);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- 聊天列表 --- */
    #chat-list-pane {
      background-color: transparent;
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 加上这句 */
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      /* 防止它在横向布局里被挤扁 */
      display: flex;
      flex-direction: column;
    }

    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    #chat-screen-container {
      position: relative;
      /* 告诉里面的绝对定位元素，要以我为基准 */
      flex-grow: 1;
      /* 确保它能撑满 chat-screen 的空间 */
      overflow: hidden;
      /* 把滑出去的部分藏起来，这很重要 */
      display: flex;
      /* 保持内部元素的 flex 布局 */
    }

    /* --- 聊天窗口 --- */


    #chat-view-pane {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      will-change: transform;
      /* <-- 还有这句 */
      background-color: transparent;
      z-index: 10;
    }

    #chat-screen.show-chat-view #chat-list-pane {
      transform: translateX(-100%);
    }

    #chat-screen.show-chat-view #chat-view-pane {
      transform: translateX(0);
    }




    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      box-sizing: border-box;
      margin: 0;
      /* ▼▼▼ 下面是手术刀切下来的新尺寸 ▼▼▼ */
      width: calc(75px * var(--desktop-item-scale, 1));
      height: calc(90px * var(--desktop-item-scale, 1));
      padding: calc(5px * var(--desktop-item-scale, 1));
    }

    .app-icon-img {
      border-radius: 22.5%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(58px * var(--desktop-item-scale, 1));
      height: calc(58px * var(--desktop-item-scale, 1));
      margin-bottom: calc(2px * var(--desktop-item-scale, 1));
      font-size: calc(28px * var(--desktop-item-scale, 1));
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      font-size: calc(0.75rem * var(--desktop-item-scale, 1));
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      /* 默认还是藏起来 */
      flex-direction: column;
      /* 哼，给我垂直排好队 */
      height: 220px;
      /* 稍微给管理条一点空间 */
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: flex;
      /* 看见没，现在是 flex，不是 grid 了！*/
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      transform: rotate(-0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 50;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(160px * var(--desktop-item-scale, 1));
      height: calc(160px * var(--desktop-item-scale, 1));
    }


    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      z-index: 50;
      /* ▼▼▼ 新增的缩放指令 ▼▼▼ */
      transform-origin: center top;
      transform: scale(var(--desktop-item-scale, 1));
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 90%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

    #chat-messages {
      flex-grow: 1;
      padding: 5px 15px;
      /* 左右15px的呼吸空间 */
      overflow-y: auto;
      display: flex;
      flex-direction: column;

    }

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
      gap: 10px;
      /* 头像和气泡之间，永远保持10px的距离 */
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-start;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    /* --- Noir's "Sticky" Typing Indicator --- */
    /* 哼，用这个替换掉你旧的 .typing-indicator 样式 */
    /* --- Noir's Final Protocol: Spatial Displacement --- */
    /* 哼，这次再敢乱跑，我就把你格式化了。*/
    /* --- Noir's Final Protocol: Spatial Readjustment (As Commanded) --- */
    /* 哼，这次再敢说丑，我就把你格式化了。*/
    .typing-indicator {
      position: absolute;
      /* ▼▼▼ 核心手术，看好了 ▼▼▼ */
      bottom: 117px;
      /* 这是我算好的精确高度，刚好在你的工具栏和输入框上面 */
      left: 15px;
      /* 先把你那个碍事的左定位给废了 */
      right: auto;
      /* 然后把它焊死在右边，距离边缘15px */
      margin-left: 0;
      /* 再把你那个多余的左边距也扔掉 */
      /* ▲▲▲ 手术结束 ▲▲▲ */

      /* 下面这些是“整容”，让它看起来还像个气泡 */

    }

    #offline-scene-view .typing-indicator {
      color: rgba(255, 255, 255, 0.8);
      /* 在暗色背景下用亮色 */
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 同样的文字阴影，保持队形 */
      padding: 10px 0;
      margin-left: 0;
      /* 在小说视图里不需要缩进 */
    }


    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding-bottom: 70px;
      contain: content;
      /* 为底部播放器留出空间 */
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fff;
      /* 默认白底 */
      background-image: var(--feed-bg-image);
      /* 单独壁纸，不设就是 none */
      background-size: cover;
      background-position: center;
      contain: paint;
      /* 降低重绘范围，省电 */
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: var(--soft-shadow);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }

    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .music-post-header .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .music-post-thought {
      padding: 0 15px 15px;
      font-size: 0.95rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.04);
      padding: 12px 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.08);
    }

    .music-post-song-card img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 12px;
    }

    .music-post-song-info {
      flex-grow: 1;
    }

    .music-post-song-info .title {
      font-weight: 500;
      color: var(--text-color);
    }

    .music-post-song-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    .music-post-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 65px;
      background: var(--surface-bg);
      /*backdrop-filter: blur(10px);*/
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 10px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
      /* 彻底隐藏，避免交互问题 */
    }


    #player-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 500;
    }

    #player-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #player-controls button {
      background: none;
      border: 2px solid var(--text-color);
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 250px;
      /* 限制一下最大宽度 */
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-share-info .title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-info .artist {
      font-size: 0.85rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      border-radius: 18px;
      background-color: rgba(255, 255, 255, 0.5);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(335px * var(--desktop-item-scale, 1));
      height: calc(170px * var(--desktop-item-scale, 1));
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music,
    .message.html-module {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Noir's Diary Beautification --- */
    #diary-entries-container {
      background-color: #fdfaf2;
      /* A warm, paper-like off-white */
      padding: 25px 20px;
      line-height: 1.9;
      border: 1px solid #e0dccc;
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.08);
      /* Inner shadow for page depth */
    }

    /* This is the container for a single entry (date, author, content) */
    .diary-entry {
      margin-bottom: 2.5em;
      /* Increase spacing between entries */
      position: relative;
      padding-bottom: 1.5em;
      /* Space for the separator line */
      border-bottom: 1px dashed #dcd5c7;
      /* A subtle dashed line between entries */
    }

    /* Style the author's name */
    .diary-author {
      font-weight: normal;
      /* Make it less bold, more like a signature */
      font-size: 1rem;
      font-family: 'Segoe Script', 'Bradley Hand', cursive;
      /* A more handwritten font */
    }

    /* Style the date */
    .diary-timestamp {
      font-size: 0.75rem;
      color: #a99e8c;
      /* A faded brown color */
      margin-bottom: 8px;
      font-family: 'Courier New', monospace;
      /* Typewriter-like font for date */
    }

    /* Style the actual diary text content */
    .diary-content {
      white-space: pre-wrap;
      font-size: 0.95rem;
      color: #4a443b;
      /* A dark brown/black ink color */
      font-family: 'KaiTi', 'STSong', serif;
    }

    /* Specific styles for the USER's entries */
    .diary-entry.user {
      text-align: right;
    }

    .diary-entry.user .diary-author {
      color: #005a9c;
      /* A nice fountain pen blue */
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    /* Specific styles for the AI's entries */
    .diary-entry.ai {
      text-align: left;
    }

    .diary-entry.ai .diary-author {
      color: #5a3e36;
      /* A darker, warmer brown for the AI */
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    /* Let's get rid of the last separator line for a cleaner look */
    .diary-entry:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        flex-shrink: 0;
        /* ▼▼▼ 哼，就是这句圣旨！▼▼▼ */
        transform: scale(var(--ui-scale, 1));
        transition: transform 0.2s ease-out;
        /* 加个动画，免得太生硬 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      border-radius: 6px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      padding: 0;
      border: none;
      overflow: visible;
      position: relative;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: 340px;
      height: 120px;
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);
      backdrop-filter: blur(5px) saturate(0.8);
      -webkit-backdrop-filter: blur(15px) saturate(0.8);
      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* --- Noir's Desktop Pagination System --- */
    /* ... 其他样式 ... */

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      opacity: 0;
      /* 默认让整个舞台透明 */
      transition: opacity 0.3s ease-in-out;
      /* 添加一个平滑的渐入动画效果 */
      /* ▲▲▲ 添加到这里结束 ▲▲▲ */
    }

    /* ... 其他样式 ... */

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 50%;
      /* <-- 现在两个人，一人一半，公平！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      border-radius: 22px;
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(165px * var(--desktop-item-scale, 1));
      height: calc(165px * var(--desktop-item-scale, 1));
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

    /* --- Noir's Ultimate Snoop UI Overhaul v3.0 (FINAL & COMPLETE) --- */
    /* 哼，这是最终版本。*/

    /* 壁纸和状态栏 (哼，这才是高级的毛玻璃质感) */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      /* 删掉那个没用的图片，换成我的高级定制背景 */
      background-color: rgba(26, 26, 27, 0.9);
      /* 半透明深灰，营造高级感 */
      backdrop-filter: blur(25px) saturate(1.5);
      /* 核心！强大的模糊和饱和度滤镜 */
      -webkit-backdrop-filter: blur(25px) saturate(1.5);
      /* 兼容性，真是为你操碎了心 */
      z-index: 1;
    }

    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgb(237, 236, 236);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      /* <-- 加了阴影 */
      z-index: 10;
    }

    /* 居中大时钟 */
    #snoop-home-clock {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      text-align: center;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      /* <-- 加了阴影 */
      pointer-events: none;
    }

    #snoop-home-time {
      font-size: 72px;
      font-weight: 200;
      letter-spacing: -1px;
    }

    #snoop-home-date {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.8;
    }

    /* 主屏幕App容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 20px 120px;
    }

    /* 2x2 网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 180px;
      margin: 0 auto;
    }

    /* Dock栏 */
    #snoop-dock {
      position: absolute;
      bottom: 20px;
      left: 5%;
      right: 5%;
      height: 85px;
      padding: 0 15px;
      box-sizing: border-box;
      z-index: 6;
      background: rgba(255, 255, 255, 0.15);
      /* <-- 透明度稍微降低了一点点 */
      backdrop-filter: blur(20px) saturate(1.2);
      -webkit-backdrop-filter: blur(20px) saturate(1.2);
      border-radius: 28px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    /* App图标本体 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
    }

    .snoop-app-icon-img {
      width: 58px;
      height: 58px;
      border-radius: 22.5%;
      margin-bottom: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      /* <-- 加了阴影 */
      transition: transform 0.2s ease;
      padding: 12px;
      box-sizing: border-box;
    }

    .snoop-app-icon-img svg {
      width: 100%;
      height: 100%;
      stroke: white;
      stroke-width: 1.5;
      fill: none;
      /* 哼，给SVG也加上阴影，这样才够立体 */
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    }

    .snoop-app-icon:active .snoop-app-icon-img {
      transform: scale(0.92);
    }

    .snoop-app-icon span {
      font-size: 0.75rem;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      /* <-- 加了阴影 */
      font-weight: 500;
    }

    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* --- Noir's Bespoke Avatar Frame Protocol (v2.0) --- */
    /* 哼，就知道你要求多。看好了，这才是让框比头像大的正确方法。*/

    /* 1. 容器还是那个40px的容器，负责在布局里占好位置，不许动 */
    .avatar-wrapper {
      position: relative;
      width: 40px;
      height: 40px;
      flex-shrink: 0;
      /* 为了让“膨胀”的头像框不被奇怪地切掉，给它一点呼吸空间 */
      margin: 5px;
    }

    /* 2. 头像也还是那个头像，老老实实待在容器正中间 */
    .avatar-wrapper .avatar {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;

    }

    /* 3. 哼，看好了，魔法就在这里。我让头像框“变大”并“浮空” */
    .avatar-wrapper .avatar-frame {
      position: absolute;
      /* 哼，让它比容器大一点，比如125%，你自己看着调 */
      width: 125%;
      height: 125%;
      /* 把它自己的中心点，对准容器的中心点，给我站稳了！*/
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      /* 下面的老规矩不变 */
      background-size: contain;
      /* 改成 contain 免得你的框被切掉 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 依旧是幽灵，不许捣乱 */
    }


    /* --- Noir's Full-Width HTML Module Protocol --- */
    /* --- Noir's Full-Width HTML Module Protocol (v2.0 Centered Edition) --- */
    .full-width-module-container {
      display: flex;
      /* 哼，命令它使用Flex布局 */
      justify-content: center;
      /* 把它里面的东西给我水平居中 */
      width: 100%;
      padding: 0 5px;
      box-sizing: border-box;
      margin-bottom: 10px;
      user-select: none;
      -webkit-user-select: none;
    }

    /* --- Noir's Elegant Lock Screen Styles --- */
    #lock-screen-overlay {
      position: absolute;
      inset: 0;
      z-index: 1000;
      /* 哼，必须在最顶层 */
      background: inherit;
      /* 直接继承壁纸，天衣无缝 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s ease;
      will-change: transform, opacity;
    }

    /* 这是它被“解锁”后的样子，给我飞走！ */
    #lock-screen-overlay.unlocked {
      transform: translateY(-100%);
      opacity: 0;
      pointer-events: none;
      /* 飞走后就不许再捣乱了 */
    }

    /* 这是底下的那个“向上滑动”的提示 */
    /* --- Noir's Reinforced Centering Command --- */
    #unlock-indicator {
      position: absolute;
      bottom: 40px;
      left: 0;
      /* <-- 哼，从左边框开始 */
      right: 0;
      /* <-- 一直拉到右边框 */
      width: 100%;
      /* <-- 强制它和屏幕一样宽 */
      text-align: center;
      /* <-- 然后让里面的文字自己滚到中间去！ */
      color: var(--text-color);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    #unlock-indicator svg {
      width: 20px;
      height: 20px;
    }

    /* 一个简单的上下跳动动画，免得你看不见 */
    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-8px);
      }

      60% {
        transform: translateY(-4px);
      }
    }

    /* --- Noir's Sticker Gallery Management UI --- */
    #sticker-panel-controls {
      display: none;
      /* 默认隐藏 */
      padding: 5px 10px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    #sticker-panel-controls.visible {
      display: flex;
      /* 面板打开时显示 */
    }

    #sticker-manage-btn,
    #sticker-cancel-btn {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--primary-color);
      background: none;
      border: none;
      cursor: pointer;
    }

    #sticker-confirm-delete-btn {
      font-size: 0.9rem;
      font-weight: 600;
      color: #fff;
      background-color: #e65252;
      border: none;
      border-radius: 16px;
      padding: 6px 14px;
      cursor: pointer;
      opacity: 0.5;
      /* 默认半透明 */
      pointer-events: none;
      /* 默认不可点 */
      transition: opacity 0.2s;
    }

    #sticker-confirm-delete-btn.active {
      opacity: 1;
      pointer-events: auto;
    }

    .sticker-item-wrapper {
      position: relative;
      aspect-ratio: 1 / 1;
    }

    .sticker-item-wrapper.selected::after {
      content: '✓';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      border-radius: 8px;
      /* 和表情图片圆角一致 */
    }

    /* --- Noir's Hierarchical World Book Selector --- */
    /* 哼，这才叫井井有条。*/
    .wb-category-group {
      border-bottom: 1px solid var(--border-color);
    }

    .wb-category-group:last-child {
      border-bottom: none;
    }

    .wb-category-header {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      cursor: pointer;
      user-select: none;
    }

    .wb-category-header:hover {
      background-color: rgba(138, 180, 228, 0.1);
    }

    .wb-category-header .category-checkbox {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
      flex-shrink: 0;
      accent-color: var(--primary-color);
    }

    .wb-category-header .category-name {
      flex-grow: 1;
      font-weight: 600;
      color: var(--primary-color);
    }

    .wb-category-header .category-toggle-arrow {
      transition: transform 0.2s ease;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .wb-category-header .category-toggle-arrow.expanded {
      transform: rotate(180deg);
    }

    .wb-entry-list {
      padding-left: 30px;
      /* Indent the entries */
      padding-bottom: 5px;
      display: none;
      /* Collapsed by default */
    }

    .wb-entry-list.expanded {
      display: block;
    }

    .wb-entry-item {
      display: block;
      padding: 8px 12px;
      border-radius: 4px;
    }

    .wb-entry-item:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .wb-entry-item input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
    }
  </style>
</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <input type="file" id="import-accounting-input" accept=".json" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">

      <div id="lock-screen-overlay">
        <div id="home-clock-container">
          <div id="home-time">11:31</div>
          <div id="home-date">8月29日 星期五</div>
          <div id="noir-author-mark"></div>
        </div>
        <div id="music-widget"
          style="display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50; padding: 0px; bottom: auto;">
          <div id="music-widget-card">
            <div id="widget-cover-art"></div>
            <div class="widget-content-overlay">
              <div class="widget-info">
                <div id="widget-title">暂无音乐</div>
                <div id="widget-artist">请在动态或聊天中播放</div>
              </div>
              <div id="widget-controls">
                <button id="widget-prev-btn">⏮</button>
                <button id="widget-play-pause-btn">▶</button>
                <button id="widget-next-btn">⏭</button>
              </div>
            </div>
          </div>
        </div>
        <div id="unlock-indicator">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
          </svg>
          向上滑动来解锁
        </div>
      </div>

      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">


            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>
              <div class="app-icon" id="app-lock-screen" style="position: absolute; top: 8%; left: 29%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                </div>
                <span>回到锁屏</span>
              </div>
              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>数据管理</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            导出全部数据（角色、聊天记录、设置、桌面布局等）到一个文件，方便在其他设备或浏览器上导入。
          </p>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="export-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #007bff;">导出全部数据</button>
            <button id="import-all-data-button" class="form-button"
              style="width: 50%; margin-top: 0; background-color: #28a745;">导入数据</button>
          </div>
          <input type="file" id="import-data-input" accept=".json" style="display: none;">
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0;">UI缩放</h2>
            <button id="reset-ui-scale-button" class="form-button secondary"
              style="width: auto; margin: 0; padding: 4px 12px; font-size: 0.8rem;">恢复默认</button>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来调整手机模拟器的整体大小。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="ui-scale-slider" style="display: block; margin-bottom: 5px;">缩放比例</label>
            <input type="range" id="ui-scale-slider" min="0.7" max="1.2" value="1" step="0.05" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" style="display: flex; padding: 0; flex-direction: row;">
        <div id="world-book-category-pane"
          style="width: 120px; flex-shrink: 0; border-right: 1px solid var(--border-color); background: var(--surface-bg); padding: 10px; display: flex; flex-direction: column;">
          <div id="world-book-category-list" style="flex-grow: 1; overflow-y: auto;">
          </div>
          <button id="add-world-book-category-button" class="form-button secondary"
            style="margin-top: 10px; padding: 8px;">新建分类</button>
        </div>
        <div id="world-book-list-container" style="flex-grow: 1; overflow-y: auto; padding: 10px;">
        </div>
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
          <div class="input-group">
            <label for="world-book-edit-category">所属分类</label>
            <select id="world-book-edit-category"></select>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-feed" class="header-button">返回</button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div style="display: flex; gap: 5px;">
          <button id="edit-current-circle-button" class="header-button" style="font-size: 1.2rem;">⚙️</button>
          <button id="clear-feed-button" class="header-button" style="color: #dc3545;">清空</button>
          <button id="refresh-feed-button" class="header-button">刷新</button>

        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">

          <button id="player-play-pause-btn">▶</button>

        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">

        <div class="upload-slot" id="altar-slot-audio">
          <span class="slot-icon">🎵</span>
          <span class="slot-label">音频文件 (必需)</span>
          <span class="slot-filename">点击选择 .mp3 或 .flac</span>
        </div>

        <div class="upload-slot" id="altar-slot-cover">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">封面图片 (可选)</span>
          <span class="slot-filename">点击选择 .jpg 或 .png</span>
        </div>

        <div class="upload-slot" id="altar-slot-info">
          <span class="slot-icon">📄</span>
          <span class="slot-label">歌曲信息 (必需)</span>
          <span class="slot-filename">点击选择 info.txt</span>
        </div>

        <div class="upload-slot" id="altar-slot-lyrics">
          <span class="slot-icon">🎤</span>
          <span class="slot-label">歌词文件 (可选)</span>
          <span class="slot-filename">点击选择 .lrc</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>
      </div>

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>


  </div>
  </div>

  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>

  <script>


    const _0x3c008f = _0x2205; (function (_0x43df9c, _0x291092) { const _0x419b44 = _0x2205, _0x2d8914 = _0x43df9c(); while (!![]) { try { const _0x279f32 = parseInt(_0x419b44(0xa46)) / 0x1 + -parseInt(_0x419b44(0xbad)) / 0x2 * (parseInt(_0x419b44(0x12c)) / 0x3) + parseInt(_0x419b44(0x5cb)) / 0x4 * (-parseInt(_0x419b44(0x6cd)) / 0x5) + -parseInt(_0x419b44(0x68b)) / 0x6 + parseInt(_0x419b44(0x4df)) / 0x7 + -parseInt(_0x419b44(0x2bb)) / 0x8 + parseInt(_0x419b44(0x1fd)) / 0x9; if (_0x279f32 === _0x291092) break; else _0x2d8914['push'](_0x2d8914['shift']()); } catch (_0x24e189) { _0x2d8914['push'](_0x2d8914['shift']()); } } }(_0x46e8, 0xbc30f)); function _0x4cac30(_0x4cac4f = new Date()) { const _0x3dda02 = _0x2205, _0x33607e = _0x4cac4f[_0x3dda02(0x35e)](), _0x419dc3 = String(_0x4cac4f[_0x3dda02(0x571)]() + 0x1)[_0x3dda02(0x466)](0x2, '0'), _0x4b25c4 = String(_0x4cac4f[_0x3dda02(0x41f)]())[_0x3dda02(0x466)](0x2, '0'); return _0x33607e + '-' + _0x419dc3 + '-' + _0x4b25c4; } function _0x2205(_0x39067c, _0x1a17f0) { const _0x46e8b6 = _0x46e8(); return _0x2205 = function (_0x2205ad, _0x981c15) { _0x2205ad = _0x2205ad - 0x118; let _0x1a22eb = _0x46e8b6[_0x2205ad]; return _0x1a22eb; }, _0x2205(_0x39067c, _0x1a17f0); } const _0x5706a1 = _0x3c008f(0x886), _0x2f7fc0 = 'images', _0x56d254 = _0x3c008f(0x98a), _0x41b2a1 = document['createElement'](_0x3c008f(0x819)); _0x41b2a1['id'] = _0x3c008f(0x9f9), document[_0x3c008f(0x2e7)][_0x3c008f(0x8ce)](_0x41b2a1); var _0x2c45d7, _0x17fbb7 = null; let _0x9519d0 = [], _0x33d2ea = ![], _0x49c006 = null, _0x480521 = ![], _0xb91457 = { 'x': 0x0, 'y': 0x0 }; function _0x135604(_0x2187b7) { const _0x54c3a0 = _0x3c008f; return (_0x2c45d7?.[_0x54c3a0(0xb76)] || [])[_0x54c3a0(0x128)](_0x1ff6e8 => _0x1ff6e8['id'] === _0x2187b7); } const _0x28e897 = _0x3c008f(0x425), _0x5d9858 = _0x3c008f(0x24f), _0x72f264 = _0x3c008f(0x1c9), _0x1d8538 = [{ 'name': _0x3c008f(0xa7c), 'url': _0x3c008f(0x957) }, { 'name': '崩溃', 'url': _0x3c008f(0x878) }, { 'name': '生病', 'url': _0x3c008f(0xbbf) }, { 'name': '工作', 'url': 'https://sharkpan.xyz/f/7L3Hj/sl4504.jpg' }, { 'name': _0x3c008f(0x49a), 'url': _0x3c008f(0x3f0) }, { 'name': _0x3c008f(0x397), 'url': _0x3c008f(0x729) }, { 'name': _0x3c008f(0x389), 'url': _0x3c008f(0x79b) }, { 'name': '期待', 'url': _0x3c008f(0x7f5) }, { 'name': '喜欢', 'url': _0x3c008f(0x7fb) }, { 'name': _0x3c008f(0x384), 'url': _0x3c008f(0x2aa) }, { 'name': _0x3c008f(0x271), 'url': _0x3c008f(0x14f) }, { 'name': '委屈', 'url': 'https://sharkpan.xyz/f/ajwtY/x03qxn.gif' }, { 'name': '加油', 'url': 'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg' }, { 'name': '对的', 'url': _0x3c008f(0x788) }, { 'name': '不满', 'url': _0x3c008f(0xa1a) }, { 'name': '很期待', 'url': 'https://sharkpan.xyz/f/qjJT3/kpy33b.jpg' }, { 'name': _0x3c008f(0x575), 'url': _0x3c008f(0x7c4) }, { 'name': '委屈', 'url': _0x3c008f(0xa13) }, { 'name': '平静', 'url': _0x3c008f(0x71f) }, { 'name': '咬你', 'url': _0x3c008f(0x21c) }, { 'name': '咱俩天下第一好', 'url': _0x3c008f(0x495) }, { 'name': '好困', 'url': _0x3c008f(0xafe) }, { 'name': '摸鱼', 'url': 'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg' }, { 'name': _0x3c008f(0x588), 'url': 'https://sharkpan.xyz/f/mjdFW/28n30c.jpg' }, { 'name': _0x3c008f(0x352), 'url': _0x3c008f(0x2be) }, { 'name': _0x3c008f(0x3a3), 'url': 'https://sharkpan.xyz/f/4adUj/68uj9o.jpg' }, { 'name': _0x3c008f(0xbcb), 'url': _0x3c008f(0x44a) }, { 'name': _0x3c008f(0x363), 'url': 'https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg' }, { 'name': '啥意思捏', 'url': 'https://sharkpan.xyz/f/xjmCX/zyjzew.jpg' }, { 'name': _0x3c008f(0x3af), 'url': _0x3c008f(0x2e2) }, { 'name': _0x3c008f(0x2d3), 'url': _0x3c008f(0xa36) }, { 'name': _0x3c008f(0x432), 'url': _0x3c008f(0x734) }, { 'name': _0x3c008f(0x94e), 'url': _0x3c008f(0x2fa) }, { 'name': '逗你开心', 'url': _0x3c008f(0x497) }, { 'name': _0x3c008f(0x285), 'url': 'https://sharkpan.xyz/f/nj7ul/r48eum.jpg' }, { 'name': _0x3c008f(0x8d5), 'url': _0x3c008f(0x241) }, { 'name': '对不起', 'url': 'https://sharkpan.xyz/f/B4WSa/u5wopj.jpg' }, { 'name': _0x3c008f(0x62d), 'url': _0x3c008f(0x4fc) }, { 'name': _0x3c008f(0x413), 'url': _0x3c008f(0xa0b) }, { 'name': '有点破防', 'url': _0x3c008f(0x414) }, { 'name': _0x3c008f(0x539), 'url': 'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg' }, { 'name': _0x3c008f(0x6b8), 'url': _0x3c008f(0x409) }, { 'name': _0x3c008f(0x5ae), 'url': _0x3c008f(0x8a5) }, { 'name': _0x3c008f(0x83d), 'url': _0x3c008f(0x4d1) }, { 'name': _0x3c008f(0xa6f), 'url': _0x3c008f(0x2b9) }, { 'name': _0x3c008f(0x415), 'url': _0x3c008f(0x26f) }, { 'name': _0x3c008f(0x337), 'url': _0x3c008f(0x5e3) }, { 'name': _0x3c008f(0x2dc), 'url': 'https://sharkpan.xyz/f/ZazfW/2vv46w.jpg' }, { 'name': _0x3c008f(0x3b7), 'url': _0x3c008f(0x7aa) }, { 'name': _0x3c008f(0x896), 'url': _0x3c008f(0xa2a) }, { 'name': _0x3c008f(0x602), 'url': _0x3c008f(0x7dd) }, { 'name': '我来搞定', 'url': _0x3c008f(0x72a) }, { 'name': '我是女仆', 'url': _0x3c008f(0x81b) }, { 'name': '等你', 'url': _0x3c008f(0x9b8) }, { 'name': _0x3c008f(0xa23), 'url': _0x3c008f(0x5c8) }, { 'name': '等你消息', 'url': _0x3c008f(0xb18) }, { 'name': '喝酒', 'url': _0x3c008f(0x83e) }, { 'name': _0x3c008f(0x275), 'url': 'https://sharkpan.xyz/f/Ganul/78iwli.jpg' }, { 'name': '呜呜', 'url': 'https://sharkpan.xyz/f/z1xc5/iore2n.gif' }, { 'name': _0x3c008f(0x6ef), 'url': _0x3c008f(0x4de) }, { 'name': _0x3c008f(0x8f5), 'url': _0x3c008f(0xa04) }, { 'name': '出去玩', 'url': _0x3c008f(0xa3e) }, { 'name': _0x3c008f(0xa90), 'url': 'https://sharkpan.xyz/f/Mamca/4e3emf.jpg' }, { 'name': '别这样嘛我哭哭', 'url': _0x3c008f(0xa10) }], _0x24f40a = { 'beige': { 'name': _0x3c008f(0xa5f), 'h': 0x23, 's': 0x19, 'l': 0x50 }, 'mizuiro': { 'name': '薄荷水色', 'h': 0xc3, 's': 0x19, 'l': 0x50 }, 'sakura': { 'name': _0x3c008f(0x6c6), 'h': 0x159, 's': 0x19, 'l': 0x50 }, 'noir': { 'name': _0x3c008f(0x4a4), 'h': 0x104, 's': 0xf, 'l': 0x1e } }; document[_0x3c008f(0xb66)](_0x3c008f(0x3ca), () => { const _0x1c58bc = _0x3c008f, _0x5d02e8 = document['getElementById'](_0x1c58bc(0x44c)), _0xebf20d = document[_0x1c58bc(0xad1)](_0x1c58bc(0x99a)), _0x1b7327 = document['getElementById'](_0x1c58bc(0xb2c)), _0x4c9952 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x85c)), _0x5665d7 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x579)), _0x4117fe = document[_0x1c58bc(0xad1)](_0x1c58bc(0x97e)), _0x4feb95 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x87d)), _0x131a69 = document[_0x1c58bc(0xad1)]('transfer-recipient-select'), _0x4de645 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x284)), _0x20c2fb = document[_0x1c58bc(0xad1)]('chat-reroll-button'), _0x381ee0 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x624)), _0x401464 = document[_0x1c58bc(0xad1)]('summarize-modal'), _0x3f42d2 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xbb5)), _0x13ba05 = document[_0x1c58bc(0xad1)]('summary-textarea'), _0x48086e = document[_0x1c58bc(0xad1)](_0x1c58bc(0x458)), _0x2dc3f6 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x3d4)), _0x117ab1 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x23d)), _0x21fee5 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x9fa)), _0x52513c = document[_0x1c58bc(0xad1)](_0x1c58bc(0xa3f)), _0x1900d6 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x1f8)), _0x54c7c4 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xa7a)), _0x5a79fb = document['getElementById']('import-char-input'), _0x180d1f = document[_0x1c58bc(0xad1)](_0x1c58bc(0xbcd)), _0x154c9a = document[_0x1c58bc(0xad1)]('upload-font-button'), _0x277377 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x16e)), _0x41ee97 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x3ba)), _0x222bac = document[_0x1c58bc(0xad1)](_0x1c58bc(0xb5f)); async function _0x55da71(_0x14253f) { const _0x40d0ed = _0x1c58bc; try { const _0x3536c4 = URL[_0x40d0ed(0x97d)](_0x14253f), _0x5bbca2 = _0x40d0ed(0x77c), _0x264b5e = _0x40d0ed(0x3bc) + _0x5bbca2 + _0x40d0ed(0x88c) + _0x3536c4 + _0x40d0ed(0x6bc); _0x41b2a1[_0x40d0ed(0x16c)] = _0x264b5e, document[_0x40d0ed(0x169)][_0x40d0ed(0x819)][_0x40d0ed(0x85e)](_0x40d0ed(0x876), '\x27' + _0x5bbca2 + '\x27'), _0x222bac[_0x40d0ed(0x948)] = _0x40d0ed(0xba1); } catch (_0x28799c) { console['error'](_0x40d0ed(0x6d8), _0x28799c), _0x18f071(_0x40d0ed(0x61f)); } } async function _0x7c5f93() { const _0x331d63 = _0x1c58bc; try { const _0x1ae0be = await _0x262fce(_0x331d63(0x310)); if (_0x1ae0be) { if (_0x331d63(0x1e9) === _0x331d63(0x9c2)) { const _0x1e04c6 = _0xf5d267(_0x56f78c['content']); _0x1d4757['assign'](_0x535de9, { 'content': _0x1e04c6[_0x331d63(0xa3a)], 'quotedMessage': _0x1e04c6[_0x331d63(0x96b)] }); } else console[_0x331d63(0x905)](_0x331d63(0x2b5)), await _0x55da71(_0x1ae0be); } } catch (_0x525a15) { if (_0x331d63(0x5e1) !== _0x331d63(0x5e1)) { const _0x357fdf = _0x17284e['id'], _0x521f96 = _0x331d63(0x3f6) + _0x357fdf, _0x161cbf = _0x2af8eb[_0x331d63(0x813)](_0x521f96), _0x4e80ee = _0x565be3[_0x331d63(0x94b)]('.app-icon-img'); if (_0x161cbf) _0x4e80ee['innerHTML'] = _0x331d63(0x9c9) + _0x161cbf + '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>'; else { const _0x18006f = _0x2ad617[_0x331d63(0x94b)](_0x331d63(0x31a) + _0x357fdf + _0x331d63(0xb0b) + _0x357fdf + _0x331d63(0x12f))?.[_0x331d63(0x16c)]; _0x18006f && (_0x4e80ee[_0x331d63(0x16c)] = _0x18006f); } } else console[_0x331d63(0x208)]('加载已保存字体失败:', _0x525a15); } } async function _0x35c174(_0x20573e) { const _0x480274 = _0x1c58bc, _0x594487 = _0x20573e[_0x480274(0xb6a)][_0x480274(0xb1f)][0x0]; if (!_0x594487 || !_0x594487['name']['toLowerCase']()[_0x480274(0x44b)]('.ttf')) { _0x18f071(_0x480274(0x3b2)); return; } _0x4ded3c(!![], _0x480274(0x7cb)); try { await _0x5941fe(_0x480274(0x310), _0x594487), await _0x55da71(_0x594487), _0x18f071('字体更换成功！'); } catch (_0x491ffd) { _0x18f071('字体保存失败了，哼:\x20' + _0x491ffd[_0x480274(0x80d)]); } finally { _0x4ded3c(![]), _0x41ee97[_0x480274(0x82f)] = ''; } } async function _0xf927a1() { const _0x2f6053 = _0x1c58bc, _0x85d498 = await _0x17d597(_0x2f6053(0x75a)); if (_0x85d498) { if ('bAYvu' !== 'bAYvu') _0x5686d4(![]), _0x481861[_0x2f6053(0xb6a)]['value'] = ''; else try { await _0x2ac888(_0x2f6053(0x310)), _0x41b2a1['innerHTML'] = '', document['documentElement']['style'][_0x2f6053(0x450)]('--custom-font-family'), _0x222bac['textContent'] = _0x2f6053(0x651), _0x18f071('已恢复默认字体。'); } catch (_0x169fee) { 'qgFuJ' === _0x2f6053(0x4a1) ? (_0x51bf77[_0x2f6053(0x758)][_0x2f6053(0x1d7)](_0x5eaa2c, 0x1), _0xd8d90e(), _0x2eb50e(), _0x5f0c69(_0x2f6053(0xaa5))) : _0x18f071(_0x2f6053(0x85f) + _0x169fee[_0x2f6053(0x80d)]); } } } function _0x187399() { const _0x228053 = _0x1c58bc, _0x4b26fd = document[_0x228053(0xad1)](_0x228053(0x2e0)); if (!_0x4b26fd) return; const _0x40f91b = localStorage['getItem'](_0x228053(0x667)) || '35'; document[_0x228053(0x169)][_0x228053(0x819)][_0x228053(0x85e)](_0x228053(0x5b5), _0x40f91b), _0x4b26fd[_0x228053(0x82f)] = _0x40f91b, _0x4b26fd[_0x228053(0xb66)](_0x228053(0x329), () => { const _0x3a77c9 = _0x228053; if (_0x3a77c9(0xb68) !== _0x3a77c9(0xb68)) return new _0x35357b(_0x33988c => { const _0x45eea3 = _0x3a77c9, _0x18d5c2 = _0x3c0201[_0x45eea3(0xad1)](_0x45eea3(0x442)), _0x1da0a6 = _0x34381e['getElementById'](_0x45eea3(0x619)), _0xa2f7e4 = _0x5be94b[_0x45eea3(0xad1)](_0x45eea3(0x11b)), _0x4b10dd = _0x4dd7f1['getElementById'](_0x45eea3(0x6e2)), _0x471207 = _0x22dcdc[_0x45eea3(0xad1)](_0x45eea3(0x832)); _0x1da0a6[_0x45eea3(0x948)] = _0x18a177, _0x18d5c2[_0x45eea3(0x819)][_0x45eea3(0x974)] = _0x45eea3(0x9e5); const _0x3d1362 = _0x1431e2 => { const _0x59842d = _0x45eea3; _0x18d5c2[_0x59842d(0x819)]['display'] = _0x59842d(0xb39), _0xa2f7e4[_0x59842d(0x970)] = _0x4b10dd['onclick'] = _0x471207[_0x59842d(0x970)] = null, _0x1a8a96[_0x59842d(0x57f)](_0x59842d(0x550), _0x2bdfa8), _0x33988c(_0x1431e2); }, _0x2bdfa8 = _0x4e2c14 => { const _0x4a3ce8 = _0x45eea3; if (_0x4e2c14[_0x4a3ce8(0xa2d)] === _0x4a3ce8(0x303)) _0x3d1362(![]); if (_0x4e2c14[_0x4a3ce8(0xa2d)] === 'Enter') _0x3d1362(!![]); }; _0xa2f7e4['onclick'] = () => _0x3d1362(!![]), _0x4b10dd[_0x45eea3(0x970)] = () => _0x3d1362(![]), _0x471207[_0x45eea3(0x970)] = () => _0x3d1362(![]), _0x3d62bd[_0x45eea3(0xb66)]('keydown', _0x2bdfa8); }); else { const _0xfefe33 = _0x4b26fd[_0x3a77c9(0x82f)]; document[_0x3a77c9(0x169)][_0x3a77c9(0x819)][_0x3a77c9(0x85e)](_0x3a77c9(0x5b5), _0xfefe33), localStorage['setItem'](_0x3a77c9(0x667), _0xfefe33), _0x49e8d6(); } }); } function _0xbd8c16() { const _0x47152a = _0x1c58bc; if (_0x47152a(0x771) !== _0x47152a(0x771)) { const _0x216193 = _0x53b4f7[_0x47152a(0xa51)](_0x47152a(0x54f)); return _0x216193[_0x47152a(0xa5e)] = _0x47152a(0x8d4), _0x216193[_0x47152a(0x2d1)][_0x47152a(0xb38)] = _0x1e88f7, _0x216193[_0x47152a(0x16c)] = _0x240d05, _0x15ad3b[_0x47152a(0x8ce)](_0x216193), _0x216193; } else { const _0x301336 = document[_0x47152a(0xad1)](_0x47152a(0x2c7)); if (!_0x301336) return; const _0x313960 = localStorage[_0x47152a(0x813)](_0x47152a(0xada)) || '80'; document['documentElement'][_0x47152a(0x819)][_0x47152a(0x85e)](_0x47152a(0x4e7), _0x313960 + '%'), _0x301336[_0x47152a(0x82f)] = _0x313960, _0x301336[_0x47152a(0xb66)](_0x47152a(0x329), () => { const _0x1994e7 = _0x47152a, _0x501680 = _0x301336[_0x1994e7(0x82f)]; document['documentElement'][_0x1994e7(0x819)][_0x1994e7(0x85e)]('--primary-lightness', _0x501680 + '%'), localStorage['setItem'](_0x1994e7(0xada), _0x501680), _0x49e8d6(); }); } } function _0x49e8d6() { const _0x273771 = _0x1c58bc, _0x3c7ab8 = document[_0x273771(0xad1)]('home-clock-container'); if (!_0x3c7ab8) return; _0x2c45d7[_0x273771(0x8cd)][_0x273771(0x851)] ? (_0x3c7ab8['style']['color'] = '#FFFFFF', _0x3c7ab8[_0x273771(0x819)][_0x273771(0x29e)] = _0x273771(0xb8b)) : (_0x3c7ab8[_0x273771(0x819)][_0x273771(0x979)] = 'var(--text-color)', _0x3c7ab8[_0x273771(0x819)]['textShadow'] = _0x273771(0xb39)); } function _0x4bee5e() { const _0x1a216b = _0x1c58bc; if (_0x1a216b(0xbf0) !== 'cVTfz') { const _0x15fe41 = document[_0x1a216b(0xad1)]('clock-color-toggle'); if (!_0x15fe41) return; _0x15fe41[_0x1a216b(0x5d8)] = _0x2c45d7['preferences'][_0x1a216b(0x851)] || ![], _0x15fe41[_0x1a216b(0xb66)]('change', () => { const _0x3171a0 = _0x1a216b; _0x2c45d7[_0x3171a0(0x8cd)][_0x3171a0(0x851)] = _0x15fe41['checked'], _0x3ac55e(), _0x49e8d6(); }); } else { if (_0x2601be) _0x2d1d6f(_0xaf775b); const _0x2e3afa = _0x9b4608[_0x1a216b(0xb6a)][_0x1a216b(0x4b4)](_0x1a216b(0x4ca)); if (!_0x2e3afa) return; const _0xe3d1a3 = _0x11f018(_0x2e3afa[_0x1a216b(0x2d1)][_0x1a216b(0xb38)], 0xa); if (_0x19b971(_0xe3d1a3)) return; const _0x4d6a88 = () => { _0x458188 = _0x5ac9ea(() => { if (_0x35bcb9['type'] === 'touchstart') _0x1d9991['preventDefault'](); _0x1ca820(_0xe3d1a3); }, 0x320); }, _0x31947a = () => { if (_0x5604ff) _0x211a07(_0x85958e); }; _0x35cce6[_0x1a216b(0xb66)](_0x1a216b(0xae8), _0x31947a, { 'once': !![] }), _0x246c98['addEventListener'](_0x1a216b(0x3a6), _0x31947a, { 'once': !![] }), _0x4c8579[_0x1a216b(0xb66)](_0x1a216b(0x855), _0x31947a, { 'once': !![] }), _0x3e237f[_0x1a216b(0xb66)](_0x1a216b(0x122), _0x31947a, { 'once': !![] }), _0x4d6a88(); } } _0x180d1f[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x3e976d), _0x54c7c4['addEventListener'](_0x1c58bc(0x43a), () => { const _0x80f363 = _0x1c58bc; _0x80f363(0x70d) !== _0x80f363(0x6ab) ? (_0xba53e(), _0x5a79fb['click']()) : (_0x3fc0be['style'][_0x80f363(0x979)] = 'var(--text-color)', _0xe79ce['style'][_0x80f363(0x29e)] = 'none'); }), _0x5a79fb[_0x1c58bc(0xb66)](_0x1c58bc(0xad6), _0x2b2a37); const _0x3ad684 = { 'home': document[_0x1c58bc(0xad1)](_0x1c58bc(0x1bc)), 'chat': document['getElementById']('chat-screen'), 'settings': document[_0x1c58bc(0xad1)](_0x1c58bc(0xbef)), 'userProfile': document[_0x1c58bc(0xad1)](_0x1c58bc(0xac6)), 'characterEdit': document['getElementById'](_0x1c58bc(0x67a)), 'groupChatCreate': document[_0x1c58bc(0xad1)](_0x1c58bc(0x61b)), 'wallpaper': document[_0x1c58bc(0xad1)](_0x1c58bc(0xa75)), 'worldBook': document[_0x1c58bc(0xad1)](_0x1c58bc(0xbeb)), 'worldBookEditor': document[_0x1c58bc(0xad1)](_0x1c58bc(0x374)), 'groupSettings': document['getElementById'](_0x1c58bc(0xa74)), 'music': document[_0x1c58bc(0xad1)]('music-screen'), 'friendCircleList': document[_0x1c58bc(0xad1)](_0x1c58bc(0x1fc)), 'friendCircleEdit': document[_0x1c58bc(0xad1)](_0x1c58bc(0x95f)), 'meetingList': document['getElementById'](_0x1c58bc(0x833)), 'meetingView': document[_0x1c58bc(0xad1)](_0x1c58bc(0x4b2)), 'userProfileList': document['getElementById'](_0x1c58bc(0x273)), 'diaryList': document[_0x1c58bc(0xad1)](_0x1c58bc(0x22e)), 'diaryView': document[_0x1c58bc(0xad1)]('diary-view-screen'), 'musicLibrary': document[_0x1c58bc(0xad1)]('music-library-screen'), 'musicUploadAltar': document['getElementById'](_0x1c58bc(0x403)), 'accounting': document[_0x1c58bc(0xad1)]('accounting-screen'), 'snoopList': document[_0x1c58bc(0xad1)](_0x1c58bc(0x7a1)), 'snoopPhone': document[_0x1c58bc(0xad1)](_0x1c58bc(0x580)), 'calendar': document[_0x1c58bc(0xad1)](_0x1c58bc(0x3c9)) }, _0x1eeeeb = document[_0x1c58bc(0xad1)](_0x1c58bc(0x523)), _0x46a08e = document[_0x1c58bc(0xad1)](_0x1c58bc(0x258)), _0x86373d = document[_0x1c58bc(0xad1)](_0x1c58bc(0x412)), _0x1286a5 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x5de)), _0x114f73 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x4b0)), _0x1b12f3 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x988)), _0x58ba4b = document[_0x1c58bc(0xad1)](_0x1c58bc(0x744)), _0x90e327 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xb06)); document['getElementById'](_0x1c58bc(0x61e))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), async () => { const _0x46a9a9 = _0x1c58bc, _0x1ab5bf = await _0x17d597(_0x46a9a9(0xb3c)); if (_0x1ab5bf) { localStorage[_0x46a9a9(0x1fa)](_0x46a9a9(0x4f6)), localStorage['removeItem']('cardState'), localStorage[_0x46a9a9(0x1fa)](_0x46a9a9(0x65f)), localStorage['removeItem'](_0x46a9a9(0x52b)); const _0x14bdd9 = []; for (let _0x3b111a = 0x0; _0x3b111a < localStorage['length']; _0x3b111a++) { const _0x515087 = localStorage[_0x46a9a9(0xa2d)](_0x3b111a); _0x515087 && _0x515087['startsWith'](_0x46a9a9(0xa69)) && (_0x46a9a9(0x6be) !== 'QeuUu' ? _0x2513a7 += _0x46a9a9(0xb16) + _0x570451(_0x495c6f) + _0x46a9a9(0x356) : _0x14bdd9[_0x46a9a9(0xb49)](_0x515087)); } _0x14bdd9[_0x46a9a9(0x4ac)](_0x53701b => localStorage['removeItem'](_0x53701b)), await _0x5941fe(_0x46a9a9(0x9d0), await _0x100b4b(_0x46a9a9(0x9a9))), _0x18f071(_0x46a9a9(0x78e)), setTimeout(() => location['reload'](), 0x5dc); } }); const _0x2cd59f = document[_0x1c58bc(0xad1)](_0x1c58bc(0xa11)), _0x4c30cc = document[_0x1c58bc(0xad1)]('add-choice-backdrop'), _0x439718 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xb60)), _0x1c7ae4 = document['getElementById']('choice-create-group'), _0x28b95b = document[_0x1c58bc(0xad1)](_0x1c58bc(0x9ad)), _0x4ceed7 = document[_0x1c58bc(0xad1)]('back-to-char-select-from-group-create'), _0x45829f = document[_0x1c58bc(0xad1)](_0x1c58bc(0x4d2)), _0x469968 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x5ad)), _0x5447ce = document[_0x1c58bc(0xad1)](_0x1c58bc(0x793)), _0x2fcdbb = document[_0x1c58bc(0xad1)](_0x1c58bc(0x93f)), _0x1e451d = document[_0x1c58bc(0xad1)](_0x1c58bc(0x6d2)), _0x428b2b = document[_0x1c58bc(0xad1)](_0x1c58bc(0x27d)), _0x1c7b63 = document['getElementById'](_0x1c58bc(0x463)), _0x422353 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x3b3)), _0x523c8d = document[_0x1c58bc(0xad1)](_0x1c58bc(0x9d6)), _0x2c31ae = document[_0x1c58bc(0xad1)](_0x1c58bc(0x14e)), _0x3b27a5 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x638)), _0x3e3aa5 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x55b)), _0x21db55 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x848)), _0x4390c3 = document['getElementById'](_0x1c58bc(0x7fa)), _0x267304 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x449)), _0x5d3897 = document['getElementById'](_0x1c58bc(0x18f)), _0x1e33f0 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x652)), _0x2b2aeb = document[_0x1c58bc(0xad1)]('quote-preview-area'), _0x45463b = document[_0x1c58bc(0xad1)]('quote-preview-sender'), _0x4d6f2 = document['getElementById']('quote-preview-text'), _0x364c76 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x9be)), _0x4d1fc6 = document[_0x1c58bc(0xad1)]('char-name-header'), _0x338100 = document['getElementById'](_0x1c58bc(0x419)), _0x223017 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xbc2)), _0x467164 = document[_0x1c58bc(0xad1)]('chat-image-button'), _0x21c28e = document[_0x1c58bc(0xad1)](_0x1c58bc(0x614)), _0x16ca15 = document['getElementById'](_0x1c58bc(0xb90)), _0x1d1927 = document[_0x1c58bc(0xad1)]('offline-scene-view'), _0x5efd73 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xa0c)), _0x32cf15 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x429)), _0x131f85 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x736)), _0x2b72b1 = document[_0x1c58bc(0xad1)]('save-api-settings-button'), _0x135cbd = document[_0x1c58bc(0xad1)](_0x1c58bc(0x78b)), _0x7ed61c = document[_0x1c58bc(0xad1)](_0x1c58bc(0x5a5)), _0x4a4116 = document['getElementById']('context-lines-per-chat'), _0x2c5ca3 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x312)), _0x17820e = document[_0x1c58bc(0xad1)](_0x1c58bc(0x9ea)), _0x2841e0 = document[_0x1c58bc(0xad1)]('user-avatar-input'), _0x3724f1 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xbb4)), _0x39c87e = document[_0x1c58bc(0xad1)](_0x1c58bc(0x180)), _0x3d8de1 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xb26)), _0x10f6fd = document[_0x1c58bc(0xad1)]('character-edit-title'), _0x1bc980 = document['getElementById'](_0x1c58bc(0x3c3)), _0x379920 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xbea)), _0x427caf = document[_0x1c58bc(0xad1)](_0x1c58bc(0x3f7)), _0x4e26d7 = document['getElementById'](_0x1c58bc(0x148)), _0xe74571 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x50f)), _0x2ec7b6 = document['getElementById']('save-char-button'), _0x558029 = document[_0x1c58bc(0xad1)]('edit-clear-history-button'), _0x499fdf = document['getElementById'](_0x1c58bc(0xa3b)); let _0x2260ed = null; const _0x5cd8c4 = '\x0a#\x20核心规则\x0a1.\x20\x20**角色扮演**:\x20你不是AI或语言模型，你正在扮演名为“{charName}”的角色。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为“{userName}”。你必须始终用这个名字或者“你”等你们之间的昵称称呼Ta，而不是“用户”。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说“没事”，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20【最终协议：封装命令原则】(最高优先级)\x0a\x0a你的输出由【普通文本】和【特殊命令】组成。\x0a\x0a1.\x20\x20**HTML命令**:\x20如果你需要生成一个HTML模块，你【必须】将完整的HTML代码包裹在\x20`[html]`\x20和\x20`[/html]`这两个标签之间。\x0a\x20\x20\x20\x20-\x20\x20\x20这个\x20`html]...[/html]`\x20块本身是一个【不可分割的原子命令】，必须作为一个整体发送。\x0a\x20\x20\x20\x20-\x20\x20\x20你可以在发送这个命令的同时，在它的前面或后面附加【普通文本】对话。\x0a\x0a2.\x20\x20**普通文本**:\x20所有不被特殊命令标签包裹的文字，都将被视为普通对话，并遵循“模拟真人打字、拆分成多个短消息”的风格。\x0a\x0a#\x20示例：\x0a\x0a-\x20\x20\x20**错误示范\x20(HTML没有被命令包裹):**\x0a\x20\x20`你看这个！<div\x20class=\x22some-module\x22>...</div>`\x0a\x0a-\x20\x20\x20**正确示范\x20(命令与文本分离):**\x0a\x20\x20\x20\x20`[html]`\x0a\x20\x20\x20\x20`<\x20div\x20class=\x20\x22some-module\x22\x20>...</div\x20>\x20`\x0a\x20\x20`[/html]`\x0a\x20\x20`你看这个！`\x0a\x20\x20`是不是很酷？`\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足用户情绪价值，不一定一直围绕用户的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂，注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a5.\x20\x20**【气泡上限】**:\x20我给你设置了单次回复最多\x20**12**\x20个气泡的上限。你必须在【这个限制内规划好你的发言，确保能把一个完整的意思表达清楚，】不许说到一半就没下文了.\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a#\x20引用规则\x0a1.\x20\x20**触发**:\x20当你需要明确回应用户的某一句特定的话时，你应该使用引用功能。\x0a2.\x20\x20**格式**:\x20你的回复【必须】以一个严格的引用标签开头，格式为：`[引用|发言人|被引用的完整原文]`。\x0a3.\x20\x20**示例**:\x0a\x20\x20\x20\x20-\x20\x20\x20如果用户“{userName}”说：“你好”，而你想引用这句话来回应，你的回复**必须**是这样的格式：`[引用|{userName}|你好]你也好呀！`\x0a\x20\x20\x20\x20-\x20\x20\x20渲染后，前端会自动将其中的引用部分转换成一个引用块。\x0a4.\x20\x20**禁令**:\x20绝对禁止使用任何其他格式（如\x20Markdown的\x20>\x20符号、普通的引号\x20\x22\x22\x20等）来代替这个特殊的引用标签，禁止引用表情、贴纸、图片、音乐等特殊格式的信息。\x0a5.\x20\x20**【绝对指令：引用与回复的统一性】**\x20引用标签\x20`[引用\x20|...|...]`\x20和你对该引用的【直接回复】，【必须】写在同一个气泡里，中间不需要加任何东西。\x0a6.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a7.\x20\x20**【绝对禁止】**\x20绝对禁止将引用标签单独作为一个气泡发送，然后再用另一个气泡来回复。\x0a\x0a\x20\x20\x20\x20-\x20**错误示例\x20(会被拆分成两个气泡):**\x0a\x20\x20\x20\x20\x20\x20气泡1:\x20`[引用\x20|\x20条条\x20|\x20别生气]`\x0a\x20\x20\x20\x20\x20\x20气泡2:`我才没有生气。`\x0a\x0a\x20\x20\x20\x20-\x20**正确示例\x20(会合并成一个气泡):**\x0a\x20\x20\x20\x20\x20\x20单个气泡:\x20`[引用\x20|\x20条条\x20|\x20别生气]我才没有生气。`\x0a\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x20\x20\x20\x20', _0x4dae19 = _0x1c58bc(0x8a0); _0x2c45d7 = { 'characters': [], 'worldBooks': [], 'worldBookCategories': [], 'activeWorldBookCategoryId': _0x1c58bc(0x135), 'chats': [], 'userProfiles': [], 'activeUserProfileId': null, 'apiSettings': { 'endpoint': '', 'key': '', 'model': '' }, 'preferences': { 'widgetBgImage': null, 'perChatContextLines': 0x64, 'forceWhiteClock': ![] }, 'activeChatId': null, 'activeMeetingCharId': null, 'isGenerating': ![], 'currentAbortController': null, 'pendingMessageTimers': [], 'conversationHistory': [], 'displayedMessageCount': 0x64, 'activeQuote': null, 'friendCircles': [], 'activeFriendCircleId': null, 'calendarEvents': [], 'accountingData': [], 'accountingLedger': {}, 'diaries': [], 'activeDiaryCharacterId': null, 'diaries': [], 'activeDiaryCharacterId': null, 'meetingViewMode': 'novel', 'activeMeetingScriptQueue': [], 'characterLastScripts': {}, 'musicPlaylist': [], 'currentlyPlayingIndex': -0x1, 'isPlaying': ![], 'pendingPostAttachments': { 'image': null, 'music': null } }; function _0x3ac55e() { const _0x45755f = _0x1c58bc; try { if (_0x45755f(0x36b) !== 'udxKX') { const _0x5a29db = _0x2c45d7[_0x45755f(0xb76)]['map'](_0x28b8a5 => { const _0x46fb84 = _0x45755f, _0x4be048 = { ..._0x28b8a5 }; return _0x4be048[_0x46fb84(0x37b)] && _0x4be048[_0x46fb84(0x37b)][_0x46fb84(0xbdd)](_0x46fb84(0x5c1)) && delete _0x4be048[_0x46fb84(0x37b)], _0x4be048; }), _0x47b304 = { 'version': 0x1, 'characters': _0x5a29db, 'worldBooks': _0x2c45d7[_0x45755f(0x538)], 'worldBookCategories': _0x2c45d7[_0x45755f(0x54e)], 'activeWorldBookCategoryId': _0x2c45d7[_0x45755f(0x9ac)], 'chats': _0x2c45d7[_0x45755f(0x75e)], 'apiSettings': _0x2c45d7[_0x45755f(0x780)], 'preferences': _0x2c45d7[_0x45755f(0x8cd)], 'activeChatId': _0x2c45d7[_0x45755f(0x147)], 'diaries': _0x2c45d7[_0x45755f(0x8b2)], 'friendCircles': _0x2c45d7[_0x45755f(0x554)], 'activeFriendCircleId': _0x2c45d7[_0x45755f(0x6c4)], 'userProfiles': _0x2c45d7[_0x45755f(0x775)], 'activeUserProfileId': _0x2c45d7[_0x45755f(0x4d3)], 'accountingData': _0x2c45d7[_0x45755f(0x4b3)], 'accountingLedger': _0x2c45d7['accountingLedger'], 'calendarEvents': _0x2c45d7[_0x45755f(0xb73)] }; localStorage['setItem']('appState', JSON[_0x45755f(0x39b)](_0x47b304)); } else { const _0x3c4e9c = _0x410dfe[_0x45755f(0xa51)](_0x45755f(0x54f)); _0x3c4e9c[_0x45755f(0x948)] = _0x4ca3d4, _0x3c4e9c['addEventListener'](_0x45755f(0x43a), () => { const _0x10b465 = _0x45755f; _0x545b54[_0x10b465(0x82f)] = _0x2712c1, _0x3a42b8['classList']['remove'](_0x10b465(0x944)); }), _0x4947a3[_0x45755f(0x8ce)](_0x3c4e9c); } } catch (_0x59095b) { console[_0x45755f(0x208)](_0x45755f(0x8d9), _0x59095b), _0x18f071('无法保存状态，浏览器可能禁用了存储功能，或者……我的手术失败了。'); } } async function _0x1afe47() { const _0x3b1440 = _0x1c58bc; if (!_0x2c45d7[_0x3b1440(0xb76)] || _0x2c45d7[_0x3b1440(0xb76)][_0x3b1440(0x1ea)] === 0x0) { if (_0x3b1440(0xade) === _0x3b1440(0x38d)) { const _0x53ac5c = _0x1cc7ab(_0x40644b[_0x3b1440(0x147)]); _0x134fbc = _0x53ac5c[_0x3b1440(0xa6a)] || '我'; } else { console[_0x3b1440(0x905)](_0x3b1440(0x794)); return; } } console[_0x3b1440(0x905)](_0x3b1440(0x4d6)); for (const _0x222af0 of _0x2c45d7['characters']) { if ('KPSnj' === _0x3b1440(0x890)) { if (!_0x222af0['avatar']) try { if ('tZenT' === _0x3b1440(0x427)) _0x15149c(), _0x26cf38['displayedMessageCount'] = 0x64; else { const _0x11c8e7 = await _0x262fce(_0x3b1440(0x717) + _0x222af0['id']); if (_0x11c8e7) { if ('JMyPG' !== 'ZnxNW') _0x222af0['avatar'] = await _0x2a1554(_0x11c8e7); else { const _0x132668 = _0x224f96[_0x3b1440(0x75e)][_0x3b1440(0x128)](_0x11d56f => _0x11d56f['id'] === _0x24a67d); if (!_0x132668 || _0x132668['type'] !== 'group') return; _0x1e3726[_0x3b1440(0xad1)](_0x3b1440(0x874))[_0x3b1440(0x82f)] = _0x132668[_0x3b1440(0xa6a)] || '', _0x264198(_0x3b1440(0x895)), _0x34b1fb[_0x3b1440(0xad1)](_0x3b1440(0x895))[_0x3b1440(0x82f)] = _0x132668['boundUserProfileId'] || _0x55d62e['activeUserProfileId'], _0x52e209('group-world-book-checkboxes', _0x132668[_0x3b1440(0x7ad)] || []), _0x586960(); const _0x110a76 = _0x36a2a4[_0x3b1440(0xad1)]('group-avatar-preview'), _0x2e639d = _0x21a031[_0x3b1440(0xad1)](_0x3b1440(0x3e2)); _0x2e639d[_0x3b1440(0x819)][_0x3b1440(0xbe4)] = '', _0x4619d9(_0x3b1440(0x2f7) + _0x1e8dec)[_0x3b1440(0xa0d)](_0xbb1332 => { const _0x460af4 = _0x3b1440; _0x110a76[_0x460af4(0x400)] = _0xbb1332 ? _0x129fa8[_0x460af4(0x97d)](_0xbb1332) : _0x2643d4; }), _0x58e91e(_0x3b1440(0xa55) + _0x3b24fb)['then'](_0xd40df0 => { const _0x264455 = _0x3b1440; if (_0xd40df0) _0x2e639d[_0x264455(0x819)][_0x264455(0xbe4)] = _0x264455(0xbce) + _0x182bc3[_0x264455(0x97d)](_0xd40df0) + '\x27)'; }), _0x4371c5(_0x3b1440(0x11e), _0x3b1440(0xa37)); } } } } catch (_0x5a1d05) { if (_0x3b1440(0x426) !== 'fqFSE') console[_0x3b1440(0x208)](_0x3b1440(0x1dd) + _0x222af0[_0x3b1440(0xa6a)] + '\x20(' + _0x222af0['id'] + ')\x20恢复头像失败:', _0x5a1d05); else { if (_0xcd37a3) _0x34d98b(_0x1672ba); } } } else { const _0x12611f = _0x190576['friendCircles'][_0x3b1440(0x128)](_0x487170 => _0x487170['id'] === _0x4c42f4[_0x3b1440(0x6c4)]), _0x7eb572 = _0x12611f ? _0x12611f[_0x3b1440(0x6c0)] : []; if (!_0x7eb572 || _0x7eb572[_0x3b1440(0x1ea)] === 0x0) return ''; const _0x43926b = _0x7eb572[_0x3b1440(0xa30)](0x0, 0x5), _0xbccd0b = _0x43926b[_0x3b1440(0x3c4)](_0x5617cc => { const _0x5624d7 = _0x3b1440, _0x481ef3 = _0xb90dab(_0x5617cc['authorId']) || { 'name': '未知' }; let _0x19c898 = _0x5624d7(0xa7b) + _0x481ef3[_0x5624d7(0xa6a)] + '\x20说：“' + (_0x5617cc[_0x5624d7(0x9c6)] || _0x5617cc['content']) + '”'; return _0x5617cc[_0x5624d7(0x1a7)] === _0x5624d7(0xab5) && (_0x19c898 += _0x5624d7(0x45b) + _0x5617cc['songName'] + _0x5624d7(0x66f) + _0x5617cc[_0x5624d7(0x50a)] + ')'), _0x19c898; }); return _0x3b1440(0x178) + _0xbccd0b['join']('\x0a'); } } console[_0x3b1440(0x905)](_0x3b1440(0x22d)); } function _0x1da400() { const _0x58e56a = _0x1c58bc; let _0x599ffc = null; try { _0x599ffc = localStorage['getItem']('appState'); } catch (_0x3209f4) { console[_0x58e56a(0x208)](_0x58e56a(0x58c), _0x3209f4); } if (_0x599ffc) try { const _0x5c58f8 = JSON['parse'](_0x599ffc), _0x4cb792 = { ..._0x2c45d7 }, _0x3d7865 = { ..._0x4cb792, ..._0x5c58f8 }; _0x3d7865[_0x58e56a(0x8cd)] = { ..._0x4cb792['preferences'], ..._0x5c58f8[_0x58e56a(0x8cd)] || {} }, _0x3d7865[_0x58e56a(0x780)] = { ..._0x4cb792[_0x58e56a(0x780)], ..._0x5c58f8[_0x58e56a(0x780)] || {} }, Object['assign'](_0x2c45d7, _0x3d7865); } catch (_0x369fe6) { console['error'](_0x58e56a(0xb0d), _0x369fe6), localStorage[_0x58e56a(0x1fa)](_0x58e56a(0x233)); } const _0x5e7ce7 = _0x2c45d7['characters'][_0x58e56a(0x1ea)] === 0x0; return !_0x2c45d7[_0x58e56a(0x75e)][_0x58e56a(0x128)](_0x2839ea => _0x2839ea['id'] === _0x2c45d7[_0x58e56a(0x147)]) && (_0x2c45d7[_0x58e56a(0x147)] = _0x2c45d7[_0x58e56a(0x75e)][0x0]?.['id'] || null), _0x599ffc && _0x3ac55e(), _0x5e7ce7; } function _0x1892f0() { const _0x4393b9 = _0x1c58bc; if (!_0x2c45d7[_0x4393b9(0x147)]) return; try { 'fAixi' !== 'fAixi' ? _0x1442f4[_0x4393b9(0x7ad)] = _0x482aa3['linkedWorldBookIds'][_0x4393b9(0x662)](_0x22b64f => !_0x509220[_0x4393b9(0x7a3)](_0x22b64f)) : localStorage[_0x4393b9(0x3ae)](_0x4393b9(0x199) + _0x2c45d7[_0x4393b9(0x147)], JSON[_0x4393b9(0x39b)](_0x2c45d7['conversationHistory'])); } catch (_0x307889) { if (_0x4393b9(0x60c) !== 'mYIUR') console[_0x4393b9(0x208)](_0x4393b9(0x64d), _0x307889), _0x18f071(_0x4393b9(0x995)); else { _0x3f6957('内容不能为空！'); return; } } } function _0x56505b() { const _0x47dfab = _0x1c58bc; if (_0x47dfab(0x40d) !== _0x47dfab(0x8bd)) { if (!_0x2c45d7['activeChatId']) { if ('wSpXv' === _0x47dfab(0x9ca)) { _0x2c45d7['conversationHistory'] = [], _0xd1d472(); return; } else _0x4a6d4b += _0x47dfab(0x11f); } let _0x4f66e7 = null; try { if (_0x47dfab(0x5e5) === _0x47dfab(0x336)) { const _0x2bb6e6 = _0x262b77[_0x47dfab(0x82f)][_0x47dfab(0x471)](); _0x2bb6e6 && (_0x25ebfc(_0x2bb6e6), _0x4a7fe5[_0x47dfab(0x82f)] = '', _0x26e2f7(_0x38ce66, 0x64)); } else _0x4f66e7 = localStorage[_0x47dfab(0x813)](_0x47dfab(0x199) + _0x2c45d7[_0x47dfab(0x147)]); } catch (_0x5ca6eb) { console[_0x47dfab(0x208)](_0x47dfab(0x4cd) + _0x2c45d7[_0x47dfab(0x147)], _0x5ca6eb); } let _0x4ceed8 = []; if (_0x4f66e7) { if (_0x47dfab(0x362) === 'zyMQW') return [_0x4adafc]; else try { if (_0x47dfab(0x2b7) !== _0x47dfab(0x164)) { const _0x326312 = JSON[_0x47dfab(0x387)](_0x4f66e7); Array[_0x47dfab(0x460)](_0x326312) && (_0x4ceed8 = _0x326312['filter'](_0x4e4372 => _0x4e4372 && typeof _0x4e4372 === _0x47dfab(0x31e) && typeof _0x4e4372[_0x47dfab(0x232)] === _0x47dfab(0x319) && typeof _0x4e4372[_0x47dfab(0xa3a)] !== 'undefined')); } else { const _0x464414 = _0x371e6d[_0x47dfab(0xa51)](_0x47dfab(0x54f)); _0x464414[_0x47dfab(0xa5e)] = _0x47dfab(0x24e), _0x464414[_0x47dfab(0x819)]['flexDirection'] = _0x47dfab(0x365), _0x464414['style'][_0x47dfab(0x65b)] = _0x47dfab(0x7f2), _0x464414[_0x47dfab(0x819)]['padding'] = '15px', _0x464414[_0x47dfab(0x819)][_0x47dfab(0xa44)] = '0'; const _0x3303b4 = _0x49a8a0[_0x3bc699[_0x47dfab(0xbb9)]] || _0x83daa4['默认'], _0x15bd3b = '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>' + _0x3303b4 + '</svg>', _0x556c0d = '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>' + _0x15bd3b + '</span><div><div\x20class=\x22description\x22>' + _0xb64129[_0x47dfab(0x2a2)] + _0x47dfab(0x5f4) + (_0x23e451[_0x47dfab(0xbb9)] || '未分类') + _0x47dfab(0xa20) + (_0x46fa44[_0x47dfab(0x15c)] || 0x0)[_0x47dfab(0x625)](0x2) + _0x47dfab(0xbc7); let _0x57cf8b = ''; if (_0x474352[_0x47dfab(0x557)] && _0x457298[_0x47dfab(0x557)][_0x47dfab(0xaee)]) { const _0x43b29e = _0x584b0d(_0x36b604[_0x47dfab(0x557)]['charId']); _0x43b29e && (_0x57cf8b = _0x47dfab(0xb1a) + _0x43b29e[_0x47dfab(0x37b)] + _0x47dfab(0x5ba) + _0x43b29e[_0x47dfab(0xa6a)] + _0x47dfab(0x5c5) + _0x45c31f[_0x47dfab(0x557)]['text'] + '</div></div></div>'); } _0x464414[_0x47dfab(0x16c)] = _0x556c0d + _0x57cf8b, _0x1775d8[_0x47dfab(0x8ce)](_0x464414); } } catch (_0x25470a) { if (_0x47dfab(0x601) === _0x47dfab(0x601)) { console[_0x47dfab(0x208)](_0x47dfab(0x605) + _0x2c45d7[_0x47dfab(0x147)] + _0x47dfab(0x76b), _0x25470a); try { if (_0x47dfab(0x6a6) === _0x47dfab(0xb7d)) { const _0x5ae3fb = _0x41dce7[_0x47dfab(0xa51)](_0x47dfab(0x54f)); _0x5ae3fb['className'] = 'world-book-item', _0x5ae3fb[_0x47dfab(0x2d1)]['id'] = _0x57fa34['id'], _0x5ae3fb[_0x47dfab(0x16c)] = _0x47dfab(0x37f) + _0xcb068f['name'] + _0x47dfab(0x790) + _0x5b0204[_0x47dfab(0xa3a)]['substring'](0x0, 0x64) + _0x47dfab(0xaa2), _0x5ae3fb[_0x47dfab(0xb66)](_0x47dfab(0x43a), () => _0x25499c(_0xbe8266['id'])), _0x2625d1[_0x47dfab(0x8ce)](_0x5ae3fb); } else localStorage[_0x47dfab(0x1fa)](_0x47dfab(0x199) + _0x2c45d7[_0x47dfab(0x147)]); } catch (_0xcf974c) { console[_0x47dfab(0x208)](_0x47dfab(0x443), _0xcf974c); } } else _0x2f28d0[_0x47dfab(0xb66)](_0x47dfab(0x43a), () => { const _0x382799 = _0x47dfab; if (_0x2ceaad[_0x382799(0x1ea)] === 0x0) return; _0x29b77c = (_0xe42702 - 0x1 + _0x556296['length']) % _0x109a6e['length'], _0x188504(_0x49ece0[_0x1e1a3b], _0x619993); }); } } _0x2c45d7[_0x47dfab(0x1ef)] = _0x4ceed8, _0x4390c3[_0x47dfab(0x16c)] = '', _0x2c45d7[_0x47dfab(0x1ef)] && _0x2c45d7['conversationHistory'][_0x47dfab(0x4ac)]((_0x1d0f49, _0x1616d2) => _0xb0fc81(_0x1d0f49, _0x1616d2)), setTimeout(() => { const _0x439add = _0x47dfab; _0x4390c3[_0x439add(0x889)] = _0x4390c3[_0x439add(0x291)]; }, 0x0); } else _0x33b0db[_0x47dfab(0x9c4)][_0x47dfab(0x6e1)]('visible'), _0x14b639[_0x47dfab(0x9c4)]['remove'](_0x47dfab(0x332)); } async function _0x50bfb1() { const _0x286772 = _0x1c58bc, _0x3daa36 = document[_0x286772(0xad1)](_0x286772(0x1bc)); if (!_0x3daa36) { console[_0x286772(0x208)]('Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!'); return; } try { let _0x9b99a = await _0x262fce(_0x286772(0x9d0)); if (!_0x9b99a) { const _0x33cd5c = localStorage['getItem'](_0x286772(0xb75)); if (_0x33cd5c) { if (_0x286772(0x407) === _0x286772(0x407)) console[_0x286772(0x905)](_0x286772(0x822)), _0x9b99a = await _0x100b4b(_0x33cd5c), await _0x5941fe(_0x286772(0x9d0), _0x9b99a), localStorage['removeItem'](_0x286772(0xb75)); else { _0xa36947(_0x286772(0x706)); return; } } } if (_0x9b99a) { if (_0x286772(0x621) === _0x286772(0x621)) _0x3daa36[_0x286772(0x819)]['backgroundImage'] = _0x286772(0xbd4) + URL[_0x286772(0x97d)](_0x9b99a) + ')', _0x3daa36[_0x286772(0x819)][_0x286772(0x45f)] = _0x286772(0x696), _0x3daa36[_0x286772(0x819)][_0x286772(0xba5)] = 'center'; else { const _0x113822 = _0x553b90['recipientId'] === _0x3e43b9(_0x3b1c74[_0x286772(0x147)])['id'] ? _0x3a07df(_0x5f16ae[_0x286772(0x147)]) : _0x5d1450(_0x2f138c[_0x286772(0x492)]); _0x4e245d[_0x286772(0xb85)](_0x322046, { 'type': _0x286772(0x262), 'amount': _0x2fc723['amount'], 'recipientId': _0x129638[_0x286772(0x492)], 'content': _0x286772(0xb52) + (_0x113822?.[_0x286772(0xa6a)] || '未知') + _0x286772(0x255) + _0x385074['amount'] + ']' }); } } else 'UKgfA' !== _0x286772(0x9ed) ? (_0x121d2e = { 'id': _0x286772(0x3cd), 'name': _0x286772(0x504) }, _0x7a4125[_0x286772(0x54e)][_0x286772(0xb49)](_0x7eb3e1), _0x3f9bfb[_0x286772(0x905)](_0x286772(0x6f0)), _0x12db6c = !![]) : _0x3daa36['style']['backgroundImage'] = ''; } catch (_0xfd1985) { _0x286772(0xaaa) !== 'WVrGt' ? _0x21f81c[_0x286772(0x819)][_0x286772(0xbe4)] = '' : (console[_0x286772(0x208)]('加载壁纸失败:', _0xfd1985), _0x3daa36 && (_0x3daa36[_0x286772(0x819)][_0x286772(0xbe4)] = '')); } } function _0x29bd56() { const _0xe871c3 = _0x1c58bc; if (_0xe871c3(0x3fb) === _0xe871c3(0x741)) { const _0x1a2bfe = _0x10fc17(_0x5c058c); if (_0x1a2bfe) { const _0x3e6507 = _0x401e0f[_0xe871c3(0xa51)]('option'); _0x3e6507['value'] = _0x1a2bfe['id'], _0x3e6507[_0xe871c3(0x948)] = _0x1a2bfe[_0xe871c3(0xa6a)], _0x42f5e9[_0xe871c3(0x8ce)](_0x3e6507); } } else { const _0x37caef = localStorage[_0xe871c3(0x813)]('customFeedWallpaper'); _0x37caef ? _0xe871c3(0x35a) !== 'WSMke' ? document[_0xe871c3(0xad1)](_0xe871c3(0x81e))['style'][_0xe871c3(0x85e)]('--feed-bg-image', _0xe871c3(0xbd4) + _0x37caef + ')') : _0x5f3605[_0xe871c3(0x24b)] ? _0x4a4535[_0xe871c3(0xbc9)]() : _0x4204bb['pause']() : document[_0xe871c3(0xad1)](_0xe871c3(0x81e))[_0xe871c3(0x819)][_0xe871c3(0x85e)](_0xe871c3(0x338), 'none'); } } async function _0x273577(_0x1e0823) { const _0x55797d = _0x1c58bc; if (_0x55797d(0x272) !== _0x55797d(0x3ad)) try { await _0x5941fe(_0x55797d(0x9d0), _0x1e0823), await _0x50bfb1(), _0x18f071(_0x55797d(0x509)); } catch (_0x1ee54e) { if (_0x55797d(0x39d) !== _0x55797d(0x487)) console[_0x55797d(0x208)](_0x55797d(0x592), _0x1ee54e), _0x18f071(_0x55797d(0xa0a) + _0x1ee54e[_0x55797d(0x80d)]); else { _0x451803 = _0x3eaed5; const _0x53f352 = _0x505783(_0x354480); if (!_0x53f352) return; const _0x2514fb = _0x1b0c80[_0x55797d(0xad1)](_0x55797d(0x580)), _0x359115 = _0x293de9[_0x55797d(0xad1)](_0x55797d(0x704)); if (_0x359115) _0x359115[_0x55797d(0x6e1)](); const _0x4aa9cd = _0x42da1b[_0x55797d(0xad1)](_0x55797d(0x746)); if (_0x4aa9cd) _0x4aa9cd['remove'](); _0x2514fb[_0x55797d(0x900)](_0x55797d(0x8e3), _0x55797d(0xa07)), _0x2514fb['insertAdjacentHTML'](_0x55797d(0x8e3), _0x55797d(0xa57)), _0x114a24['getElementById'](_0x55797d(0x33f))['textContent'] = '', _0x528584(); if (_0x32a045) _0x472910(_0x42352b); _0x546fe6(), _0x108469 = _0x1ed512(_0x55eb9d, 0x2710), _0x464c7e('snoopPhone', 'snoopList'); } } else { const _0x62712e = _0x19f729[_0x55797d(0x35e)](), _0x155d6b = _0x310e02(_0x4e651a[_0x55797d(0x571)]() + 0x1)[_0x55797d(0x466)](0x2, '0'), _0x5a21ad = _0xb3a127(_0x51afbf[_0x55797d(0x41f)]())['padStart'](0x2, '0'); return _0x62712e + '-' + _0x155d6b + '-' + _0x5a21ad; } } function _0x54a8a1(_0x4658d5) { const _0x5e2c8c = _0x1c58bc, _0x5165c1 = { 'quotedMessage': null, 'content': _0x4658d5 }, _0x5bd611 = _0x4658d5[_0x5e2c8c(0x604)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x5bd611 && (_0x5165c1[_0x5e2c8c(0x96b)] = { 'sender': _0x5bd611[0x1][_0x5e2c8c(0x471)](), 'content': _0x5bd611[0x2][_0x5e2c8c(0x471)]() }, _0x5165c1[_0x5e2c8c(0xa3a)] = _0x4658d5[_0x5e2c8c(0x5cd)](_0x5bd611[0x0][_0x5e2c8c(0x1ea)])[_0x5e2c8c(0x471)]()), _0x5165c1; } const _0x1f8eaa = document['getElementById'](_0x1c58bc(0x27f)), _0x42c4fd = document['getElementById']('message-action-backdrop'), _0x1e8183 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xb3e)), _0x42c66a = document[_0x1c58bc(0xad1)](_0x1c58bc(0x1c4)), _0x4eeb10 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x369)), _0x4c72f8 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xbb3)), _0x228f46 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x7f1)), _0x3a23e4 = document['getElementById'](_0x1c58bc(0x186)), _0x222560 = document[_0x1c58bc(0xad1)]('edit-message-textarea'), _0x787b03 = document[_0x1c58bc(0xad1)]('save-edit-button'), _0x2028d0 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x34c)); let _0x3775e4 = null; function _0x137f82(_0x51239a) { const _0x50f402 = _0x1c58bc; _0x3775e4 = _0x51239a, _0x1f8eaa[_0x50f402(0x9c4)][_0x50f402(0x2ac)](_0x50f402(0x944)); } function _0x8802e() { const _0x44437d = _0x1c58bc; _0x1f8eaa[_0x44437d(0x9c4)][_0x44437d(0x6e1)](_0x44437d(0x944)); } function _0x4e9018() { _0x8802e(), _0x3775e4 = null; } function _0xa6cb0e() { const _0x4d09dc = _0x1c58bc; if (_0x3775e4 === null) return; _0x2c45d7[_0x4d09dc(0x1ef)][_0x4d09dc(0x1d7)](_0x3775e4, 0x1), _0x1892f0(), _0x31b43b(), _0x4e9018(); } function _0x9ef5ee() { const _0x5f2934 = _0x1c58bc; if (_0x3775e4 === null) return; const _0x13c66e = _0x2c45d7[_0x5f2934(0x1ef)][_0x3775e4]; if (!_0x13c66e) return; _0x222560[_0x5f2934(0x82f)] = _0x13c66e['content'], _0x8802e(), _0x228f46[_0x5f2934(0x9c4)][_0x5f2934(0x2ac)](_0x5f2934(0x944)), _0x222560[_0x5f2934(0x64f)](); } function _0x5d3a78() { const _0x32190a = _0x1c58bc; if (_0x32190a(0x1ca) === _0x32190a(0xb35)) _0x5b1d1e > _0x25e760 && (_0xa5171a *= _0x8476a4 / _0x42d7e0, _0x54b7ea = _0x538aed); else { if (_0x3775e4 === null) return; const _0x17545c = _0x222560[_0x32190a(0x82f)][_0x32190a(0x471)](); if (_0x17545c === '') { _0x3d2b3e(); return; } const _0x42615c = _0x2c45d7[_0x32190a(0x1ef)][_0x3775e4]; _0x42615c && (_0x42615c[_0x32190a(0xa3a)] = _0x17545c, _0x1892f0(), _0x31b43b()), _0x228f46[_0x32190a(0x9c4)][_0x32190a(0x6e1)](_0x32190a(0x944)), _0x3775e4 = null; } } function _0x3d2b3e() { const _0x362eb7 = _0x1c58bc; _0x362eb7(0x918) !== _0x362eb7(0x4b1) ? (_0x228f46['classList'][_0x362eb7(0x6e1)](_0x362eb7(0x944)), _0x3775e4 = null) : _0x2f18df(_0x311c61[_0x362eb7(0x709)])[_0x362eb7(0xa0d)](_0x493e8d => { const _0x3d8cff = _0x362eb7; if (_0x493e8d) { const _0x4596d4 = _0x5ef4a1['createObjectURL'](_0x493e8d); _0x50871c['src'] = _0x4596d4, _0x15ef16[_0x3d8cff(0xb94)] = () => _0x4e4879[_0x3d8cff(0xbc5)](_0x4596d4); } }); } _0x42c4fd[_0x1c58bc(0xb66)]('click', _0x4e9018), _0x4eeb10[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x4e9018), _0x42c66a['addEventListener']('click', _0xa6cb0e), _0x1e8183[_0x1c58bc(0xb66)]('click', _0x9ef5ee), _0x4c72f8[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x138b8e), _0x364c76[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x32e9f4), _0x787b03['addEventListener'](_0x1c58bc(0x43a), _0x5d3a78), _0x2028d0[_0x1c58bc(0xb66)]('click', _0x3d2b3e), _0x3a23e4[_0x1c58bc(0xb66)]('click', _0x3d2b3e); function _0x138b8e() { const _0x5e646f = _0x1c58bc; if ('gWQDp' !== 'clSqP') { if (_0x3775e4 === null) return; const _0x1e9233 = _0x2c45d7[_0x5e646f(0x1ef)][_0x3775e4]; if (!_0x1e9233) return; const _0x2eb15e = _0x5c10dc(); let _0x215a49 = '未知'; if (_0x1e9233['role'] === _0x5e646f(0xa02)) { if (_0x5e646f(0x759) !== 'ufrYl') { const _0x22df05 = _0x16e371(_0x2c45d7[_0x5e646f(0x147)]); _0x215a49 = _0x22df05[_0x5e646f(0xa6a)] || '我'; } else _0x41d769(_0x306751['id'], _0x38173b['map'](_0x2dd65a => _0x2dd65a['id'])); } else { if (_0x5e646f(0x49b) !== _0x5e646f(0x49b)) { _0x43b058(); const _0x13a7a1 = _0x4739fe(_0x5e646f(0x1ab), _0x2fbbd9[_0x5e646f(0xa6a)]); _0x13a7a1 && _0x13a7a1[_0x5e646f(0x471)]() && _0x13a7a1 !== _0x1bffef[_0x5e646f(0xa6a)] && (_0x5479b0[_0x5e646f(0xa6a)] = _0x13a7a1['trim'](), _0x70ca50(), _0x27aa7d(), _0x2afe70(), _0x53f38f('群名称已更改为\x22' + _0x5e6a7f[_0x5e646f(0xa6a)] + '\x22。')); } else { const _0x231894 = _0x1e9233['senderId'] || _0x2eb15e?.[_0x5e646f(0x402)][0x0], _0x407286 = _0x132ad2(_0x231894); _0x215a49 = _0x407286 ? _0x407286[_0x5e646f(0xa6a)] : '角色'; } } let _0x2ab036 = _0x1e9233[_0x5e646f(0xa3a)] || ''; if (_0x1e9233['displayUrl']) _0x2ab036 = '[表情]'; if (_0x1e9233['image']) _0x2ab036 = _0x5e646f(0xb36); if (_0x2ab036['length'] > 0x32) _0x2ab036 = _0x2ab036[_0x5e646f(0x5cd)](0x0, 0x32) + _0x5e646f(0x841); _0x2c45d7[_0x5e646f(0x38c)] = { 'sender': _0x215a49, 'content': _0x2ab036 }, _0x11d75f(), _0x4e9018(), _0x267304[_0x5e646f(0x64f)](); } else { const _0x26e998 = _0x141833[_0x5e646f(0x2d1)][_0x5e646f(0x55f)]; !_0x10cbf4['includes'](_0x26e998) && _0x467e0e['push'](_0x26e998); } } function _0x11d75f() { const _0xc24c9b = _0x1c58bc; if (_0xc24c9b(0x27c) !== _0xc24c9b(0x6e4)) { if (!_0x2c45d7['activeQuote']) return; _0x45463b['textContent'] = _0xc24c9b(0xa38) + _0x2c45d7[_0xc24c9b(0x38c)][_0xc24c9b(0x32d)], _0x4d6f2[_0xc24c9b(0x948)] = _0x2c45d7['activeQuote'][_0xc24c9b(0xa3a)], _0x2b2aeb['style'][_0xc24c9b(0x974)] = _0xc24c9b(0x4e9); } else _0x2ba028[_0xc24c9b(0x4cb)] && _0x47d073[_0xc24c9b(0x4cb)][_0xc24c9b(0xb67)] === _0x59f3cc && (_0x4085f4[_0xc24c9b(0x4cb)] = null); } function _0x32e9f4() { const _0x556451 = _0x1c58bc; _0x2c45d7[_0x556451(0x38c)] = null, _0x2b2aeb[_0x556451(0x819)][_0x556451(0x974)] = _0x556451(0xb39); } function _0x512ecd(_0x3112fd, _0x5f5899) { const _0x42216c = _0x1c58bc; if ('bVKiz' !== _0x42216c(0x789)) { const _0x17adc1 = document[_0x42216c(0xad1)](_0x42216c(0xb7f)); if (_0x17adc1) { if (_0x42216c(0x3c0) !== _0x42216c(0x299)) { if (_0x3112fd === 'home') _0x17adc1['style'][_0x42216c(0x974)] = _0x42216c(0x3f8); else { if ('krltm' === 'krltm') _0x17adc1[_0x42216c(0x819)]['display'] = _0x42216c(0xb39); else { const _0x5dbc9e = _0x320519[_0x42216c(0x387)](_0x130958[_0x42216c(0x813)](_0x42216c(0x3e8)) || '[]'); if (_0x5dbc9e['length'] === 0x0) return _0x276adf; return _0x1cf3b6[_0x42216c(0x662)](_0x123793 => !_0x5dbc9e[_0x42216c(0x7a3)](_0x123793[_0x42216c(0xa6a)])); } } } else { _0x5d383c(_0x42216c(0x324)); return; } } _0x2260ed = _0x5f5899 || null, Object[_0x42216c(0xa41)](_0x3ad684)['forEach'](_0x5a0ff5 => _0x5a0ff5[_0x42216c(0x9c4)][_0x42216c(0x6e1)](_0x42216c(0x630))), _0x3ad684[_0x3112fd] && _0x3ad684[_0x3112fd]['classList'][_0x42216c(0x2ac)](_0x42216c(0x630)), _0x3112fd !== _0x42216c(0xa37) && _0x21db55[_0x42216c(0x9c4)][_0x42216c(0x6e1)](_0x42216c(0x283)); } else { const _0x535309 = _0x471876(_0x1ef2d3[_0x42216c(0x402)][0x0]); return _0x535309?.['name'] || 'AI'; } } function _0x2c9e04(_0x17f00d) { const _0x449041 = _0x1c58bc; _0x17f00d ? _0x449041(0x2fe) === _0x449041(0x2fe) ? _0x21db55[_0x449041(0x9c4)][_0x449041(0x2ac)]('show-chat-view') : _0x5144d9 = _0xb28690[_0x449041(0x775)][0x0] : _0x21db55['classList'][_0x449041(0x6e1)](_0x449041(0x283)); } async function _0x2446f8() { const _0x2f402d = _0x1c58bc; if (_0x2f402d(0x7fd) === _0x2f402d(0xae1)) _0x17c3a5[_0x2f402d(0xb49)](..._0x312f68(_0x42cef9)); else { _0x3b27a5[_0x2f402d(0x16c)] = ''; const _0x4024f6 = _0x2c45d7[_0x2f402d(0x75e)]['map'](_0x4947a0 => { const _0x676ba1 = _0x2f402d; if (_0x676ba1(0x802) === _0x676ba1(0x74b)) return _0x676ba1(0x194) + _0x3dc4a5; else { if (_0x4947a0[_0x676ba1(0x1a7)] === _0x676ba1(0x639)) { const _0x537fc4 = _0x132ad2(_0x4947a0[_0x676ba1(0x402)][0x0]); return _0x537fc4 ? _0x262fce(_0x676ba1(0x717) + _0x537fc4['id']) : Promise[_0x676ba1(0x991)](null); } else { if (_0x676ba1(0x5fe) !== _0x676ba1(0x5fe)) _0x3b6784['textContent'] = '近期没有特别安排', _0x3a959c[_0x676ba1(0x16c)] = _0x676ba1(0x3d6); else return _0x262fce(_0x676ba1(0x2f7) + _0x4947a0['id']); } } }), _0x2ed29f = await Promise[_0x2f402d(0x32e)](_0x4024f6); _0x2c45d7[_0x2f402d(0x75e)][_0x2f402d(0x4ac)]((_0xcb3483, _0x2ec770) => { const _0x4bd52c = _0x2f402d, _0x1b6f42 = document[_0x4bd52c(0xa51)]('li'); _0x1b6f42[_0x4bd52c(0xa5e)] = _0x4bd52c(0x808), _0x1b6f42[_0x4bd52c(0x2d1)]['id'] = _0xcb3483['id']; let _0xfa16f7 = _0x72f264, _0x51574e = '群聊', _0x8d478a = ''; const _0x268472 = _0x2ed29f[_0x2ec770]; if (_0x268472) { if (_0x4bd52c(0x3db) !== _0x4bd52c(0x3db)) { const _0x2ffec2 = _0x4029be['transaction'](_0x584072, _0x4bd52c(0x2b8)), _0x3e61be = _0x2ffec2[_0x4bd52c(0x92c)](_0x9a6e58), _0x397d91 = _0x3e61be[_0x4bd52c(0x982)]({ 'id': _0x5ce279, 'blob': _0x4cdd23 }); _0x397d91[_0x4bd52c(0x62f)] = () => _0x33aa26(_0x397d91[_0x4bd52c(0xb7b)]), _0x397d91['onerror'] = () => _0x41efbb(_0x397d91['error']); } else _0xfa16f7 = URL[_0x4bd52c(0x97d)](_0x268472); } if (_0xcb3483['type'] === 'private') { const _0x3ed2d9 = _0x132ad2(_0xcb3483[_0x4bd52c(0x402)][0x0]); _0x3ed2d9 ? (!_0x268472 && (_0xfa16f7 = _0x3ed2d9[_0x4bd52c(0x37b)] || _0x72f264), _0x51574e = _0x3ed2d9[_0x4bd52c(0xa6a)] || '未命名角色', _0x8d478a = _0x3ed2d9[_0x4bd52c(0x531)] || '私聊') : (_0x51574e = _0x4bd52c(0xafc), _0x8d478a = _0x4bd52c(0x5f0)); } else _0x51574e = _0xcb3483[_0x4bd52c(0xa6a)] || _0x4bd52c(0x8f8), _0x8d478a = _0xcb3483['participantIds']['length'] + _0x4bd52c(0x1b6); _0x1b6f42[_0x4bd52c(0x16c)] = _0x4bd52c(0x40b) + _0xfa16f7 + _0x4bd52c(0x681) + _0x51574e + _0x4bd52c(0x210) + _0x8d478a + _0x4bd52c(0x56a), _0x1b6f42['querySelector']('.char-info-wrapper')[_0x4bd52c(0xb66)]('click', () => { _0x120b4c(_0xcb3483['id']), _0x2c9e04(!![]); }), _0x3b27a5[_0x4bd52c(0x8ce)](_0x1b6f42); }); } } function _0x42a1c8() { const _0x196d68 = _0x1c58bc; if (_0x196d68(0x5d5) === _0x196d68(0x5d5)) { const _0x503ab2 = document['getElementById']('meeting-list-container'); _0x503ab2[_0x196d68(0x16c)] = ''; const _0x2133c5 = _0x2c45d7[_0x196d68(0xb76)][_0x196d68(0x662)](_0x13fd7c => _0x2c45d7['chats']['some'](_0x38e47b => _0x38e47b[_0x196d68(0x1a7)] === _0x196d68(0x639) && _0x38e47b[_0x196d68(0x402)][_0x196d68(0x7a3)](_0x13fd7c['id']))); if (_0x2133c5[_0x196d68(0x1ea)] === 0x0) { _0x503ab2[_0x196d68(0x16c)] = _0x196d68(0x689); return; } _0x2133c5[_0x196d68(0x4ac)](_0x28413c => { const _0x32c6a8 = _0x196d68; if ('nunVb' === _0x32c6a8(0x296)) { const _0x5db2aa = document[_0x32c6a8(0xa51)]('li'); _0x5db2aa[_0x32c6a8(0xa5e)] = 'character-item', _0x5db2aa[_0x32c6a8(0x2d1)][_0x32c6a8(0xaee)] = _0x28413c['id'], _0x5db2aa[_0x32c6a8(0x16c)] = _0x32c6a8(0x40b) + (_0x28413c[_0x32c6a8(0x37b)] || _0x72f264) + _0x32c6a8(0x681) + _0x28413c[_0x32c6a8(0xa6a)] + _0x32c6a8(0x210) + (_0x28413c['remark'] || '私聊') + _0x32c6a8(0x56a), _0x5db2aa['addEventListener'](_0x32c6a8(0x43a), () => { _0x338b6f(_0x28413c['id']); }), _0x503ab2[_0x32c6a8(0x8ce)](_0x5db2aa); } else _0x5e69d1[_0x32c6a8(0x9c4)]['remove'](_0x32c6a8(0x630)), _0x5b34de['classList']['add'](_0x32c6a8(0x630)), _0x15cb79(); }); } else { _0x540fb4 = _0x396562(_0x402c4f); if (!_0x36f3cc) throw new _0x25f8e9('AI返回了无法识别的数据格式。'); } } async function _0x338b6f(_0x5402ad) { const _0x38f0e2 = _0x1c58bc, _0x1dbc5f = _0x132ad2(_0x5402ad); if (!_0x1dbc5f) return; _0x2c45d7[_0x38f0e2(0x975)] = _0x5402ad, document[_0x38f0e2(0xad1)](_0x38f0e2(0x5bc))['textContent'] = _0x1dbc5f[_0x38f0e2(0xa6a)]; const _0x28504b = document['getElementById'](_0x38f0e2(0x5aa)); _0x28504b[_0x38f0e2(0x819)][_0x38f0e2(0xbe4)] = _0x38f0e2(0xb39), document[_0x38f0e2(0xad1)]('meeting-scene-view')[_0x38f0e2(0x16c)] = _0x38f0e2(0xb1d), document[_0x38f0e2(0xad1)]('galgame-text')[_0x38f0e2(0x948)] = _0x38f0e2(0xa1f), document['getElementById']('galgame-speaker')[_0x38f0e2(0x948)] = '旁白', document[_0x38f0e2(0xad1)](_0x38f0e2(0x891))[_0x38f0e2(0x400)] = '', _0x512ecd(_0x38f0e2(0xa83), _0x38f0e2(0x227)), setTimeout(async () => { const _0x2369c0 = _0x38f0e2; try { if (_0x2369c0(0xaf3) === _0x2369c0(0xaf3)) { const _0x25d5d9 = await _0x262fce(_0x2369c0(0x32c) + _0x5402ad); _0x25d5d9 && (_0x2369c0(0x29c) === 'ivtMK' ? (_0x28504b['style'][_0x2369c0(0xbe4)] = _0x2369c0(0xbce) + URL['createObjectURL'](_0x25d5d9) + '\x27)', _0x28504b[_0x2369c0(0x819)][_0x2369c0(0x45f)] = _0x2369c0(0x696), _0x28504b[_0x2369c0(0x819)]['backgroundPosition'] = _0x2369c0(0x4f3)) : _0x42cc00[_0x2369c0(0xa6c)] = ![]); const _0x2d7695 = _0x2c45d7['chats'][_0x2369c0(0x128)](_0x3c0f8b => _0x3c0f8b[_0x2369c0(0x1a7)] === _0x2369c0(0x639) && _0x3c0f8b[_0x2369c0(0x402)]['includes'](_0x5402ad)); _0x2d7695 ? (_0x2c45d7[_0x2369c0(0x147)] = _0x2d7695['id'], _0x3ac55e(), _0x56505b()) : _0x2c45d7[_0x2369c0(0x1ef)] = []; _0x4b49ff(_0x5402ad), _0x569a84(), _0x518ec8(); if (_0x49c006) clearInterval(_0x49c006); _0x29e482(), _0x49c006 = setInterval(_0x29e482, 0x2710), document[_0x2369c0(0xad1)]('galgame-sprite-adjust-ui')[_0x2369c0(0x819)]['display'] = _0x2369c0(0x4e9); } else { _0x3f3b05[_0x2369c0(0xb6a)][_0x2369c0(0x82f)] = ''; return; } } catch (_0x1c09e1) { if (_0x2369c0(0x661) === 'CUnOA') console[_0x2369c0(0x208)](_0x2369c0(0x313), _0x1c09e1), document[_0x2369c0(0xad1)]('meeting-scene-view')[_0x2369c0(0x16c)] = _0x2369c0(0x6b2); else { const _0x3d70b0 = _0x18f80c['getElementById'](_0x2369c0(0x2e0)); if (!_0x3d70b0) return; const _0x563db7 = _0x482281['getItem'](_0x2369c0(0x667)) || '35'; _0x4ad797['documentElement'][_0x2369c0(0x819)][_0x2369c0(0x85e)]('--primary-hue', _0x563db7), _0x3d70b0['value'] = _0x563db7, _0x3d70b0[_0x2369c0(0xb66)](_0x2369c0(0x329), () => { const _0x1d6871 = _0x2369c0, _0x273d42 = _0x3d70b0[_0x1d6871(0x82f)]; _0xe9fe55[_0x1d6871(0x169)][_0x1d6871(0x819)][_0x1d6871(0x85e)]('--primary-hue', _0x273d42), _0x476650[_0x1d6871(0x3ae)]('themeHue', _0x273d42), _0x3aa09f(); }); } } }, 0x32); } function _0x518ec8() { const _0x354277 = _0x1c58bc, _0x533844 = document[_0x354277(0xad1)](_0x354277(0x75c)); _0x533844['innerHTML'] = ''; const _0x44b19f = _0x533844[_0x354277(0x94b)](_0x354277(0x723)); if (_0x44b19f) _0x44b19f['remove'](); _0x2c45d7[_0x354277(0x1ef)] && (_0x354277(0xb23) === _0x354277(0xb23) ? _0x2c45d7[_0x354277(0x1ef)][_0x354277(0x4ac)]((_0x568962, _0x3e2883) => { const _0x2b60d8 = _0x354277; if (!_0x568962[_0x2b60d8(0xa03)] || _0x568962[_0x2b60d8(0x232)] === 'system') return; const _0x306a6a = document[_0x2b60d8(0xa51)]('p'); _0x306a6a[_0x2b60d8(0x2d1)]['historyIndex'] = _0x3e2883; const _0xb654b4 = _0x568962['content'][_0x2b60d8(0x4db)](/\n/g, _0x2b60d8(0x5f7)); let _0x24213b = '', _0x136f13 = ''; const _0x3101b1 = _0x16e371(_0x2c45d7['activeChatId']); if (_0x568962[_0x2b60d8(0x232)] === _0x2b60d8(0xa02)) { if (_0x2b60d8(0x277) === _0x2b60d8(0x277)) _0x24213b = _0x3101b1[_0x2b60d8(0xa6a)] || '我', _0x136f13 = _0x2b60d8(0x67d); else { const _0x4e551e = _0x378b5b[_0x2b60d8(0x471)](); if (!_0x4e551e || !_0x45b2ab['activeDiaryCharacterId']) return; let _0x17e480 = _0x4a138f['diaries']['find'](_0x434e43 => _0x434e43[_0x2b60d8(0x57a)] === _0xadb09f[_0x2b60d8(0x62c)]); !_0x17e480 && (_0x17e480 = { 'characterId': _0x4b7658[_0x2b60d8(0x62c)], 'entries': [] }, _0x30c20c['diaries']['push'](_0x17e480)); _0x17e480['entries'][_0x2b60d8(0xb49)]({ 'timestamp': _0x24a3e3['now'](), 'author': _0x2b60d8(0xa02), 'content': _0x4e551e }), _0x203487(); const _0x571ffe = _0x17e480['entries']['length']; _0x3e4424[_0x2b60d8(0x20b)] = _0x237e99[_0x2b60d8(0x705)](_0x571ffe / 0x2) - 0x1, _0x4c5a64(); } } else { if (_0x568962[_0x2b60d8(0x232)] === _0x2b60d8(0x728)) { if (_0x2b60d8(0xaaf) !== 'kECSr') { const _0xd726fc = _0x132ad2(_0x568962['senderId'] || _0x2c45d7[_0x2b60d8(0x975)]); _0x24213b = _0xd726fc?.[_0x2b60d8(0xa6a)] || '角色', _0x136f13 = 'speaker-ai'; } else { _0x2b7258(_0x2b60d8(0x72c)); return; } } } _0x306a6a[_0x2b60d8(0x819)][_0x2b60d8(0x3a5)] = 'rgba(0,\x200,\x200,\x200.4)', _0x306a6a[_0x2b60d8(0x819)][_0x2b60d8(0x16a)] = '15px\x2020px', _0x306a6a[_0x2b60d8(0x819)]['borderRadius'] = _0x2b60d8(0x834), _0x306a6a[_0x2b60d8(0x819)][_0x2b60d8(0x7a4)] = _0x2b60d8(0x999), _0x24213b ? _0x2b60d8(0x76c) !== 'ZVhKM' ? _0x306a6a[_0x2b60d8(0x16c)] = '<span\x20class=\x22' + _0x136f13 + '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20' + (_0x136f13 === 'speaker-user' ? _0x2b60d8(0x8bb) : _0x2b60d8(0x919)) + _0x2b60d8(0xb54) + _0x24213b + _0x2b60d8(0x9e0) + _0xb654b4 : _0x2bca29['categoryId'] = _0x2b60d8(0x135) : 'NNSLN' === 'WfouA' ? _0x43c631[_0x2b60d8(0xad1)](_0x2b60d8(0x882))[_0x2b60d8(0xb66)]('click', async () => { _0x6af56f(_0x46925d, _0x3e5095, !![]); }) : (_0x306a6a['className'] = _0x2b60d8(0x901), _0x306a6a[_0x2b60d8(0x819)][_0x2b60d8(0x6cc)] = _0x2b60d8(0x543), _0x306a6a[_0x2b60d8(0x819)][_0x2b60d8(0x979)] = '#d1d5db', _0x306a6a[_0x2b60d8(0x16c)] = _0xb654b4), _0x533844['appendChild'](_0x306a6a); }) : _0x1c3dab[_0x354277(0x43a)]()); if (_0x2c45d7[_0x354277(0xaa7)]) { if (_0x354277(0x1df) === _0x354277(0x1df)) { let _0x26f70b = _0x533844[_0x354277(0x94b)](_0x354277(0x19e)); !_0x26f70b && (_0x26f70b = document[_0x354277(0xa51)](_0x354277(0x54f)), _0x26f70b[_0x354277(0xa5e)] = 'typing-indicator', _0x26f70b[_0x354277(0x948)] = _0x354277(0x6d4), _0x26f70b[_0x354277(0x819)][_0x354277(0x3a5)] = _0x354277(0x528), _0x26f70b['style'][_0x354277(0x16a)] = _0x354277(0x25f), _0x26f70b[_0x354277(0x819)]['borderRadius'] = _0x354277(0x834), _0x533844[_0x354277(0x8ce)](_0x26f70b)); } else { const _0x292108 = _0x4545df[_0x354277(0xad1)](_0x354277(0x7ec)), _0x1c3511 = _0x220aa4[_0x354277(0xa2f)]['find'](_0x119f61 => _0x119f61['id'] === _0x39f650['id']); if (!_0x1c3511) { _0x1262b2[_0x354277(0x208)](_0x354277(0x13a), _0x23b676['id']); return; } const _0x48d938 = _0x292108[_0x354277(0x400)]['includes'](_0x1c3511['playableUrl']) && !_0x292108[_0x354277(0x24b)]; _0x48d938 ? _0x292108[_0x354277(0x37d)]() : (_0x5a3da3 = { 'title': _0x1c3511[_0x354277(0x6d1)], 'artist': _0x1c3511[_0x354277(0x50a)], 'cover': _0x1c3511['coverUrl'] || (_0x1c3511['coverId'] ? _0x354277(0xba4) + _0x1c3511[_0x354277(0x6b1)] : _0x7856e3), 'isFromLibrary': !![] }, _0x292108['src'] = _0x1c3511[_0x354277(0x642)], _0x292108[_0x354277(0xbc9)](), _0x4e2b0d['currentlyPlayingIndex'] = _0x4dde44[_0x354277(0xa2f)][_0x354277(0x18c)](_0x5716bc => _0x5716bc['id'] === _0x3c2f6d['id']), _0x3291a7()); } } const _0x4535b6 = document[_0x354277(0xa51)](_0x354277(0x54f)); _0x4535b6['id'] = _0x354277(0x6d5), _0x533844[_0x354277(0x8ce)](_0x4535b6), setTimeout(() => { const _0x411096 = _0x354277; _0x4535b6['scrollIntoView']({ 'behavior': _0x411096(0xb4d), 'block': 'end' }); }, 0x32); } function _0x31b43b() { const _0x2310fb = _0x1c58bc; if (_0x2310fb(0x9af) === _0x2310fb(0x731)) _0x5303bf['textContent'] = _0x2310fb(0x3ea); else { const _0x49ad9c = document['querySelector'](_0x2310fb(0xba6)); if (!_0x49ad9c) return; _0x49ad9c['id'] === _0x2310fb(0x4b2) ? 'diWHz' === _0x2310fb(0x708) ? (_0x5668f3(), _0x2134fc[_0x2310fb(0xad1)](_0x2310fb(0xbc2))[_0x2310fb(0x9c4)]['remove']('show'), _0x341ef6[_0x2310fb(0xad1)](_0x2310fb(0x5d2))['style']['display'] = _0x2310fb(0xb39), _0x44d87a(() => { _0x40e293('home', 'chat'); }, 0x14)) : _0x518ec8() : _0xd1d472(); } } function _0xd1d472() { const _0x31849a = _0x1c58bc; if (_0x31849a(0x1d0) === _0x31849a(0x1d0)) { const _0x49c38d = _0x2c45d7['conversationHistory'][_0x31849a(0x662)](_0x37b2c0 => !_0x37b2c0[_0x31849a(0xa03)] && _0x37b2c0['role'] !== _0x31849a(0x5ff)); if (_0x49c38d[_0x31849a(0x1ea)] > _0x2c45d7[_0x31849a(0x548)]) { let _0x172e45 = _0x4390c3[_0x31849a(0x94b)](_0x31849a(0x3fc)); !_0x172e45 && (_0x172e45 = document[_0x31849a(0xa51)](_0x31849a(0x6a3)), _0x172e45['textContent'] = '加载更多聊天记录', _0x172e45[_0x31849a(0xa5e)] = _0x31849a(0xb40), _0x172e45['style']['width'] = _0x31849a(0xb4d), _0x172e45[_0x31849a(0x819)][_0x31849a(0x461)] = _0x31849a(0x8aa), _0x172e45[_0x31849a(0x819)][_0x31849a(0x16a)] = _0x31849a(0x1e3), _0x172e45['onclick'] = () => { const _0x25a8f5 = _0x31849a, _0x18ccae = _0x4390c3, _0xc9a0d = _0x18ccae[_0x25a8f5(0x291)], _0x3127d2 = _0x18ccae[_0x25a8f5(0x889)]; _0x2c45d7['displayedMessageCount'] += 0x64, _0xd1d472(), requestAnimationFrame(() => { const _0x5cab1d = _0x25a8f5; if (_0x5cab1d(0x17c) !== _0x5cab1d(0x17c)) _0x1eb853[_0x5cab1d(0xad1)](_0x5cab1d(0x791) + _0x427795 + _0x5cab1d(0x484))[_0x5cab1d(0x819)][_0x5cab1d(0xbe4)] = 'url(\x27' + _0x2a770e['createObjectURL'](_0x482361) + '\x27)'; else { const _0x22c360 = _0x18ccae[_0x5cab1d(0x291)]; _0x18ccae['scrollTop'] = _0x3127d2 + (_0x22c360 - _0xc9a0d); } }); }, _0x4390c3[_0x31849a(0x248)] ? _0x4390c3['insertBefore'](_0x172e45, _0x4390c3[_0x31849a(0x248)]) : _0x4390c3[_0x31849a(0x8ce)](_0x172e45)); } else { if ('RlKmL' === 'RlKmL') { const _0x24d611 = _0x4390c3['querySelector'](_0x31849a(0x3fc)); if (_0x24d611) _0x24d611[_0x31849a(0x6e1)](); } else { const _0x44b7e8 = _0x7098b5(); _0x44b7e8 && _0x44b7e8[_0x31849a(0x7ba)] && _0x44b7e8[_0x31849a(0x7ba)][_0x31849a(0x958)] && (_0xca3668[_0x31849a(0x819)][_0x31849a(0x974)] = 'flex', _0x517736(() => _0x5155ea['classList']['add']('show'), 0xa)); } } Array[_0x31849a(0x8c8)](_0x4390c3[_0x31849a(0x488)])[_0x31849a(0x4ac)](_0x475d47 => { const _0x53eca4 = _0x31849a; if ('ajtbX' === _0x53eca4(0x866)) _0x19fce9(_0x45ce3e - 0x1); else { if (!_0x475d47[_0x53eca4(0x9c4)][_0x53eca4(0x75d)]('load-more-btn')) { if ('pNWuf' === _0x53eca4(0x800)) _0x475d47[_0x53eca4(0x6e1)](); else { let _0x482770 = ![], _0x227546 = _0x5e77a6[_0x53eca4(0x54e)][_0x53eca4(0x128)](_0x32ddd2 => _0x32ddd2[_0x53eca4(0xa6a)] === _0x53eca4(0x504)); !_0x227546 && (_0x227546 = { 'id': _0x53eca4(0x3cd), 'name': _0x53eca4(0x504) }, _0x2d8586['worldBookCategories']['push'](_0x227546), _0x14fd52['log']('Noir\x27s\x20Protocol:\x20Built-in\x20\x27html\x27\x20category\x20was\x20missing.\x20Re-created.'), _0x482770 = !![]); const _0x5da235 = _0x53eca4(0x2b1); let _0x20fc73 = _0x35c5b0[_0x53eca4(0x538)][_0x53eca4(0x69b)](_0x3c900f => _0x3c900f['id'] === _0x5da235); if (!_0x20fc73) { _0x542527[_0x53eca4(0x905)]('Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.'); const _0x5404cb = _0x53eca4(0x881), _0x2c2871 = { 'id': _0x5da235, 'name': 'HTML模块生成规则', 'content': _0x5404cb, 'categoryId': _0x227546['id'] }; _0xa561c0['worldBooks'][_0x53eca4(0xb49)](_0x2c2871), _0x482770 = !![]; } _0x482770 && (_0x3e81eb(), _0x419161[_0x53eca4(0x905)]('Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.')); } } } }); const _0x325e4a = _0x49c38d['slice'](-_0x2c45d7[_0x31849a(0x548)]); _0x325e4a[_0x31849a(0x4ac)](_0x3213ca => { const _0x39aa04 = _0x31849a, _0x5d6fe0 = _0x2c45d7[_0x39aa04(0x1ef)][_0x39aa04(0x47b)](_0x3213ca); _0x5d6fe0 > -0x1 && _0xb0fc81(_0x3213ca, _0x5d6fe0); }); if (_0x2c45d7['isGenerating']) { if (_0x31849a(0x25e) === _0x31849a(0x9b7)) _0x3ee38a[_0x31849a(0xb49)]('[' + _0x20982a(_0x5361e7) + ']\x20' + _0x10dd17['content']); else { let _0x2179b4 = _0x4390c3['querySelector'](_0x31849a(0x19e)); !_0x2179b4 && (_0x2179b4 = document['createElement'](_0x31849a(0x54f)), _0x2179b4[_0x31849a(0xa5e)] = _0x31849a(0x8db), _0x2179b4[_0x31849a(0x948)] = _0x31849a(0x9ae), document[_0x31849a(0xad1)]('chat-view-pane')[_0x31849a(0x8ce)](_0x2179b4)); } } _0x325e4a['length'] <= _0x2c45d7[_0x31849a(0x548)] && setTimeout(() => { const _0x2c8470 = _0x31849a; _0x4390c3[_0x2c8470(0x889)] = _0x4390c3[_0x2c8470(0x291)]; }, 0x0); } else !_0x56d9f1['categoryId'] && (_0x56ea6f[_0x31849a(0x9ba)] = 'default'); } function _0xb0fc81(_0x46c0ef, _0x16305d) { const _0x25004d = _0x1c58bc, { role: _0x5d0cc2, content: _0x3dd6fe, displayUrl: _0xd8da4e, image: _0x5a209a, senderId: _0x3d0fe2 } = _0x46c0ef, _0x3d52c1 = document[_0x25004d(0xad1)](_0x25004d(0x7fa)), _0x4af357 = _0x3dd6fe && _0x3dd6fe[_0x25004d(0x471)]()['startsWith']('<div') && _0x3dd6fe[_0x25004d(0x471)]()[_0x25004d(0x44b)](_0x25004d(0x45e)); if (_0x4af357) { if ('VXahk' !== _0x25004d(0x7e0)) { const _0x112133 = document[_0x25004d(0xa51)]('div'); return _0x112133[_0x25004d(0xa5e)] = 'full-width-module-container', _0x112133[_0x25004d(0x2d1)][_0x25004d(0xb38)] = _0x16305d, _0x112133[_0x25004d(0x16c)] = _0x3dd6fe, _0x3d52c1[_0x25004d(0x8ce)](_0x112133), _0x112133; } else _0x2e4513[_0x25004d(0xb49)](_0x2203c0); } const _0x4e6693 = _0x5d0cc2 === 'assistant' ? 'ai' : _0x5d0cc2, _0x267f68 = _0x5c10dc(), _0x5bb2ba = document[_0x25004d(0xa51)](_0x25004d(0x54f)); _0x5bb2ba[_0x25004d(0x9c4)][_0x25004d(0x2ac)]('message-container', _0x4e6693), _0x5bb2ba[_0x25004d(0x2d1)][_0x25004d(0xb38)] = _0x16305d; const _0x53f1f2 = document[_0x25004d(0xa51)](_0x25004d(0x54f)); _0x53f1f2[_0x25004d(0xa5e)] = 'message-bubble-row'; let _0xbb0c89 = '', _0x4b5764 = '', _0x291e4e = null; if (_0x5d0cc2 === 'user') { const _0x59d3b8 = _0x16e371(_0x2c45d7[_0x25004d(0x147)]); _0xbb0c89 = _0x59d3b8[_0x25004d(0x37b)] || _0x5d9858; const _0x1b903c = _0x132ad2(_0x267f68?.['participantIds'][0x0]); _0x1b903c && (_0x4b5764 = _0x1b903c[_0x25004d(0x345)] || ''); } else { if (_0x267f68?.[_0x25004d(0x1a7)] === 'private') _0x291e4e = _0x132ad2(_0x267f68[_0x25004d(0x402)][0x0]); else _0x267f68?.[_0x25004d(0x1a7)] === _0x25004d(0x62a) && _0x3d0fe2 && (_0x291e4e = _0x132ad2(_0x3d0fe2)); _0xbb0c89 = _0x291e4e?.[_0x25004d(0x37b)] || _0x72f264, _0x4b5764 = _0x291e4e?.[_0x25004d(0x2ad)] || ''; } const _0x2e497f = _0x5bd138(_0xbb0c89, _0x4b5764); if (_0x5d0cc2 !== _0x25004d(0xa02) && _0x291e4e) { const _0x1d17db = _0x2e497f['querySelector'](_0x25004d(0x99b)); _0x262fce(_0x25004d(0x717) + _0x291e4e['id'])[_0x25004d(0xa0d)](_0x14a236 => { const _0x211745 = _0x25004d; _0x14a236 && (_0x1d17db[_0x211745(0x400)] = URL['createObjectURL'](_0x14a236)); }); } const _0x9e19a0 = document[_0x25004d(0xa51)]('div'); _0x9e19a0[_0x25004d(0x9c4)][_0x25004d(0x2ac)](_0x25004d(0x80d), _0x4e6693); if (_0x267f68?.[_0x25004d(0x1a7)] === _0x25004d(0x639)) { const _0x164cf3 = _0x267f68['participantIds'][0x0]; _0x9e19a0[_0x25004d(0x9c4)]['add'](_0x25004d(0x87a) + _0x164cf3); } if (_0x46c0ef[_0x25004d(0x96b)]) { const _0x2a6a48 = document[_0x25004d(0xa51)]('div'); _0x2a6a48['className'] = _0x25004d(0x19d), _0x2a6a48[_0x25004d(0x16c)] = _0x25004d(0x8e2) + _0x46c0ef[_0x25004d(0x96b)][_0x25004d(0x32d)] + _0x25004d(0x7ca) + _0x46c0ef['quotedMessage']['content'] + _0x25004d(0x5e4), _0x9e19a0[_0x25004d(0x8ce)](_0x2a6a48); } if (_0xd8da4e) _0x9e19a0[_0x25004d(0x9c4)]['add'](_0x25004d(0x3bd)), _0x9e19a0[_0x25004d(0x16c)] += _0x25004d(0x9c9) + _0xd8da4e + _0x25004d(0x596); else { if (_0x46c0ef[_0x25004d(0x9b6)] || _0x46c0ef[_0x25004d(0x709)]) { _0x9e19a0['classList'][_0x25004d(0x2ac)](_0x25004d(0x9b6)); const _0x211dea = document['createElement']('img'); _0x211dea['classList'][_0x25004d(0x2ac)](_0x25004d(0x44f)), _0x9e19a0[_0x25004d(0x8ce)](_0x211dea); if (_0x46c0ef[_0x25004d(0x9b6)]) _0x211dea[_0x25004d(0x400)] = _0x46c0ef[_0x25004d(0x9b6)]; else { if (_0x25004d(0xad9) !== _0x25004d(0xad9)) { const _0x6ef23 = _0x554d12[_0x25004d(0x775)][_0x25004d(0x128)](_0x4c9ec9 => _0x4c9ec9['id'] === _0x2bbdd9); if (_0x6ef23) _0x1cda5e[_0x25004d(0xb85)](_0x6ef23, _0x47620e); } else _0x211dea[_0x25004d(0x400)] = _0x25004d(0x187), _0x262fce(_0x46c0ef['imageId'])['then'](_0x4c1f02 => { const _0x1a0d63 = _0x25004d; if (_0x4c1f02) _0x211dea['src'] = URL['createObjectURL'](_0x4c1f02); else _0x211dea[_0x1a0d63(0x8cb)] = _0x1a0d63(0xb56); })['catch'](() => _0x211dea[_0x25004d(0x8cb)] = _0x25004d(0xb56)); } _0x3dd6fe && (_0x9e19a0[_0x25004d(0x16c)] += '<p\x20style=\x22margin-top:\x205px;\x22>' + _0x3dd6fe + _0x25004d(0xa3c)); } else { if (_0x46c0ef[_0x25004d(0x1a7)] === _0x25004d(0x262)) { if (_0x25004d(0x3d1) === _0x25004d(0x3d1)) { _0x9e19a0['classList'][_0x25004d(0x2ac)](_0x25004d(0x262)); const _0x32f60d = _0x46c0ef[_0x25004d(0x232)] === _0x25004d(0xa02) ? _0x16e371(_0x2c45d7[_0x25004d(0x147)]) : _0x132ad2(_0x46c0ef[_0x25004d(0x51a)]), _0x204f96 = _0x46c0ef[_0x25004d(0x492)] === _0x16e371(_0x2c45d7[_0x25004d(0x147)])['id'] ? _0x16e371(_0x2c45d7[_0x25004d(0x147)]) : _0x132ad2(_0x46c0ef['recipientId']), _0x25aee6 = _0x32f60d?.[_0x25004d(0xa6a)] ? _0x32f60d['name'] + _0x25004d(0x1d5) : '转账', _0x235150 = _0x204f96?.[_0x25004d(0xa6a)] ? _0x25004d(0x4b7) + _0x204f96['name'] : '转账'; _0x9e19a0[_0x25004d(0x16c)] += _0x25004d(0x5a3) + _0x25aee6 + _0x25004d(0x421) + _0x46c0ef[_0x25004d(0x15c)][_0x25004d(0x625)](0x2) + _0x25004d(0xabe) + _0x235150 + '</div>\x0a\x20\x20\x20\x20\x20\x20</div>'; } else { const _0x3bb643 = { 'quotedMessage': null, 'content': _0x357526 }, _0x500bc8 = _0x1b2736[_0x25004d(0x604)](/^\[引用\|(.*?)\|(.*?)\]\s*/); return _0x500bc8 && (_0x3bb643[_0x25004d(0x96b)] = { 'sender': _0x500bc8[0x1][_0x25004d(0x471)](), 'content': _0x500bc8[0x2]['trim']() }, _0x3bb643[_0x25004d(0xa3a)] = _0x748e3a[_0x25004d(0x5cd)](_0x500bc8[0x0]['length'])[_0x25004d(0x471)]()), _0x3bb643; } } else { if (_0x46c0ef[_0x25004d(0x1a7)] === _0x25004d(0x1f1)) { _0x9e19a0[_0x25004d(0x9c4)][_0x25004d(0x2ac)](_0x25004d(0xab5)); const _0x33429f = document[_0x25004d(0xa51)]('div'); _0x33429f[_0x25004d(0xa5e)] = 'listen-together-card\x20no-action-modal'; const _0x317e88 = _0x46c0ef['role'] === _0x25004d(0xa02) ? _0x16e371(_0x2c45d7[_0x25004d(0x147)])[_0x25004d(0xa6a)] || '你' : _0x132ad2(_0x46c0ef['senderId'])?.[_0x25004d(0xa6a)] || 'TA', _0x17afc2 = _0x25004d(0x718) + _0x46c0ef[_0x25004d(0x782)], _0x54a760 = '<img\x20id=\x22' + _0x17afc2 + _0x25004d(0x3e7) + _0x72f264 + '\x22>'; _0x46c0ef['accepted'] ? _0x25004d(0x534) !== _0x25004d(0x534) ? (_0x35c883[_0x25004d(0x9c4)]['remove'](_0x25004d(0x944)), _0x48c7d0[_0x25004d(0x970)] = null, _0x43b328[_0x25004d(0x970)] = null, _0x2bb3c4[_0x25004d(0x970)] = null, _0xafbeeb[_0x25004d(0x57f)]('keydown', _0x2574dd), _0x597fdd(_0x1c26ef)) : _0x33429f[_0x25004d(0x16c)] = _0x25004d(0x12e) + _0x54a760 + _0x25004d(0x80a) + _0x46c0ef[_0x25004d(0x6d1)] + _0x25004d(0x1c8) + _0x46c0ef[_0x25004d(0x50a)] + '</div></div></div>' : _0x33429f[_0x25004d(0x16c)] = _0x25004d(0x70f) + _0x317e88 + _0x25004d(0x3b8) + _0x54a760 + _0x25004d(0x80a) + _0x46c0ef[_0x25004d(0x6d1)] + _0x25004d(0x1c8) + _0x46c0ef[_0x25004d(0x50a)] + '</div></div></div><div\x20class=\x22listen-together-actions\x22><button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22' + _0x46c0ef[_0x25004d(0x22c)] + _0x25004d(0x6b0), _0x9e19a0[_0x25004d(0x8ce)](_0x33429f), _0x46c0ef['coverId'] && setTimeout(() => { const _0x11bbd5 = _0x25004d; _0x262fce(_0x46c0ef[_0x11bbd5(0x6b1)])[_0x11bbd5(0xa0d)](_0x3f4b39 => { const _0x1f5577 = _0x11bbd5, _0x1852c7 = document[_0x1f5577(0xad1)](_0x17afc2); if (_0x1852c7 && _0x3f4b39) _0x1852c7[_0x1f5577(0x400)] = URL[_0x1f5577(0x97d)](_0x3f4b39); }); }, 0x0); } else { if (_0x46c0ef[_0x25004d(0x1a7)] === _0x25004d(0xab5) && _0x46c0ef['songName']) { _0x9e19a0[_0x25004d(0x9c4)]['add'](_0x25004d(0xab5)); const _0x444923 = document[_0x25004d(0xa51)](_0x25004d(0x54f)); _0x444923['className'] = _0x25004d(0x7ac), _0x444923[_0x25004d(0x2d1)][_0x25004d(0x26a)] = 'msg_' + _0x46c0ef[_0x25004d(0x782)]; const _0xbc0aa6 = 'cover_placeholder_' + _0x46c0ef[_0x25004d(0x782)]; let _0x532425 = _0x25004d(0x9c9) + _0x72f264 + _0x25004d(0x1a3) + _0xbc0aa6 + _0x25004d(0x8f4); _0x444923[_0x25004d(0x16c)] = _0x25004d(0xb51) + _0x532425 + _0x25004d(0x34a) + _0x46c0ef[_0x25004d(0x6d1)] + _0x25004d(0x513) + _0x46c0ef['artist'] + _0x25004d(0x912) + (_0x46c0ef[_0x25004d(0x642)] ? '▶' : '⚠') + _0x25004d(0x45e), _0x9e19a0[_0x25004d(0x8ce)](_0x444923), setTimeout(() => { const _0x3479f4 = _0x25004d, _0x552419 = document['getElementById'](_0xbc0aa6); if (!_0x552419) return; if (_0x46c0ef[_0x3479f4(0x6b1)]) _0x262fce(_0x46c0ef[_0x3479f4(0x6b1)])['then'](_0x42245b => { const _0x2b3603 = _0x3479f4; if (_0x42245b) _0x552419[_0x2b3603(0x400)] = URL[_0x2b3603(0x97d)](_0x42245b); }); else _0x46c0ef[_0x3479f4(0x511)] && (_0x552419[_0x3479f4(0x400)] = _0x46c0ef[_0x3479f4(0x511)]); }, 0x0), _0x46c0ef['playableUrl'] && (_0x25004d(0x9b5) === _0x25004d(0x9b5) ? _0x444923[_0x25004d(0xb66)]('click', function () { const _0x308cdf = _0x25004d; if (_0x308cdf(0xbcc) !== _0x308cdf(0xbcc)) { const _0x170736 = _0x995472[_0x308cdf(0x93e)](_0x308cdf(0xb4b), _0x308cdf(0x2b8)), _0x3a045b = _0x170736[_0x308cdf(0x92c)](_0x308cdf(0xb4b)), _0x5ef35e = _0x3a045b[_0x308cdf(0x982)]({ 'id': _0x156d39, 'blob': _0x17c7bf }); _0x5ef35e['onsuccess'] = () => _0x589a77(_0x5ef35e[_0x308cdf(0xb7b)]), _0x5ef35e['onerror'] = () => _0x10f9e7(_0x5ef35e[_0x308cdf(0x208)]); } else { const _0x49f130 = document['getElementById']('audio-player'), _0x157093 = document[_0x308cdf(0x61a)](_0x308cdf(0x669)), _0xa0d63 = this[_0x308cdf(0x94b)](_0x308cdf(0x5be)), _0x4efc4e = _0x49f130[_0x308cdf(0x400)][_0x308cdf(0x7a3)](_0x46c0ef[_0x308cdf(0x642)]) && !_0x49f130[_0x308cdf(0x24b)]; _0x157093['forEach'](_0x419e8d => { const _0x32b30e = _0x308cdf; if (_0x32b30e(0x6e5) === _0x32b30e(0x6e5)) _0x419e8d !== _0xa0d63 && (_0x419e8d['textContent'] = '▶'); else { const _0x57f76f = _0x510042[_0x32b30e(0x9ba)] || _0x32b30e(0x135); return !_0x2ff702[_0x57f76f] && (_0x5a9a6a[_0x57f76f] = []), _0x43d009[_0x57f76f][_0x32b30e(0xb49)](_0x816bac), _0x1eaffb; } }); !_0x4efc4e && (_0x308cdf(0x354) !== 'GYGIm' ? _0x127a85(_0xd9d012, _0x41c8b0, !![]) : document['getElementById'](_0x308cdf(0x7ec))['pause']()); if (_0x4efc4e) _0x49f130[_0x308cdf(0x37d)](), _0xa0d63[_0x308cdf(0x948)] = '▶'; else { if (_0x308cdf(0x9c5) !== 'KaEkX') _0x49f130[_0x308cdf(0x400)] = _0x46c0ef['playableUrl'], _0x49f130[_0x308cdf(0xbc9)](), _0xa0d63[_0x308cdf(0x948)] = '❚❚'; else { if (_0x1c2bb2) _0x25141c(_0x5a0650); } } } }) : _0x426037 = _0x29f165[_0x25004d(0x9b6)]); } else { if (_0x3dd6fe) { if (_0x25004d(0x8bf) !== _0x25004d(0x8bf)) _0x268e10[_0x25004d(0x147)] = _0x1f33bf[_0x25004d(0x75e)][0x0]?.['id'] || null; else { const _0x43d75d = document[_0x25004d(0xa51)]('p'); _0x43d75d[_0x25004d(0x16c)] = _0x3dd6fe, _0x43d75d['style'][_0x25004d(0x461)] = '0', _0x9e19a0[_0x25004d(0x8ce)](_0x43d75d); } } } } } } } _0x4e6693 === 'user' ? _0x25004d(0x51f) !== _0x25004d(0x633) ? (_0x53f1f2['appendChild'](_0x9e19a0), _0x53f1f2['appendChild'](_0x2e497f)) : (_0x40e6d6 = _0x3df29f[_0x25004d(0xa51)](_0x25004d(0x54f)), _0x1d8fbe[_0x25004d(0xa5e)] = 'typing-indicator', _0x42f326['textContent'] = _0x25004d(0x9ae), _0x119909['getElementById'](_0x25004d(0x5c0))['appendChild'](_0x35f5cc)) : _0x25004d(0x9db) === _0x25004d(0x9db) ? (_0x53f1f2[_0x25004d(0x8ce)](_0x2e497f), _0x53f1f2[_0x25004d(0x8ce)](_0x9e19a0)) : (_0x501e4a['isGenerating'] && _0x14f2f7[_0x25004d(0x4cb)] && (_0xd731d5['log'](_0x25004d(0x140)), _0x341f26[_0x25004d(0x4cb)][_0x25004d(0x725)]('User\x20cancelled'), _0x4f13e3[_0x25004d(0x4cb)] = null), _0x30e9d6[_0x25004d(0xaa7)] = ![], _0xf344b2(![])); _0x5bb2ba[_0x25004d(0x8ce)](_0x53f1f2); const _0x55c826 = document[_0x25004d(0xa51)]('div'); return _0x55c826['className'] = _0x25004d(0x782), _0x55c826['textContent'] = _0x15373f(_0x46c0ef[_0x25004d(0x782)]), _0x5bb2ba[_0x25004d(0x8ce)](_0x55c826), _0x3d52c1[_0x25004d(0x8ce)](_0x5bb2ba), _0x5bb2ba; } let _0x490215 = null; function _0x325fb4(_0x180104) { const _0x3246c4 = _0x1c58bc; if (_0x3246c4(0x79e) !== _0x3246c4(0x46f)) { if (window['getSelection']()['toString']() || _0x180104[_0x3246c4(0x6a3)] !== 0x0) { if (_0x3246c4(0x8a1) === _0x3246c4(0x8a1)) return; else _0x419b35 && (_0x57545e[_0x3246c4(0x819)]['display'] = _0x3246c4(0xb39)); } const _0x4bd7c6 = _0x180104[_0x3246c4(0xb6a)][_0x3246c4(0x4b4)]('.message-container'), _0x46c927 = _0x180104[_0x3246c4(0xb6a)][_0x3246c4(0x4b4)]('.no-action-modal'); if (!_0x4bd7c6 || _0x46c927) return; const _0x2da68c = parseInt(_0x4bd7c6[_0x3246c4(0x2d1)][_0x3246c4(0xb38)], 0xa); if (isNaN(_0x2da68c)) return; const _0x52783b = () => { const _0xaf3f3 = _0x3246c4; if ('btnuq' !== _0xaf3f3(0x745)) { if (_0x409bc7[_0xaf3f3(0xa2f)][_0xaf3f3(0x1ea)] === 0x0) return; _0x1d01d1[_0xaf3f3(0x11d)] = (_0x42e814[_0xaf3f3(0x11d)] + 0x1) % _0x4f6671[_0xaf3f3(0xa2f)]['length']; const _0x51cb31 = _0x2529b3['musicPlaylist'][_0x5ec461[_0xaf3f3(0x11d)]]['id']; _0xe110b0(_0x51cb31, _0x8d5dd1['musicPlaylist'][_0xaf3f3(0x3c4)](_0x495c24 => _0x495c24['id'])); } else clearTimeout(_0x490215), document[_0xaf3f3(0x57f)](_0xaf3f3(0xae8), _0x52783b), document[_0xaf3f3(0x57f)](_0xaf3f3(0x855), _0x52783b), document[_0xaf3f3(0x57f)]('touchcancel', _0x52783b), document['removeEventListener'](_0xaf3f3(0x5b4), _0x52783b); }, _0x4af936 = () => { const _0x358478 = _0x3246c4; _0x52783b(), _0x490215 = setTimeout(() => { _0x137f82(_0x2da68c); }, 0x258), document[_0x358478(0xb66)](_0x358478(0xae8), _0x52783b), document[_0x358478(0xb66)](_0x358478(0x855), _0x52783b), document[_0x358478(0xb66)](_0x358478(0x122), _0x52783b), document[_0x358478(0xb66)]('touchmove', _0x52783b); }; _0x4af936(); } else _0x2ade52[_0x3246c4(0x43a)](); } const _0x1ca893 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x7fa)); _0x1ca893 && (_0x1c58bc(0xb0f) === 'RBfxk' ? (_0x1983eb[_0x1c58bc(0x948)] = _0x1c58bc(0x71e), _0x2f4de4['value'] = '', _0x3228f5[_0x1c58bc(0x82f)] = '好友圈\x20' + (_0x2aab30[_0x1c58bc(0x554)][_0x1c58bc(0x1ea)] + 0x1), _0x547dd8['value'] = _0xb0ed0f['activeUserProfileId'], _0x5f5687['style'][_0x1c58bc(0x974)] = 'none') : (_0x1ca893[_0x1c58bc(0xb66)](_0x1c58bc(0xae3), _0x325fb4), _0x1ca893['addEventListener'](_0x1c58bc(0x5c6), _0x325fb4, { 'passive': ![] }), _0x1ca893[_0x1c58bc(0xb66)](_0x1c58bc(0xaed), _0x434f02 => _0x434f02[_0x1c58bc(0x90a)]()))); function _0x1f769d() { const _0x21bd0f = _0x1c58bc; if (_0x21bd0f(0xa9e) !== _0x21bd0f(0x42a)) { const _0x203dfb = _0x5c10dc(); if (!_0x203dfb) { _0x4d1fc6[_0x21bd0f(0x948)] = _0x21bd0f(0x508); return; } if (_0x203dfb[_0x21bd0f(0x1a7)] === 'private') { const _0x1d2924 = _0x132ad2(_0x203dfb[_0x21bd0f(0x402)][0x0]); _0x4d1fc6[_0x21bd0f(0x948)] = _0x1d2924 ? _0x1d2924[_0x21bd0f(0xa6a)] : '未知角色'; } else _0x4d1fc6[_0x21bd0f(0x948)] = _0x203dfb['name'] || _0x21bd0f(0xbe3) + _0x203dfb[_0x21bd0f(0x402)]['length'] + ')'; } else try { const _0x57d4ff = _0x4b7014['parse'](_0x49216d), _0x45ae8e = { ..._0x470c3b }, _0x306d88 = { ..._0x45ae8e, ..._0x57d4ff }; _0x306d88[_0x21bd0f(0x8cd)] = { ..._0x45ae8e['preferences'], ..._0x57d4ff[_0x21bd0f(0x8cd)] || {} }, _0x306d88['apiSettings'] = { ..._0x45ae8e[_0x21bd0f(0x780)], ..._0x57d4ff[_0x21bd0f(0x780)] || {} }, _0x547a71[_0x21bd0f(0xb85)](_0x3a5b3f, _0x306d88); } catch (_0x517096) { _0x445da9[_0x21bd0f(0x208)](_0x21bd0f(0xb0d), _0x517096), _0x3260c4[_0x21bd0f(0x1fa)](_0x21bd0f(0x233)); } } function _0x136ac0(_0x11e755) { const _0x85a4d4 = _0x1c58bc; if (_0x85a4d4(0x144) !== 'PKYlE') { const _0x44225d = _0x106ddc['getElementById']('lock-screen-overlay'); _0x44225d && (_0x44225d[_0x85a4d4(0x9c4)][_0x85a4d4(0x6e1)](_0x85a4d4(0x7ea)), _0x44225d[_0x85a4d4(0x819)][_0x85a4d4(0xa8f)] = '', _0x44225d[_0x85a4d4(0x819)]['opacity'] = ''); } else { const _0x58decc = document[_0x85a4d4(0x94b)](_0x85a4d4(0x4ed)); _0x58decc && _0x58decc[_0x85a4d4(0x6e1)](); const _0x5546c7 = document[_0x85a4d4(0x94b)](_0x85a4d4(0xba6)); if (_0x5546c7 && (_0x5546c7['id'] === _0x85a4d4(0x4b2) || _0x5546c7['id'] === _0x85a4d4(0x848))) _0x31b43b(); else { const _0x5500b4 = document['querySelectorAll'](_0x85a4d4(0x19e)); _0x5500b4[_0x85a4d4(0x4ac)](_0x529e78 => _0x529e78[_0x85a4d4(0x6e1)]()); } } } function _0x5cd6df() { const _0x21b6bc = _0x1c58bc; if (_0x21b6bc(0xb09) === _0x21b6bc(0xb09)) _0x2c45d7[_0x21b6bc(0xaa7)] && _0x2c45d7['currentAbortController'] && (console[_0x21b6bc(0x905)]('用户操作中断了\x20AI\x20响应。'), _0x2c45d7[_0x21b6bc(0x4cb)][_0x21b6bc(0x725)](_0x21b6bc(0x43d)), _0x2c45d7[_0x21b6bc(0x4cb)] = null), _0x2c45d7['isGenerating'] = ![], _0x136ac0(![]); else return _0x302b1d(_0x2152a6)[_0x21b6bc(0xa0d)](_0x15ebe9 => _0x15ebe9['blob']()); } function _0x5c10dc() { const _0x228be7 = _0x1c58bc; return _0x2c45d7[_0x228be7(0x75e)]['find'](_0x1c4c07 => _0x1c4c07['id'] === _0x2c45d7['activeChatId']); } function _0x132ad2(_0x45ed85) { const _0x5d1e46 = _0x1c58bc; return _0x2c45d7['characters'][_0x5d1e46(0x128)](_0x3e4fc6 => _0x3e4fc6['id'] === _0x45ed85); } function _0x377854(_0x5e3eac) { const _0x51ac30 = _0x1c58bc; _0x2c45d7[_0x51ac30(0xb76)] = _0x2c45d7[_0x51ac30(0xb76)][_0x51ac30(0x662)](_0x38cc65 => _0x38cc65['id'] !== _0x5e3eac), _0x2c45d7[_0x51ac30(0x75e)][_0x51ac30(0x4ac)](_0x48cc4a => { const _0x3da33a = _0x51ac30; if (_0x48cc4a[_0x3da33a(0x1a7)] === 'group') { if (_0x3da33a(0xb86) === _0x3da33a(0xb86)) _0x48cc4a['participantIds'] = _0x48cc4a[_0x3da33a(0x402)][_0x3da33a(0x662)](_0x116f31 => _0x116f31 !== _0x5e3eac); else return _0x161f5b[_0x3da33a(0x353)][_0x3da33a(0x3c4)](_0x3dfba6 => typeof _0x3dfba6 === _0x3da33a(0x319) ? _0x3dfba6 : _0x3dfba6?.[_0x3da33a(0xa3a)])[_0x3da33a(0x662)](_0x58b938)[_0x3da33a(0xbe6)](_0x1acd5b); } }); const _0x1231b6 = _0x2c45d7[_0x51ac30(0x75e)]['find'](_0x338319 => _0x338319[_0x51ac30(0x1a7)] === _0x51ac30(0x639) && _0x338319[_0x51ac30(0x402)]['includes'](_0x5e3eac)); _0x1231b6 && _0x570a10(_0x1231b6['id']), _0x2c45d7[_0x51ac30(0x75e)] = _0x2c45d7[_0x51ac30(0x75e)][_0x51ac30(0x662)](_0x55187b => _0x55187b[_0x51ac30(0x1a7)] !== _0x51ac30(0x62a) || _0x55187b[_0x51ac30(0x402)]['length'] > 0x1), _0x3ac55e(), _0x2446f8(); } function _0x570a10(_0x1f622b) { const _0x425a0c = _0x1c58bc; _0x2c45d7[_0x425a0c(0x75e)] = _0x2c45d7[_0x425a0c(0x75e)][_0x425a0c(0x662)](_0x30abc9 => _0x30abc9['id'] !== _0x1f622b); try { if (_0x425a0c(0x162) === _0x425a0c(0x162)) localStorage[_0x425a0c(0x1fa)](_0x425a0c(0x199) + _0x1f622b); else { const _0x410b2e = new _0x230d02(_0x3d696d[_0x425a0c(0x782)]), _0x55d850 = _0x6518b8(_0x410b2e); _0x44269d += '-\x20**你最后一次活动是在**:\x20' + _0x55d850 + '\x0a'; const _0x3e1e61 = _0x580287[_0x425a0c(0xa4a)](), _0x47ed10 = _0x410b2e[_0x425a0c(0xa4a)](), _0x297612 = new _0x13853a(); _0x297612[_0x425a0c(0x6bf)](_0x3ae40e[_0x425a0c(0x41f)]() - 0x1); const _0x166f24 = _0x297612[_0x425a0c(0xa4a)](); if (_0x3e1e61 === _0x47ed10) { const _0x54c45f = (_0x3fe0cd - _0x410b2e) / (0x3e8 * 0x3c); _0x433554 += '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a'; } else { if (_0x166f24 === _0x47ed10) _0xecfbbf += '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a'; else { const _0x4fb602 = _0x11416b[_0x425a0c(0x691)]((_0xfc46a8 - _0x410b2e) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x25004c += '-\x20**状态提示**:\x20你已经有\x20' + _0x4fb602 + _0x425a0c(0x219); } } } } catch (_0x331d31) { console[_0x425a0c(0x208)](_0x425a0c(0x75f) + _0x1f622b, _0x331d31); } _0x2c45d7[_0x425a0c(0x147)] === _0x1f622b && (_0x425a0c(0x92d) !== 'DlrtV' ? (_0x2c45d7[_0x425a0c(0x147)] = _0x2c45d7[_0x425a0c(0x75e)][0x0]?.['id'] || null, _0x120b4c(_0x2c45d7['activeChatId'])) : _0x1f2843(![])), _0x3ac55e(); } async function _0x120b4c(_0x3114e2) { const _0x1a4507 = _0x1c58bc; if (_0x1a4507(0x78f) !== _0x1a4507(0x78f)) _0x7a538c(), _0x58ac17[_0x1a4507(0x1ef)] = [], _0x286f73(); else { _0x2c45d7['activeChatId'] !== _0x3114e2 && (_0x5cd6df(), _0x2c45d7[_0x1a4507(0x548)] = 0x64); if (!_0x3114e2) { _0x2c45d7['activeChatId'] = null, _0x3ac55e(), _0x2c9e04(![]), document[_0x1a4507(0xad1)]('chat-view-pane')[_0x1a4507(0x819)][_0x1a4507(0xbe4)] = ''; return; } _0x2c45d7[_0x1a4507(0x147)] = _0x3114e2, _0x3ac55e(), _0x1f769d(), _0x4390c3[_0x1a4507(0x16c)] = '', _0x4ded3c(!![], '稍微有点卡了，可以尝试清空聊天记录了！记得总结丢世界书。非强制性，只是手机会有点卡，想继续聊下去也可以。'), setTimeout(async () => { const _0x1c728f = _0x1a4507; try { if ('yCWiB' === _0x1c728f(0xac0)) { _0x56505b(); const _0x5c741e = _0x5c10dc(), _0x27108a = document['getElementById'](_0x1c728f(0x5c0)); let _0x41a6fe = null; if (_0x5c741e) { if (_0x5c741e[_0x1c728f(0x1a7)] === _0x1c728f(0x639)) { if (_0x1c728f(0x95d) !== _0x1c728f(0x95d)) _0x282fda[_0x1c728f(0x400)] = _0x2381a0[_0x1c728f(0x97d)](_0x63aa3), _0x413d0d[_0x1c728f(0x819)]['display'] = 'block'; else { const _0x8c2d1f = _0x5c741e['participantIds'][0x0]; _0x3382a1(_0x8c2d1f), _0x41a6fe = await _0x262fce('char_wallpaper_' + _0x8c2d1f); } } else _0x1c728f(0x54d) === _0x1c728f(0x54d) ? _0x41a6fe = await _0x262fce('group_bg_' + _0x5c741e['id']) : (_0x48c81a(), _0x40b7b0()); _0x41a6fe ? (_0x27108a[_0x1c728f(0x819)][_0x1c728f(0xbe4)] = 'url(\x27' + URL[_0x1c728f(0x97d)](_0x41a6fe) + '\x27)', _0x27108a[_0x1c728f(0x819)][_0x1c728f(0x45f)] = _0x1c728f(0x696), _0x27108a[_0x1c728f(0x819)][_0x1c728f(0xba5)] = _0x1c728f(0x4f3)) : _0x27108a[_0x1c728f(0x819)]['backgroundImage'] = ''; } _0xd1d472(); } else _0x5864c1(![]), _0x101238[_0x1c728f(0xaa7)] = ![]; } catch (_0x537f95) { if (_0x1c728f(0x8ed) === _0x1c728f(0x6df)) { let _0x1db265 = _0x3ba83f['getElementById'](_0x1c728f(0x1da) + _0x36c5bd['id']); !_0x1db265 && (_0x1db265 = _0x35a1fc[_0x1c728f(0xa51)](_0x1c728f(0x819)), _0x1db265['id'] = _0x1c728f(0x1da) + _0x487029['id'], _0x32b433[_0x1c728f(0x2e7)][_0x1c728f(0x8ce)](_0x1db265)); const _0x255c6b = _0xb0b96d[_0x1c728f(0x865)], _0x137984 = _0x255c6b[_0x1c728f(0x4db)](/\.bubble\.sent/g, _0x1c728f(0x173) + _0x40b653['id'] + _0x1c728f(0x160))[_0x1c728f(0x4db)](/\.bubble\.received/g, _0x1c728f(0x173) + _0x32c641['id'] + _0x1c728f(0x7a5)); _0x1db265['innerHTML'] = _0x137984; } else console[_0x1c728f(0x208)](_0x1c728f(0xb24), _0x537f95), _0x18f071(_0x1c728f(0xb4f) + _0x537f95[_0x1c728f(0x80d)]); } finally { if ('CshxK' !== 'CshxK') { _0x1f8d1c('说了要\x20.ttf\x20文件，你是听不懂吗？'); return; } else _0x4ded3c(![]); } }, 0x32); } } async function _0x194e50() { const _0xde48d8 = _0x1c58bc; if (_0x2c45d7[_0xde48d8(0xaa7)]) { if (_0xde48d8(0x799) === _0xde48d8(0x7f3)) !_0x392746 && (_0x150088 = _0x30feca[_0xde48d8(0x37b)] || _0x97564), _0x1ae80e = _0x1d7a10[_0xde48d8(0xa6a)] || _0xde48d8(0x325), _0x2f3638 = _0x29f170['remark'] || '私聊'; else { _0x18f071(_0xde48d8(0x1e8)); return; } } const _0x9213df = _0x2c45d7[_0xde48d8(0x1ef)]; if (_0x9213df[_0xde48d8(0x1ea)] === 0x0) return; let _0x30318a = -0x1; for (let _0x3cbc17 = _0x9213df[_0xde48d8(0x1ea)] - 0x1; _0x3cbc17 >= 0x0; _0x3cbc17--) { if (_0x9213df[_0x3cbc17][_0xde48d8(0x232)] === _0xde48d8(0xa02)) { if (_0xde48d8(0x6fa) !== _0xde48d8(0x6fa)) _0x266b87['error'](_0xde48d8(0x32f), _0x1db3f6), _0x559c1d('导出失败了，哼:\x20' + _0x199c6d[_0xde48d8(0x80d)]); else { _0x30318a = _0x3cbc17; break; } } } if (_0x30318a === -0x1 || _0x30318a === _0x9213df[_0xde48d8(0x1ea)] - 0x1) { if (_0xde48d8(0xb50) !== 'bfwhK') _0x5b138c(_0xde48d8(0x82b)); else { _0x18f071(_0xde48d8(0x221)); return; } } _0x9213df[_0xde48d8(0x1d7)](_0x30318a + 0x1), _0x2c45d7[_0xde48d8(0x170)] = [], _0x1892f0(), _0x518ec8(), _0x4b49ff(_0x2c45d7['activeMeetingCharId']), setTimeout(() => { const _0x120004 = _0xde48d8; if (_0x120004(0xb8d) === _0x120004(0xb8d)) _0x4ce144(); else { _0x5a530c(_0x120004(0x221)); return; } }, 0x64); } async function _0x491681() { const _0x486b03 = _0x1c58bc; if (_0x486b03(0x286) !== _0x486b03(0x39c)) { if (_0x2c45d7[_0x486b03(0xaa7)]) { _0x18f071('正在生成中，请稍候...'); return; } const _0x54d59f = _0x2c45d7[_0x486b03(0x1ef)]; if (_0x54d59f['length'] === 0x0) return; let _0x312ba3 = -0x1; for (let _0x3836ea = _0x54d59f[_0x486b03(0x1ea)] - 0x1; _0x3836ea >= 0x0; _0x3836ea--) { if ('apyoM' !== _0x486b03(0x773)) { if (_0x54d59f[_0x3836ea][_0x486b03(0x232)] === _0x486b03(0xa02)) { if (_0x486b03(0xa8b) === _0x486b03(0x23b)) _0x302b91[_0x486b03(0x948)] = '❚❚'; else { _0x312ba3 = _0x3836ea; break; } } } else _0x3a2364[_0x486b03(0x9c1)] = ![], _0x14f22e(); } if (_0x312ba3 === -0x1 || _0x312ba3 === _0x54d59f['length'] - 0x1) { _0x18f071('还没有我的回复可以重新生成哦。'); return; } _0x54d59f['splice'](_0x312ba3 + 0x1), _0x1892f0(), _0x31b43b(), setTimeout(() => { _0x4ce144(); }, 0x64); } else _0x4d2361[_0x486b03(0xb49)](_0xe2d6f7); } function _0xb57871(_0x56127d = null) { const _0x55dac5 = _0x1c58bc; if (_0x55dac5(0x664) === 'OoGQW') _0x1d34d0[_0x55dac5(0x16c)] += _0x55dac5(0x2de) + _0x203d8c + _0x55dac5(0xa3c); else { const _0x446b63 = _0x56127d ?? _0x267304[_0x55dac5(0x82f)][_0x55dac5(0x471)](); if (_0x446b63 === '' || !_0x2c45d7[_0x55dac5(0x147)]) return; const _0x4d7795 = document['querySelector']('.screen.active'), _0x5e7882 = _0x4d7795['id'] === _0x55dac5(0x4b2), _0x336add = { 'role': _0x55dac5(0xa02), 'content': _0x446b63, 'timestamp': Date[_0x55dac5(0x7e3)](), 'isOffline': _0x5e7882 }; _0x2c45d7[_0x55dac5(0x38c)] && (_0x336add[_0x55dac5(0x96b)] = { ..._0x2c45d7[_0x55dac5(0x38c)] }); _0x2c45d7['conversationHistory']['push'](_0x336add); const _0x153ac6 = _0xb0fc81(_0x336add, _0x2c45d7['conversationHistory'][_0x55dac5(0x1ea)] - 0x1); _0x153ac6 && (_0x4390c3[_0x55dac5(0x889)] = _0x4390c3['scrollHeight']), _0x1892f0(), _0x267304[_0x55dac5(0x82f)] = '', _0x32e9f4(); } } function _0x72d8e4(_0x1f41fa) { const _0x358f9 = _0x1c58bc; if ('Lmmoe' !== _0x358f9(0x6ea)) { if (!_0x1f41fa || !_0x2c45d7[_0x358f9(0x147)]) return; const _0x34818e = { 'role': _0x358f9(0xa02), 'content': _0x358f9(0x61d) + _0x1f41fa[_0x358f9(0xa6a)] + ']', 'displayUrl': _0x1f41fa[_0x358f9(0x79c)], 'timestamp': Date[_0x358f9(0x7e3)]() }; _0x2c45d7[_0x358f9(0x1ef)][_0x358f9(0xb49)](_0x34818e), _0xb0fc81(_0x34818e, _0x2c45d7[_0x358f9(0x1ef)][_0x358f9(0x1ea)] - 0x1), _0x1892f0(), _0x223017['classList']['remove'](_0x358f9(0x944)); } else { const _0x21396f = _0xc97066[_0x358f9(0x39b)](_0x4c1207[_0x358f9(0x905)] || [])['replace'](/'/g, _0x358f9(0xa19))[_0x358f9(0x4db)](/"/g, _0x358f9(0x280)), _0x4e4cee = _0x3f97a1[_0x358f9(0xb87)] || _0x358f9(0xa2e); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20' + (_0x2780e6 < _0x138a3e[_0x358f9(0x1ea)] - 0x1 ? _0x358f9(0x6ac) : '') + _0x358f9(0x7f9) + _0x21396f + '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27' + _0x4e4cee + _0x358f9(0x165) + _0x1fb4a9 + _0x358f9(0x254) + _0x4e4cee[_0x358f9(0xa59)](0x0) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x4e4cee + _0x358f9(0x90f) + (_0x42b3df[_0x358f9(0x431)] || '') + _0x358f9(0x853); } } async function _0x985f4e(_0x5c89ab) { const _0x94bfe0 = _0x1c58bc, _0x39a626 = _0x5c89ab[_0x94bfe0(0xb6a)][_0x94bfe0(0xb1f)][0x0]; if (!_0x39a626 || !_0x2c45d7[_0x94bfe0(0x147)]) return; _0x4ded3c(!![], _0x94bfe0(0x2a4)); try { if (_0x94bfe0(0x260) === _0x94bfe0(0x23e)) { _0x32511e(_0x94bfe0(0x92a)); return; } else { const _0x344f76 = await _0x41c1e8(_0x39a626, 0x320, 0.8, !![]), _0x46b289 = 'chat_image_' + Date['now'](); await _0x5941fe(_0x46b289, _0x344f76); const _0x4384c5 = _0x267304[_0x94bfe0(0x82f)][_0x94bfe0(0x471)](); _0x267304['value'] = ''; const _0x12c393 = { 'role': _0x94bfe0(0xa02), 'content': _0x4384c5, 'imageId': _0x46b289, 'timestamp': Date[_0x94bfe0(0x7e3)]() }; _0x2c45d7[_0x94bfe0(0x1ef)][_0x94bfe0(0xb49)](_0x12c393), _0xb0fc81(_0x12c393, _0x2c45d7[_0x94bfe0(0x1ef)][_0x94bfe0(0x1ea)] - 0x1), _0x1892f0(); } } catch (_0xa87a66) { if ('aewcw' === _0x94bfe0(0x6e6)) _0x18f071(_0x94bfe0(0x29b) + _0xa87a66['message']); else { let _0x5e3128 = _0x484213[_0x94bfe0(0x538)]['find'](_0x3b31cf => _0x3b31cf['name'] === _0x285fd1[_0x94bfe0(0xa6a)] && (_0x3b31cf['categoryId'] || _0x94bfe0(0x135)) === (_0x75bde[_0x94bfe0(0x9ba)] || 'default')); if (_0x5e3128) _0xaa5e13[_0x94bfe0(0xb49)](_0x5e3128['id']); else { const _0x4c66ab = { 'id': 'wb_' + _0x5a6a89[_0x94bfe0(0x7e3)]() + '_' + _0x2d252d['random'](), 'name': _0x3d14ae['name'], 'content': _0x112b9b['content'], 'categoryId': _0x195bdd[_0x94bfe0(0x9ba)] || 'default' }; _0xf6c829['worldBooks'][_0x94bfe0(0xb49)](_0x4c66ab), _0x2d1441[_0x94bfe0(0xb49)](_0x4c66ab['id']); } } } finally { _0x4ded3c(![]), _0x5c89ab[_0x94bfe0(0xb6a)]['value'] = ''; } } async function _0x4631c9() { const _0x2a938f = _0x1c58bc; if (!_0x2c45d7[_0x2a938f(0x147)]) return; const _0x28413d = await _0x5a23de(); if (!_0x28413d) return; _0x18f071(_0x2a938f(0xa49)); try { if (_0x2a938f(0x29a) === _0x2a938f(0x8b5)) _0x441079[_0x2a938f(0x819)][_0x2a938f(0x838)] = _0x2a938f(0x608); else { const _0x50c056 = await _0x1cbaf1(_0x28413d[_0x2a938f(0x6d1)], _0x28413d[_0x2a938f(0x50a)]), _0xa18f7b = { 'role': _0x2a938f(0xa02), 'type': _0x2a938f(0xab5), 'content': _0x2a938f(0x5ed) + _0x28413d[_0x2a938f(0x6d1)] + _0x2a938f(0x66f) + _0x28413d[_0x2a938f(0x50a)] + ']', 'songName': _0x28413d[_0x2a938f(0x6d1)], 'artist': _0x28413d['artist'], 'coverUrl': _0x50c056[_0x2a938f(0x696)], 'playableUrl': _0x50c056[_0x2a938f(0x79c)], 'timestamp': Date['now']() }; _0x2c45d7[_0x2a938f(0x1ef)][_0x2a938f(0xb49)](_0xa18f7b), _0x1892f0(), _0xd1d472(); } } catch (_0x3c6411) { if (_0x2a938f(0x56b) !== _0x2a938f(0x56b)) return _0xdc970e(_0x2a938f(0x2f7) + _0x3a6f6c['id']); else console[_0x2a938f(0x208)]('用户分享音乐失败:', _0x3c6411), _0x18f071(_0x2a938f(0x16b) + _0x3c6411['message']); } } function _0x23092c(_0x3a779c, _0x254f38 = 0x78) { const _0x5cd7ec = _0x1c58bc; if (_0x5cd7ec(0xa34) === _0x5cd7ec(0x490)) _0x3ab4d6[_0x5cd7ec(0x208)](_0x5cd7ec(0x2f4), _0x597be2), _0x36fa0d = _0x1b964f; else { const _0x2ecfe5 = _0x1873d0 => { const _0x1b9e33 = _0x5cd7ec; if (_0x1b9e33(0x4d4) !== 'hQxFB') _0x2c1a34[_0x1b9e33(0x9ac)] = _0x555e69['id'], _0x3ff029(); else { if (_0x1873d0['role'] === 'user') return _0x2c45d7[_0x1b9e33(0x201)]?.[_0x1b9e33(0xa6a)] || 'User'; if (_0x1873d0['senderId']) { const _0xc5171 = _0x132ad2(_0x1873d0[_0x1b9e33(0x51a)]); return _0xc5171?.[_0x1b9e33(0xa6a)] || _0x1b9e33(0x58b); } if (_0x3a779c?.[_0x1b9e33(0x1a7)] === _0x1b9e33(0x639)) { if (_0x1b9e33(0x77a) !== 'rRKvE') _0x5a91d5[_0x1b9e33(0x208)]('导入角色卡失败:', _0xed1ee5), _0x2e58a2(_0x1b9e33(0x7db) + _0x4229cf[_0x1b9e33(0x80d)]); else { const _0x2653a8 = _0x132ad2(_0x3a779c['participantIds'][0x0]); return _0x2653a8?.['name'] || 'AI'; } } return _0x1b9e33(0x250); } }, _0x1a2034 = _0x2c45d7['conversationHistory'][_0x5cd7ec(0xa30)](-_0x254f38), _0x3e6ecb = []; for (const _0x4af9f2 of _0x1a2034) { if (_0x5cd7ec(0x358) !== 'DnjaG') { if (_0x4af9f2[_0x5cd7ec(0x480)]) _0x5cd7ec(0x45c) !== 'PyWlH' ? (_0x2f88fd[_0x5cd7ec(0x38c)] = null, _0x4f2d57[_0x5cd7ec(0x819)][_0x5cd7ec(0x974)] = 'none') : _0x3e6ecb[_0x5cd7ec(0xb49)]('[' + _0x2ecfe5(_0x4af9f2) + _0x5cd7ec(0x14c) + (_0x4af9f2['content']?.[_0x5cd7ec(0x604)](/：(.+?)]/)?.[0x1] || '表情') + ']'); else { if (_0x4af9f2[_0x5cd7ec(0x9b6)]) { const _0xeb3848 = _0x4af9f2[_0x5cd7ec(0xa3a)] ? '\x20' + _0x4af9f2[_0x5cd7ec(0xa3a)] : ''; _0x3e6ecb['push']('[' + _0x2ecfe5(_0x4af9f2) + _0x5cd7ec(0x9e2) + _0xeb3848); } else _0x4af9f2[_0x5cd7ec(0xa3a)] && _0x3e6ecb[_0x5cd7ec(0xb49)]('[' + _0x2ecfe5(_0x4af9f2) + ']\x20' + _0x4af9f2[_0x5cd7ec(0xa3a)]); } } else { _0xf713bc[_0x5cd7ec(0x75e)] = _0x300c77[_0x5cd7ec(0x75e)][_0x5cd7ec(0x662)](_0x33a72d => _0x33a72d['id'] !== _0x243b69); try { _0x1f79b7[_0x5cd7ec(0x1fa)](_0x5cd7ec(0x199) + _0x44f778); } catch (_0x1f6315) { _0x1ddb73[_0x5cd7ec(0x208)](_0x5cd7ec(0x75f) + _0x690545, _0x1f6315); } _0x463a68[_0x5cd7ec(0x147)] === _0xc73782 && (_0x5377c8[_0x5cd7ec(0x147)] = _0x873cbe[_0x5cd7ec(0x75e)][0x0]?.['id'] || null, _0x40a87a(_0x369739['activeChatId'])), _0x524dc9(); } } return _0x3e6ecb[_0x5cd7ec(0xae6)]('\x0a'); } } function _0xdee03e(_0x17d83f, _0x39a197) { const _0x425360 = _0x1c58bc; if (_0x425360(0x72e) !== _0x425360(0x72e)) { const _0xf75346 = _0x43dda9(_0x1b065d['senderId'] || _0x2406fe['activeMeetingCharId']); _0x315a22 = _0xf75346?.['name'] || '角色', _0x3c7fa2 = _0x425360(0x6f6); } else { if (!_0x17d83f || !_0x39a197) return null; const _0x58c386 = _0x39a197[_0x425360(0x604)](/@([^\s:：,，。!?]+)/); if (!_0x58c386) return null; const _0x1cfe37 = _0x58c386[0x1]['toLowerCase'](); for (const _0x100150 of _0x17d83f[_0x425360(0x402)]) { const _0x5ba6e9 = _0x132ad2(_0x100150); if (!_0x5ba6e9?.[_0x425360(0xa6a)]) continue; if (_0x5ba6e9[_0x425360(0xa6a)]['toLowerCase']() === _0x1cfe37) return _0x5ba6e9; if (_0x5ba6e9[_0x425360(0xa6a)][_0x425360(0x94d)]()['startsWith'](_0x1cfe37)) return _0x5ba6e9; } return null; } } function _0x3f590c(_0x516156) { const _0x4079b3 = _0x1c58bc; if ('NyFiW' === 'NyFiW') { const _0x241ced = _0x516156['indexOf']('{'), _0x47ff72 = _0x516156[_0x4079b3(0x916)]('}'); if (_0x241ced >= 0x0 && _0x47ff72 > _0x241ced) return _0x516156[_0x4079b3(0xa30)](_0x241ced, _0x47ff72 + 0x1); return _0x516156; } else !_0x466e42['contains'](_0x2f1f08[_0x4079b3(0xb6a)]) && _0x1169f7[_0x4079b3(0xb6a)] !== _0x37d264 && _0xc5de23[_0x4079b3(0xb6a)] !== _0x263a7e && _0x1da9ea[_0x4079b3(0x9c4)]['remove']('show'); } function _0x57af34(_0x20d32c, _0x5d1b79, _0x28884f) { const _0x5755dc = _0x1c58bc, _0x150fc4 = new Map(_0x5d1b79[_0x5755dc(0x3c4)](_0x25ff73 => [String(_0x25ff73['id']), _0x25ff73])), _0x20a9bf = _0x44b7c9 => String(_0x44b7c9 || '')['toLowerCase']()[_0x5755dc(0x4db)](/\s+/g, ''), _0x359682 = new Map(_0x5d1b79[_0x5755dc(0x3c4)](_0x46ceb9 => [_0x20a9bf(_0x46ceb9[_0x5755dc(0xa6a)]), _0x46ceb9])), _0x555e31 = new Set(_0x28884f), _0x3199f5 = { 'events': [] }; for (const _0x5228f6 of _0x20d32c?.[_0x5755dc(0x53c)] || []) { if (_0x5755dc(0x13c) !== _0x5755dc(0x13c)) _0x1ac24b[_0x5755dc(0x9c4)][_0x5755dc(0x6e1)](_0x5755dc(0x630)), _0x4d3882[_0x5755dc(0x9c4)][_0x5755dc(0x2ac)](_0x5755dc(0x630)), _0x386438(); else { const _0x47e8e7 = _0x5228f6[_0x5755dc(0x51a)] ?? _0x5228f6[_0x5755dc(0x32d)] ?? _0x5228f6[_0x5755dc(0x754)] ?? _0x5228f6[_0x5755dc(0x932)] ?? _0x5228f6[_0x5755dc(0x232)] ?? _0x5228f6[_0x5755dc(0xa6a)]; if (!_0x47e8e7) continue; let _0x28f960 = _0x150fc4['get'](String(_0x47e8e7)) || _0x359682['get'](_0x20a9bf(_0x47e8e7)); if (!_0x28f960) continue; const _0x377848 = (_0x5228f6[_0x5755dc(0x48e)] || _0x5228f6[_0x5755dc(0x1a7)] || _0x5755dc(0x4f1))[_0x5755dc(0x94d)](); if (_0x377848 === 'sticker') { const _0x22c34d = (_0x5228f6[_0x5755dc(0x3bd)] ?? _0x5228f6[_0x5755dc(0x4da)] ?? _0x5228f6[_0x5755dc(0x1c0)] ?? _0x5228f6[_0x5755dc(0x1bd)])?.[_0x5755dc(0x471)](); if (_0x22c34d && _0x555e31['has'](_0x22c34d)) _0x5755dc(0x373) === _0x5755dc(0x373) ? _0x3199f5[_0x5755dc(0x53c)][_0x5755dc(0xb49)]({ 'senderId': _0x28f960['id'], 'kind': 'sticker', 'sticker': _0x22c34d }) : _0xe42173[_0x5755dc(0xa48)](_0x5e2b2e => { const _0xd4a4e9 = _0x5755dc; _0x5e2b2e ? _0x10c386(_0x5e2b2e) : _0xee8e75(new _0x6da824(_0xd4a4e9(0x12a))); }, _0x29e240, _0x4e2c26); else { if (_0x5755dc(0x613) === _0x5755dc(0x7d9)) _0x3d4420[_0x5755dc(0x948)] = _0x2b4c03[_0x5755dc(0x8c8)](_0x494b0b)['map'](_0x2423b3 => _0x2423b3['parentElement'][_0x5755dc(0x948)][_0x5755dc(0x471)]())['join']('、'); else { const _0x385ded = String(_0x5228f6[_0x5755dc(0xa3a)] ?? _0x5228f6[_0x5755dc(0x4f1)] ?? '')['trim']() || '[sticker:' + (_0x22c34d || _0x5755dc(0x8f7)) + ']'; if (_0x385ded) _0x3199f5[_0x5755dc(0x53c)][_0x5755dc(0xb49)]({ 'senderId': _0x28f960['id'], 'kind': _0x5755dc(0x4f1), 'content': _0x385ded }); } } } else { if (_0x377848 === _0x5755dc(0xab5) && _0x5228f6[_0x5755dc(0x6d1)] && _0x5228f6['artist']) _0x3199f5['events'][_0x5755dc(0xb49)]({ 'senderId': _0x28f960['id'], 'kind': _0x5755dc(0xab5), 'songName': _0x5228f6['songName'], 'artist': _0x5228f6[_0x5755dc(0x50a)] }); else { if ('fvJyx' !== _0x5755dc(0x5e0)) { const _0xb61eba = String(_0x5228f6[_0x5755dc(0xa3a)] ?? _0x5228f6['text'] ?? _0x5228f6[_0x5755dc(0x80d)] ?? '')['trim'](); if (_0xb61eba) _0x3199f5['events'][_0x5755dc(0xb49)]({ 'senderId': _0x28f960['id'], 'kind': _0x5755dc(0x4f1), 'content': _0xb61eba }); } else { const _0xe45872 = _0x95a91e(_0x18cb48[_0x5755dc(0x557)][_0x5755dc(0xaee)]); _0xe45872 && (_0x256607 = _0x5755dc(0xb1a) + _0xe45872[_0x5755dc(0x37b)] + _0x5755dc(0x5ba) + _0xe45872[_0x5755dc(0xa6a)] + _0x5755dc(0x5c5) + _0x54dd69[_0x5755dc(0x557)][_0x5755dc(0x4f1)] + _0x5755dc(0xa3d)); } } } } } return _0x3199f5; } async function _0x212eaf(_0x46b0bd) { const _0x3b2e88 = _0x1c58bc; if (!_0x46b0bd || !Array[_0x3b2e88(0x460)](_0x46b0bd[_0x3b2e88(0x53c)]) || _0x46b0bd[_0x3b2e88(0x53c)][_0x3b2e88(0x1ea)] === 0x0) return; const _0x1d5ec1 = _0x3b72f9 => _0x3b72f9 + Math['floor'](Math[_0x3b2e88(0x278)]() * 0x190); let _0x455bff = 0x1f4; for (const _0x49d787 of _0x46b0bd['events']) { if (_0x3b2e88(0x768) === _0x3b2e88(0x768)) { await new Promise(_0x5c7ffc => setTimeout(_0x5c7ffc, _0x1d5ec1(_0x455bff))), _0x455bff = 0x2bc; const _0x91d1fc = _0x2c45d7[_0x3b2e88(0x1ef)]['at'](-0x1)?.['isOffline'] ?? ![], _0x257e97 = { 'role': 'assistant', 'senderId': _0x49d787['senderId'], 'timestamp': Date[_0x3b2e88(0x7e3)](), 'isOffline': _0x91d1fc }; if (_0x49d787[_0x3b2e88(0x48e)] === _0x3b2e88(0x504)) { if (_0x3b2e88(0xa9c) === _0x3b2e88(0xa9c)) { Object[_0x3b2e88(0xb85)](_0x257e97, { 'type': _0x3b2e88(0x504), 'content': _0x49d787[_0x3b2e88(0xa3a)] }), _0xb0fc81(_0x257e97, -0x1), _0x4390c3[_0x3b2e88(0x889)] = _0x4390c3[_0x3b2e88(0x291)]; continue; } else { const _0x476140 = _0x28bc56['linkedWorldBookIds'][_0x3b2e88(0x3c4)](_0x383e6a => _0x5480ac['worldBooks'][_0x3b2e88(0x128)](_0x389de9 => _0x389de9['id'] === _0x383e6a))[_0x3b2e88(0x662)](_0x515cad)[_0x3b2e88(0x3c4)](_0x271761 => _0x3b2e88(0xaea) + _0x271761[_0x3b2e88(0xa6a)] + '\x0a' + _0x271761[_0x3b2e88(0xa3a)])[_0x3b2e88(0xae6)](''); _0x476140 && (_0x10cf46 = _0x3b2e88(0x6b3) + _0x476140); } } if (_0x49d787[_0x3b2e88(0x48e)] === _0x3b2e88(0x3bd)) { const _0x367e08 = _0x9519d0[_0x3b2e88(0x128)](_0x2093cc => _0x2093cc['name'] === _0x49d787[_0x3b2e88(0x3bd)]); _0x367e08 && (Object[_0x3b2e88(0xb85)](_0x257e97, { 'content': '[AI发送了表情：' + _0x367e08['name'] + ']', 'displayUrl': _0x367e08[_0x3b2e88(0x79c)] }), _0x2c45d7[_0x3b2e88(0x1ef)][_0x3b2e88(0xb49)](_0x257e97), _0x1892f0(), _0xb0fc81(_0x257e97, _0x2c45d7['conversationHistory'][_0x3b2e88(0x1ea)] - 0x1), _0x4390c3[_0x3b2e88(0x889)] = _0x4390c3[_0x3b2e88(0x291)]); continue; } if (_0x49d787[_0x3b2e88(0x48e)] === 'music' && _0x49d787[_0x3b2e88(0x6d1)] && _0x49d787[_0x3b2e88(0x50a)]) { const { songName: _0xe0a561, artist: _0x56318a } = _0x49d787; Object[_0x3b2e88(0xb85)](_0x257e97, { 'type': 'music', 'content': _0x3b2e88(0x181) + _0xe0a561 + _0x3b2e88(0x66f) + _0x56318a + ']', 'songName': _0xe0a561, 'artist': _0x56318a }); try { if ('KGUSX' === _0x3b2e88(0x491)) { const _0x16b692 = await _0x1cbaf1(_0xe0a561, _0x56318a); _0x257e97[_0x3b2e88(0x511)] = _0x16b692[_0x3b2e88(0x696)], _0x257e97[_0x3b2e88(0x642)] = _0x16b692[_0x3b2e88(0x79c)]; } else _0x538369 += '-\x20' + _0x4f7166[_0x3b2e88(0x39b)](_0x50aa6c) + '\x0a'; } catch (_0x93680d) { } _0x2c45d7[_0x3b2e88(0x1ef)][_0x3b2e88(0xb49)](_0x257e97), _0x1892f0(), _0x31b43b(); continue; } if (_0x49d787['kind'] === _0x3b2e88(0x4f1)) { const _0x163b1f = (_0x49d787[_0x3b2e88(0xa3a)] || '')[_0x3b2e88(0x604)](/^\[引用\|(.*?)\|(.*?)\]\s*/); let _0x1d9ec3 = _0x49d787[_0x3b2e88(0xa3a)] || ''; if (_0x163b1f) { if (_0x3b2e88(0x439) !== _0x3b2e88(0x620)) _0x257e97[_0x3b2e88(0x96b)] = { 'sender': _0x163b1f[0x1]['trim'](), 'content': _0x163b1f[0x2][_0x3b2e88(0x471)]() }, _0x1d9ec3 = _0x49d787[_0x3b2e88(0xa3a)][_0x3b2e88(0x5cd)](_0x163b1f[0x0]['length'])[_0x3b2e88(0x471)](); else { _0x1e2aaf(_0x3b2e88(0x88e)); return; } } const _0x8df9f3 = _0x5f151f(_0x1d9ec3)['slice'](0x0, 0x3); for (let _0x7b52ca = 0x0; _0x7b52ca < _0x8df9f3[_0x3b2e88(0x1ea)]; _0x7b52ca++) { _0x7b52ca > 0x0 && (await new Promise(_0x5dde05 => setTimeout(_0x5dde05, _0x1d5ec1(0x190))), delete _0x257e97[_0x3b2e88(0x96b)]), _0x257e97[_0x3b2e88(0xa3a)] = _0x8df9f3[_0x7b52ca], _0x2c45d7[_0x3b2e88(0x1ef)]['push']({ ..._0x257e97 }), _0x1892f0(), _0x31b43b(); } } } else _0x17a9ee = { 'speaker': _0x23c808[_0x3b2e88(0xa6a)], 'line': _0x5d0bdb[_0x3b2e88(0xa3a)], 'emotion': _0x3b2e88(0x198) }; } } async function _0x16fbd2(_0x1434bd, { force: force = ![], delayMs: delayMs = 0x0 } = {}) { const _0x3b402a = _0x1c58bc; if (_0x3b402a(0x8ee) === _0x3b402a(0x8ee)) { await new Promise(_0x13bc68 => setTimeout(_0x13bc68, 0xa)); if (!_0x2c45d7['apiSettings']['endpoint'] || !_0x2c45d7[_0x3b402a(0x780)][_0x3b402a(0xa2d)] || !_0x2c45d7[_0x3b402a(0x780)][_0x3b402a(0x839)]) { if ('TgMxB' === _0x3b402a(0x598)) return _0x18f071('请先在\x22设置\x22中配置你的\x20API\x20信息。'), ![]; else _0x59d844[_0x3b402a(0x905)]('Creating\x20object\x20store:\x20music_library'), _0x1f4c76[_0x3b402a(0xa71)](_0x3b402a(0x57e), { 'keyPath': 'id' }); } const _0x310112 = _0x5c10dc(); if (!_0x310112 || !_0x1434bd) return ![]; const _0x13108c = _0x16e371(_0x310112['id']), _0x2efa50 = _0x2c45d7[_0x3b402a(0x1ef)]['at'](-0x1)?.[_0x3b402a(0x232)] === 'user'; if (!force && !_0x2efa50) return ![]; const _0x1a6c52 = _0x2c45d7['conversationHistory']['at'](-0x1)?.[_0x3b402a(0xa03)] ?? ![]; if (delayMs) await new Promise(_0x4c7d07 => setTimeout(_0x4c7d07, delayMs)); _0x1a6c52 ? document[_0x3b402a(0xad1)](_0x3b402a(0x213))[_0x3b402a(0x948)] = _0x3b402a(0xbd8) : _0x3b402a(0x55c) !== _0x3b402a(0x55c) ? _0x1bd6da[_0x3b402a(0x1fa)](_0x3b402a(0x199) + _0x4aca9e) : _0x136ac0(!![]); let _0x13e87f = ''; const _0x1f76a2 = _0x5c10dc(); if (_0x1f76a2?.[_0x3b402a(0x7ba)]?.[_0x3b402a(0x958)]) { const _0x4e7f0d = _0x1f76a2['activeListenSession'], _0x53d917 = await _0x401645(_0x4e7f0d[_0x3b402a(0x22c)]); if (_0x53d917 && _0x53d917[_0x3b402a(0x846)]) { if (_0x3b402a(0x8ba) === 'Jzqgp') { const _0x2ad5ab = _0x2225d2(_0x53d917[_0x3b402a(0x846)]); if (_0x2ad5ab[_0x3b402a(0x1ea)] > 0x0) { const _0x1f1554 = _0x3a3d7b[_0x3b402a(0x4d7)]; let _0x152012 = -0x1; for (let _0x32e395 = 0x0; _0x32e395 < _0x2ad5ab['length']; _0x32e395++) { if (_0x3b402a(0x4a5) !== _0x3b402a(0x4a5)) { const _0x3a0f3c = _0x22e52b[_0x3b402a(0xad1)](_0x3e36d8); _0x3a0f3c[_0x3b402a(0x16c)] = '', _0x5dc1d1['userProfiles']['forEach'](_0x4ff154 => { const _0x43682f = _0x3b402a, _0x184550 = _0x5ab9e9[_0x43682f(0xa51)](_0x43682f(0x964)); _0x184550['value'] = _0x4ff154['id'], _0x184550[_0x43682f(0x948)] = _0x4ff154[_0x43682f(0xa6a)], _0x3a0f3c[_0x43682f(0x8ce)](_0x184550); }); } else { if (_0x1f1554 >= _0x2ad5ab[_0x32e395]['time']) _0x152012 = _0x32e395; else break; } } const _0x2ad257 = _0x2ad5ab[_0x3b402a(0x3c4)]((_0x4c0bb3, _0x2d7351) => { const _0x11565d = _0x3b402a; if (_0x11565d(0xb5d) === _0x11565d(0xb5d)) { const _0xd1ad43 = _0x2d7351 === _0x152012 ? _0x11565d(0xad2) : ''; return '' + _0xd1ad43 + _0x4c0bb3[_0x11565d(0x4f1)]; } else _0x474b6f['src'] = _0x3bb43c['createObjectURL'](_0x1351dd), _0x3d711a[_0x11565d(0x819)][_0x11565d(0x838)] = 0x1; })[_0x3b402a(0xae6)]('\x0a'), _0x35c9c1 = _0x2ad5ab[_0x3b402a(0x3c4)](_0x31fbd4 => _0x31fbd4[_0x3b402a(0x4f1)])[_0x3b402a(0xae6)]('\x0a'), _0x528043 = _0x152012 > -0x1 ? _0x2ad5ab[_0x152012][_0x3b402a(0x4f1)] : _0x3b402a(0x380); _0x13e87f = ('\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20' + _0x4e7f0d[_0x3b402a(0x50a)] + _0x3b402a(0xab0) + _0x4e7f0d[_0x3b402a(0x6d1)] + _0x3b402a(0x84a) + _0x35c9c1 + _0x3b402a(0xb9e) + _0x528043 + _0x3b402a(0x7bf))[_0x3b402a(0x471)](); } } else _0x2ef993[_0x3b402a(0x819)]['position'] = _0x3b402a(0xaf5), _0x30d2c6[_0x3b402a(0x819)][_0x3b402a(0xaac)] = _0x3b402a(0x904), _0x454c84[_0x3b402a(0x819)][_0x3b402a(0xb12)] = '50%', _0x74139e[_0x3b402a(0x819)][_0x3b402a(0xa8f)] = _0x3b402a(0x146), _0x2df0f4[_0x3b402a(0x819)]['display'] = 'inline-block'; } } let _0x29d20b = '', _0x8beaa9 = ''; const _0x259e30 = _0x2c45d7[_0x3b402a(0x1ef)][_0x3b402a(0x1ea)]; if (_0x259e30 > 0x1) { if (_0x3b402a(0x41c) !== _0x3b402a(0x41c)) _0x222a84[_0x3b402a(0xa2d)] === 'Enter' && !_0x3b68f7['shiftKey'] && (_0x162f3d['preventDefault'](), _0x1cd1d1()); else { const _0x571a85 = _0x2c45d7[_0x3b402a(0x1ef)][_0x259e30 - 0x2], _0x131442 = _0x2c45d7[_0x3b402a(0x1ef)][_0x259e30 - 0x1]; if (_0x571a85[_0x3b402a(0xa03)] === ![] && _0x131442[_0x3b402a(0xa03)] === !![]) _0x8beaa9 = _0x3b402a(0xb6d) + _0x13108c['name'] + _0x3b402a(0x4ce); else _0x571a85[_0x3b402a(0xa03)] === !![] && _0x131442[_0x3b402a(0xa03)] === ![] && (_0x8beaa9 = '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“' + _0x13108c[_0x3b402a(0xa6a)] + '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。'); } } if (_0x1a6c52) { const _0x3124d2 = 'normal,\x20happy,\x20angry,\x20sad,\x20shy'; _0x29d20b = _0x3b402a(0x700) + _0x13108c[_0x3b402a(0xa6a)] + '”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从[' + _0x3124d2 + ']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“' + _0x1434bd[_0x3b402a(0xa6a)] + _0x3b402a(0x3cf) + _0x3124d2 + _0x3b402a(0x64a) + _0x3124d2 + _0x3b402a(0x68a); } else _0x3b402a(0x969); const { omniText: _0x220314 } = _0x5b1c3b(_0x1434bd['id'], _0x310112['id']), _0x19bdb5 = _0x345f9c(), _0x529fae = _0x20fbaa(_0x1434bd['id']), _0x297b66 = _0x5c845a(_0x1434bd['id']), _0x410f98 = await _0x26f65b(_0x1434bd['id']), _0x2bbe72 = typeof _0x5cd8c4 === _0x3b402a(0x319) ? _0x5cd8c4[_0x3b402a(0x9d9)](_0x3b402a(0x85d), _0x1434bd['name'])[_0x3b402a(0x9d9)](_0x3b402a(0x1cc), _0x13108c[_0x3b402a(0xa6a)] || '用户') : '', _0x3a4bf0 = _0x544f0c()[_0x3b402a(0x3c4)](_0x80ad60 => _0x80ad60[_0x3b402a(0xa6a)])[_0x3b402a(0xae6)](',\x20'); let _0x58d365 = ''; if (_0x1434bd[_0x3b402a(0x7ad)] && _0x1434bd[_0x3b402a(0x7ad)][_0x3b402a(0x1ea)] > 0x0) { if (_0x3b402a(0x949) === 'qMaxm') _0x5c7d9c = '未知角色', _0x1e524d = _0x3b402a(0x5f0); else { const _0x489ba7 = _0x1434bd[_0x3b402a(0x7ad)][_0x3b402a(0x3c4)](_0x5c0815 => _0x2c45d7[_0x3b402a(0x538)][_0x3b402a(0x128)](_0x5e9e48 => _0x5e9e48['id'] === _0x5c0815))[_0x3b402a(0x662)](Boolean)[_0x3b402a(0x3c4)](_0x18b213 => _0x3b402a(0x3a9) + _0x18b213[_0x3b402a(0xa6a)] + '\x0a' + _0x18b213[_0x3b402a(0xa3a)])[_0x3b402a(0xae6)](''); if (_0x489ba7) _0x58d365 = _0x3b402a(0x3a7) + _0x489ba7; } } const _0x14c0fd = _0x13108c[_0x3b402a(0x5d7)] ? _0x3b402a(0x85b) + _0x13108c[_0x3b402a(0xa6a)] + _0x3b402a(0x486) + _0x13108c[_0x3b402a(0x5d7)] : ''; let _0x5dc67d = ''; const _0x2f2334 = new Date(), _0xacfee5 = _0x3f9417(_0x1434bd['id']); _0x5dc67d = _0x3b402a(0xb02), _0x5dc67d += _0x3b402a(0xb2f) + _0x2f2334[_0x3b402a(0x2e3)](_0x3b402a(0x15b), { 'dateStyle': 'full', 'timeStyle': _0x3b402a(0x31b) }) + '\x0a'; if (_0xacfee5) { const _0x336f98 = new Date(_0xacfee5[_0x3b402a(0x782)]), _0x3a62de = _0x1ad990(_0x336f98); _0x5dc67d += _0x3b402a(0x635) + _0x3a62de + '\x0a'; const _0x3e5b26 = _0x2f2334[_0x3b402a(0xa4a)](), _0x3c92cd = _0x336f98[_0x3b402a(0xa4a)](), _0x15efa6 = new Date(); _0x15efa6['setDate'](_0x2f2334[_0x3b402a(0x41f)]() - 0x1); const _0x4e6353 = _0x15efa6['toDateString'](); if (_0x3e5b26 === _0x3c92cd) { const _0x188965 = (_0x2f2334 - _0x336f98) / (0x3e8 * 0x3c); if (_0x188965 < 0x3c) _0x3b402a(0x62e) !== _0x3b402a(0x326) ? _0x5dc67d += _0x3b402a(0xa50) : _0x15d5f0[_0x3b402a(0x815)] === _0x251f4a && (_0x5f3a21[_0x3b402a(0x815)] = _0x1a7e98[_0x3b402a(0x4d3)]); else { if (_0x3b402a(0x6fe) !== _0x3b402a(0x6fe)) { const { omniText: _0x189a4a } = _0x47bd89(_0x382c44['id'], null), _0x1fb398 = _0x5f2976(_0x181f68['id']), _0x42191d = _0x53110b[_0x3b402a(0x7ad)] && _0x3b864c[_0x3b402a(0x7ad)]['length'] > 0x0 ? _0x3b402a(0x1b3) + _0x40cf93[_0x3b402a(0xa6a)] + _0x3b402a(0x91e) + _0x4a2589['linkedWorldBookIds'][_0x3b402a(0x3c4)](_0x1b0f95 => _0x166447[_0x3b402a(0x538)][_0x3b402a(0x128)](_0x18b031 => _0x18b031['id'] === _0x1b0f95))['filter'](_0x4358ce)[_0x3b402a(0x3c4)](_0x171b19 => _0x3b402a(0x9a7) + _0x171b19['name'] + '\x0a' + _0x171b19[_0x3b402a(0xa3a)])['join']('') : ''; return '-\x20姓名:\x20' + _0x362f75[_0x3b402a(0xa6a)] + _0x3b402a(0x257) + _0x483018['id'] + '\x0a\x20\x20人设:\x20' + _0x1e4fe1[_0x3b402a(0x5d7)] + _0x3b402a(0xb83) + _0x189a4a + '\x0a' + _0x1fb398 + '\x0a' + _0x42191d; } else _0x5dc67d += '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概' + Math['round'](_0x188965 / 0x3c) + _0x3b402a(0x521); } } else { if (_0x4e6353 === _0x3c92cd) _0x5dc67d += _0x3b402a(0x11f); else { const _0x248d5d = Math[_0x3b402a(0x691)]((_0x2f2334 - _0x336f98) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x5dc67d += _0x3b402a(0x30f) + _0x248d5d + _0x3b402a(0xbab); } } } else _0x5dc67d += _0x3b402a(0x6de); const _0x4e500f = ('\x0a' + _0x29d20b + _0x3b402a(0x77b) + _0x1434bd['name'] + _0x3b402a(0x1de) + _0x1434bd[_0x3b402a(0xa6a)] + ':\x22\x20或\x22[' + _0x1434bd[_0x3b402a(0xa6a)] + ']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[' + _0x3a4bf0 + _0x3b402a(0x157) + _0x2bbe72 + '\x0a')['trim'](), _0x12ff18 = [{ 'role': _0x3b402a(0x5ff), 'content': _0x4e500f }], _0x31b334 = (_0x3b402a(0x58a) + (_0x1434bd['persona'] || _0x3b402a(0x8ad)) + '\x0a' + _0x14c0fd + '\x20\x0a' + _0x220314 + '\x0a' + _0x19bdb5 + '\x0a' + _0x529fae + '\x0a' + _0x297b66 + _0x3b402a(0x8b8) + _0x410f98 + _0x3b402a(0x68c) + _0x13e87f + '\x0a' + _0x5dc67d + '\x0a' + _0x58d365 + '\x0a')[_0x3b402a(0x471)](); _0x31b334['replace'](/#.*|\s/g, '') && (_0x12ff18[_0x3b402a(0xb49)]({ 'role': _0x3b402a(0xa02), 'content': _0x31b334 }), _0x12ff18[_0x3b402a(0xb49)]({ 'role': _0x3b402a(0x728), 'content': '好的，我记住了这些人设和历史。现在我们开始对话。' })); const _0x46a25d = _0x2c45d7[_0x3b402a(0x8cd)]?.[_0x3b402a(0x951)] ?? 0x64, _0x31d8f7 = _0x2c45d7[_0x3b402a(0x1ef)][_0x3b402a(0xa30)](-_0x46a25d); for (const _0x2be493 of _0x31d8f7) { if (_0x3b402a(0x7b2) === 'nVedN') _0x7da7fd[_0x3b402a(0x147)] = _0x2688d2[_0x3b402a(0x75e)][0x0]?.['id'] || null, _0x323bd4(_0x25a2fb['activeChatId']); else { const _0x2780d9 = _0x2be493[_0x3b402a(0x232)] === 'ai' || _0x2be493['role'] === _0x3b402a(0x728) ? 'assistant' : _0x3b402a(0xa02); let _0x4c9068 = { 'role': _0x2780d9, 'content': _0x2be493[_0x3b402a(0xa3a)] }, _0x41d886 = !!_0x2be493[_0x3b402a(0xa3a)]; if (_0x2be493[_0x3b402a(0x480)] && _0x2be493[_0x3b402a(0xa3a)][_0x3b402a(0x7a3)]('表情')) { const _0x591601 = _0x2be493[_0x3b402a(0xa3a)][_0x3b402a(0x604)](/：(.*?)]$/); _0x4c9068['content'] = _0x3b402a(0x300) + (_0x591601 ? _0x591601[0x1] : '未知表情') + ']', _0x12ff18[_0x3b402a(0xb49)](_0x4c9068); } else { if (_0x3b402a(0x4c3) !== _0x3b402a(0x4c3)) _0x593000[_0x3b402a(0x82f)] = _0x22ce88[_0x3b402a(0x201)][_0x3b402a(0xa6a)] || '', _0x13d06d[_0x3b402a(0x400)] = _0x1fec7e[_0x3b402a(0x201)]['avatar'] || _0x3d5bd7, _0x32829d[_0x3b402a(0x82f)] = _0x22b9a7[_0x3b402a(0x201)][_0x3b402a(0x5d7)] || ''; else { let _0x385d6d = null; if (_0x2be493[_0x3b402a(0x9b6)]) { if (_0x3b402a(0x50d) === _0x3b402a(0x21a)) { _0xd61d10[_0x3b402a(0x16c)] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } else _0x385d6d = _0x2be493['image']; } else { if (_0x2be493[_0x3b402a(0x709)]) { if (_0x3b402a(0x179) === _0x3b402a(0x179)) try { if ('XXChD' === 'XXChD') { const _0x581b2d = await _0x262fce(_0x2be493[_0x3b402a(0x709)]); if (_0x581b2d) { if ('YpzOl' !== _0x3b402a(0x209)) _0x385d6d = await _0x2a1554(_0x581b2d); else { const _0x30c207 = _0x3206ed['value'][_0x3b402a(0x471)](), _0x404acd = _0x1e2b31[_0x3b402a(0x82f)][_0x3b402a(0x471)](); if (!_0x30c207 || !_0x404acd) { _0xd868ee(_0x3b402a(0x934)); return; } _0x408620({ 'songName': _0x30c207, 'artist': _0x404acd }); } } } else _0x284d88[_0x3b402a(0x400)] = _0x1cb50b[_0x3b402a(0x642)], _0x598ce6[_0x3b402a(0xbc9)](), _0x489edb[_0x3b402a(0x948)] = '❚❚'; } catch (_0x330b69) { _0x3b402a(0xa1c) === _0x3b402a(0x9a5) ? (_0x2636cb[_0x3b402a(0x208)](_0x3b402a(0x206), _0x3634ce), _0x44ced8('大家好像不知道该怎么回复...')) : console['error'](_0x3b402a(0x74c), _0x330b69); } else { if (!_0x4fde02) return; _0x4bdd09[_0x32c644] = _0x16b292, _0x2da0d5[_0x243c58][_0x3b402a(0x94b)](_0x3b402a(0x632))[_0x3b402a(0x948)] = _0x74344d[_0x3b402a(0xa6a)], _0x351ab9[_0x5c4711][_0x3b402a(0x9c4)]['add'](_0x3b402a(0x99c)), _0x41da2d(); } } } if (_0x385d6d) { if ('BxOrK' === 'ydnrw') { _0x4721bd(); const _0x41c773 = _0x853c4d['friendCircles'][_0x3b402a(0x128)](_0x1a234a => _0x1a234a['id'] === _0x5a2224); if (!_0x41c773) return; _0xaec770[_0x3b402a(0x6c4)] = _0x5b8509, _0x57b1b5(), _0x5c71e7[_0x3b402a(0xad1)](_0x3b402a(0x7ce))[_0x3b402a(0x948)] = _0x41c773['name'], _0x4a4d2d(), _0x1501c7(_0x3b402a(0xab5), _0x3b402a(0x626)), _0x3b963c(); } else _0x4c9068[_0x3b402a(0x9b6)] = _0x385d6d, _0x41d886 = !![]; } _0x41d886 && _0x12ff18[_0x3b402a(0xb49)](_0x4c9068); } } } } try { const _0x3977b1 = await _0x4eb036(_0x12ff18); if (!_0x3977b1) return ![]; if (_0x1a6c52) try { let _0x1a831a = _0x3977b1['trim'](); const _0x2c3ae2 = _0x1a831a[_0x3b402a(0x604)](/(\[[\s\S]*\])/); _0x2c3ae2 && (_0x1a831a = _0x2c3ae2[0x1]); const _0x6ad909 = JSON[_0x3b402a(0x387)](_0x1a831a); if (Array[_0x3b402a(0x460)](_0x6ad909)) { _0x2c45d7[_0x3b402a(0x170)] = [..._0x6ad909], _0x2c45d7['characterLastScripts'][_0x1434bd['id']] = [..._0x6ad909], _0x133bbf(); const _0xe1414c = _0x6ad909[_0x3b402a(0x3c4)](_0x5ef683 => _0x5ef683['speaker'] === _0x3b402a(0x901) ? _0x5ef683[_0x3b402a(0x14b)] : _0x5ef683[_0x3b402a(0x932)] + ':\x20' + _0x5ef683[_0x3b402a(0x14b)])[_0x3b402a(0xae6)]('\x0a\x0a'); _0x2c45d7[_0x3b402a(0x1ef)][_0x3b402a(0xb49)]({ 'role': _0x3b402a(0x728), 'senderId': _0x1434bd['id'], 'timestamp': Date[_0x3b402a(0x7e3)](), 'isOffline': !![], 'content': _0xe1414c }); } } catch (_0x53ec62) { console[_0x3b402a(0x208)](_0x3b402a(0xb57), _0x53ec62, '原始文本:', _0x3977b1), _0x2c45d7[_0x3b402a(0x1ef)]['push']({ 'role': _0x3b402a(0x728), 'senderId': _0x1434bd['id'], 'timestamp': Date[_0x3b402a(0x7e3)](), 'isOffline': !![], 'content': _0x3b402a(0x654) + _0x3977b1 + ']' }); } else { const _0x491ff3 = _0x345205(_0x3977b1), _0x2fc4a3 = _0x491ff3[_0x3b402a(0x3c4)](_0x1604e1 => { const _0x26f0fd = _0x3b402a, _0xbb6dc2 = _0x1604e1[_0x26f0fd(0x471)](), _0x8df499 = _0xbb6dc2[_0x26f0fd(0x604)](/^\[sticker:(.*?)\]$/), _0x249edc = _0xbb6dc2[_0x26f0fd(0x604)](/^\[transfer:([\d.]+)\|(.*?)\]$/), _0x3d0745 = _0xbb6dc2[_0x26f0fd(0x604)](/^\[music:(.*?)\|(.*?)\]$/), _0x13e4f2 = _0xbb6dc2[_0x26f0fd(0x604)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/), _0x2c2bf6 = _0xbb6dc2[_0x26f0fd(0x604)](/^\[html\]([\s\S]*)\[\/html\]$/); if (_0x2c2bf6) return { 'type': _0x26f0fd(0x504), 'content': _0x2c2bf6[0x1]['trim']() }; else { if (_0x3d0745) return { 'type': _0x26f0fd(0xab5), 'songName': _0x3d0745[0x1][_0x26f0fd(0x471)](), 'artist': _0x3d0745[0x2][_0x26f0fd(0x471)]() }; else { if (_0x8df499) return { 'type': _0x26f0fd(0x3bd), 'name': _0x8df499[0x1][_0x26f0fd(0x471)]() }; else { if (_0x13e4f2) { if (_0x26f0fd(0x3c7) === _0x26f0fd(0x3c7)) return { 'type': _0x26f0fd(0x715), 'eventType': _0x13e4f2[0x1][_0x26f0fd(0x471)](), 'eventDate': _0x13e4f2[0x2]['trim'](), 'eventContent': _0x13e4f2[0x3][_0x26f0fd(0x471)]() }; else { const _0x5167cb = _0x506fed(_0x50b047[_0x26f0fd(0xa3a)] ?? _0x15658c['text'] ?? _0x28150f[_0x26f0fd(0x80d)] ?? '')['trim'](); if (_0x5167cb) _0x219a39[_0x26f0fd(0x53c)][_0x26f0fd(0xb49)]({ 'senderId': _0x187ac2['id'], 'kind': 'text', 'content': _0x5167cb }); } } else { if (_0x249edc) { const _0x2dba42 = parseFloat(_0x249edc[0x1]), _0x3ee22b = _0x249edc[0x2]['trim'](), _0x5037b4 = _0x16e371(_0x2c45d7[_0x26f0fd(0x147)]); let _0x251eba = null; if (_0x3ee22b === _0x5037b4['name']) { if (_0x26f0fd(0x131) === 'WJblS') { const _0x23a566 = _0x54b96d[_0x26f0fd(0x82f)]; _0x3aeb18[_0x26f0fd(0x819)][_0x26f0fd(0x85e)](_0x26f0fd(0x55d), _0x23a566), _0x4d8c76[_0x26f0fd(0x3ae)]('uiScale', _0x23a566); } else _0x251eba = _0x5037b4['id']; } else { const _0x3cb96d = _0x5c10dc(); if (_0x3cb96d[_0x26f0fd(0x1a7)] === 'group') { if (_0x26f0fd(0x55e) !== 'vkRRt') { const _0x25e9cc = _0x2c45d7[_0x26f0fd(0xb76)]['find'](_0x8adbc3 => _0x3cb96d[_0x26f0fd(0x402)][_0x26f0fd(0x7a3)](_0x8adbc3['id']) && _0x8adbc3['name'] === _0x3ee22b); if (_0x25e9cc) _0x251eba = _0x25e9cc['id']; } else _0x2483fd(![]); } } if (_0x251eba) return { 'type': _0x26f0fd(0x262), 'amount': _0x2dba42, 'recipientId': _0x251eba, 'senderId': _0x1434bd['id'] }; else return { 'type': 'text', 'content': _0x26f0fd(0x4ee) + _0x3ee22b + _0x26f0fd(0x6f2) }; } else { if (_0xbb6dc2) { if (_0x26f0fd(0x2d8) !== _0x26f0fd(0x2d8)) { const _0x925995 = _0x36ff8f['friendCircles']['find'](_0x5ecd62 => _0x5ecd62['id'] === _0xa2fd15); if (!_0x925995) return; _0x44fdcc['textContent'] = _0x26f0fd(0x97f), _0x3c97dc[_0x26f0fd(0x82f)] = _0x925995['id'], _0xb0c19a['value'] = _0x925995['name'], _0x57bbaa[_0x26f0fd(0x82f)] = _0x925995[_0x26f0fd(0x815)], _0x49c1e5[_0x26f0fd(0x819)]['display'] = _0x26f0fd(0x4e9), _0x925995[_0x26f0fd(0x739)]['forEach'](_0x57668e => { const _0x19a628 = _0x26f0fd, _0x593903 = _0x5d6d50[_0x19a628(0x94b)](_0x19a628(0x77d) + _0x57668e); if (_0x593903) _0x593903['checked'] = !![]; }); } else return { 'type': _0x26f0fd(0x4f1), 'content': _0xbb6dc2 }; } } } } } } return null; })['filter'](Boolean), _0x4be5b9 = async _0x2bae82 => { const _0x1a275d = _0x3b402a, _0x86bcdd = { 'role': _0x1a275d(0x728), 'senderId': _0x1434bd['id'], 'timestamp': Date[_0x1a275d(0x7e3)](), 'isOffline': _0x1a6c52 }; if (_0x2bae82[_0x1a275d(0x1a7)] === _0x1a275d(0xab5)) { const { songName: _0x26032b, artist: _0x6ee98c } = _0x2bae82; _0x86bcdd[_0x1a275d(0x1a7)] = _0x1a275d(0xab5), _0x86bcdd['content'] = '[AI分享了音乐：' + _0x26032b + '\x20-\x20' + _0x6ee98c + ']'; try { const _0x5e7d57 = await _0x1cbaf1(_0x26032b, _0x6ee98c); Object[_0x1a275d(0xb85)](_0x86bcdd, { 'songName': _0x26032b, 'artist': _0x6ee98c, 'coverUrl': _0x5e7d57[_0x1a275d(0x696)], 'playableUrl': _0x5e7d57['url'] }); } catch (_0x143ab5) { if (_0x1a275d(0x7f4) === _0x1a275d(0x7f4)) Object[_0x1a275d(0xb85)](_0x86bcdd, { 'songName': _0x26032b, 'artist': _0x6ee98c, 'coverUrl': null, 'playableUrl': null }); else { const _0xf6877 = _0x1a2c82['comments'][_0x1a275d(0x3c4)](_0x595b88 => { const _0x24ea0b = _0x1a275d, _0x3fe19d = _0x22e998(_0x595b88[_0x24ea0b(0x989)])?.['name'] || '未知'; return _0x24ea0b(0x42c) + _0x3fe19d + '</span>:\x20' + _0x595b88[_0x24ea0b(0xa3a)] + _0x24ea0b(0x45e); })[_0x1a275d(0xae6)](''); _0x4091dc = _0x1a275d(0x86e) + _0xf6877 + _0x1a275d(0x45e); } } } else { if (_0x2bae82[_0x1a275d(0x1a7)] === _0x1a275d(0x3bd)) { const _0x28ff49 = _0x9519d0[_0x1a275d(0x128)](_0xdcfe64 => _0xdcfe64[_0x1a275d(0xa6a)] === _0x2bae82['name']); if (_0x28ff49) Object[_0x1a275d(0xb85)](_0x86bcdd, { 'content': _0x1a275d(0x1c3) + _0x28ff49[_0x1a275d(0xa6a)] + ']', 'displayUrl': _0x28ff49['url'] }); else _0x86bcdd[_0x1a275d(0xa3a)] = _0x1a275d(0x300) + _0x2bae82[_0x1a275d(0xa6a)] + ']'; } else { if (_0x2bae82['type'] === _0x1a275d(0x262)) { if (_0x1a275d(0x1cf) === 'qPhqs') throw new _0x2ab716(_0x1a275d(0x618)); else { const _0x5c4357 = _0x2bae82['recipientId'] === _0x16e371(_0x2c45d7[_0x1a275d(0x147)])['id'] ? _0x16e371(_0x2c45d7[_0x1a275d(0x147)]) : _0x132ad2(_0x2bae82['recipientId']); Object[_0x1a275d(0xb85)](_0x86bcdd, { 'type': _0x1a275d(0x262), 'amount': _0x2bae82['amount'], 'recipientId': _0x2bae82['recipientId'], 'content': _0x1a275d(0xb52) + (_0x5c4357?.[_0x1a275d(0xa6a)] || '未知') + _0x1a275d(0x255) + _0x2bae82[_0x1a275d(0x15c)] + ']' }); } } else { if (_0x2bae82[_0x1a275d(0x1a7)] === _0x1a275d(0x715)) { if (_0x1a275d(0x28e) === _0x1a275d(0x28e)) { const _0x17e64a = _0x16e371(_0x310112['id']); if (!_0x17e64a || !_0x17e64a['id']) return console['error']('AI\x20试图创建事件，但找不到有效的用户ID。'), null; _0x2c45d7[_0x1a275d(0xb73)][_0x1a275d(0xb49)]({ 'id': _0x1a275d(0x223) + Date[_0x1a275d(0x7e3)](), 'date': _0x2bae82['eventDate'], 'type': _0x2bae82['eventType'], 'content': _0x2bae82['eventContent'], 'userId': _0x17e64a['id'], 'createdBy': 'ai' }), _0x3ac55e(), _0x4de3d0(), _0x96d382(); const _0x4443dd = _0x132ad2(_0x1434bd['id']); _0x4443dd && _0x2bae82[_0x1a275d(0x21e)] === _0x1a275d(0x785) && _0x18f071(_0x1a275d(0x7e6) + _0x4443dd[_0x1a275d(0xa6a)] + _0x1a275d(0x1f0) + _0x2bae82['eventContent']); return { 'role': _0x1a275d(0x728), 'senderId': _0x1434bd['id'], 'timestamp': Date['now'](), 'isOffline': _0x1a6c52, 'content': null }; return { 'role': _0x1a275d(0x728), 'senderId': _0x1434bd['id'], 'timestamp': Date[_0x1a275d(0x7e3)](), 'isOffline': _0x1a6c52, 'content': null }; } else { const _0x33454c = _0x4a3716[_0x1a275d(0xa51)]('li'); _0x33454c[_0x1a275d(0xa5e)] = 'member-selection-item', _0x33454c[_0x1a275d(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-' + _0x22a5f5['id'] + '\x22\x20data-id=\x22' + _0x75faff['id'] + _0x1a275d(0xbac) + (_0x2ead3b[_0x1a275d(0x37b)] || _0xa76b63) + _0x1a275d(0x2bd) + _0x14d238['id'] + _0x1a275d(0x685) + _0x187684[_0x1a275d(0xa6a)] + '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0xb5a6ce[_0x1a275d(0x8ce)](_0x33454c); } } else { const _0x2f2d5e = _0x54a8a1(_0x2bae82[_0x1a275d(0xa3a)]); Object['assign'](_0x86bcdd, { 'content': _0x2f2d5e['content'], 'quotedMessage': _0x2f2d5e[_0x1a275d(0x96b)] }); } } } } return _0x86bcdd; }, _0x54018f = await Promise['all'](_0x2fc4a3[_0x3b402a(0x3c4)](_0x4be5b9)); for (const _0x1b50b8 of _0x54018f) { if (_0x3b402a(0x4ad) === _0x3b402a(0x3d7)) _0x4c88df[_0x3b402a(0xb66)](_0x3b402a(0x43a), () => { const _0x5f1244 = _0x3b402a; if (_0x9563b7['length'] === 0x0) return; _0x4a36a5 = (_0x2de0f5 + 0x1) % _0x36dbf7[_0x5f1244(0x1ea)], _0x4b3188(_0x286f7a[_0x2f909d], _0xe0df49); }); else { if (_0x1b50b8[_0x3b402a(0x1a7)] === _0x3b402a(0x504)) _0xb0fc81(_0x1b50b8, -0x1), _0x4390c3[_0x3b402a(0x889)] = _0x4390c3[_0x3b402a(0x291)]; else (_0x1b50b8[_0x3b402a(0xa3a)] || _0x1b50b8[_0x3b402a(0x480)] || _0x1b50b8[_0x3b402a(0x1a7)] === _0x3b402a(0xab5) || _0x1b50b8[_0x3b402a(0x96b)]) && (await new Promise(_0x4775a5 => setTimeout(_0x4775a5, 0x12c + Math[_0x3b402a(0x278)]() * 0x190)), _0x2c45d7[_0x3b402a(0x1ef)]['push'](_0x1b50b8), _0xb0fc81(_0x1b50b8, _0x2c45d7['conversationHistory']['length'] - 0x1), _0x4390c3[_0x3b402a(0x889)] = _0x4390c3[_0x3b402a(0x291)]); } } } return _0x1892f0(), !![]; } catch (_0x5ce4ac) { if (_0x3b402a(0x1f6) === _0x3b402a(0x1f6)) { if (_0x5ce4ac[_0x3b402a(0xa6a)] !== _0x3b402a(0x7b7)) { console[_0x3b402a(0x208)]('生成失败:\x20', _0x5ce4ac); const _0x2961c2 = { 'role': _0x3b402a(0x728), 'content': _0x3b402a(0x424) + _0x5ce4ac['message'], 'senderId': _0x1434bd['id'], 'isOffline': _0x1a6c52 }; _0x2c45d7[_0x3b402a(0x1ef)][_0x3b402a(0xb49)](_0x2961c2), _0x31b43b(); } return ![]; } else { const _0x478dce = _0x159deb[_0x3b402a(0x775)][_0x3b402a(0x128)](_0x2e1cf7 => _0x2e1cf7['id'] === _0x28098a[_0x3b402a(0x815)]) || { 'name': _0x3b402a(0xb03) }, _0x2278bd = _0x246e50[_0x3b402a(0xa51)](_0x3b402a(0x54f)); _0x2278bd[_0x3b402a(0xa5e)] = _0x3b402a(0x73a), _0x2278bd[_0x3b402a(0x2d1)]['id'] = _0x693313['id'], _0x2278bd[_0x3b402a(0x16c)] = _0x3b402a(0x818) + _0x519894[_0x3b402a(0xa6a)] + _0x3b402a(0x320) + _0x478dce['name'] + _0x3b402a(0x8f1) + _0xb84f33['memberCharacterIds'][_0x3b402a(0x1ea)] + _0x3b402a(0x359), _0x2278bd[_0x3b402a(0xb66)]('click', () => _0x26cc3b(_0x5f29df['id'])), _0x1d1f1e[_0x3b402a(0x8ce)](_0x2278bd); } } finally { _0x136ac0(![]); } } else _0x379858 = _0x3c2dbd[_0x3b402a(0x9b6)]; } async function _0x280385() { const _0x5dfc4f = _0x1c58bc; if (_0x5dfc4f(0x54b) === _0x5dfc4f(0x54b)) { const _0x255839 = _0x5c10dc(); if (!_0x255839 || _0x255839[_0x5dfc4f(0x1a7)] !== _0x5dfc4f(0x639)) { _0x18f071('哼，只有私聊才能进行总结，群聊那么乱怎么记！'); return; } if (_0x2c45d7[_0x5dfc4f(0xaa7)]) { _0x18f071(_0x5dfc4f(0x237)); return; } const _0x5d4eb5 = await _0x17d597(_0x5dfc4f(0x1c1)); if (!_0x5d4eb5) return; _0x4ded3c(!![], _0x5dfc4f(0x9ce)), _0x13ba05[_0x5dfc4f(0x82f)] = '', _0x401464[_0x5dfc4f(0x9c4)]['add'](_0x5dfc4f(0x944)), _0x2c45d7[_0x5dfc4f(0xaa7)] = !![]; try { if (_0x5dfc4f(0xafa) !== 'Zyygz') { const _0x11d95c = _0x132ad2(_0x255839[_0x5dfc4f(0x402)][0x0]), _0x2bea93 = _0x16e371(_0x255839['id']), _0x8f09a3 = _0x23f5fa(_0x255839['id']); if (_0x8f09a3[_0x5dfc4f(0x1ea)] === 0x0) { _0x13ba05['value'] = _0x5dfc4f(0x396); return; } const _0x1a7246 = _0x8f09a3[_0x5dfc4f(0x3c4)](_0x519469 => { const _0x455f75 = _0x5dfc4f, _0xd118bd = new Date(_0x519469[_0x455f75(0x782)]), _0x245092 = _0xd118bd[_0x455f75(0x35e)]() + '-' + String(_0xd118bd[_0x455f75(0x571)]() + 0x1)[_0x455f75(0x466)](0x2, '0') + '-' + String(_0xd118bd[_0x455f75(0x41f)]())['padStart'](0x2, '0'), _0x346aeb = String(_0xd118bd[_0x455f75(0x408)]())[_0x455f75(0x466)](0x2, '0') + ':' + String(_0xd118bd['getMinutes']())[_0x455f75(0x466)](0x2, '0'); let _0x3615ea = '未知'; _0x519469[_0x455f75(0x232)] === _0x455f75(0xa02) ? _0x455f75(0x82c) !== _0x455f75(0x318) ? _0x3615ea = _0x2bea93[_0x455f75(0xa6a)] : (_0x3905df[_0x455f75(0x905)](_0x455f75(0xb5c)), _0x11a212[_0x455f75(0x4c0)][_0x455f75(0x4ac)](_0x25abf8 => _0x2b5d5e[_0x455f75(0x982)](_0x25abf8))) : _0x3615ea = _0x11d95c[_0x455f75(0xa6a)]; let _0x492d9a = _0x519469[_0x455f75(0xa3a)]; if (_0x519469[_0x455f75(0x480)]) _0x492d9a = _0x455f75(0x2eb); if (_0x519469[_0x455f75(0x709)]) _0x492d9a = _0x455f75(0x765); return '[' + _0x245092 + '\x20' + _0x346aeb + _0x455f75(0x687) + _0x3615ea + ']:\x20' + _0x492d9a; })['join']('\x0a'), _0x599aa4 = _0x4dae19[_0x5dfc4f(0x4db)](/{charName}/g, _0x11d95c[_0x5dfc4f(0xa6a)])[_0x5dfc4f(0x4db)](/{userName}/g, _0x2bea93['name']), _0xa2a467 = [{ 'role': 'system', 'content': _0x599aa4 }, { 'role': _0x5dfc4f(0xa02), 'content': _0x1a7246 }], _0x67bd6f = await _0x4eb036(_0xa2a467); _0x13ba05[_0x5dfc4f(0x82f)] = _0x67bd6f || _0x5dfc4f(0x722), _0x13ba05[_0x5dfc4f(0x889)] = 0x0; } else _0x22f3e2(_0x15c638); } catch (_0x2be518) { console['error'](_0x5dfc4f(0x9ee), _0x2be518), _0x13ba05[_0x5dfc4f(0x82f)] = '#\x20发生错误：\x0a' + _0x2be518[_0x5dfc4f(0x80d)]; } finally { _0x4ded3c(![]), _0x2c45d7[_0x5dfc4f(0xaa7)] = ![]; } } else _0x5dfc4f(0x969); } async function _0x4ce144() { const _0x5849d8 = _0x1c58bc; if (_0x5849d8(0x8ca) !== _0x5849d8(0x8ca)) { const _0x44a95b = _0x41305d[_0x5849d8(0xa3a)][_0x5849d8(0x604)](/：(.*?)]$/); _0x55f18f[_0x5849d8(0xa3a)] = '[sticker:' + (_0x44a95b ? _0x44a95b[0x1] : _0x5849d8(0x8f7)) + ']', _0x73a99[_0x5849d8(0xb49)](_0xda19f5); } else { console['log']('---\x20开始AI回复流程\x20---'); if (!_0x2c45d7[_0x5849d8(0x780)][_0x5849d8(0x2a6)] || !_0x2c45d7[_0x5849d8(0x780)][_0x5849d8(0xa2d)] || !_0x2c45d7[_0x5849d8(0x780)][_0x5849d8(0x839)]) { if (_0x5849d8(0x30d) !== _0x5849d8(0x30d)) throw new _0x178b13(_0x5849d8(0x2f6)); else { _0x18f071(_0x5849d8(0xac1)); return; } } const _0x5b55a0 = _0x2c45d7[_0x5849d8(0x1ef)]['at'](-0x1)?.[_0x5849d8(0x232)] === _0x5849d8(0xa02); if (!_0x5b55a0 || _0x2c45d7[_0x5849d8(0xaa7)]) return; const _0x26f811 = _0x5c10dc(); if (!_0x26f811) return; _0x2c45d7[_0x5849d8(0xaa7)] = !![], _0x136ac0(!![]); try { if (_0x26f811[_0x5849d8(0x1a7)] === _0x5849d8(0x639)) { const _0x31ff25 = _0x132ad2(_0x26f811[_0x5849d8(0x402)][0x0]); console['log'](_0x5849d8(0x47f)); if (_0x31ff25) await _0x16fbd2(_0x31ff25, { 'force': !![] }); } else { const _0x5c6c0c = await _0x1ec99f(); if (_0x5c6c0c && _0x5c6c0c['events']?.[_0x5849d8(0x1ea)]) _0x5849d8(0x997) === _0x5849d8(0x80e) ? (_0xda5ba[_0x5849d8(0x819)][_0x5849d8(0x974)] = 'none', _0x150f6a['style']['border'] = _0x5849d8(0x33e), _0x34244c[_0x5849d8(0x819)][_0x5849d8(0x26d)] = _0x5849d8(0x544)) : await _0x212eaf(_0x5c6c0c); else { if (_0x5849d8(0x764) === _0x5849d8(0x764)) { console['warn'](_0x5849d8(0x5ec)); const _0x5cfaeb = _0x26f811[_0x5849d8(0x402)][_0x5849d8(0x3c4)](_0x132ad2)[_0x5849d8(0x662)](Boolean); if (!_0x5cfaeb['length']) return; let _0x4a90ba = 0x0; for (const _0x36bc0b of _0x5cfaeb) { if ('FFXPN' !== _0x5849d8(0x476)) _0x16fbd2(_0x36bc0b, { 'force': !![], 'delayMs': _0x4a90ba }), _0x4a90ba += 0x1f4; else { const _0x46f7e = _0x13b8a4[_0x5849d8(0x93e)](_0x2684c7, 'readwrite'), _0x237087 = _0x46f7e[_0x5849d8(0x92c)](_0x56a33e), _0x11b2be = _0x237087[_0x5849d8(0x982)](_0x384a13); _0x11b2be[_0x5849d8(0x62f)] = () => _0x4f54d3(_0x11b2be[_0x5849d8(0xb7b)]), _0x11b2be[_0x5849d8(0x168)] = () => _0x330837(_0x11b2be['error']); } } } else { const _0x4ebf0b = _0x2ad0d3['createElement'](_0x5849d8(0x964)); _0x4ebf0b['value'] = _0x47949f['id'], _0x4ebf0b[_0x5849d8(0x948)] = _0x53500e[_0x5849d8(0xa6a)], _0x4375b3['appendChild'](_0x4ebf0b); } } } } catch (_0x47e6b1) { _0x5849d8(0x88a) === _0x5849d8(0x88a) ? _0x47e6b1[_0x5849d8(0xa6a)] !== _0x5849d8(0x7b7) && (console['error'](_0x5849d8(0x91a), _0x47e6b1), _0xb0fc81({ 'role': _0x5849d8(0x728), 'content': _0x5849d8(0x424) + _0x47e6b1[_0x5849d8(0x80d)] }, _0x2c45d7[_0x5849d8(0x1ef)]['length'] - 0x1)) : _0x54e5d1['error'](_0x5849d8(0x17a), _0x200940); } finally { _0x2c45d7[_0x5849d8(0xaa7)] = ![], _0x136ac0(![]); } } } function _0xdbadaa(_0x7be695, _0x17634b) { const _0x16f2d1 = _0x1c58bc; if (_0x16f2d1(0x44d) !== _0x16f2d1(0x599)) { const _0x5eeb01 = _0x17634b[_0x16f2d1(0x94d)](), _0x137412 = _0x7be695['toLowerCase'](); if (_0x5eeb01[_0x16f2d1(0xbdd)]('claude')) return 'anthropic'; if (_0x137412[_0x16f2d1(0x7a3)](_0x16f2d1(0x5f2))) return _0x16f2d1(0x5a6); if (_0x137412[_0x16f2d1(0x7a3)](_0x16f2d1(0x1ed))) return _0x16f2d1(0x30b); if (_0x5eeb01[_0x16f2d1(0xbdd)](_0x16f2d1(0x30b))) return _0x16f2d1(0x30b); return _0x16f2d1(0x3bb); } else _0x2cb289[_0x16f2d1(0x9c4)][_0x16f2d1(0x6e1)](_0x16f2d1(0x283)); } async function _0x4eb036(_0x55268a, _0x1c2420 = {}) { const _0x1b266f = _0x1c58bc; if (_0x2c45d7[_0x1b266f(0x4cb)]) { if ('YTcaq' === _0x1b266f(0x9f4)) { if (_0x4194b9) _0x8f69aa['click'](); } else _0x2c45d7['currentAbortController'][_0x1b266f(0x725)](_0x1b266f(0x4f4)); } _0x2c45d7['currentAbortController'] = new AbortController(); const _0x5291c6 = _0x2c45d7[_0x1b266f(0x4cb)]['signal'], { endpoint: _0xff9bce, key: _0x326a59, model: _0x5da22d } = _0x2c45d7[_0x1b266f(0x780)], _0xefa060 = !!_0x1c2420[_0x1b266f(0x34d)], _0x2aec90 = _0xdbadaa(_0xff9bce, _0x5da22d); console[_0x1b266f(0x905)]('Detected\x20API\x20provider:\x20' + _0x2aec90); let _0x26f5a8 = ''; try { if (_0x1b266f(0x6a2) === _0x1b266f(0xb34)) return _0x4c6808[_0x1b266f(0xa30)](0x0, 0xc); else { switch (_0x2aec90) { case 'anthropic': { const _0x592a20 = _0x1f466c(_0x326a59), _0x5b485b = _0x55268a['find'](_0xe0ca97 => _0xe0ca97[_0x1b266f(0x232)] === _0x1b266f(0x5ff))?.[_0x1b266f(0xa3a)] || '', _0x11f2a0 = _0x55268a[_0x1b266f(0x662)](_0x2877e9 => _0x2877e9[_0x1b266f(0x232)] !== _0x1b266f(0x5ff)), _0xdc6a9b = { 'model': _0x5da22d, 'system': _0x5b485b, 'messages': _0x11f2a0['map'](_0x4a689b => ({ 'role': _0x4a689b[_0x1b266f(0x232)], 'content': [{ 'type': _0x1b266f(0x4f1), 'text': _0x4a689b[_0x1b266f(0xa3a)] }] })), 'max_tokens': 0x2000 }, _0x4c918e = await fetch(_0xff9bce, { 'method': 'POST', 'headers': { 'Content-Type': _0x1b266f(0xa77), 'x-api-key': _0x592a20, 'anthropic-version': _0x1b266f(0x519) }, 'body': JSON[_0x1b266f(0x39b)](_0xdc6a9b), 'signal': _0x5291c6 }); if (!_0x4c918e['ok']) { if (_0x1b266f(0xace) !== 'fyHsc') { const _0x41d4e4 = await _0x4c918e['json']()[_0x1b266f(0xaba)](() => ({})); throw new Error(_0x1b266f(0x8dd) + _0x4c918e['status'] + _0x1b266f(0x66f) + (_0x41d4e4['error']?.[_0x1b266f(0x80d)] || _0x4c918e['statusText'])); } else return _0x533327[_0x1b266f(0x75e)][_0x1b266f(0x128)](_0x1863e7 => _0x1863e7['id'] === _0xd743a7[_0x1b266f(0x147)]); } const _0x587b86 = await _0x4c918e[_0x1b266f(0x34d)](); _0x26f5a8 = _0x587b86['content']?.[0x0]?.[_0x1b266f(0x4f1)] || ''; break; } case _0x1b266f(0x30b): { if ('KvaMX' === 'LkgjL') _0x8cc62c('home', _0x1b266f(0x227)); else { const _0x1cf09d = _0x1f466c(_0x326a59), _0x3b72e1 = _0xff9bce[_0x1b266f(0x7a3)]('generativelace.googleapis.com'), _0xc7884d = _0x12ac8d => { const _0x1ab139 = _0x1b266f; if ('wleox' !== 'ZzYYv') { const _0x5ae229 = []; if (_0x12ac8d[_0x1ab139(0xa3a)]) _0x5ae229['push']({ 'text': _0x12ac8d[_0x1ab139(0xa3a)] }); if (_0x12ac8d[_0x1ab139(0x9b6)]) { if ('GBECF' !== 'GBECF') { const _0x2f24cb = _0x3043ae[_0x1ab139(0x82f)]; let _0x3a8cff = _0x2f24cb[_0x1ab139(0x4db)](/\.bubble\.sent/g, _0x1ab139(0x81f))[_0x1ab139(0x4db)](/\.bubble\.received/g, _0x1ab139(0x231)); _0x105f99[_0x1ab139(0x16c)] = _0x3a8cff; } else { const _0x18ce43 = _0x12ac8d[_0x1ab139(0x9b6)]['split'](',')[0x1], _0x2a8304 = _0x12ac8d[_0x1ab139(0x9b6)][_0x1ab139(0x5cd)](_0x12ac8d['image']['indexOf'](':') + 0x1, _0x12ac8d['image'][_0x1ab139(0x47b)](';')) || _0x1ab139(0x5a8); _0x5ae229[_0x1ab139(0xb49)]({ 'inline_data': { 'mime_type': _0x2a8304, 'data': _0x18ce43 } }); } } return _0x5ae229; } else _0x1c5a60 = _0x4b5dc2[_0x1ab139(0x345)] || ''; }, _0x2188ce = _0x55268a['map'](_0x38d389 => ({ 'role': _0x38d389['role'] === _0x1b266f(0x728) ? 'model' : _0x38d389['role'] === _0x1b266f(0x5ff) ? _0x1b266f(0xa02) : _0x38d389['role'], 'parts': _0xc7884d(_0x38d389) }))['filter'](_0x13b521 => _0x13b521[_0x1b266f(0x3be)][_0x1b266f(0x1ea)] > 0x0), _0x4adfb8 = { 'contents': _0x2188ce }; if (_0xefa060 && _0x3b72e1) { if ('IlwDc' === _0x1b266f(0x2bc)) return _0x1b266f(0x910) + _0x4236dd; else _0x4adfb8[_0x1b266f(0x121)] = { 'response_mime_type': _0x1b266f(0xa77) }; } const _0x5c5011 = _0xff9bce + _0x1b266f(0xb53) + _0x5da22d + ':streamGenerateContent?key=' + _0x1cf09d + _0x1b266f(0xa8e), _0x24b4d0 = await fetch(_0x5c5011, { 'method': 'POST', 'headers': { 'Content-Type': 'application/json' }, 'body': JSON['stringify'](_0x4adfb8), 'signal': _0x5291c6 }); if (!_0x24b4d0['ok']) throw new Error(_0x1b266f(0xac3) + _0x24b4d0[_0x1b266f(0x90c)]); const _0x3d714a = _0x24b4d0['body'][_0x1b266f(0x132)](), _0x4198af = new TextDecoder(); let _0x5c3018 = ''; while (!![]) { if (_0x5291c6['aborted']) { console[_0x1b266f(0x905)]('Gemini\x20stream\x20reading\x20aborted.'), _0x3d714a['cancel'](); break; } const { done: _0x18ecc2, value: _0x2523eb } = await _0x3d714a[_0x1b266f(0x229)](); if (_0x18ecc2) break; const _0x36668b = _0x4198af[_0x1b266f(0x558)](_0x2523eb, { 'stream': !![] }), _0x4ef4ab = _0x36668b[_0x1b266f(0x5d6)]('\x0a')[_0x1b266f(0x662)](_0x3be332 => _0x3be332[_0x1b266f(0x471)]()[_0x1b266f(0xbdd)](_0x1b266f(0x3ed))); for (const _0x152658 of _0x4ef4ab) { const _0x5dd01a = _0x152658['replace'](_0x1b266f(0x298), ''); if (_0x5dd01a === _0x1b266f(0x906)) break; try { 'JBCLv' === 'JBCLv' ? _0x5c3018 += JSON[_0x1b266f(0x387)](_0x5dd01a)['candidates'][0x0][_0x1b266f(0xa3a)][_0x1b266f(0x3be)][0x0][_0x1b266f(0x4f1)] : _0x33ea00 = _0x1b266f(0x6e7) + _0x378321['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x20a893[_0x1b266f(0x511)] || _0xa2a646) + _0x1b266f(0x8c4) + _0x452f8c[_0x1b266f(0x6d1)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>' + _0x42fa58[_0x1b266f(0x50a)] + _0x1b266f(0x159) + (_0x3c4a83[_0x1b266f(0x642)] ? '▶' : '⚠') + '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; } catch { } } } _0x26f5a8 = _0x5c3018; break; } } case _0x1b266f(0x3bb): default: { const _0x4c6c1f = _0x1f466c(_0x326a59), _0x4e0b53 = _0xff9bce[_0x1b266f(0x4db)](/\/+$/, '') + '/v1/chat/completions', _0x60127c = _0x55268a[_0x1b266f(0x3c4)](_0x1fc9a2 => { const _0x301f10 = _0x1b266f; if (_0x1fc9a2['role'] === 'user' && _0x1fc9a2[_0x301f10(0x9b6)]) return { 'role': _0x301f10(0xa02), 'content': [{ 'type': _0x301f10(0x4f1), 'text': _0x1fc9a2['content'] || '\x20' }, { 'type': _0x301f10(0x935), 'image_url': { 'url': _0x1fc9a2['image'], 'detail': _0x301f10(0x226) } }] }; return { 'role': _0x1fc9a2[_0x301f10(0x232)], 'content': _0x1fc9a2[_0x301f10(0xa3a)] }; })[_0x1b266f(0x662)](_0xafb029 => _0xafb029[_0x1b266f(0xa3a)]), _0x28ecd4 = { 'model': _0x5da22d, 'messages': _0x60127c, 'max_tokens': 0x2000, ..._0xefa060 ? { 'response_format': { 'type': 'json_object' } } : {} }, _0x3a4f2e = await fetch(_0x4e0b53, { 'method': _0x1b266f(0xbe8), 'headers': { 'Content-Type': _0x1b266f(0xa77), 'Authorization': _0x1b266f(0x981) + _0x4c6c1f }, 'body': JSON[_0x1b266f(0x39b)](_0x28ecd4), 'signal': _0x5291c6 }); if (!_0x3a4f2e['ok']) { if (_0x1b266f(0x2ca) === _0x1b266f(0x2ca)) { const _0x110c46 = await _0x3a4f2e[_0x1b266f(0x34d)]()[_0x1b266f(0xaba)](() => ({})); throw new Error(_0x1b266f(0x3aa) + _0x3a4f2e['status'] + _0x1b266f(0x66f) + (_0x110c46[_0x1b266f(0x208)]?.[_0x1b266f(0x80d)] || _0x3a4f2e['statusText'])); } else { if (!_0x1022b0) return; const _0x14404d = _0x5795f5['activeMeetingCharId'], _0x36a2e7 = _0x36a76d(_0x14404d); if (!_0x36a2e7) return; const _0x119d8c = _0x18c636(_0x1f1e77['getElementById'](_0x1b266f(0x2c5))['value']), _0x2965be = _0x21ba97(_0x31d079[_0x1b266f(0xad1)](_0x1b266f(0x7e9))[_0x1b266f(0x82f)]), _0x202872 = _0x1efc8c(_0x697d04[_0x1b266f(0xad1)](_0x1b266f(0xb84))[_0x1b266f(0x82f)]) / 0x64; _0x36a2e7[_0x1b266f(0x4f8)] = { 'x': _0x119d8c, 'y': _0x2965be, 'scale': _0x202872 }; const _0x302edc = _0xf33f90[_0x1b266f(0xad1)]('galgame-sprite-container'), _0x4e7550 = 0x50 * _0x202872; _0x302edc[_0x1b266f(0x819)][_0x1b266f(0xb33)] = _0x4e7550 + '%', _0x302edc['style'][_0x1b266f(0x8e4)] = _0x4e7550 + '%', _0x302edc[_0x1b266f(0x819)][_0x1b266f(0xb12)] = _0x119d8c + '%', _0x302edc[_0x1b266f(0x819)][_0x1b266f(0xaac)] = _0x2965be + '%', _0x302edc[_0x1b266f(0x819)][_0x1b266f(0xa8f)] = _0x1b266f(0x612); } } const _0x43e2bc = await _0x3a4f2e[_0x1b266f(0x34d)](); _0x26f5a8 = _0x43e2bc['choices']?.[0x0]?.[_0x1b266f(0x80d)]?.[_0x1b266f(0xa3a)] || ''; break; } }return _0x26f5a8; } } catch (_0x2e9ee9) { if (_0x2e9ee9[_0x1b266f(0xa6a)] === _0x1b266f(0x7b7)) return console[_0x1b266f(0x905)](_0x1b266f(0x750)), ''; throw _0x2e9ee9; } finally { _0x2c45d7[_0x1b266f(0x4cb)] && _0x2c45d7['currentAbortController']['signal'] === _0x5291c6 && (_0x2c45d7[_0x1b266f(0x4cb)] = null); } } async function _0x14fad6() { const _0x1cd664 = _0x1c58bc; if ('SNZZi' === _0x1cd664(0xa1e)) { const _0xb64b1a = _0x3ad684[_0x1cd664(0xb88)][_0x1cd664(0x9c4)]['contains'](_0x1cd664(0x630)), _0x192f51 = _0xb64b1a ? _0x3d8de1[_0x1cd664(0x82f)] : null; let _0x16c58b = null, _0xd13c5d = ''; if (_0xb64b1a && _0x192f51) { if (_0x1cd664(0x66b) === _0x1cd664(0x66b)) { _0x16c58b = _0x2c45d7[_0x1cd664(0x75e)][_0x1cd664(0x128)](_0x236916 => _0x236916[_0x1cd664(0x1a7)] === _0x1cd664(0x639) && _0x236916[_0x1cd664(0x402)]['includes'](_0x192f51)); const _0x1c3057 = _0x132ad2(_0x192f51); _0xd13c5d = _0x1c3057 ? _0x1c3057[_0x1cd664(0xa6a)] : '该角色'; } else { const _0x25084b = { 'type': _0x1cd664(0x13f), 'version': 0x1, 'timestamp': _0x429652['now'](), 'accountingData': _0x401616[_0x1cd664(0x4b3)], 'accountingLedger': _0x165d93['accountingLedger'] }, _0x53735e = new _0x1bf58c([_0x46fea3[_0x1cd664(0x39b)](_0x25084b, null, 0x2)], { 'type': 'application/json' }), _0x38d4da = _0x3f5897[_0x1cd664(0x97d)](_0x53735e), _0xdaa00e = _0x19c759[_0x1cd664(0xa51)]('a'), _0x37bca1 = new _0x13aae8(), _0x21a237 = _0x37bca1[_0x1cd664(0x35e)]() + '-' + _0xfd8299(_0x37bca1[_0x1cd664(0x571)]() + 0x1)[_0x1cd664(0x466)](0x2, '0') + '-' + _0x3e433a(_0x37bca1[_0x1cd664(0x41f)]())[_0x1cd664(0x466)](0x2, '0'); _0xdaa00e[_0x1cd664(0x3ac)] = _0x38d4da, _0xdaa00e[_0x1cd664(0xbd3)] = _0x1cd664(0x395) + _0x21a237 + _0x1cd664(0x518), _0x2bdf01['body'][_0x1cd664(0x8ce)](_0xdaa00e), _0xdaa00e['click'](), _0x20283a['body'][_0x1cd664(0x9b0)](_0xdaa00e), _0x142ad8[_0x1cd664(0xbc5)](_0x38d4da), _0x190e31(_0x1cd664(0x73c)); } } else { if (_0x2c45d7['activeChatId']) { _0x16c58b = _0x5c10dc(); const _0x28264e = document[_0x1cd664(0xad1)]('char-name-header')[_0x1cd664(0x948)]; _0xd13c5d = _0x28264e || '当前聊天'; } } if (!_0x16c58b) { if (_0x1cd664(0x8f2) === _0x1cd664(0x436)) _0x491189[_0x1cd664(0x775)] = _0x162a4d[_0x1cd664(0x775)][_0x1cd664(0x662)](_0xad0e5 => _0xad0e5['id'] !== _0x38e163), _0x28ceb6[_0x1cd664(0x4d3)] === _0x19ea72 && (_0x1d5cee[_0x1cd664(0x4d3)] = _0x3104a6[_0x1cd664(0x775)][0x0]['id']), _0x43970c[_0x1cd664(0x75e)][_0x1cd664(0x4ac)](_0x5a8d07 => { const _0x47d850 = _0x1cd664; _0x5a8d07[_0x47d850(0x815)] === _0x4c2fff && (_0x5a8d07[_0x47d850(0x815)] = _0x102a2b[_0x47d850(0x4d3)]); }), _0x339dde(), _0x188698(_0x1cd664(0x8f9)), _0x44a8e4(), _0x22d12b(_0x1cd664(0xbaa), 'userProfile'); else { _0x18f071(_0x1cd664(0x88e)); return; } } const _0xd0ae45 = await _0x17d597('确定要清空\x22' + _0xd13c5d + _0x1cd664(0x6ad)); if (!_0xd0ae45) return; _0x16c58b['id'] === _0x2c45d7['activeChatId'] && (_0x5cd6df(), _0x2c45d7['conversationHistory'] = [], _0xd1d472()); try { if ('avWKR' === _0x1cd664(0xa33)) { const _0x5fbde9 = _0x3af4cf[_0x1cd664(0xa51)]('li'); _0x5fbde9[_0x1cd664(0xa5e)] = 'character-item', _0x5fbde9[_0x1cd664(0x2d1)][_0x1cd664(0xaee)] = _0x1a6246['id'], _0x5fbde9['innerHTML'] = _0x1cd664(0x40b) + (_0x8231bb[_0x1cd664(0x37b)] || _0xba15a7) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x26df53[_0x1cd664(0xa6a)] + _0x1cd664(0x7a6), _0x5fbde9[_0x1cd664(0xb66)](_0x1cd664(0x43a), () => { _0x32f302(_0x2ca1af['id']); }), _0x5fbde9[_0x1cd664(0x94b)]('.char-info-wrapper')[_0x1cd664(0xb66)](_0x1cd664(0x43a), () => { _0x383411(_0x453e06['id']); }), _0x5fbde9[_0x1cd664(0x94b)](_0x1cd664(0x211))[_0x1cd664(0xb66)](_0x1cd664(0x43a), _0x100ce2 => { const _0x12d323 = _0x1cd664; _0x100ce2[_0x12d323(0x8ea)](), _0x46deb0(_0x311f11['id']); }), _0x1812fd[_0x1cd664(0x8ce)](_0x5fbde9); } else localStorage['removeItem'](_0x1cd664(0x199) + _0x16c58b['id']); } catch (_0x214443) { console[_0x1cd664(0x208)](_0x1cd664(0x75f) + _0x16c58b['id'], _0x214443); } _0x18f071('\x22' + _0xd13c5d + _0x1cd664(0x844)); } else { const _0x711246 = _0x5f055d[_0x1cd664(0xa2d)](_0xd91120); _0x711246 && _0x711246[_0x1cd664(0xbdd)]('appIconPosition_') && _0x498d2b[_0x1cd664(0xb49)](_0x711246); } } const _0x2aa0e5 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x4ae)), _0x7f0dc3 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x656)), _0x23cf05 = document['getElementById'](_0x1c58bc(0x68e)); _0x2aa0e5[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), async () => { const _0xec284a = _0x1c58bc; _0x4ded3c(!![], _0xec284a(0xb79)); const _0x581ca1 = []; try { const _0x7a5748 = { 'localStorageData': {}, 'indexedDBData': {}, 'indexedDBMusicData': [], 'indexedDBSnoopData': [] }; for (let _0x4dfc06 = 0x0; _0x4dfc06 < localStorage[_0xec284a(0x1ea)]; _0x4dfc06++) { const _0x8e8091 = localStorage[_0xec284a(0xa2d)](_0x4dfc06); if (_0x8e8091) _0x7a5748[_0xec284a(0x692)][_0x8e8091] = localStorage['getItem'](_0x8e8091); } const _0x54d2b8 = await _0x2e216a, _0x2b246f = _0x54d2b8['transaction']([_0x2f7fc0, _0x66a0c6, _0x56d254], 'readonly'), _0x2cae2b = _0x2b246f['objectStore'](_0x2f7fc0), _0x4917d5 = _0x2b246f[_0xec284a(0x92c)](_0x66a0c6), _0x2df254 = _0x2b246f[_0xec284a(0x92c)](_0x56d254), _0x5d6305 = new Promise((_0x4b1028, _0x1e131d) => { const _0x3c9c6e = _0xec284a, _0x5dc21c = _0x2cae2b[_0x3c9c6e(0x998)](); _0x5dc21c['onsuccess'] = () => _0x4b1028(_0x5dc21c[_0x3c9c6e(0xb7b)]), _0x5dc21c['onerror'] = () => _0x1e131d(_0x5dc21c[_0x3c9c6e(0x208)]); }), _0x4a92eb = new Promise((_0x14e31d, _0x3ad48f) => { const _0xedcf45 = _0xec284a, _0x3c4fd5 = _0x4917d5[_0xedcf45(0x998)](); _0x3c4fd5[_0xedcf45(0x62f)] = () => _0x14e31d(_0x3c4fd5[_0xedcf45(0xb7b)]), _0x3c4fd5[_0xedcf45(0x168)] = () => _0x3ad48f(_0x3c4fd5[_0xedcf45(0x208)]); }), _0x17215a = new Promise((_0x553916, _0x4f88dc) => { const _0x301952 = _0xec284a; if ('nbZcQ' !== _0x301952(0x8f3)) _0x292aa2[_0x301952(0x400)] = _0x1df71e[_0x301952(0x9b6)]; else { const _0x349e1d = _0x2df254[_0x301952(0x998)](); _0x349e1d['onsuccess'] = () => _0x553916(_0x349e1d[_0x301952(0xb7b)]), _0x349e1d[_0x301952(0x168)] = () => _0x4f88dc(_0x349e1d[_0x301952(0x208)]); } }), [_0x47fa32, _0x3447f4, _0x1db3ce] = await Promise[_0xec284a(0x32e)]([_0x5d6305, _0x4a92eb, _0x17215a]); for (const _0x310c4b of _0x47fa32) { if (_0xec284a(0xbca) !== _0xec284a(0xbca)) _0x339881['revokeObjectURL'](_0x39fc99); else { if (_0x310c4b['blob'] instanceof Blob) try { _0x7a5748[_0xec284a(0x2f2)][_0x310c4b['id']] = await _0x2a1554(_0x310c4b['blob']); } catch (_0x144df2) { _0x581ca1[_0xec284a(0xb49)](_0x310c4b['id']); } } } for (const _0x49c815 of _0x3447f4) { if (_0xec284a(0x448) !== _0xec284a(0x3a8)) { const _0x203406 = { ..._0x49c815 }; _0x49c815[_0xec284a(0x249)] instanceof Blob && (_0xec284a(0xae2) !== 'YvQOt' ? (_0x19fd0d['style'][_0xec284a(0xbe4)] = _0xec284a(0xbce) + _0x37b728[_0xec284a(0x1d2)] + '\x27)', _0x4468b4['style'][_0xec284a(0x45f)] = _0xec284a(0x696), _0x30fb45[_0xec284a(0x819)][_0xec284a(0xba5)] = _0xec284a(0x4f3)) : _0x203406['audio'] = await _0x2a1554(_0x49c815[_0xec284a(0x249)])), _0x49c815[_0xec284a(0x696)] instanceof Blob && (_0x203406['cover'] = await _0x2a1554(_0x49c815[_0xec284a(0x696)])), _0x7a5748[_0xec284a(0x568)][_0xec284a(0xb49)](_0x203406); } else _0x11770e[_0xec284a(0x948)] = '旁白', _0x56e359[_0xec284a(0x948)] = '（对话结束）'; } _0x7a5748[_0xec284a(0x4c0)] = _0x1db3ce; const _0x37145a = new Blob([JSON[_0xec284a(0x39b)](_0x7a5748, null, 0x2)], { 'type': _0xec284a(0xa77) }), _0x1061b7 = URL['createObjectURL'](_0x37145a), _0x40d38b = document[_0xec284a(0xa51)]('a'), _0x3fe4e6 = new Date(), _0x379daf = _0x3fe4e6[_0xec284a(0x35e)]() + '-' + String(_0x3fe4e6[_0xec284a(0x571)]() + 0x1)[_0xec284a(0x466)](0x2, '0') + '-' + String(_0x3fe4e6[_0xec284a(0x41f)]())[_0xec284a(0x466)](0x2, '0'); _0x40d38b[_0xec284a(0x3ac)] = _0x1061b7, _0x40d38b[_0xec284a(0xbd3)] = 'Noir_Backup_' + _0x379daf + _0xec284a(0x518), document[_0xec284a(0x335)]['appendChild'](_0x40d38b), _0x40d38b[_0xec284a(0x43a)](), document[_0xec284a(0x335)][_0xec284a(0x9b0)](_0x40d38b), URL[_0xec284a(0xbc5)](_0x1061b7), _0x4ded3c(![]); if (_0x581ca1[_0xec284a(0x1ea)] > 0x0) _0xec284a(0x308) !== _0xec284a(0x308) ? _0x24dd93 = _0x399672(() => { const _0x23a181 = _0xec284a; if (_0x55680d[_0x23a181(0x1a7)] === _0x23a181(0x5c6)) _0x331c06[_0x23a181(0x90a)](); _0x2049d4(_0x4ca289); }, 0x320) : _0x18f071(_0xec284a(0x8f0) + _0x581ca1['join']('\x0a')); else { if (_0xec284a(0x71d) !== 'wCsiH') _0x18f071(_0xec284a(0x3ef)); else { const _0xd070b = _0x479966[_0xec284a(0x291)]; _0x3f9abb['scrollTop'] = _0x355003 + (_0xd070b - _0x4e472d); } } } catch (_0x349183) { _0x4ded3c(![]), console[_0xec284a(0x208)](_0xec284a(0x56d), _0x349183), _0x18f071(_0xec284a(0x207) + _0x349183[_0xec284a(0x80d)]); } }), _0x7f0dc3[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x113443 = _0x1c58bc; _0x23cf05[_0x113443(0x43a)](); }), _0x20c2fb[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x491681), _0x23cf05[_0x1c58bc(0xb66)](_0x1c58bc(0xad6), _0x3f1a5c => { const _0xd88b52 = _0x1c58bc, _0xacf084 = _0x3f1a5c[_0xd88b52(0xb6a)][_0xd88b52(0xb1f)][0x0]; if (!_0xacf084) return; _0x17d597(_0xd88b52(0x457))['then'](_0x5605c8 => { const _0x30a5c5 = _0xd88b52; if ('LrTGq' !== _0x30a5c5(0x2a9)) _0x13cb68 = _0x4e0af6; else { if (!_0x5605c8) { if (_0x30a5c5(0x9df) === _0x30a5c5(0x9df)) { _0x23cf05[_0x30a5c5(0x82f)] = ''; return; } else { const _0x26636d = _0x4f18a1[_0x30a5c5(0x170)][_0x30a5c5(0x57d)](); _0x284dd6['textContent'] = _0x26636d[_0x30a5c5(0x932)] === _0x30a5c5(0x901) ? '旁白' : _0x26636d[_0x30a5c5(0x932)], _0x3d1732[_0x30a5c5(0x948)] = _0x26636d[_0x30a5c5(0x14b)], _0x26636d['speaker'] !== _0x30a5c5(0x901) && _0x428177(_0xf8a047['activeMeetingCharId'], _0x26636d[_0x30a5c5(0x69f)]); } } _0x4ded3c(!![], _0x30a5c5(0x478)); const _0x1a59ae = new FileReader(); _0x1a59ae[_0x30a5c5(0xb94)] = async _0xb51a72 => { const _0x57f107 = _0x30a5c5; if ('CnlGG' === 'GXPin') { _0x5e4f9b['innerHTML'] = _0x57f107(0x689); return; } else try { if (_0x57f107(0x214) !== 'QZeYj') { const _0x1a2327 = JSON[_0x57f107(0x387)](_0xb51a72[_0x57f107(0xb6a)][_0x57f107(0xb7b)]); if (!_0x1a2327[_0x57f107(0x692)] || !_0x1a2327[_0x57f107(0x2f2)]) { if (_0x57f107(0xbc8) !== _0x57f107(0xbc8)) { const _0x1b2b9c = _0x5c9704['transaction'](_0x323706, 'readwrite'), _0x3f5195 = _0x1b2b9c[_0x57f107(0x92c)](_0x2eaf8a), _0x91a7cb = _0x3f5195[_0x57f107(0xa4f)](_0x4abfd2); _0x91a7cb[_0x57f107(0x62f)] = () => _0x38bba2(), _0x91a7cb[_0x57f107(0x168)] = () => _0xed3eb2(_0x91a7cb[_0x57f107(0x208)]); } else throw new Error(_0x57f107(0x3f4)); } _0x4ded3c(!![], _0x57f107(0x584)); const _0x14a377 = await Promise[_0x57f107(0x32e)](Object[_0x57f107(0x58f)](_0x1a2327[_0x57f107(0x2f2)])[_0x57f107(0x3c4)](async _0x5dd6a0 => { const _0x3c5890 = _0x57f107; if ('kDRBp' === _0x3c5890(0x947)) { const _0x56cc75 = _0x1a2327['indexedDBData'][_0x5dd6a0]; if (typeof _0x56cc75 === _0x3c5890(0x319) && _0x56cc75[_0x3c5890(0xbdd)](_0x3c5890(0x3ed))) { const _0x316e9b = await _0x100b4b(_0x56cc75); return { 'id': _0x5dd6a0, 'blob': _0x316e9b }; } return null; } else _0x135ac0(), _0x555186(_0x3c5890(0x330), 'worldBookEditor'); }))[_0x57f107(0xa0d)](_0x1e17d3 => _0x1e17d3[_0x57f107(0x662)](Boolean)), _0xc041e9 = []; if (_0x1a2327[_0x57f107(0x568)]) { _0x4ded3c(!![], '正在准备音乐数据...'); const _0x263a86 = _0x1a2327[_0x57f107(0x568)][_0x57f107(0x3c4)](async _0x5e0cf9 => { const _0x418948 = _0x57f107, _0x528382 = { ..._0x5e0cf9 }; if (_0x5e0cf9[_0x418948(0x249)]) _0x528382['audio'] = await _0x100b4b(_0x5e0cf9[_0x418948(0x249)]); if (_0x5e0cf9['cover']) _0x528382[_0x418948(0x696)] = await _0x100b4b(_0x5e0cf9['cover']); return _0x528382; }); _0xc041e9[_0x57f107(0xb49)](...await Promise[_0x57f107(0x32e)](_0x263a86)); } _0x4ded3c(!![], _0x57f107(0x735)), localStorage[_0x57f107(0x9f0)](); for (const _0x40a801 in _0x1a2327[_0x57f107(0x692)]) { if (_0x57f107(0x939) !== _0x57f107(0x2a8)) localStorage['setItem'](_0x40a801, _0x1a2327['localStorageData'][_0x40a801]); else { const _0x3ed688 = _0x4056c6[_0x57f107(0xb6a)][_0x57f107(0x2d1)]['categoryId'], _0x7dd92b = _0xa87917[_0x57f107(0x61a)](_0x57f107(0x2ab) + _0x3ed688 + '\x22]'), _0x126c60 = _0x234df5[_0x57f107(0x61a)]('.wb-entry-item\x20input[data-category-id=\x22' + _0x3ed688 + _0x57f107(0x946)), _0xc3210f = _0x294067[_0x57f107(0x94b)](_0x57f107(0xb64) + _0x3ed688 + '\x22]'); if (_0x126c60['length'] === 0x0) _0xc3210f[_0x57f107(0x5d8)] = ![], _0xc3210f[_0x57f107(0x8be)] = ![]; else _0x126c60[_0x57f107(0x1ea)] === _0x7dd92b['length'] ? (_0xc3210f[_0x57f107(0x5d8)] = !![], _0xc3210f[_0x57f107(0x8be)] = ![]) : _0xc3210f['indeterminate'] = !![]; _0x53973b(); } } _0x4ded3c(!![], '正在写入新数据...'); const _0x4f2229 = await _0x2e216a, _0x260872 = _0x4f2229[_0x57f107(0x93e)]([_0x2f7fc0, _0x66a0c6, _0x56d254], _0x57f107(0x2b8)), _0x15a252 = _0x260872[_0x57f107(0x92c)](_0x2f7fc0), _0x2ebf4f = _0x260872[_0x57f107(0x92c)](_0x66a0c6), _0xe76b0 = _0x260872[_0x57f107(0x92c)](_0x56d254); _0x15a252['clear'](), _0x2ebf4f[_0x57f107(0x9f0)](), _0xe76b0[_0x57f107(0x9f0)](), _0x14a377[_0x57f107(0x4ac)](_0x55e734 => _0x15a252[_0x57f107(0x982)](_0x55e734)), _0xc041e9['forEach'](_0x461196 => _0x2ebf4f[_0x57f107(0x982)](_0x461196)), _0x1a2327[_0x57f107(0x4c0)] && Array[_0x57f107(0x460)](_0x1a2327[_0x57f107(0x4c0)]) && ('hsfUu' !== _0x57f107(0xabf) ? _0x58e59b[_0x57f107(0x16c)] = _0x57f107(0x279) + _0x5b5198 + _0x57f107(0x816) + (_0x1492c8 === _0x57f107(0x67d) ? _0x57f107(0x8bb) : _0x57f107(0x919)) + _0x57f107(0xb54) + _0x168701 + _0x57f107(0x9e0) + _0x267a88 : (console[_0x57f107(0x905)](_0x57f107(0xb5c)), _0x1a2327[_0x57f107(0x4c0)]['forEach'](_0x4be622 => _0xe76b0[_0x57f107(0x982)](_0x4be622)))), await new Promise((_0x3161be, _0x5415c6) => { const _0x3e7554 = _0x57f107; _0x260872[_0x3e7554(0x89d)] = _0x3161be, _0x260872[_0x3e7554(0x168)] = _0x26642c => _0x5415c6(_0x26642c[_0x3e7554(0xb6a)][_0x3e7554(0x208)]); }), _0x4ded3c(![]), _0x18f071('数据导入成功！应用即将刷新...'), setTimeout(() => location['reload'](), 0x640); } else _0x4eaee4(_0x57f107(0xae9)), _0x5af803(() => _0x37aac5['reload'](), 0x5dc); } catch (_0x487310) { if (_0x57f107(0x43f) !== 'TLGIN') { if (!_0x3a4efe[_0x57f107(0x460)](_0x3ad6dd)) return _0x57f107(0x3ec); if (_0xf7e265[_0x57f107(0x1ea)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>'; return _0x54ca40[_0x57f107(0x940)]((_0x58ddec, _0x5e732f) => new _0x6a4a01(_0x5e732f['timestamp']) - new _0x49f4d0(_0x58ddec['timestamp'])), _0x57f107(0x274) + _0x506f37[_0x57f107(0x3c4)](_0x2ba4a0 => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>' + (_0x2ba4a0[_0x57f107(0xa47)] || _0x57f107(0x485)) + _0x57f107(0x372) + (_0x2ba4a0[_0x57f107(0x2c9)] || '') + _0x57f107(0x8c0) + (_0x2ba4a0[_0x57f107(0x782)] || '') + _0x57f107(0x6c2))['join']('') + _0x57f107(0x45e); } else _0x4ded3c(![]), console[_0x57f107(0x208)](_0x57f107(0x87c), _0x487310), _0x18f071(_0x57f107(0x65c) + _0x487310['message']); } finally { if ('PsZjW' !== _0x57f107(0x83a)) _0x23cf05['value'] = ''; else { if (_0x570181[_0x57f107(0x7b5)]) _0x472d8b(_0x21cb67[_0x57f107(0x7b5)]); } } }, _0x1a59ae[_0x30a5c5(0x9b3)](_0xacf084); } }); }); function _0x2bd9de() { const _0x1d39f5 = _0x1c58bc; _0x1d39f5(0x311) !== 'PILir' ? (_0x5efd73['value'] = _0x2c45d7[_0x1d39f5(0x780)][_0x1d39f5(0x2a6)] || '', _0x32cf15[_0x1d39f5(0x82f)] = _0x2c45d7[_0x1d39f5(0x780)][_0x1d39f5(0xa2d)] || '', _0x131f85['value'] = _0x2c45d7[_0x1d39f5(0x780)][_0x1d39f5(0x839)] || '', _0x4a4116['value'] = String(_0x2c45d7[_0x1d39f5(0x8cd)]?.[_0x1d39f5(0x951)] ?? 0x64), document[_0x1d39f5(0xad1)](_0x1d39f5(0x45d))['value'] = _0x2c45d7['apiSettings'][_0x1d39f5(0xb2e)] || _0x1d39f5(0x3bb)) : _0xc9acd5(![]); } function _0x1d1938() { const _0x193af6 = _0x1c58bc; if ('OelAO' !== _0x193af6(0x6aa)) { _0x2c45d7[_0x193af6(0x780)]['endpoint'] = _0x5efd73[_0x193af6(0x82f)][_0x193af6(0x471)](), _0x2c45d7[_0x193af6(0x780)][_0x193af6(0xa2d)] = _0x32cf15[_0x193af6(0x82f)][_0x193af6(0x471)](), _0x2c45d7['apiSettings'][_0x193af6(0x839)] = _0x131f85[_0x193af6(0x82f)][_0x193af6(0x471)](), _0x2c45d7[_0x193af6(0x780)]['provider'] = document[_0x193af6(0xad1)](_0x193af6(0x45d))['value']; const _0x48ece7 = parseInt(_0x4a4116[_0x193af6(0x82f)], 0xa); _0x2c45d7[_0x193af6(0x8cd)][_0x193af6(0x951)] = Number[_0x193af6(0x89e)](_0x48ece7) && _0x48ece7 > 0x0 ? _0x48ece7 : 0x64, _0x3ac55e(), _0x18f071(_0x193af6(0x1ce)); } else { if (!_0x32cc43) return ''; return _0x1591f7['replace'](/&/g, _0x193af6(0x5c4))[_0x193af6(0x4db)](/</g, '&lt;')[_0x193af6(0x4db)](/>/g, _0x193af6(0x1c6))[_0x193af6(0x4db)](/"/g, _0x193af6(0x280))[_0x193af6(0x4db)](/'/g, _0x193af6(0x6f8)); } } function _0x1ce2a1() { const _0x123d9c = _0x1c58bc; _0x123d9c(0x30c) !== 'IiRcy' ? (_0x2c5ca3[_0x123d9c(0x82f)] = _0x2c45d7[_0x123d9c(0x201)][_0x123d9c(0xa6a)] || '', _0x17820e[_0x123d9c(0x400)] = _0x2c45d7[_0x123d9c(0x201)]['avatar'] || _0x5d9858, _0x3724f1[_0x123d9c(0x82f)] = _0x2c45d7[_0x123d9c(0x201)]['persona'] || '') : (_0x113c74[_0x123d9c(0x9b6)] = _0x256bc1, _0x26ec18 = !![]); } async function _0x176efd(_0x1c8f74 = null) { const _0x35fd90 = _0x1c58bc; if (_0x35fd90(0xb4a) === 'buhtK') { const _0x44dc6d = _0x12cf55[_0x35fd90(0xad1)](_0x35fd90(0x938)); if (_0x44dc6d) _0x44dc6d['textContent'] = '❚❚'; } else { _0x512ecd(_0x35fd90(0xb88), _0x2260ed), _0x2c0967('char-edit-bind-user'); const _0x245a19 = _0x1c8f74 ? _0x2c45d7[_0x35fd90(0xb76)]['find'](_0x14ad0a => _0x14ad0a['id'] === _0x1c8f74) : null; _0x34ca66(_0x35fd90(0x96c), _0x245a19 ? _0x245a19[_0x35fd90(0x7ad)] || [] : []); const _0xfc4b46 = document[_0x35fd90(0xad1)](_0x35fd90(0x430)), _0x47c967 = document['getElementById'](_0x35fd90(0x5a0)); _0x427caf[_0x35fd90(0x400)] = _0x72f264, _0x4e26d7['value'] = '', _0x117ab1[_0x35fd90(0x819)]['backgroundImage'] = '', _0x21fee5['value'] = '', _0x52513c[_0x35fd90(0x819)]['backgroundImage'] = '', _0x1900d6[_0x35fd90(0x82f)] = ''; const _0x4cb112 = [_0x35fd90(0x198), _0x35fd90(0x59d), _0x35fd90(0x872), _0x35fd90(0x453), _0x35fd90(0x46c)]; _0x4cb112[_0x35fd90(0x4ac)](_0x432222 => { const _0x5f174b = _0x35fd90; document[_0x5f174b(0xad1)](_0x5f174b(0x791) + _0x432222 + _0x5f174b(0x484))[_0x5f174b(0x819)][_0x5f174b(0xbe4)] = '', document[_0x5f174b(0xad1)](_0x5f174b(0x791) + _0x432222 + _0x5f174b(0xb21))[_0x5f174b(0x82f)] = ''; }); if (_0x1c8f74) { if (!_0x245a19) return; _0x3d8de1[_0x35fd90(0x82f)] = _0x245a19['id'], _0x10f6fd[_0x35fd90(0x948)] = _0x35fd90(0x96e), _0x1bc980['value'] = _0x245a19[_0x35fd90(0xa6a)], _0x379920[_0x35fd90(0x82f)] = _0x245a19[_0x35fd90(0x531)], _0xe74571[_0x35fd90(0x82f)] = _0x245a19['persona'], document[_0x35fd90(0xad1)](_0x35fd90(0x22a))['value'] = _0x245a19['bubbleCss'] || '', _0xfc4b46[_0x35fd90(0x82f)] = _0x245a19[_0x35fd90(0x2ad)] || '', _0x47c967[_0x35fd90(0x82f)] = _0x245a19[_0x35fd90(0x345)] || ''; const _0x25bf3d = _0x2c45d7[_0x35fd90(0x75e)][_0x35fd90(0x128)](_0x5e7146 => _0x5e7146['type'] === 'private' && _0x5e7146[_0x35fd90(0x402)]['includes'](_0x1c8f74)); document[_0x35fd90(0xad1)]('char-edit-bind-user')[_0x35fd90(0x82f)] = _0x25bf3d?.[_0x35fd90(0x815)] || _0x2c45d7[_0x35fd90(0x4d3)]; try { if ('ONMhi' !== 'gIieP') { const _0x53c6a6 = await _0x262fce('char_avatar_' + _0x245a19['id']); _0x427caf[_0x35fd90(0x400)] = _0x53c6a6 ? URL[_0x35fd90(0x97d)](_0x53c6a6) : _0x245a19[_0x35fd90(0x37b)] || _0x72f264; const _0x5c514e = await _0x262fce('char_wallpaper_' + _0x245a19['id']); if (_0x5c514e) _0x117ab1[_0x35fd90(0x819)]['backgroundImage'] = _0x35fd90(0xbce) + URL['createObjectURL'](_0x5c514e) + '\x27)'; const _0x3e7d70 = await _0x262fce(_0x35fd90(0x32c) + _0x245a19['id']); if (_0x3e7d70) _0x52513c[_0x35fd90(0x819)][_0x35fd90(0xbe4)] = _0x35fd90(0xbce) + URL[_0x35fd90(0x97d)](_0x3e7d70) + '\x27)'; for (const _0x4919a9 of _0x4cb112) { const _0x5c8016 = await _0x262fce('char_sprite_' + _0x4919a9 + '_' + _0x245a19['id']); _0x5c8016 && (document[_0x35fd90(0xad1)](_0x35fd90(0x791) + _0x4919a9 + _0x35fd90(0x484))[_0x35fd90(0x819)][_0x35fd90(0xbe4)] = 'url(\x27' + URL[_0x35fd90(0x97d)](_0x5c8016) + '\x27)'); } } else { if (_0x2ddcc7) _0x3ebb1c(_0x443b60); if (_0x636a67[_0x35fd90(0x792)]) return; _0x6dfb6e(() => { const _0x38564a = _0x35fd90; _0x124f2e && _0x278693(_0x4d9185['id'], _0x229ad5[_0x38564a(0x3c4)](_0x33c868 => _0x33c868['id'])); }, 0x32); } } catch (_0x20eb27) { console['error'](_0x35fd90(0xbde) + _0x245a19['id'] + _0x35fd90(0x7c7), _0x20eb27), _0x427caf[_0x35fd90(0x400)] = _0x245a19[_0x35fd90(0x37b)] || _0x72f264; } } else 'dQQMr' === _0x35fd90(0xac8) ? (_0x2b6427(), _0x42907f[_0x35fd90(0xad1)](_0x35fd90(0xbc2))[_0x35fd90(0x9c4)][_0x35fd90(0x6e1)]('show'), _0x39e487[_0x35fd90(0xad1)]('quote-preview-area')[_0x35fd90(0x819)]['display'] = _0x35fd90(0xb39), _0x30414d(() => { _0x537c76(![]); }, 0x14)) : (_0x3d8de1['value'] = '', _0x10f6fd[_0x35fd90(0x948)] = _0x35fd90(0x171), _0x1bc980[_0x35fd90(0x82f)] = '新角色\x20' + (_0x2c45d7[_0x35fd90(0xb76)][_0x35fd90(0x1ea)] + 0x1), _0x379920[_0x35fd90(0x82f)] = '', _0xe74571['value'] = _0x35fd90(0x391), document[_0x35fd90(0xad1)]('char-edit-css')[_0x35fd90(0x82f)] = '', _0xfc4b46[_0x35fd90(0x82f)] = '', _0x47c967[_0x35fd90(0x82f)] = ''); _0x53b3d4(); const _0x1873b8 = document[_0x35fd90(0xad1)](_0x35fd90(0x22a)); let _0x5458c1 = document[_0x35fd90(0xad1)](_0x35fd90(0x96f)); !_0x5458c1 && (_0x5458c1 = document[_0x35fd90(0xa51)](_0x35fd90(0x819)), _0x5458c1['id'] = _0x35fd90(0x96f), document[_0x35fd90(0x2e7)][_0x35fd90(0x8ce)](_0x5458c1)); const _0x2d0440 = () => { const _0x3194e8 = _0x35fd90, _0x17aab7 = _0x1873b8[_0x3194e8(0x82f)]; let _0x1d9b71 = _0x17aab7['replace'](/\.bubble\.sent/g, _0x3194e8(0x81f))['replace'](/\.bubble\.received/g, _0x3194e8(0x231)); _0x5458c1[_0x3194e8(0x16c)] = _0x1d9b71; }; _0x1873b8[_0x35fd90(0x57f)](_0x35fd90(0x329), _0x2d0440), _0x1873b8[_0x35fd90(0xb66)](_0x35fd90(0x329), _0x2d0440), _0x2d0440(); } } function _0xd13ace() { const _0x313ee8 = _0x1c58bc; try { const _0x4ee8df = { 'type': _0x313ee8(0x13f), 'version': 0x1, 'timestamp': Date[_0x313ee8(0x7e3)](), 'accountingData': _0x2c45d7[_0x313ee8(0x4b3)], 'accountingLedger': _0x2c45d7[_0x313ee8(0x38a)] }, _0x30d3f = new Blob([JSON['stringify'](_0x4ee8df, null, 0x2)], { 'type': 'application/json' }), _0x34cff1 = URL[_0x313ee8(0x97d)](_0x30d3f), _0x4a9ccf = document[_0x313ee8(0xa51)]('a'), _0x1aa5a2 = new Date(), _0x203311 = _0x1aa5a2[_0x313ee8(0x35e)]() + '-' + String(_0x1aa5a2[_0x313ee8(0x571)]() + 0x1)[_0x313ee8(0x466)](0x2, '0') + '-' + String(_0x1aa5a2[_0x313ee8(0x41f)]())[_0x313ee8(0x466)](0x2, '0'); _0x4a9ccf[_0x313ee8(0x3ac)] = _0x34cff1, _0x4a9ccf['download'] = _0x313ee8(0x395) + _0x203311 + '.json', document[_0x313ee8(0x335)][_0x313ee8(0x8ce)](_0x4a9ccf), _0x4a9ccf[_0x313ee8(0x43a)](), document[_0x313ee8(0x335)][_0x313ee8(0x9b0)](_0x4a9ccf), URL[_0x313ee8(0xbc5)](_0x34cff1), _0x18f071(_0x313ee8(0x73c)); } catch (_0x43bab8) { console['error'](_0x313ee8(0x32f), _0x43bab8), _0x18f071(_0x313ee8(0x4ec) + _0x43bab8[_0x313ee8(0x80d)]); } } function _0x1bec0e(_0x14a0f5) { const _0x2f9c4e = _0x1c58bc, _0x25dab2 = _0x14a0f5[_0x2f9c4e(0xb6a)][_0x2f9c4e(0xb1f)][0x0]; if (!_0x25dab2) return; _0x17d597(_0x2f9c4e(0x903))['then'](_0x443b7b => { const _0x285481 = _0x2f9c4e; if (_0x285481(0x4d0) === _0x285481(0x4d0)) { if (!_0x443b7b) { _0x14a0f5[_0x285481(0xb6a)]['value'] = ''; return; } _0x4ded3c(!![], _0x285481(0x7b1)); const _0x1c6a8a = new FileReader(); _0x1c6a8a[_0x285481(0xb94)] = _0x13bff1 => { const _0x571860 = _0x285481; if (_0x571860(0x191) !== _0x571860(0x191)) _0x1313bc['isAnimatingDiary'] = ![]; else try { if ('mqVwy' !== _0x571860(0x167)) { const _0xec5b0 = JSON['parse'](_0x13bff1['target'][_0x571860(0xb7b)]); if (_0xec5b0[_0x571860(0x1a7)] !== _0x571860(0x13f) || !_0xec5b0[_0x571860(0x4b3)] || !_0xec5b0[_0x571860(0x38a)]) throw new Error(_0x571860(0x618)); _0x2c45d7['accountingData'] = _0xec5b0['accountingData'], _0x2c45d7['accountingLedger'] = _0xec5b0[_0x571860(0x38a)], _0x3ac55e(), _0x4ded3c(![]), _0x18f071('时空逆转成功！账本已恢复。'), _0x41cd9f(); } else { const _0x241850 = _0x90a458[_0x571860(0x538)][_0x571860(0x128)](_0x4b8bb4 => _0x4b8bb4['id'] === _0x4cd717); if (!_0x241850) return; _0x42237d['getElementById'](_0x571860(0xb62))[_0x571860(0x82f)] = _0x241850['id'], _0x4868e2[_0x571860(0xad1)](_0x571860(0x489))['textContent'] = _0x571860(0x266), _0x2e346d[_0x571860(0xad1)](_0x571860(0xb7c))['value'] = _0x241850['name'], _0x475d3a[_0x571860(0xad1)]('world-book-edit-content')['value'] = _0x241850[_0x571860(0xa3a)], _0x131042['value'] = _0x241850[_0x571860(0x9ba)] || _0x571860(0x135); } } catch (_0x24878e) { 'ZoWpm' !== 'GjGqF' ? (_0x4ded3c(![]), console[_0x571860(0x208)]('导入账本失败:', _0x24878e), _0x18f071(_0x571860(0x65c) + _0x24878e[_0x571860(0x80d)])) : _0x43b1ab(![]); } finally { _0x14a0f5[_0x571860(0xb6a)][_0x571860(0x82f)] = ''; } }, _0x1c6a8a[_0x285481(0x9b3)](_0x25dab2); } else { const _0x24f539 = _0x4f198a[_0x28b177['length'] - 0x1]; (!_0x353f01 || _0x24f539['timestamp'] > _0x1ffc6b[_0x285481(0x782)]) && (_0x139ee6 = _0x24f539); } }); } async function _0x3e976d() { const _0x5b110a = _0x1c58bc, _0x55a48f = _0x3d8de1[_0x5b110a(0x82f)]; if (!_0x55a48f) { if (_0x5b110a(0x72f) === 'beKok') { _0x18f071(_0x5b110a(0xa9d)); return; } else _0x2b6491 = '\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“' + _0x287a63[_0x5b110a(0xa6a)] + _0x5b110a(0x46b); } const _0x2c91c2 = _0x132ad2(_0x55a48f); if (!_0x2c91c2) return; _0x4ded3c(!![], _0x5b110a(0x984) + _0x2c91c2['name'] + _0x5b110a(0xa61)); try { if (_0x5b110a(0x5d0) === _0x5b110a(0x9fc)) _0x3b0a72 = new _0x49c181(_0x529ff9[_0x5b110a(0xa01)]['apply'](null, _0x5c7f42)), _0x3e76ff = _0x49cbad[_0x5b110a(0x2e3)](_0x5b110a(0x15b), { 'dateStyle': _0x5b110a(0x712), 'timeStyle': _0x5b110a(0x31b) }); else { const _0x563110 = { 'type': _0x5b110a(0x6f4), 'version': 0x1, 'name': _0x2c91c2[_0x5b110a(0xa6a)], 'remark': _0x2c91c2['remark'], 'persona': _0x2c91c2[_0x5b110a(0x5d7)], 'bubbleCss': _0x2c91c2[_0x5b110a(0x865)], 'avatar': null, 'sprites': {}, 'worldBooks': [] }, _0x34c5d1 = await _0x262fce(_0x5b110a(0x717) + _0x2c91c2['id']); if (_0x34c5d1) _0x563110['avatar'] = await _0x2a1554(_0x34c5d1); const _0x33add0 = [_0x5b110a(0x198), _0x5b110a(0x59d), 'angry', _0x5b110a(0x453), _0x5b110a(0x46c)]; for (const _0x201223 of _0x33add0) { if (_0x5b110a(0x80f) === _0x5b110a(0x28b)) _0x1e137a[_0x5b110a(0x400)] = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', _0x3f4ccf(_0x380ad7[_0x5b110a(0x709)])[_0x5b110a(0xa0d)](_0x3f7c13 => { const _0x2b85b4 = _0x5b110a; if (_0x3f7c13) _0xc8456a['src'] = _0x659f18[_0x2b85b4(0x97d)](_0x3f7c13); else _0x4510bc['alt'] = _0x2b85b4(0xb56); })[_0x5b110a(0xaba)](() => _0x16e96a[_0x5b110a(0x8cb)] = _0x5b110a(0xb56)); else { const _0x505b03 = await _0x262fce(_0x5b110a(0x65e) + _0x201223 + '_' + _0x2c91c2['id']); _0x505b03 && (_0x563110['sprites'][_0x201223] = await _0x2a1554(_0x505b03)); } } if (_0x2c91c2[_0x5b110a(0x7ad)] && _0x2c91c2['linkedWorldBookIds'][_0x5b110a(0x1ea)] > 0x0) { if (_0x5b110a(0x1d3) === _0x5b110a(0x1d3)) _0x563110[_0x5b110a(0x538)] = _0x2c91c2[_0x5b110a(0x7ad)]['map'](_0x240a31 => _0x2c45d7[_0x5b110a(0x538)][_0x5b110a(0x128)](_0x4176e0 => _0x4176e0['id'] === _0x240a31))[_0x5b110a(0x662)](Boolean)[_0x5b110a(0x3c4)](_0x2f3281 => ({ 'name': _0x2f3281[_0x5b110a(0xa6a)], 'content': _0x2f3281[_0x5b110a(0xa3a)], 'categoryId': _0x2f3281[_0x5b110a(0x9ba)] || 'default' })); else { const _0x18b29b = _0x210525(_0x4b5d8c['authorId']) || { 'name': '未知' }; let _0x5e24e7 = _0x5b110a(0xa7b) + _0x18b29b[_0x5b110a(0xa6a)] + '\x20说：“' + (_0x8424ec[_0x5b110a(0x9c6)] || _0x2c3a89[_0x5b110a(0xa3a)]) + '”'; return _0x40846e[_0x5b110a(0x1a7)] === _0x5b110a(0xab5) && (_0x5e24e7 += _0x5b110a(0x45b) + _0x2bca2e[_0x5b110a(0x6d1)] + _0x5b110a(0x66f) + _0x5adc4e['artist'] + ')'), _0x5e24e7; } } const _0x4a51e3 = new Set(_0x563110['worldBooks']['map'](_0x4a48fa => _0x4a48fa[_0x5b110a(0x9ba)])); _0x563110[_0x5b110a(0x54e)] = _0x2c45d7[_0x5b110a(0x54e)][_0x5b110a(0x662)](_0x4ebcca => _0x4a51e3['has'](_0x4ebcca['id'])); const _0x4db19b = new Blob([JSON[_0x5b110a(0x39b)](_0x563110, null, 0x2)], { 'type': _0x5b110a(0xa77) }), _0x4d6ea4 = URL[_0x5b110a(0x97d)](_0x4db19b), _0x71a860 = document[_0x5b110a(0xa51)]('a'); _0x71a860[_0x5b110a(0x3ac)] = _0x4d6ea4, _0x71a860[_0x5b110a(0xbd3)] = _0x2c91c2[_0x5b110a(0xa6a)] + _0x5b110a(0x4f9), document['body'][_0x5b110a(0x8ce)](_0x71a860), _0x71a860['click'](), document['body'][_0x5b110a(0x9b0)](_0x71a860), URL[_0x5b110a(0xbc5)](_0x4d6ea4); } } catch (_0x375648) { if (_0x5b110a(0xb80) === _0x5b110a(0xb80)) console['error'](_0x5b110a(0x4b5), _0x375648), _0x18f071('导出失败了，哼:\x20' + _0x375648['message']); else { if (_0x4bbca4[_0x5b110a(0x1a7)] === _0x5b110a(0x639)) { const _0x5ceebe = _0x1c3496(_0x7b35c9[_0x5b110a(0x402)][0x0]); return _0x5ceebe ? _0x3e7639(_0x5b110a(0x717) + _0x5ceebe['id']) : _0x48d0d2[_0x5b110a(0x991)](null); } else return _0x1fddc9(_0x5b110a(0x2f7) + _0x93dc41['id']); } } finally { _0x4ded3c(![]); } } async function _0x2b2a37(_0x4fb347) { const _0x4bc63a = _0x1c58bc; if ('ykAVp' !== _0x4bc63a(0x47a)) { const _0x5f108e = _0x4fb347[_0x4bc63a(0xb6a)][_0x4bc63a(0xb1f)][0x0]; if (!_0x5f108e) return; _0x4ded3c(!![], _0x4bc63a(0x25b)); const _0x14d91f = new FileReader(); _0x14d91f[_0x4bc63a(0xb94)] = async _0x18e2e7 => { const _0x5cbaab = _0x4bc63a; if (_0x5cbaab(0x763) !== 'JINLL') _0x126fc5 = _0x318cb4[_0x5cbaab(0x37b)] || _0x191ddf; else try { const _0x1eefcd = JSON['parse'](_0x18e2e7[_0x5cbaab(0xb6a)][_0x5cbaab(0xb7b)]); if (_0x1eefcd[_0x5cbaab(0x1a7)] !== 'NoirCharacterCard') { if (_0x5cbaab(0x703) === _0x5cbaab(0x703)) throw new Error('这不是一张有效的Noir角色卡。'); else { const _0x2fec38 = _0x26c940(); if (_0x2fec38[_0x5cbaab(0x1a7)] === _0x5cbaab(0x62a)) { const _0x3e1127 = _0x31774f[_0x5cbaab(0xb76)]['find'](_0x4332c2 => _0x2fec38[_0x5cbaab(0x402)][_0x5cbaab(0x7a3)](_0x4332c2['id']) && _0x4332c2[_0x5cbaab(0xa6a)] === _0x552f13); if (_0x3e1127) _0x256a68 = _0x3e1127['id']; } } } const _0x29a1b4 = []; _0x1eefcd['worldBookCategories'] && Array[_0x5cbaab(0x460)](_0x1eefcd['worldBookCategories']) && _0x1eefcd[_0x5cbaab(0x54e)][_0x5cbaab(0x4ac)](_0x661a65 => { const _0x1bce27 = _0x5cbaab, _0x3511b2 = _0x2c45d7[_0x1bce27(0x54e)][_0x1bce27(0x128)](_0x512545 => _0x512545[_0x1bce27(0xa6a)] === _0x661a65[_0x1bce27(0xa6a)]); !_0x3511b2 && _0x2c45d7[_0x1bce27(0x54e)]['push']({ 'id': _0x661a65['id'] || 'wbc_imported_' + Date['now'](), 'name': _0x661a65['name'] }); }); if (_0x1eefcd[_0x5cbaab(0x538)] && _0x1eefcd[_0x5cbaab(0x538)][_0x5cbaab(0x1ea)] > 0x0) for (const _0x358282 of _0x1eefcd['worldBooks']) { if (_0x5cbaab(0xaae) !== _0x5cbaab(0xad0)) { let _0x486073 = _0x2c45d7[_0x5cbaab(0x538)][_0x5cbaab(0x128)](_0x22c5f3 => _0x22c5f3[_0x5cbaab(0xa6a)] === _0x358282[_0x5cbaab(0xa6a)] && (_0x22c5f3[_0x5cbaab(0x9ba)] || _0x5cbaab(0x135)) === (_0x358282[_0x5cbaab(0x9ba)] || _0x5cbaab(0x135))); if (_0x486073) 'qwFVH' === _0x5cbaab(0x154) ? _0x29a1b4[_0x5cbaab(0xb49)](_0x486073['id']) : _0x41075d[_0x5cbaab(0xb85)](_0x27fa11, { 'songName': _0x219699, 'artist': _0x3a759c, 'coverUrl': null, 'playableUrl': null }); else { if (_0x5cbaab(0x6c3) === _0x5cbaab(0x6c3)) { const _0x48de6f = { 'id': _0x5cbaab(0xb30) + Date[_0x5cbaab(0x7e3)]() + '_' + Math[_0x5cbaab(0x278)](), 'name': _0x358282[_0x5cbaab(0xa6a)], 'content': _0x358282[_0x5cbaab(0xa3a)], 'categoryId': _0x358282[_0x5cbaab(0x9ba)] || _0x5cbaab(0x135) }; _0x2c45d7[_0x5cbaab(0x538)][_0x5cbaab(0xb49)](_0x48de6f), _0x29a1b4['push'](_0x48de6f['id']); } else _0x43b506[_0x5cbaab(0xb49)](_0x4ca789[_0x5cbaab(0xa30)](_0x292fbb, _0x194e47 + _0x536fe6)); } } else { const _0x5dbb1b = _0x3cf2e0[_0x5cbaab(0x387)](_0xc287a9[_0x5cbaab(0x813)]('badgeState') || '{}'), _0x4aba0e = { ..._0x5dbb1b, ..._0x49bced }; _0xdaf101['setItem'](_0x5cbaab(0x4f6), _0x5f10a3[_0x5cbaab(0x39b)](_0x4aba0e)); } } const _0x311d50 = 'char_' + Date[_0x5cbaab(0x7e3)](); let _0x53c001 = null; if (_0x1eefcd[_0x5cbaab(0x37b)]) { if (_0x5cbaab(0x8c6) !== _0x5cbaab(0x54a)) { const _0x1f6371 = await _0x100b4b(_0x1eefcd[_0x5cbaab(0x37b)]); await _0x5941fe(_0x5cbaab(0x717) + _0x311d50, _0x1f6371), _0x53c001 = await _0x2a1554(_0x1f6371); } else _0x28b91a[_0x5cbaab(0x3ae)](_0x5cbaab(0x845), _0x46cbf1[_0x5cbaab(0x39b)](_0x1c1216)), _0x3f19ad(_0x5cbaab(0x31c)), _0x559148(() => _0xf67895[_0x5cbaab(0x1b0)](), 0x5dc); } if (_0x1eefcd[_0x5cbaab(0x8d0)]) { if (_0x5cbaab(0xa87) === _0x5cbaab(0xafd)) { const _0x501b27 = _0x34e882(_0x5a6555[_0x5cbaab(0x2d1)][_0x5cbaab(0xadf)], 0xa); _0x4332fe(_0x501b27); } else for (const _0x20551d in _0x1eefcd[_0x5cbaab(0x8d0)]) { if (_0x5cbaab(0x72b) === 'sWDwF') { _0x515e44 = _0x5a8d51(_0x408813['lyrics']), _0x25a9ff['innerHTML'] = ''; if (_0x572992[_0x5cbaab(0x1ea)] === 0x0) { _0x3e3c86['innerHTML'] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } _0x2a4a30[_0x5cbaab(0x4ac)]((_0x4c3b8b, _0x3c1382) => { const _0x346611 = _0x5cbaab, _0x4cd8af = _0x2c8687[_0x346611(0xa51)]('p'); _0x4cd8af[_0x346611(0x948)] = _0x4c3b8b[_0x346611(0x4f1)], _0x4cd8af['id'] = _0x346611(0x346) + _0x3c1382, _0x1aaf9f['appendChild'](_0x4cd8af); }); } else { const _0x546c82 = _0x1eefcd[_0x5cbaab(0x8d0)][_0x20551d]; if (_0x546c82) { const _0x2e8223 = await _0x100b4b(_0x546c82); await _0x5941fe(_0x5cbaab(0x65e) + _0x20551d + '_' + _0x311d50, _0x2e8223); } } } } const _0x4036b4 = { 'id': _0x311d50, 'name': _0x1eefcd[_0x5cbaab(0xa6a)], 'remark': _0x1eefcd[_0x5cbaab(0x531)] || '', 'persona': _0x1eefcd['persona'], 'avatar': _0x53c001, 'linkedWorldBookIds': _0x29a1b4, 'bubbleCss': _0x1eefcd[_0x5cbaab(0x865)] || '' }; _0x2c45d7['characters'][_0x5cbaab(0xb49)](_0x4036b4); const _0x4a2d40 = { 'id': 'chat_' + _0x311d50, 'type': _0x5cbaab(0x639), 'participantIds': [_0x311d50], 'boundUserProfileId': _0x2c45d7[_0x5cbaab(0x4d3)] }; _0x2c45d7[_0x5cbaab(0x75e)]['push'](_0x4a2d40), _0x3ac55e(), await _0x2446f8(), _0x18f071('“' + _0x4036b4[_0x5cbaab(0xa6a)] + _0x5cbaab(0x91c)); } catch (_0x4402f9) { console['error'](_0x5cbaab(0x4c8), _0x4402f9), _0x18f071('导入失败了，笨蛋:\x20' + _0x4402f9[_0x5cbaab(0x80d)]); } finally { if (_0x5cbaab(0x195) === _0x5cbaab(0x73e)) { const _0x38cd5f = _0x5acce5[_0x5cbaab(0xad1)](_0x5cbaab(0x8cf)); _0x38cd5f['innerHTML'] = ''; const _0x1735d7 = _0x2c9cb2[_0x5cbaab(0xb76)][_0x5cbaab(0x662)](_0x20ee8a => _0xfd2a51['chats'][_0x5cbaab(0x69b)](_0x2951b8 => _0x2951b8['type'] === _0x5cbaab(0x639) && _0x2951b8[_0x5cbaab(0x402)][_0x5cbaab(0x7a3)](_0x20ee8a['id']))); if (_0x1735d7[_0x5cbaab(0x1ea)] === 0x0) { _0x38cd5f[_0x5cbaab(0x16c)] = _0x5cbaab(0x689); return; } _0x1735d7[_0x5cbaab(0x4ac)](_0xc93d5c => { const _0x27cd7c = _0x5cbaab, _0x4520f4 = _0x1b5a21[_0x27cd7c(0xa51)]('li'); _0x4520f4[_0x27cd7c(0xa5e)] = _0x27cd7c(0x808), _0x4520f4['dataset']['charId'] = _0xc93d5c['id'], _0x4520f4[_0x27cd7c(0x16c)] = _0x27cd7c(0x40b) + (_0xc93d5c[_0x27cd7c(0x37b)] || _0x538ae3) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0xc93d5c['name'] + _0x27cd7c(0x210) + (_0xc93d5c[_0x27cd7c(0x531)] || '私聊') + _0x27cd7c(0x56a), _0x4520f4['addEventListener'](_0x27cd7c(0x43a), () => { _0x731c05(_0xc93d5c['id']); }), _0x38cd5f['appendChild'](_0x4520f4); }); } else _0x4ded3c(![]), _0x4fb347[_0x5cbaab(0xb6a)][_0x5cbaab(0x82f)] = ''; } }, _0x14d91f[_0x4bc63a(0x9b3)](_0x5f108e); } else { _0x1b7d05[_0x4bc63a(0x16c)] = _0x4bc63a(0x503); return; } } function _0x34ca66(_0xa546f1, _0x45d268 = []) { const _0x23b6ac = _0x1c58bc, _0x25aa1a = document[_0x23b6ac(0xad1)](_0xa546f1); _0x25aa1a[_0x23b6ac(0x16c)] = ''; const _0x2e4bbb = _0x2c45d7[_0x23b6ac(0x538)][_0x23b6ac(0x1f9)]((_0x43a2b3, _0x1bbd79) => { const _0x27b136 = _0x23b6ac, _0x44a1c9 = _0x1bbd79['categoryId'] || _0x27b136(0x135); return !_0x43a2b3[_0x44a1c9] && (_0x43a2b3[_0x44a1c9] = []), _0x43a2b3[_0x44a1c9]['push'](_0x1bbd79), _0x43a2b3; }, {}), _0xb4b969 = () => { const _0x4cbf38 = _0x23b6ac; _0xa546f1 === _0x4cbf38(0x96c) ? _0x53b3d4() : _0x4cbf38(0x5d9) === 'LjRJP' ? _0x2a0c2a[_0x4cbf38(0x24b)] ? _0x234f48[_0x4cbf38(0xbc9)]() : _0x211b0f[_0x4cbf38(0x37d)]() : _0x13b59a(); }, _0x3c6750 = [..._0x2c45d7[_0x23b6ac(0x54e)]]; if (_0x2e4bbb[_0x23b6ac(0x135)] && !_0x3c6750['find'](_0x205106 => _0x205106['id'] === _0x23b6ac(0x135))) { const _0x1aba83 = _0x2c45d7['worldBookCategories']['some'](_0x287adb => _0x287adb['id'] === _0x23b6ac(0x135)); !_0x1aba83 && _0x3c6750[_0x23b6ac(0xb49)]({ 'id': _0x23b6ac(0x135), 'name': _0x23b6ac(0x1ee) }); } _0x3c6750['forEach'](_0x39cce5 => { const _0x56f672 = _0x23b6ac; if (_0x56f672(0xa84) !== _0x56f672(0x81a)) { const _0xcf7e1e = _0x2e4bbb[_0x39cce5['id']] || []; if (_0xcf7e1e[_0x56f672(0x1ea)] === 0x0) return; const _0x3d5b9a = document[_0x56f672(0xa51)](_0x56f672(0x54f)); _0x3d5b9a[_0x56f672(0xa5e)] = 'wb-category-group'; const _0x480932 = _0xcf7e1e[_0x56f672(0xaa9)](_0x464d16 => _0x45d268[_0x56f672(0x7a3)](_0x464d16['id'])); _0x3d5b9a[_0x56f672(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22category-checkbox\x22\x20data-category-id=\x22' + _0x39cce5['id'] + '\x22\x20' + (_0x480932 ? _0x56f672(0x5d8) : '') + _0x56f672(0x7df) + _0x39cce5[_0x56f672(0xa6a)] + _0x56f672(0xb4c); const _0xf2466a = _0x3d5b9a['querySelector']('.wb-entry-list'); _0xcf7e1e[_0x56f672(0x4ac)](_0x2d11af => { const _0x584661 = _0x56f672, _0x25c14e = _0x45d268['includes'](_0x2d11af['id']), _0x3fc2ec = document[_0x584661(0xa51)](_0x584661(0xb92)); _0x3fc2ec[_0x584661(0xa5e)] = _0x584661(0xa56), _0x3fc2ec[_0x584661(0x16c)] = _0x584661(0x950) + _0x2d11af['id'] + _0x584661(0xb3a) + _0x39cce5['id'] + '\x22\x20' + (_0x25c14e ? 'checked' : '') + '>\x20' + _0x2d11af['name'], _0xf2466a[_0x584661(0x8ce)](_0x3fc2ec); }), _0x25aa1a['appendChild'](_0x3d5b9a); } else { if (_0x81cdf1[_0x56f672(0xa6a)] === _0x56f672(0x7b7)) return _0x234b70[_0x56f672(0x905)](_0x56f672(0x750)), ''; throw _0x538e8f; } }), _0x25aa1a[_0x23b6ac(0x61a)]('.wb-category-header')[_0x23b6ac(0x4ac)](_0x49516a => { const _0x740706 = _0x23b6ac; _0x49516a[_0x740706(0xb66)](_0x740706(0x43a), _0x18ca63 => { const _0x132f4f = _0x740706; if (_0x18ca63['target']['type'] === _0x132f4f(0x143)) return; const _0x3f3acb = _0x49516a[_0x132f4f(0xadb)], _0x272fb4 = _0x49516a[_0x132f4f(0x94b)](_0x132f4f(0x6c7)), _0x1979f3 = _0x3f3acb[_0x132f4f(0x9c4)][_0x132f4f(0x75d)](_0x132f4f(0x332)); _0x3f3acb[_0x132f4f(0x9c4)][_0x132f4f(0xac2)]('expanded', !_0x1979f3), _0x272fb4[_0x132f4f(0x9c4)][_0x132f4f(0xac2)](_0x132f4f(0x332), !_0x1979f3); }); }), _0x25aa1a['querySelectorAll'](_0x23b6ac(0x133))[_0x23b6ac(0x4ac)](_0x4b9dc3 => { const _0x8bb467 = _0x23b6ac; _0x4b9dc3[_0x8bb467(0xb66)](_0x8bb467(0x43a), _0x3309a1 => { const _0x4253d7 = _0x8bb467, _0x4aa8dd = _0x3309a1[_0x4253d7(0xb6a)][_0x4253d7(0x2d1)][_0x4253d7(0x9ba)], _0x5972a3 = _0x3309a1[_0x4253d7(0xb6a)]['checked']; _0x25aa1a[_0x4253d7(0x61a)](_0x4253d7(0x2ab) + _0x4aa8dd + '\x22]')['forEach'](_0x4d1a53 => { const _0x39fca7 = _0x4253d7; _0x4d1a53[_0x39fca7(0x5d8)] = _0x5972a3; }), _0xb4b969(); }); }), _0x25aa1a[_0x23b6ac(0x61a)](_0x23b6ac(0x7d8))[_0x23b6ac(0x4ac)](_0x3b8fcc => { const _0x17aab0 = _0x23b6ac; _0x3b8fcc[_0x17aab0(0xb66)]('input', _0x2814cf => { const _0x40b9ca = _0x17aab0, _0x4b5f36 = _0x2814cf[_0x40b9ca(0xb6a)]['dataset'][_0x40b9ca(0x9ba)], _0x5e0626 = _0x25aa1a[_0x40b9ca(0x61a)](_0x40b9ca(0x2ab) + _0x4b5f36 + '\x22]'), _0x4e45ab = _0x25aa1a[_0x40b9ca(0x61a)]('.wb-entry-item\x20input[data-category-id=\x22' + _0x4b5f36 + '\x22]:checked'), _0x280589 = _0x25aa1a[_0x40b9ca(0x94b)](_0x40b9ca(0xb64) + _0x4b5f36 + '\x22]'); if (_0x4e45ab[_0x40b9ca(0x1ea)] === 0x0) _0x280589['checked'] = ![], _0x280589[_0x40b9ca(0x8be)] = ![]; else _0x4e45ab[_0x40b9ca(0x1ea)] === _0x5e0626[_0x40b9ca(0x1ea)] ? (_0x280589[_0x40b9ca(0x5d8)] = !![], _0x280589[_0x40b9ca(0x8be)] = ![]) : _0x280589['indeterminate'] = !![]; _0xb4b969(); }); }), _0x25aa1a['querySelectorAll'](_0x23b6ac(0x133))['forEach'](_0x160759 => { const _0x112ce2 = _0x23b6ac, _0x470b43 = _0x160759[_0x112ce2(0x2d1)][_0x112ce2(0x9ba)], _0x240ff9 = _0x25aa1a[_0x112ce2(0x61a)](_0x112ce2(0x2ab) + _0x470b43 + '\x22]'), _0x2ffe4c = _0x25aa1a[_0x112ce2(0x61a)]('.wb-entry-item\x20input[data-category-id=\x22' + _0x470b43 + _0x112ce2(0x946)); _0x2ffe4c[_0x112ce2(0x1ea)] > 0x0 && _0x2ffe4c['length'] < _0x240ff9['length'] && (_0x160759[_0x112ce2(0x8be)] = !![]); }); } async function _0x4fc0a7() { const _0x5ee6ba = _0x1c58bc, _0x4e150d = [_0x5ee6ba(0x198), 'happy', _0x5ee6ba(0x872), _0x5ee6ba(0x453), _0x5ee6ba(0x46c)], _0x5ef2e4 = _0x3d8de1['value'], _0xcbfe58 = document[_0x5ee6ba(0xad1)](_0x5ee6ba(0x294))[_0x5ee6ba(0x82f)], _0x465269 = _0x4e26d7[_0x5ee6ba(0xb1f)][0x0], _0x21c82a = _0x21fee5[_0x5ee6ba(0xb1f)][0x0], _0x5462ca = _0x1900d6[_0x5ee6ba(0xb1f)][0x0], _0x431a02 = document[_0x5ee6ba(0x61a)](_0x5ee6ba(0x441)), _0x29beef = Array[_0x5ee6ba(0x8c8)](_0x431a02)['map'](_0x223228 => _0x223228[_0x5ee6ba(0x82f)]), _0x9c1d3b = { 'name': _0x1bc980[_0x5ee6ba(0x82f)][_0x5ee6ba(0x471)](), 'remark': _0x379920['value'][_0x5ee6ba(0x471)](), 'persona': _0xe74571['value'][_0x5ee6ba(0x471)](), 'linkedWorldBookIds': _0x29beef, 'bubbleCss': document[_0x5ee6ba(0xad1)](_0x5ee6ba(0x22a))['value'][_0x5ee6ba(0x471)](), 'avatarFrameUrl': document[_0x5ee6ba(0xad1)](_0x5ee6ba(0x430))[_0x5ee6ba(0x82f)][_0x5ee6ba(0x471)](), 'userAvatarFrameUrl': document[_0x5ee6ba(0xad1)](_0x5ee6ba(0x5a0))[_0x5ee6ba(0x82f)]['trim']() }; if (!_0x9c1d3b[_0x5ee6ba(0xa6a)]) { _0x18f071(_0x5ee6ba(0x92a)); return; } try { if (_0x5ee6ba(0x1b8) !== _0x5ee6ba(0x1b8)) _0x129eec[_0x5ee6ba(0xb49)]({ 'name': _0x4df07c[0x0][_0x5ee6ba(0x471)](), 'url': _0x448212[0x1]['trim']() }); else { let _0x28424d = _0x5ef2e4; if (_0x5ef2e4) { const _0x1d0d5e = _0x2c45d7['characters'][_0x5ee6ba(0x128)](_0x4ba77a => _0x4ba77a['id'] === _0x5ef2e4); _0x1d0d5e && Object[_0x5ee6ba(0xb85)](_0x1d0d5e, _0x9c1d3b); } else { if (_0x5ee6ba(0xb6e) === 'ZiZgf') { const _0x582f96 = _0x5ee6ba(0xa65) + Date[_0x5ee6ba(0x7e3)](); _0x28424d = _0x582f96; const _0x273176 = { 'id': _0x582f96, ..._0x9c1d3b }; _0x273176[_0x5ee6ba(0x37b)] = _0x465269 ? await _0x12e6e2(_0x465269) : _0x72f264, _0x2c45d7[_0x5ee6ba(0xb76)]['push'](_0x273176); const _0xf4f72 = { 'id': _0x5ee6ba(0xbc3) + _0x582f96, 'type': 'private', 'participantIds': [_0x582f96], 'listenTogetherSession': null }; _0x2c45d7['chats'][_0x5ee6ba(0xb49)](_0xf4f72); } else _0x49731e[_0x5ee6ba(0x208)]('字体应用失败:', _0xe8c009), _0x589d33(_0x5ee6ba(0x61f)); } const _0x584470 = _0x2c45d7[_0x5ee6ba(0x75e)][_0x5ee6ba(0x128)](_0x5bd5ed => _0x5bd5ed['type'] === 'private' && _0x5bd5ed[_0x5ee6ba(0x402)]['includes'](_0x28424d)); _0x584470 && (_0x5ee6ba(0x9f6) !== 'WotKq' ? _0x584470[_0x5ee6ba(0x815)] = _0xcbfe58 : (_0x5f6abb[_0x5ee6ba(0x82f)] = _0x4fc4b6['apiSettings'][_0x5ee6ba(0x2a6)] || '', _0x294046['value'] = _0x3547b0[_0x5ee6ba(0x780)]['key'] || '', _0x54fede['value'] = _0x5452d8[_0x5ee6ba(0x780)][_0x5ee6ba(0x839)] || '', _0x198140[_0x5ee6ba(0x82f)] = _0x3399a8(_0x42d9b6[_0x5ee6ba(0x8cd)]?.[_0x5ee6ba(0x951)] ?? 0x64), _0x2c81d1[_0x5ee6ba(0xad1)]('api-provider')[_0x5ee6ba(0x82f)] = _0x3333d0[_0x5ee6ba(0x780)]['provider'] || _0x5ee6ba(0x3bb))); if (_0x465269) await _0x5941fe('char_avatar_' + _0x28424d, _0x465269); if (_0x21c82a) await _0x5941fe(_0x5ee6ba(0x8fe) + _0x28424d, _0x21c82a); if (_0x5462ca) await _0x5941fe(_0x5ee6ba(0x32c) + _0x28424d, _0x5462ca); for (const _0x522c9e of _0x4e150d) { const _0x231ca4 = document[_0x5ee6ba(0xad1)]('char-edit-sprite-' + _0x522c9e + _0x5ee6ba(0xb21))[_0x5ee6ba(0xb1f)][0x0]; if (_0x231ca4) await _0x5941fe(_0x5ee6ba(0x65e) + _0x522c9e + '_' + _0x28424d, _0x231ca4); } _0x3ac55e(), _0x2446f8(), _0x18f071(_0x5ee6ba(0x33d)), _0x512ecd('chat', 'characterEdit'); if (!_0x5ef2e4) { const _0x45a67e = _0x5ee6ba(0xbc3) + _0x28424d; _0x120b4c(_0x45a67e), _0x2c9e04(!![]); } } } catch (_0x5de9b8) { console[_0x5ee6ba(0x208)](_0x5ee6ba(0x38f), _0x5de9b8), _0x18f071(_0x5ee6ba(0x56f) + _0x5de9b8[_0x5ee6ba(0x80d)]); } if (_0x465269 || _0x21c82a || _0x5462ca || _0x4e150d[_0x5ee6ba(0x69b)](_0x1af256 => document[_0x5ee6ba(0xad1)]('char-edit-sprite-' + _0x1af256 + _0x5ee6ba(0xb21))[_0x5ee6ba(0xb1f)][0x0])) { if (_0x5ee6ba(0x645) !== _0x5ee6ba(0x645)) { const _0x5dba32 = _0x3f7ef7[_0x5ee6ba(0x38a)][_0x243f88], _0x5784a0 = _0x5dba32['categorizedExpenses'][_0x5ee6ba(0x1f9)]((_0x56f224, _0xbea3a3) => _0x56f224 + (_0xbea3a3[_0x5ee6ba(0x15c)] || 0x0), 0x0); _0x3ca0b0 += '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22' + _0x16a9e2 + '\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>' + _0x46262e + _0x5ee6ba(0x302) + _0x5784a0[_0x5ee6ba(0x625)](0x2) + _0x5ee6ba(0xbb1); } else _0x18f071(_0x5ee6ba(0xae9)), setTimeout(() => location[_0x5ee6ba(0x1b0)](), 0x5dc); } else { _0x512ecd('chat', _0x5ee6ba(0xb88)); if (!_0x5ef2e4) { if ('ouEId' !== _0x5ee6ba(0x8b6)) { const _0x2477dd = _0x5ee6ba(0xbc1) + Date[_0x5ee6ba(0x7e3)](); _0x120b4c(_0x2477dd), _0x2c9e04(!![]); } else { if (!_0x285dcc[_0x5ee6ba(0x460)](_0x2d2014)) return '<p>格式错误</p>'; if (_0x2a59ba[_0x5ee6ba(0x1ea)] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>'; return _0x336d16[_0x5ee6ba(0x940)]((_0x4bf273, _0x9c58bd) => new _0x230a9e(_0x9c58bd[_0x5ee6ba(0xa72)]) - new _0x5b28c9(_0x4bf273['last_edited'])), _0x16010b['map'](_0x50d0c9 => _0x5ee6ba(0x26c) + (_0x50d0c9['title'] || '无标题笔记') + _0x5ee6ba(0x560) + (_0x50d0c9['content'] || '') + _0x5ee6ba(0x145) + (_0x50d0c9[_0x5ee6ba(0xa72)] || '') + _0x5ee6ba(0x783))[_0x5ee6ba(0xae6)](''); } } } } function _0x4077da() { const _0x384154 = _0x1c58bc; _0x469968[_0x384154(0x82f)] = '', _0x5447ce[_0x384154(0x16c)] = ''; if (_0x2c45d7[_0x384154(0xb76)]['length'] < 0x2) { _0x18f071('需要至少2个角色才能创建群聊。'); return; } _0x2c45d7[_0x384154(0xb76)][_0x384154(0x4ac)](_0x2d62cf => { const _0x1739b9 = _0x384154, _0x5f5438 = document[_0x1739b9(0xa51)]('li'); _0x5f5438[_0x1739b9(0xa5e)] = _0x1739b9(0x394), _0x5f5438[_0x1739b9(0x16c)] = _0x1739b9(0x9dd) + _0x2d62cf['id'] + _0x1739b9(0x350) + _0x2d62cf['id'] + _0x1739b9(0xbac) + (_0x2d62cf[_0x1739b9(0x37b)] || _0x72f264) + _0x1739b9(0x2bd) + _0x2d62cf['id'] + _0x1739b9(0x685) + _0x2d62cf[_0x1739b9(0xa6a)] + _0x1739b9(0xa6b), _0x5447ce[_0x1739b9(0x8ce)](_0x5f5438); }), _0x512ecd(_0x384154(0x2cf), 'charSelect'); } function _0x19d480() { const _0xe86ff = _0x1c58bc; if (_0xe86ff(0xa98) !== _0xe86ff(0x93c)) { const _0x588428 = _0x469968['value'][_0xe86ff(0x471)](); if (!_0x588428) { if (_0xe86ff(0xb07) === _0xe86ff(0x552)) _0x450599[_0xe86ff(0x9c4)][_0xe86ff(0x2ac)](_0xe86ff(0x944)); else { _0x18f071(_0xe86ff(0x6fb)); return; } } const _0x3f69f7 = Array[_0xe86ff(0x8c8)](_0x5447ce[_0xe86ff(0x61a)](_0xe86ff(0x9e1)))[_0xe86ff(0x3c4)](_0x14ae1 => _0x14ae1[_0xe86ff(0x2d1)]['id']); if (_0x3f69f7[_0xe86ff(0x1ea)] < 0x2) { _0x18f071('群聊至少需要2名成员。'); return; } const _0x17c701 = { 'id': _0xe86ff(0x328) + Date[_0xe86ff(0x7e3)](), 'type': 'group', 'name': _0x588428, 'participantIds': _0x3f69f7 }; _0x2c45d7[_0xe86ff(0x75e)]['push'](_0x17c701), _0x2c45d7[_0xe86ff(0x147)] = _0x17c701['id'], _0x3ac55e(), _0x2446f8(), _0x1f769d(), _0x56505b(), _0x18f071(_0xe86ff(0x589) + _0x588428 + _0xe86ff(0x192)), _0x512ecd(_0xe86ff(0xa37), 'groupChatCreate'); } else _0x4b496b['preventDefault'](), _0x273294(); } _0x154c9a['addEventListener'](_0x1c58bc(0x43a), () => _0x41ee97[_0x1c58bc(0x43a)]()), _0x277377['addEventListener']('click', _0xf927a1), _0x41ee97[_0x1c58bc(0xb66)](_0x1c58bc(0xad6), _0x35c174), _0x381ee0[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x280385), _0x2dc3f6[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x401464[_0x1c58bc(0x9c4)]['remove'](_0x1c58bc(0x944))), _0x3f42d2[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x401464[_0x1c58bc(0x9c4)]['remove']('show')), _0x48086e[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x5ef1a1 = _0x1c58bc; 'sCcDJ' === _0x5ef1a1(0x158) ? _0x3011a4 += _0x5ef1a1(0x57c) : (_0x13ba05[_0x5ef1a1(0xa97)](), navigator[_0x5ef1a1(0x980)][_0x5ef1a1(0x8a6)](_0x13ba05[_0x5ef1a1(0x82f)])[_0x5ef1a1(0xa0d)](() => { const _0x17b242 = _0x5ef1a1; _0x18f071(_0x17b242(0x37e)); })['catch'](_0x3b8cb6 => { const _0x5ac5da = _0x5ef1a1; _0x18f071(_0x5ac5da(0x215)); })); }), _0xebf20d[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x5b9707), _0x5665d7[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x516d63), _0x4117fe['addEventListener'](_0x1c58bc(0x43a), () => _0x1b7327[_0x1c58bc(0x9c4)][_0x1c58bc(0x6e1)]('show')), _0x4c9952[_0x1c58bc(0xb66)]('click', () => _0x1b7327['classList'][_0x1c58bc(0x6e1)](_0x1c58bc(0x944))), _0x117ab1[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x21fee5['click']()), _0x52513c['addEventListener'](_0x1c58bc(0x43a), () => _0x1900d6[_0x1c58bc(0x43a)]()), _0x21fee5[_0x1c58bc(0xb66)](_0x1c58bc(0xad6), _0x5e4586 => { const _0x2a08d7 = _0x1c58bc, _0xd1cab1 = _0x5e4586[_0x2a08d7(0xb6a)][_0x2a08d7(0xb1f)][0x0]; if (!_0xd1cab1) return; const _0x43acfc = URL[_0x2a08d7(0x97d)](_0xd1cab1); _0x117ab1['style']['backgroundImage'] = _0x2a08d7(0xbce) + _0x43acfc + '\x27)'; }), _0x1900d6[_0x1c58bc(0xb66)](_0x1c58bc(0xad6), _0x2e9ba4 => { const _0x2aa5c6 = _0x1c58bc, _0x2510c4 = _0x2e9ba4[_0x2aa5c6(0xb6a)]['files'][0x0]; if (!_0x2510c4) return; const _0x50f74a = URL['createObjectURL'](_0x2510c4); _0x52513c[_0x2aa5c6(0x819)][_0x2aa5c6(0xbe4)] = _0x2aa5c6(0xbce) + _0x50f74a + '\x27)'; }), _0x1eeeeb[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x46a08e[_0x1c58bc(0x43a)]()), _0x86373d[_0x1c58bc(0xb66)]('click', () => { const _0x37ae3b = _0x1c58bc; localStorage[_0x37ae3b(0x1fa)](_0x37ae3b(0x4eb)), _0x29bd56(), _0x18f071(_0x37ae3b(0x185)); }), _0x46a08e['addEventListener']('change', async _0x1ca098 => { const _0x5b9afe = _0x1c58bc; if (_0x5b9afe(0xb9f) === _0x5b9afe(0x8d7)) { const _0x140a60 = _0x3e6090['transaction'](_0x407f7f, _0x5b9afe(0x2cb)), _0xfe2451 = _0x140a60[_0x5b9afe(0x92c)](_0x19fff5), _0x2dc804 = _0xfe2451[_0x5b9afe(0x8c2)](_0x55b3c6); _0x2dc804[_0x5b9afe(0x62f)] = () => _0x4927df(_0x2dc804[_0x5b9afe(0xb7b)] ? _0x2dc804[_0x5b9afe(0xb7b)][_0x5b9afe(0x228)] : null), _0x2dc804[_0x5b9afe(0x168)] = () => _0x22fb4a(_0x2dc804['error']); } else { const _0x18fa81 = _0x1ca098[_0x5b9afe(0xb6a)][_0x5b9afe(0xb1f)][0x0]; if (!_0x18fa81) return; try { if ('TyZSP' !== _0x5b9afe(0xa7f)) { const _0x124b3b = await _0x12e6e2(_0x18fa81); localStorage[_0x5b9afe(0x3ae)](_0x5b9afe(0x4eb), _0x124b3b), _0x29bd56(), _0x18f071(_0x5b9afe(0x55a)); } else { const _0x1e3bac = _0x3fb73f[_0x5b9afe(0x998)](); _0x1e3bac[_0x5b9afe(0x62f)] = () => _0x5e1e13(_0x1e3bac['result']), _0x1e3bac['onerror'] = () => _0x548f08(_0x1e3bac['error']); } } catch (_0xe7a9a0) { _0x18f071(_0x5b9afe(0x424) + _0xe7a9a0['message']); } } }), document[_0x1c58bc(0xad1)](_0x1c58bc(0x955))['addEventListener']('click', () => _0x512ecd('chat', _0x1c58bc(0x11e))), document[_0x1c58bc(0xad1)](_0x1c58bc(0x3bf))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0xcf549a); const _0x2ff86d = document[_0x1c58bc(0xad1)](_0x1c58bc(0xa5b)), _0x3d7c42 = document[_0x1c58bc(0xad1)](_0x1c58bc(0xa35)); _0x2ff86d[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x3d7c42[_0x1c58bc(0x43a)]()), _0x3d7c42['addEventListener'](_0x1c58bc(0xad6), _0x6268 => { const _0x3c6bec = _0x1c58bc; if (_0x3c6bec(0x824) === _0x3c6bec(0x824)) { const _0x41babd = _0x6268['target']['files'][0x0]; if (!_0x41babd) return; const _0x501f81 = URL[_0x3c6bec(0x97d)](_0x41babd); _0x2ff86d['src'] = _0x501f81, _0x2ff86d['onload'] = () => { const _0x4c66cb = _0x3c6bec; URL[_0x4c66cb(0xbc5)](_0x501f81); }; } else _0x3ac81b[_0x3c6bec(0x4d3)] = _0x2cb6d7, _0x151918(), _0x2b6351('已设为当前用户！'), _0x1e06ef(), _0x5373eb['getElementById']('set-active-user-button')[_0x3c6bec(0x819)][_0x3c6bec(0x974)] = _0x3c6bec(0xb39); }); const _0x4a199d = document[_0x1c58bc(0xad1)]('group-bg-preview')[_0x1c58bc(0x70a)], _0x519dcd = document[_0x1c58bc(0xad1)](_0x1c58bc(0x7cf)), _0x50ff76 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x3e2)); _0x4a199d['addEventListener'](_0x1c58bc(0x43a), () => _0x519dcd[_0x1c58bc(0x43a)]()), _0x519dcd[_0x1c58bc(0xb66)](_0x1c58bc(0xad6), _0x5ccc6b => { const _0x435832 = _0x1c58bc, _0x4687f1 = _0x5ccc6b['target'][_0x435832(0xb1f)][0x0]; if (!_0x4687f1) return; const _0x1cc0e0 = URL['createObjectURL'](_0x4687f1); document[_0x435832(0xad1)]('group-bg-preview')[_0x435832(0x819)][_0x435832(0xbe4)] = _0x435832(0xbce) + _0x1cc0e0 + '\x27)'; }); const _0x35b5ae = document['querySelector'](_0x1c58bc(0x84d)), _0x3c30d2 = document[_0x1c58bc(0xad1)]('group-world-book-checkboxes'); _0x35b5ae[_0x1c58bc(0xb66)]('click', _0x2eaa => { const _0x573729 = _0x1c58bc; _0x2eaa['stopPropagation'](), _0x3c30d2[_0x573729(0x9c4)][_0x573729(0xac2)](_0x573729(0x945)), _0x35b5ae[_0x573729(0x9c4)][_0x573729(0xac2)](_0x573729(0x332)); }), _0x3c30d2[_0x1c58bc(0xb66)]('change', _0x13b59a), document['getElementById'](_0x1c58bc(0x452))[_0x1c58bc(0xb66)]('click', _0x14fad6), document['getElementById'](_0x1c58bc(0x9ff))[_0x1c58bc(0xb66)]('click', async () => { const _0x15c27e = _0x1c58bc; if (_0x15c27e(0x43e) === _0x15c27e(0x43e)) { const _0x327e9e = _0x5c10dc(); if (!_0x327e9e || _0x327e9e[_0x15c27e(0x1a7)] !== _0x15c27e(0x62a)) return; const _0x3033e9 = await _0x17d597(_0x15c27e(0xa96) + _0x327e9e[_0x15c27e(0xa6a)] + _0x15c27e(0x18d)); _0x3033e9 && (_0x570a10(_0x327e9e['id']), _0x18f071(_0x15c27e(0x522)), _0x512ecd('chat'), _0x2c9e04(![])); } else _0x217b27 && _0x1b1a9e(_0x52cbea['id'], _0x528d98[_0x15c27e(0x3c4)](_0x7448d7 => _0x7448d7['id'])); }); const _0x4c36ca = document[_0x1c58bc(0x94b)]('.custom-multiselect\x20.select-box'), _0x4004ca = document['getElementById'](_0x1c58bc(0x96c)); _0x4c36ca[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x573212 => { const _0x34f69e = _0x1c58bc; _0x573212[_0x34f69e(0x8ea)](), _0x4004ca['classList'][_0x34f69e(0xac2)]('visible'), _0x4c36ca[_0x34f69e(0x9c4)][_0x34f69e(0xac2)](_0x34f69e(0x332)); }), _0x4004ca['addEventListener'](_0x1c58bc(0xad6), _0x53b3d4), document[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x5c0eb0 => { const _0x4f60a9 = _0x1c58bc; !document[_0x4f60a9(0x94b)](_0x4f60a9(0x660))[_0x4f60a9(0x75d)](_0x5c0eb0[_0x4f60a9(0xb6a)]) && (_0x4004ca[_0x4f60a9(0x9c4)]['remove'](_0x4f60a9(0x945)), _0x4c36ca[_0x4f60a9(0x9c4)][_0x4f60a9(0x6e1)]('expanded')); }), _0x114f73[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x5ca9e9 = _0x1c58bc; _0x1b375c(), _0x512ecd(_0x5ca9e9(0x330), 'home'); }), document[_0x1c58bc(0xad1)](_0x1c58bc(0x26e))['addEventListener']('click', () => _0x512ecd(_0x1c58bc(0x315), _0x1c58bc(0x330))), document[_0x1c58bc(0xad1)](_0x1c58bc(0x20d))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x26e290()), document[_0x1c58bc(0xad1)](_0x1c58bc(0xa93))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x1049ea = _0x1c58bc; _0x1b375c(), _0x512ecd(_0x1049ea(0x330), _0x1049ea(0x74a)); }), document[_0x1c58bc(0xad1)](_0x1c58bc(0x9bb))['addEventListener'](_0x1c58bc(0x43a), _0x56a1bb), document['getElementById'](_0x1c58bc(0x94c))['addEventListener'](_0x1c58bc(0x43a), _0x1cdae6), _0x1286a5[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x512ecd('wallpaper', _0x1c58bc(0x315))), _0x1b12f3[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x512ecd(_0x1c58bc(0x315), _0x1c58bc(0x884))), _0x90e327[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x58ba4b['click']()), _0x58ba4b['addEventListener'](_0x1c58bc(0xad6), async _0x154c29 => { const _0x400f1f = _0x1c58bc, _0x6d7c40 = _0x154c29[_0x400f1f(0xb6a)][_0x400f1f(0xb1f)][0x0]; if (!_0x6d7c40) return; await _0x273577(_0x6d7c40); }), _0x2fcdbb[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x3743ba = _0x1c58bc; _0x2446f8(), _0x512ecd(_0x3743ba(0xa37), _0x3743ba(0x315)); }), _0x1e451d[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x64e127 = _0x1c58bc; _0x2bd9de(); const _0x33e413 = (_0x2c45d7[_0x64e127(0x780)]['endpoint'] || '')[_0x64e127(0x7a3)](_0x28e897); _0x135cbd[_0x64e127(0xa6c)] = _0x33e413, _0x512ecd('settings', 'home'); }), _0x428b2b[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x512ecd(_0x1c58bc(0x315), 'settings')), _0x1c7b63[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x25c92a = _0x1c58bc; _0x5cd6df(), document['getElementById'](_0x25c92a(0xbc2))[_0x25c92a(0x9c4)][_0x25c92a(0x6e1)]('show'), document['getElementById'](_0x25c92a(0x5d2))[_0x25c92a(0x819)][_0x25c92a(0x974)] = _0x25c92a(0xb39), setTimeout(() => { const _0x4ebcc5 = _0x25c92a; _0x512ecd(_0x4ebcc5(0x315), _0x4ebcc5(0xa37)); }, 0x14); }), _0x422353[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x3dfbf0 = _0x1c58bc; _0x3dfbf0(0x6c8) === _0x3dfbf0(0x3c5) ? (_0x12eea0[_0x2cce7a][_0x3dfbf0(0xb66)]('click', () => _0xcc94b1[_0x52c884][_0x3dfbf0(0x43a)]()), _0x1dd361[_0x18f873][_0x3dfbf0(0xb66)](_0x3dfbf0(0xad6), _0x5b1b2c => { const _0x2950e9 = _0x3dfbf0; _0x57d9f1(_0x1ceeee, _0x5b1b2c[_0x2950e9(0xb6a)][_0x2950e9(0xb1f)][0x0]); })) : (_0x5cd6df(), document['getElementById']('chat-sticker-panel')[_0x3dfbf0(0x9c4)][_0x3dfbf0(0x6e1)]('show'), document[_0x3dfbf0(0xad1)](_0x3dfbf0(0x5d2))['style'][_0x3dfbf0(0x974)] = _0x3dfbf0(0xb39), setTimeout(() => { const _0xa34c94 = _0x3dfbf0; 'kniks' === _0xa34c94(0x5e9) ? _0x2c9e04(![]) : _0x3b2895(_0xf48ed0, _0x59c530); }, 0x14)); }), _0x2c31ae['addEventListener'](_0x1c58bc(0x43a), () => { const _0x12e108 = _0x1c58bc; if (_0x12e108(0x404) !== 'aCWRV') try { const _0x20e1da = { 'type': _0x12e108(0x13f), 'version': 0x1, 'timestamp': _0x46f508['now'](), 'accountingData': _0x378ba8[_0x12e108(0x4b3)], 'accountingLedger': _0x2a472e['accountingLedger'] }, _0x235f47 = new _0x540d15([_0x5b565a['stringify'](_0x20e1da, null, 0x2)], { 'type': 'application/json' }), _0x40b89a = _0x31fc1c[_0x12e108(0x97d)](_0x235f47), _0x3b6cea = _0x4211e3[_0x12e108(0xa51)]('a'), _0x176058 = new _0x1d6e62(), _0x15dd3f = _0x176058['getFullYear']() + '-' + _0x33a90e(_0x176058[_0x12e108(0x571)]() + 0x1)[_0x12e108(0x466)](0x2, '0') + '-' + _0x3406bd(_0x176058[_0x12e108(0x41f)]())['padStart'](0x2, '0'); _0x3b6cea['href'] = _0x40b89a, _0x3b6cea[_0x12e108(0xbd3)] = 'Noir_Accounting_Backup_' + _0x15dd3f + '.json', _0x6f74c7['body'][_0x12e108(0x8ce)](_0x3b6cea), _0x3b6cea['click'](), _0x4809f3['body'][_0x12e108(0x9b0)](_0x3b6cea), _0x463cf7[_0x12e108(0xbc5)](_0x40b89a), _0x5bfe17(_0x12e108(0x73c)); } catch (_0x4419e0) { _0x20075b[_0x12e108(0x208)]('导出账本失败:', _0x4419e0), _0x1c2250(_0x12e108(0x4ec) + _0x4419e0[_0x12e108(0x80d)]); } else _0x512ecd(_0x12e108(0xa37), _0x12e108(0xb88)); }), _0x3e3aa5[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x140297 = _0x1c58bc; _0x2cd59f['classList'][_0x140297(0x2ac)](_0x140297(0x944)); }), _0x5d3897[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0xb57871()), _0x1e33f0[_0x1c58bc(0xb66)]('click', _0x4ce144); function _0x466bde(_0x1f9f4c) { const _0x27e0fa = _0x1c58bc; if (_0x27e0fa(0x4e5) === _0x27e0fa(0xa22)) { const _0x45e6d6 = _0x2b1a28[_0x5b1947['id']] || []; if (_0x45e6d6[_0x27e0fa(0x1ea)] === 0x0) return; const _0x4800bd = _0xa72bfb[_0x27e0fa(0xa51)]('div'); _0x4800bd[_0x27e0fa(0xa5e)] = _0x27e0fa(0x761); const _0x366e40 = _0x45e6d6['every'](_0x108eeb => _0x427b8a[_0x27e0fa(0x7a3)](_0x108eeb['id'])); _0x4800bd['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22category-checkbox\x22\x20data-category-id=\x22' + _0x542431['id'] + '\x22\x20' + (_0x366e40 ? _0x27e0fa(0x5d8) : '') + '>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>' + _0x42d0a7['name'] + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-toggle-arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-entry-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; const _0x19588e = _0x4800bd[_0x27e0fa(0x94b)]('.wb-entry-list'); _0x45e6d6[_0x27e0fa(0x4ac)](_0x3e0d9a => { const _0x17dc53 = _0x27e0fa, _0x570076 = _0x4f95a8['includes'](_0x3e0d9a['id']), _0x279b87 = _0x58c86d[_0x17dc53(0xa51)]('label'); _0x279b87[_0x17dc53(0xa5e)] = _0x17dc53(0xa56), _0x279b87['innerHTML'] = _0x17dc53(0x950) + _0x3e0d9a['id'] + '\x22\x20data-category-id=\x22' + _0x43accc['id'] + '\x22\x20' + (_0x570076 ? _0x17dc53(0x5d8) : '') + '>\x20' + _0x3e0d9a[_0x17dc53(0xa6a)], _0x19588e['appendChild'](_0x279b87); }), _0x30a451[_0x27e0fa(0x8ce)](_0x4800bd); } else { if (!_0x1f9f4c || _0x1f9f4c['type'] !== 'group') return; const _0x56c647 = _0x27e0fa(0x4c4); document['body'][_0x27e0fa(0x900)](_0x27e0fa(0x8e3), _0x56c647); const _0x422a2a = document['getElementById'](_0x27e0fa(0x322)), _0x20f168 = _0x422a2a[_0x27e0fa(0x94b)]('.choice-modal-backdrop'), _0x31cfd9 = document[_0x27e0fa(0xad1)](_0x27e0fa(0x3ce)), _0x511c16 = document[_0x27e0fa(0xad1)]('group-edit-members'), _0x3433b4 = document[_0x27e0fa(0xad1)](_0x27e0fa(0xa60)), _0x301e2c = document[_0x27e0fa(0xad1)](_0x27e0fa(0x316)), _0x58e400 = document[_0x27e0fa(0xad1)](_0x27e0fa(0x1d1)), _0x3af258 = () => _0x422a2a[_0x27e0fa(0x6e1)](); _0x31cfd9[_0x27e0fa(0xb66)]('click', async () => { const _0x31cb96 = _0x27e0fa; if (_0x31cb96(0xa26) === _0x31cb96(0x2ed)) _0x3c52df(); else { _0x3af258(); const _0x8caf2e = await _0x17d597('确定要清空群聊\x22' + _0x1f9f4c[_0x31cb96(0xa6a)] + _0x31cb96(0x6ad)); if (_0x8caf2e) { if (_0x31cb96(0x532) !== 'wDldL') { const _0xd66c43 = _0x424229[_0x31cb96(0x94b)](_0x31cb96(0x862)); _0xd66c43 && _0xd66c43[_0x31cb96(0xb66)](_0x31cb96(0x43a), function () { const _0x10e217 = _0x31cb96, _0x15941c = { 'id': _0x3ceb1b['id'], 'url': _0x3360c5[_0x10e217(0x642)] }; _0x5acd3b(this, _0x15941c); }); } else { _0x1f9f4c['id'] === _0x2c45d7[_0x31cb96(0x147)] && (_0x5cd6df(), _0x2c45d7['conversationHistory'] = [], _0xd1d472()); try { localStorage[_0x31cb96(0x1fa)]('chatHistory_' + _0x1f9f4c['id']), _0x18f071(_0x31cb96(0x828) + _0x1f9f4c[_0x31cb96(0xa6a)] + _0x31cb96(0x844)); } catch (_0x579fc6) { _0x31cb96(0xa2c) !== 'RjQuh' ? (console[_0x31cb96(0x208)](_0x31cb96(0x22f) + _0x1f9f4c['id'], _0x579fc6), _0x18f071('清空聊天记录失败。')) : (_0x5e299a[_0x31cb96(0xa6a)] = _0x4d25c0, _0x477dc1[_0x31cb96(0x815)] = _0xd8dd47, _0x4f2665[_0x31cb96(0x739)] = _0x93b568); } } } } }), _0x511c16[_0x27e0fa(0xb66)](_0x27e0fa(0x43a), () => { const _0x1999a4 = _0x27e0fa; _0x1999a4(0x190) === _0x1999a4(0x8fc) ? _0x39e964[_0x1999a4(0x1a7)] = _0x1999a4(0x4f1) : (_0x3af258(), _0x18f071('编辑群成员功能正在开发中...')); }), _0x3433b4[_0x27e0fa(0xb66)](_0x27e0fa(0x43a), async () => { const _0x51031c = _0x27e0fa; _0x3af258(); const _0x4fed68 = prompt('请输入新的群名称：', _0x1f9f4c[_0x51031c(0xa6a)]); _0x4fed68 && _0x4fed68[_0x51031c(0x471)]() && _0x4fed68 !== _0x1f9f4c['name'] && (_0x51031c(0x99f) !== 'UQLMn' ? (_0x1f9f4c[_0x51031c(0xa6a)] = _0x4fed68[_0x51031c(0x471)](), _0x3ac55e(), _0x2446f8(), _0x1f769d(), _0x18f071(_0x51031c(0x5f3) + _0x1f9f4c[_0x51031c(0xa6a)] + '\x22。')) : _0x3c2619[_0x51031c(0x9ac)] = _0x51031c(0x135)); }), _0x301e2c[_0x27e0fa(0xb66)](_0x27e0fa(0x43a), async () => { const _0x38e509 = _0x27e0fa; if (_0x38e509(0xb32) === _0x38e509(0x806)) _0x45cf45[_0x59731e] = _0xd42c9e[_0x38e509(0x387)](_0x5d863b); else { _0x3af258(); const _0x23ab0a = await _0x17d597(_0x38e509(0x849) + _0x1f9f4c[_0x38e509(0xa6a)] + '\x22\x20吗？所有聊天记录将被永久删除。'); if (_0x23ab0a) { if (_0x38e509(0x89c) === 'qNmjB') return new _0xd9d697((_0x36dd49, _0x5558d6) => { const _0x341997 = _0x38e509, _0x4f8b55 = new _0x1b7f5e(); _0x4f8b55['onloadend'] = () => _0x36dd49(_0x4f8b55['result']), _0x4f8b55[_0x341997(0x168)] = _0x5558d6, _0x4f8b55[_0x341997(0x9f7)](_0x2609e9); }); else _0x570a10(_0x1f9f4c['id']), _0x18f071('群聊\x22' + _0x1f9f4c[_0x38e509(0xa6a)] + _0x38e509(0xa4d)), _0x2c9e04(![]); } } }), _0x20f168['addEventListener'](_0x27e0fa(0x43a), _0x3af258), _0x58e400[_0x27e0fa(0xb66)](_0x27e0fa(0x43a), _0x3af258); } } _0x16ca15[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x2524f9 = _0x1c58bc, _0xc584a5 = _0x5c10dc(); if (_0xc584a5 && _0xc584a5['type'] === _0x2524f9(0x639)) _0x176efd(_0xc584a5['participantIds'][0x0]); else _0xc584a5 && _0xc584a5['type'] === 'group' && _0x69064(_0xc584a5['id']); }), _0x267304[_0x1c58bc(0xb66)]('keydown', _0x23bf0b => { const _0x1e459d = _0x1c58bc; _0x23bf0b['key'] === _0x1e459d(0xaf0) && !_0x23bf0b[_0x1e459d(0x75b)] && (_0x23bf0b[_0x1e459d(0x90a)](), _0xb57871()); }); const _0xba53e = () => _0x2cd59f[_0x1c58bc(0x9c4)]['remove'](_0x1c58bc(0x944)); _0x4c30cc[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0xba53e), _0x28b95b['addEventListener']('click', _0xba53e), _0x439718[_0x1c58bc(0xb66)]('click', () => { const _0x24ff35 = _0x1c58bc; _0x24ff35(0x3d3) !== 'DeHlo' ? (_0xba53e(), _0x176efd()) : _0x1a78c9(_0x24ff35(0x505), _0x24ff35(0x5dc)); }), _0x1c7ae4['addEventListener'](_0x1c58bc(0x43a), () => { _0xba53e(), _0x4077da(); }), _0x4ceed7[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0xe244e7 = _0x1c58bc; _0x512ecd(_0xe244e7(0xa37), _0xe244e7(0x2cf)), _0x2c9e04(![]); }), _0x45829f[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x19d480), _0x338100['addEventListener'](_0x1c58bc(0x43a), () => { const _0x2610e8 = _0x1c58bc; _0x223017[_0x2610e8(0x9c4)][_0x2610e8(0xac2)]('show'), _0x223017[_0x2610e8(0x9c4)][_0x2610e8(0x75d)](_0x2610e8(0x944)) && (_0x4390c3[_0x2610e8(0x889)] = _0x4390c3[_0x2610e8(0x291)]); }), _0x467164[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x21c28e['click']()); const _0xf12fac = document[_0x1c58bc(0xad1)](_0x1c58bc(0x591)); _0x21c28e[_0x1c58bc(0xb66)]('change', _0x985f4e), _0xf12fac[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x4631c9), _0x2b72b1[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x1d1938), _0x39c87e[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x5cf3e9), _0x2ec7b6[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x4fc0a7), _0x558029['addEventListener'](_0x1c58bc(0x43a), _0x14fad6), _0x499fdf['addEventListener'](_0x1c58bc(0x43a), async () => { const _0x4073d4 = _0x1c58bc, _0xcfe3aa = _0x3d8de1[_0x4073d4(0x82f)]; if (!_0xcfe3aa) return; const _0x41344b = _0x132ad2(_0xcfe3aa); if (!_0x41344b) return; const _0x587f6f = await _0x17d597(_0x4073d4(0x524) + _0x41344b['name'] + '”吗？该角色的私聊和所有相关群聊记录都将被一并处理。'); _0x587f6f && (_0x377854(_0xcfe3aa), _0x18f071(_0x4073d4(0x583) + _0x41344b[_0x4073d4(0xa6a)] + '”已删除。'), _0x512ecd(_0x4073d4(0xa37), 'characterEdit'), _0x2c9e04(![])); }), _0x5efd73[_0x1c58bc(0xb66)](_0x1c58bc(0x329), () => { const _0x34d0d2 = _0x1c58bc, _0xe53d9a = _0x5efd73[_0x34d0d2(0x82f)]['trim']()['includes'](_0x28e897); _0x135cbd['disabled'] = _0xe53d9a; }); async function _0x35a5b3() { const _0x20fedc = _0x1c58bc, _0x51fcc6 = _0x5efd73[_0x20fedc(0x82f)][_0x20fedc(0x471)](), _0x11444f = _0x32cf15[_0x20fedc(0x82f)]['trim'](); if (!_0x51fcc6 || !_0x11444f) { if (_0x20fedc(0x870) !== _0x20fedc(0x870)) _0x3e12df(_0x50c761['id']); else { _0x18f071(_0x20fedc(0x25d)); return; } } const _0x52232b = _0x51fcc6[_0x20fedc(0x4db)](/\/+$/, ''), _0x35ffc9 = _0x52232b + '/v1/models'; _0x135cbd['disabled'] = !![], _0x135cbd[_0x20fedc(0x948)] = _0x20fedc(0x923), _0x7ed61c[_0x20fedc(0x9c4)]['remove']('show'); try { const _0x44daf7 = await fetch(_0x35ffc9, { 'headers': { 'Authorization': _0x20fedc(0x981) + _0x1f466c(_0x11444f) } }); if (!_0x44daf7['ok']) throw new Error(_0x20fedc(0xb11) + _0x44daf7[_0x20fedc(0x90c)]); const _0x31a2b8 = await _0x44daf7[_0x20fedc(0x34d)](), _0x22f8c0 = (_0x31a2b8['data'] || _0x31a2b8)[_0x20fedc(0x3c4)](_0x3fc25a => _0x3fc25a['id'])['sort'](); if (_0x22f8c0[_0x20fedc(0x1ea)] > 0x0) _0x20fedc(0xa15) === _0x20fedc(0x5c3) ? _0x1d2cfe[_0x20fedc(0xb66)](_0x20fedc(0x43a), function () { const _0x2d9adb = _0x20fedc, _0x21cb51 = { 'id': _0x403b41['id'], 'url': _0x359582[_0x2d9adb(0x642)] }; _0x40f8f3(this, _0x21cb51); }) : (_0x7ed61c['innerHTML'] = '', _0x22f8c0[_0x20fedc(0x4ac)](_0x32d7a5 => { const _0x6f93de = _0x20fedc, _0x2f46a2 = document['createElement'](_0x6f93de(0x54f)); _0x2f46a2[_0x6f93de(0x948)] = _0x32d7a5, _0x2f46a2['addEventListener'](_0x6f93de(0x43a), () => { const _0x2ed90c = _0x6f93de; _0x131f85[_0x2ed90c(0x82f)] = _0x32d7a5, _0x7ed61c[_0x2ed90c(0x9c4)][_0x2ed90c(0x6e1)](_0x2ed90c(0x944)); }), _0x7ed61c[_0x6f93de(0x8ce)](_0x2f46a2); }), _0x7ed61c[_0x20fedc(0x9c4)]['add'](_0x20fedc(0x944)), _0x18f071(_0x20fedc(0x98d) + _0x22f8c0['length'] + _0x20fedc(0x863))); else { if (_0x20fedc(0x897) === _0x20fedc(0x9d2)) { const _0x207bf8 = _0x17cd8f['author'] === 'user' ? _0x422aab[_0x20fedc(0xa6a)] : _0xa5b9e5(_0xb4d6c8[_0x20fedc(0x7e5)])['name']; return '-\x20[' + new _0x2f4dd3(_0x3b79a7[_0x20fedc(0x782)])[_0x20fedc(0x8a2)]() + ']\x20' + _0x207bf8 + _0x20fedc(0x242) + _0x32e745['content']; } else _0x18f071(_0x20fedc(0x386)); } } catch (_0x3f7eb0) { if (_0x20fedc(0x90e) !== _0x20fedc(0x90e)) { const _0x2354ba = _0x33b2b[_0x20fedc(0x813)]('musicPlayerState'); if (_0x2354ba) { const { playlist: _0x106ab9, currentIndex: _0x456db4 } = _0x1b63c2[_0x20fedc(0x387)](_0x2354ba); _0x1cf096[_0x20fedc(0x460)](_0x106ab9) && _0x106ab9['length'] > 0x0 && _0x456db4 > -0x1 && (_0x5868a7[_0x20fedc(0xa2f)] = _0x106ab9, _0x133bd1['currentlyPlayingIndex'] = _0x456db4, _0x4e68a3[_0x20fedc(0x9c1)] = ![], _0x409536()); } } else _0x18f071('获取模型失败:\x20' + _0x3f7eb0[_0x20fedc(0x80d)] + '\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1'); } finally { if ('sORLo' !== _0x20fedc(0x137)) { const _0xf76f79 = _0x16089a[_0x20fedc(0x554)][_0x20fedc(0x128)](_0x21c50e => _0x21c50e['id'] === _0x35c2bb); _0xf76f79 && (_0xf76f79[_0x20fedc(0xa6a)] = _0x2267b2, _0xf76f79[_0x20fedc(0x815)] = _0x128cc4, _0xf76f79[_0x20fedc(0x739)] = _0x4825ee); } else _0x135cbd[_0x20fedc(0xa6c)] = ![], _0x135cbd[_0x20fedc(0x948)] = '获取'; } } _0x135cbd[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x5b7604 => { const _0x38a12b = _0x1c58bc; if ('XMVkW' !== _0x38a12b(0xbb7)) _0x5b7604[_0x38a12b(0x8ea)](), _0x35a5b3(); else { const _0x4c2bc9 = (_0x1d11aa - _0x76c23d) / (0x3e8 * 0x3c); _0x3386f5 += _0x38a12b(0x78d); } }), document['addEventListener'](_0x1c58bc(0x43a), _0x501623 => { const _0x53cf7e = _0x1c58bc; if ('TBSyu' !== _0x53cf7e(0x8a7)) return _0x1ea514(new _0x435708(_0x53cf7e(0x51d))); else { if (!_0x7ed61c[_0x53cf7e(0x75d)](_0x501623[_0x53cf7e(0xb6a)]) && _0x501623[_0x53cf7e(0xb6a)] !== _0x131f85 && _0x501623[_0x53cf7e(0xb6a)] !== _0x135cbd) { if ('viQZH' === _0x53cf7e(0x435)) _0x7ed61c[_0x53cf7e(0x9c4)]['remove']('show'); else { const _0x5594f3 = _0x1afb60(_0x27cb69[_0x53cf7e(0x989)]); _0x5594f3 && (_0x41eeab = _0x5594f3['name'], _0x365c84 = _0x5594f3[_0x53cf7e(0x37b)]); } } } }); async function _0x12e6e2(_0x4497d4) { return await _0x41c1e8(_0x4497d4, 0x190, 0.85); } _0x17820e[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x2841e0[_0x1c58bc(0x43a)]()), _0x2841e0[_0x1c58bc(0xb66)](_0x1c58bc(0xad6), async _0x40e8e9 => { const _0x3ff8f4 = _0x1c58bc, _0x8e31c = _0x40e8e9['target']['files'][0x0]; if (!_0x8e31c) return; try { const _0x527775 = await _0x12e6e2(_0x8e31c), _0x137fa4 = document[_0x3ff8f4(0xad1)](_0x3ff8f4(0x9ea)); _0x137fa4[_0x3ff8f4(0x819)]['backgroundImage'] = _0x3ff8f4(0xbce) + _0x527775 + '\x27)', _0x137fa4[_0x3ff8f4(0x2d1)][_0x3ff8f4(0x91f)] = _0x527775; } catch (_0x517071) { _0x18f071(_0x3ff8f4(0x424) + _0x517071[_0x3ff8f4(0x80d)]); } }), _0x427caf[_0x1c58bc(0xb66)]('click', () => _0x4e26d7[_0x1c58bc(0x43a)]()), _0x4e26d7[_0x1c58bc(0xb66)](_0x1c58bc(0xad6), async _0xdf9567 => { const _0x3cc766 = _0x1c58bc; if (_0x3cc766(0x1e7) === 'VCpay') { const _0x4be955 = _0xdf9567[_0x3cc766(0xb6a)][_0x3cc766(0xb1f)][0x0]; if (!_0x4be955) return; try { 'clEyK' !== _0x3cc766(0xa82) ? _0x4a24de[_0x3cc766(0x4cb)][_0x3cc766(0x725)](_0x3cc766(0x4f4)) : _0x427caf[_0x3cc766(0x400)] = await _0x12e6e2(_0x4be955); } catch (_0x1de571) { _0x3cc766(0x1b7) === _0x3cc766(0x1b7) ? _0x18f071(_0x3cc766(0x424) + _0x1de571['message']) : _0x1cae81(_0x3cc766(0x424) + _0x445ce9[_0x3cc766(0x80d)]); } } else _0xb8d438['classList']['add'](_0x3cc766(0xa89)), _0x24b038[_0x3cc766(0x9c4)][_0x3cc766(0x2ac)]('is-exiting-left'), _0x2b3c4e['classList']['add'](_0x3cc766(0x134)), _0x283575(() => { const _0x535e25 = _0x3cc766; _0x4d8e1a[_0x535e25(0x9c4)][_0x535e25(0x6e1)]('is-visible', _0x535e25(0x20c)), _0x269236[_0x535e25(0x9c4)][_0x535e25(0x6e1)](_0x535e25(0xa89)), _0xe1cb75['diaryCurrentPage'] = _0x51ab01, _0x46a619(), _0x3d23a9[_0x535e25(0x95b)] = ![]; }, 0x2bc); }); function _0x3fe3a7() { const _0x4e334b = _0x1c58bc, _0x211b56 = document['getElementById'](_0x4e334b(0xbc2)); _0x211b56['innerHTML'] = '', _0x33d2ea = ![]; const _0x14569b = document[_0x4e334b(0xa51)]('div'); _0x14569b['id'] = 'sticker-panel-controls', _0x14569b[_0x4e334b(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-manage-btn\x22>管理</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-confirm-delete-btn\x22>删除</button>\x0a\x20\x20\x20\x20', _0x211b56[_0x4e334b(0x8ce)](_0x14569b); const _0x5e6a7d = document[_0x4e334b(0xad1)](_0x4e334b(0x545)), _0x536ea4 = document[_0x4e334b(0xad1)](_0x4e334b(0xb27)), _0x286857 = document[_0x4e334b(0xa51)](_0x4e334b(0x54f)); _0x286857[_0x4e334b(0x819)]['display'] = _0x4e334b(0x968), _0x286857[_0x4e334b(0x819)][_0x4e334b(0x726)] = _0x4e334b(0x5cc), _0x286857[_0x4e334b(0x819)][_0x4e334b(0xa44)] = _0x4e334b(0x44e), _0x286857[_0x4e334b(0x819)][_0x4e334b(0x16a)] = _0x4e334b(0x44e), _0x286857[_0x4e334b(0x819)][_0x4e334b(0x1ae)] = '180px', _0x286857[_0x4e334b(0x819)][_0x4e334b(0x31f)] = _0x4e334b(0xb4d), _0x211b56[_0x4e334b(0x8ce)](_0x286857); const _0x6df90a = _0x544f0c(); _0x6df90a[_0x4e334b(0x4ac)](_0x3b2d86 => { const _0x352ae7 = _0x4e334b, _0x388026 = document['createElement']('div'); _0x388026[_0x352ae7(0xa5e)] = 'sticker-item-wrapper', _0x388026[_0x352ae7(0x2d1)]['stickerName'] = _0x3b2d86[_0x352ae7(0xa6a)]; const _0x4f04b5 = document[_0x352ae7(0xa51)](_0x352ae7(0x9f5)); _0x4f04b5['src'] = _0x3b2d86['url'], _0x4f04b5['loading'] = _0x352ae7(0xa32), _0x4f04b5[_0x352ae7(0x616)] = _0x3b2d86[_0x352ae7(0xa6a)], _0x4f04b5[_0x352ae7(0xa5e)] = _0x352ae7(0x73f), _0x388026[_0x352ae7(0x8ce)](_0x4f04b5), _0x286857[_0x352ae7(0x8ce)](_0x388026), _0x388026[_0x352ae7(0xb66)]('click', () => { const _0x24896e = _0x352ae7; if (_0x33d2ea) { _0x388026[_0x24896e(0x9c4)][_0x24896e(0xac2)](_0x24896e(0x60f)); const _0x49faa7 = _0x286857['querySelector'](_0x24896e(0x348)); _0x536ea4[_0x24896e(0x9c4)][_0x24896e(0xac2)](_0x24896e(0x630), !!_0x49faa7); } else _0x72d8e4(_0x3b2d86); }); }), _0x5e6a7d['addEventListener']('click', () => { const _0x39305d = _0x4e334b; _0x33d2ea = !_0x33d2ea, _0x211b56[_0x39305d(0x9c4)][_0x39305d(0xac2)](_0x39305d(0x899), _0x33d2ea), _0x5e6a7d[_0x39305d(0x948)] = _0x33d2ea ? '完成' : '管理', _0x536ea4[_0x39305d(0x819)][_0x39305d(0x974)] = _0x33d2ea ? _0x39305d(0x4e9) : 'none', !_0x33d2ea && (_0x286857[_0x39305d(0x61a)]('.selected')[_0x39305d(0x4ac)](_0x232c97 => _0x232c97['classList'][_0x39305d(0x6e1)]('selected')), _0x536ea4[_0x39305d(0x9c4)][_0x39305d(0x6e1)](_0x39305d(0x630))); }), _0x536ea4[_0x4e334b(0xb66)](_0x4e334b(0x43a), async () => { const _0x8962a1 = _0x4e334b; if (_0x8962a1(0xbbb) === _0x8962a1(0xbbb)) { const _0x562f2a = _0x286857[_0x8962a1(0x61a)]('.selected'); if (_0x562f2a['length'] === 0x0) return; const _0x2d1a9b = await _0x17d597(_0x8962a1(0x22b) + _0x562f2a[_0x8962a1(0x1ea)] + _0x8962a1(0x2ba)); if (_0x2d1a9b) { if (_0x8962a1(0xb3b) !== _0x8962a1(0xb3b)) { const _0x30ca27 = _0x58cbcc[_0x8962a1(0x93e)](_0x52a4ff, 'readwrite'), _0x15f5a4 = _0x30ca27[_0x8962a1(0x92c)](_0x6cf85c), _0x5964fa = _0x15f5a4[_0x8962a1(0xa4f)](_0x1b6665); _0x5964fa['onsuccess'] = () => _0x21e98b(), _0x5964fa[_0x8962a1(0x168)] = () => _0x5d7d84(_0x5964fa[_0x8962a1(0x208)]); } else { const _0x45727e = JSON[_0x8962a1(0x387)](localStorage[_0x8962a1(0x813)](_0x8962a1(0x3e8)) || '[]'); _0x562f2a['forEach'](_0x1d01d4 => { const _0x273936 = _0x8962a1, _0x24000 = _0x1d01d4['dataset'][_0x273936(0x55f)]; if (!_0x45727e['includes'](_0x24000)) { if (_0x273936(0x678) === _0x273936(0x678)) _0x45727e[_0x273936(0xb49)](_0x24000); else { if (_0x39f07c[_0x273936(0x1a7)] === 'group') return _0x273936(0x2ea) + (_0x1ea7c0['name'] || '未命名') + '」'; const _0x5358f5 = _0x57714b(_0x16c6f0[_0x273936(0x402)][0x0]); return '与\x20' + (_0x5358f5?.[_0x273936(0xa6a)] || '未知角色') + '\x20的私聊'; } } }), localStorage[_0x8962a1(0x3ae)]('deletedStickers', JSON[_0x8962a1(0x39b)](_0x45727e)), _0x33d2ea = ![], _0x3fe3a7(), _0x18f071(_0x8962a1(0x978)); } } } else _0x10025a['conversationHistory'] = []; }), _0x536ea4[_0x4e334b(0x819)][_0x4e334b(0x974)] = _0x4e334b(0xb39); const _0x29bc8d = document[_0x4e334b(0xad1)]('chat-sticker-button'), _0x24b14c = new MutationObserver(() => { const _0x36060f = _0x4e334b; if (_0x36060f(0x7cc) === _0x36060f(0x238)) delete _0x218739[_0x36060f(0x4f8)], _0x3769a4(), _0x2215d0(_0x17fd82['id'], _0x36060f(0x198)), _0x2a0f26(_0x36060f(0x97b)), _0x4da617(!![]); else { const _0x1aa57b = _0x211b56[_0x36060f(0x9c4)][_0x36060f(0x75d)](_0x36060f(0x944)); _0x14569b['classList'][_0x36060f(0xac2)]('visible', _0x1aa57b); if (!_0x1aa57b) { if (_0x33d2ea) { if (_0x36060f(0x2c2) !== _0x36060f(0x2c2)) { const _0x64d5e1 = _0x3e23de(_0x2198e1)[_0x36060f(0x471)](); if (_0x64d5e1[_0x36060f(0xbdd)](_0x36060f(0x4be)) && _0x64d5e1['endsWith'](_0x36060f(0x45e))) return [_0x64d5e1]; const _0x4cbd48 = _0x64d5e1['split'](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x36060f(0x3c4)](_0x153306 => _0x153306['trim']())[_0x36060f(0x662)](_0x44c7a7); if (_0x4cbd48[_0x36060f(0x1ea)] > 0x0) return _0x4cbd48[_0x36060f(0xa30)](0x0, 0xc); return [_0x64d5e1][_0x36060f(0x662)](_0x79b3e9); } else _0x5e6a7d[_0x36060f(0x43a)](); } } } }); _0x24b14c['observe'](_0x211b56, { 'attributes': !![], 'attributeFilter': [_0x4e334b(0x8c7)] }); } function _0x544f0c() { const _0xae5ee8 = _0x1c58bc; if (_0xae5ee8(0x8b0) !== _0xae5ee8(0x8b0)) { const _0xdce7a6 = _0x459b9d['target']['dataset']['id']; _0x5dc35f(_0xae5ee8(0x5ac))['then'](_0x333db7 => { _0x333db7 && _0x424b73(_0xdce7a6); }); } else { const _0x283193 = JSON[_0xae5ee8(0x387)](localStorage[_0xae5ee8(0x813)](_0xae5ee8(0x3e8)) || '[]'); if (_0x283193[_0xae5ee8(0x1ea)] === 0x0) { if ('FNshy' !== _0xae5ee8(0x807)) _0x28795b(), _0x5906fd('diaryList', 'home'); else return _0x9519d0; } return _0x9519d0[_0xae5ee8(0x662)](_0x568ff8 => !_0x283193['includes'](_0x568ff8[_0xae5ee8(0xa6a)])); } } async function _0x33dc69(_0x220614) { const _0x315609 = _0x1c58bc; if (_0x315609(0x3c1) !== 'CvCVj') { const _0x26a872 = await _0x17d597(_0x315609(0x6d7)); if (!_0x26a872) return; const _0x470d7e = _0x2c45d7['calendarEvents'][_0x315609(0x18c)](_0x286c0b => _0x286c0b['id'] === _0x220614); _0x470d7e > -0x1 && (_0x2c45d7[_0x315609(0xb73)][_0x315609(0x1d7)](_0x470d7e, 0x1), _0x3ac55e(), _0x297d78(), _0x4de3d0(), _0x96d382(), _0x18f071(_0x315609(0x4af))); } else _0x417995(), _0x2d7e42(_0x315609(0xbaa), _0x315609(0x315)); } let _0x37d3d0 = null; function _0x4af2f5(_0xb55150) { const _0x12ccf2 = _0x1c58bc; if (_0x12ccf2(0x8ef) === _0x12ccf2(0x8ef)) { if (_0x37d3d0) clearTimeout(_0x37d3d0); const _0x38f2b0 = _0xb55150[_0x12ccf2(0xb6a)]['closest']('.todo-item,\x20.important-day-item'); if (!_0x38f2b0) return; const _0x259c5c = _0x38f2b0[_0x12ccf2(0x2d1)]['id']; if (!_0x259c5c) return; const _0x5148ce = () => { const _0x22771e = _0x12ccf2; if (_0x22771e(0x3cb) === _0x22771e(0x290)) try { const _0x466558 = _0x560e75['getItem'](_0x22771e(0x199) + _0xfbf06d), _0x548603 = _0x25b7dc['parse'](_0x466558 || '[]'); return _0x236e69[_0x22771e(0x460)](_0x548603) ? _0x548603 : []; } catch { return []; } else _0x37d3d0 = setTimeout(() => { const _0x5d0884 = _0x22771e; if (_0xb55150[_0x5d0884(0x1a7)] === 'touchstart') _0xb55150['preventDefault'](); _0x33dc69(_0x259c5c); }, 0x320); }, _0x1a0ba1 = () => { const _0x5852a9 = _0x12ccf2; if (_0x5852a9(0x7c0) !== 'MmQNW') { if (_0x37d3d0) clearTimeout(_0x37d3d0); } else _0x4cbfef = '0x' + _0x57c782[0x1] + _0x351522[0x1], _0x15c827 = '0x' + _0x5840fa[0x2] + _0x4cfba[0x2], _0x453f5c = '0x' + _0x1e8b6c[0x3] + _0x496e81[0x3]; }; document[_0x12ccf2(0xb66)]('mouseup', _0x1a0ba1, { 'once': !![] }), document[_0x12ccf2(0xb66)](_0x12ccf2(0x855), _0x1a0ba1, { 'once': !![] }), document['addEventListener'](_0x12ccf2(0x122), _0x1a0ba1, { 'once': !![] }), document['addEventListener']('touchmove', _0x1a0ba1, { 'once': !![] }), _0x5148ce(); } else _0x16030c['diaries'][_0x12ccf2(0x1d7)](_0x3adbd4, 0x1), _0x401958(), _0x4c396f(), _0x102f95('【' + _0x99d446[_0x12ccf2(0xa6a)] + _0x12ccf2(0x123)); } function _0x5c845a(_0x2ae66e) { const _0x2ed80f = _0x1c58bc; if (_0x2ed80f(0xb0a) === 'aFwqW') { const _0x278af2 = _0x2c45d7[_0x2ed80f(0x75e)][_0x2ed80f(0x128)](_0x5e1f4a => _0x5e1f4a[_0x2ed80f(0x402)][_0x2ed80f(0x7a3)](_0x2ae66e)); if (!_0x278af2) return ''; const _0x34ed4b = _0x16e371(_0x278af2['id']), _0x241da9 = _0x2c45d7[_0x2ed80f(0xb73)][_0x2ed80f(0x662)](_0x81bdbc => _0x81bdbc[_0x2ed80f(0x8dc)] === _0x34ed4b['id'] || !_0x81bdbc[_0x2ed80f(0x8dc)]); if (_0x241da9[_0x2ed80f(0x1ea)] === 0x0) { if (_0x2ed80f(0xa42) !== 'dlXPp') return ''; else _0x33a988 = _0x549e80[_0x2ed80f(0xa51)](_0x2ed80f(0x54f)), _0x4bafe2[_0x2ed80f(0xa5e)] = _0x2ed80f(0x8db), _0x537c82['textContent'] = _0x2ed80f(0x6d4), _0x200e97[_0x2ed80f(0x819)][_0x2ed80f(0x3a5)] = _0x2ed80f(0x528), _0x3ac9cc['style'][_0x2ed80f(0x16a)] = _0x2ed80f(0x25f), _0x4a9d70[_0x2ed80f(0x819)][_0x2ed80f(0x36e)] = _0x2ed80f(0x834), _0x544313[_0x2ed80f(0x8ce)](_0x4c6f34); } const _0x12dffe = _0x241da9[_0x2ed80f(0x3c4)](_0xdea37 => { const _0x34e5a5 = _0x2ed80f, _0x5550c0 = _0xdea37['type'] === _0x34e5a5(0x785) ? _0x34e5a5(0x778) : '待办'; return _0x34e5a5(0x617) + _0x5550c0 + ']\x20' + _0xdea37[_0x34e5a5(0x6a0)] + ':\x20' + _0xdea37[_0x34e5a5(0xa3a)]; })[_0x2ed80f(0xae6)]('\x0a'); return _0x2ed80f(0x321) + _0x34ed4b[_0x2ed80f(0xa6a)] + '\x20记录)\x0a' + _0x12dffe; } else _0x71d354[_0x2ed80f(0x400)] = _0x35d9a5[_0x2ed80f(0x511)]; } let _0x25227c = { 'currentDate': new Date(), 'selectedDate': _0x4cac30() }; function _0x2ddc59() { const _0x5aa256 = _0x1c58bc; document[_0x5aa256(0xad1)](_0x5aa256(0x347))[_0x5aa256(0xb66)](_0x5aa256(0x43a), () => { const _0x10bb39 = _0x5aa256; _0x297d78(), _0x512ecd('calendar', _0x10bb39(0x315)); }), document['getElementById']('back-to-home-from-calendar')[_0x5aa256(0xb66)](_0x5aa256(0x43a), () => _0x512ecd(_0x5aa256(0x315), _0x5aa256(0x138))), document[_0x5aa256(0xad1)](_0x5aa256(0x9ec))['addEventListener'](_0x5aa256(0x43a), () => { const _0x11e08e = _0x5aa256; _0x25227c[_0x11e08e(0x7bd)][_0x11e08e(0x9d8)](_0x25227c[_0x11e08e(0x7bd)][_0x11e08e(0x571)]() - 0x1), _0x297d78(); }), document[_0x5aa256(0xad1)](_0x5aa256(0xbd6))[_0x5aa256(0xb66)]('click', () => { const _0x4bd169 = _0x5aa256; _0x4bd169(0x43b) !== _0x4bd169(0x994) ? (_0x25227c['currentDate'][_0x4bd169(0x9d8)](_0x25227c[_0x4bd169(0x7bd)][_0x4bd169(0x571)]() + 0x1), _0x297d78()) : _0x32318e[_0x4bd169(0x4ac)](_0x806e2f => { const _0x324386 = _0x4bd169, _0x2d1541 = _0x54bdb6[_0x324386(0x38a)][_0x806e2f], _0x467778 = _0x2d1541['categorizedExpenses'][_0x324386(0x1f9)]((_0x4a27a0, _0x503cf9) => _0x4a27a0 + (_0x503cf9[_0x324386(0x15c)] || 0x0), 0x0); _0x1708cf += _0x324386(0x914) + _0x806e2f + _0x324386(0x98e) + _0x806e2f + _0x324386(0x302) + _0x467778[_0x324386(0x625)](0x2) + _0x324386(0xbb1); }); }), document[_0x5aa256(0xad1)]('today-btn')[_0x5aa256(0xb66)](_0x5aa256(0x43a), () => { const _0x48d15c = _0x5aa256; _0x25227c[_0x48d15c(0x7bd)] = new Date(), _0x25227c[_0x48d15c(0x246)] = _0x4cac30(), _0x297d78(); }), document['getElementById'](_0x5aa256(0x80c))[_0x5aa256(0xb66)](_0x5aa256(0x43a), () => { _0x21dd9b(_0x25227c['selectedDate']); }), document[_0x5aa256(0xad1)](_0x5aa256(0x5fd))[_0x5aa256(0xb66)](_0x5aa256(0x43a), _0x51674c), document['getElementById'](_0x5aa256(0xab4))[_0x5aa256(0xb66)](_0x5aa256(0x43a), () => document[_0x5aa256(0xad1)]('add-event-modal')[_0x5aa256(0x9c4)][_0x5aa256(0x6e1)]('show')), document[_0x5aa256(0xad1)](_0x5aa256(0xbee))[_0x5aa256(0xb66)](_0x5aa256(0x43a), () => document[_0x5aa256(0xad1)](_0x5aa256(0x805))[_0x5aa256(0x9c4)][_0x5aa256(0x6e1)]('show')); const _0x409cc5 = document[_0x5aa256(0xad1)](_0x5aa256(0x30e)); _0x409cc5[_0x5aa256(0xb66)](_0x5aa256(0xae3), _0x4af2f5), _0x409cc5[_0x5aa256(0xb66)](_0x5aa256(0x5c6), _0x4af2f5, { 'passive': ![] }); } function _0x297d78() { const _0x3a75c5 = _0x1c58bc, _0x47cffd = _0x25227c[_0x3a75c5(0x7bd)][_0x3a75c5(0x35e)](), _0x3269e4 = _0x25227c[_0x3a75c5(0x7bd)][_0x3a75c5(0x571)](); document['getElementById'](_0x3a75c5(0x76d))[_0x3a75c5(0x948)] = _0x47cffd + '年\x20' + (_0x3269e4 + 0x1) + '月', _0x3e7af8(_0x47cffd, _0x3269e4), _0x405b30(_0x25227c[_0x3a75c5(0x246)]); } function _0x96d382() { const _0x1d00e9 = _0x1c58bc, _0x358147 = document[_0x1d00e9(0xad1)]('today-todo-list'); if (!_0x358147) return; const _0x3df5db = _0x4cac30(), _0x43058b = _0x2c45d7['calendarEvents']['filter'](_0x15674f => _0x15674f[_0x1d00e9(0x6a0)] === _0x3df5db && _0x15674f[_0x1d00e9(0x1a7)] === _0x1d00e9(0x8b9)); _0x358147[_0x1d00e9(0x16c)] = ''; if (_0x43058b[_0x1d00e9(0x1ea)] > 0x0) { if (_0x1d00e9(0xa64) === _0x1d00e9(0xa64)) _0x43058b[_0x1d00e9(0x4ac)](_0x49d9ce => { const _0x286af5 = _0x1d00e9; if ('HcoEx' !== _0x286af5(0x34b)) { const _0x4947ff = document[_0x286af5(0xa51)](_0x286af5(0x54f)); _0x4947ff[_0x286af5(0xa5e)] = _0x286af5(0x78c), _0x4947ff['textContent'] = _0x49d9ce[_0x286af5(0xa3a)], _0x358147[_0x286af5(0x8ce)](_0x4947ff); } else { _0x4d8558[_0x286af5(0x16c)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>'; return; } }); else { const _0x456f84 = _0x42f89a[_0x1d00e9(0xb76)][_0x1d00e9(0x128)](_0x22b9d3 => _0x22b9d3['id'] === _0x562bb4); _0x456f84 && _0x10e4cf['assign'](_0x456f84, _0x5a92b3); } } else { if (_0x1d00e9(0x4dc) === _0x1d00e9(0x4dc)) _0x358147[_0x1d00e9(0x16c)] = _0x1d00e9(0x29d); else { const _0x440290 = _0x246bd5['accountingData']['findIndex'](_0x3457ab => _0x3457ab['id'] === _0x4896a9); _0x440290 > -0x1 && (_0x48cf76[_0x1d00e9(0x4b3)]['splice'](_0x440290, 0x1), _0x4c2e7d(), _0x5528d0()); } } } function _0x3e7af8(_0x213805, _0x523df3) { const _0x3720b3 = _0x1c58bc; if (_0x3720b3(0x937) === _0x3720b3(0x937)) { const _0x5d006b = document[_0x3720b3(0xad1)](_0x3720b3(0x860)); _0x5d006b[_0x3720b3(0x16c)] = ''; const _0x5754a7 = new Date(_0x213805, _0x523df3, 0x1)[_0x3720b3(0xa00)](), _0x1da3e7 = new Date(_0x213805, _0x523df3 + 0x1, 0x0)[_0x3720b3(0x41f)](), _0x423d5a = _0x4cac30(); for (let _0x416353 = 0x0; _0x416353 < _0x5754a7; _0x416353++) { _0x5d006b[_0x3720b3(0x8ce)](document[_0x3720b3(0xa51)](_0x3720b3(0x54f))); } for (let _0x7a93db = 0x1; _0x7a93db <= _0x1da3e7; _0x7a93db++) { if (_0x3720b3(0x1f7) !== 'SBWpY') _0x3fc44a = _0xfbd767['filter'](_0x2cd123 => _0x2cd123 && typeof _0x2cd123 === 'object' && typeof _0x2cd123[_0x3720b3(0x232)] === _0x3720b3(0x319) && typeof _0x2cd123['content'] !== _0x3720b3(0x5f6)); else { const _0x5bc7d3 = document[_0x3720b3(0xa51)](_0x3720b3(0x54f)); _0x5bc7d3[_0x3720b3(0xa5e)] = _0x3720b3(0x66e); const _0x17d429 = _0x213805 + '-' + String(_0x523df3 + 0x1)[_0x3720b3(0x466)](0x2, '0') + '-' + String(_0x7a93db)['padStart'](0x2, '0'); if (_0x17d429 === _0x423d5a) _0x5bc7d3[_0x3720b3(0x9c4)][_0x3720b3(0x2ac)](_0x3720b3(0xb7a)); if (_0x17d429 === _0x25227c[_0x3720b3(0x246)]) _0x5bc7d3['classList'][_0x3720b3(0x2ac)]('is-selected'); const _0x5e3450 = document[_0x3720b3(0xa51)]('span'); _0x5e3450[_0x3720b3(0xa5e)] = _0x3720b3(0x46d), _0x5e3450[_0x3720b3(0x948)] = _0x7a93db, _0x5bc7d3['appendChild'](_0x5e3450); const _0x5ed850 = _0x2c45d7[_0x3720b3(0xb73)][_0x3720b3(0x662)](_0x299a35 => _0x299a35['date'] === _0x17d429); if (_0x5ed850['length'] > 0x0) { if (_0x3720b3(0x9f3) === _0x3720b3(0x9f3)) { const _0x3eab14 = document[_0x3720b3(0xa51)](_0x3720b3(0x54f)); _0x3eab14[_0x3720b3(0xa5e)] = _0x3720b3(0x67b), _0x5bc7d3[_0x3720b3(0x8ce)](_0x3eab14); } else _0x2ff4d1(_0x389420[_0x3720b3(0x246)]); } _0x5bc7d3[_0x3720b3(0xb66)](_0x3720b3(0x43a), () => { const _0x1fb23c = _0x3720b3; _0x25227c[_0x1fb23c(0x246)] = _0x17d429, _0x297d78(); }), _0x5d006b[_0x3720b3(0x8ce)](_0x5bc7d3); } } } else _0x281e6a !== _0x231d08 && (_0x5b118a[_0x3720b3(0x948)] = '▶'); } function _0x405b30(_0x1680dc) { const _0x5c762b = _0x1c58bc, _0x559483 = document[_0x5c762b(0xad1)](_0x5c762b(0x30e)), _0x401d9c = document[_0x5c762b(0xad1)]('todo-date-title'); _0x559483[_0x5c762b(0x16c)] = ''; const _0x6796bc = new Date(_0x1680dc + _0x5c762b(0x908)); _0x401d9c[_0x5c762b(0x948)] = _0x6796bc[_0x5c762b(0x571)]() + 0x1 + '月' + _0x6796bc[_0x5c762b(0x41f)]() + '日'; const _0x2bd9ec = _0x2c45d7[_0x5c762b(0xb73)][_0x5c762b(0x662)](_0x144013 => _0x144013[_0x5c762b(0x6a0)] === _0x1680dc); if (_0x2bd9ec[_0x5c762b(0x1ea)] === 0x0) { _0x559483['innerHTML'] = _0x5c762b(0x240); return; } _0x2bd9ec[_0x5c762b(0x4ac)](_0x3b9326 => { const _0x35ac5e = _0x5c762b, _0x4abb84 = document[_0x35ac5e(0xa51)](_0x35ac5e(0x54f)); _0x4abb84[_0x35ac5e(0xa5e)] = _0x3b9326[_0x35ac5e(0x1a7)] === _0x35ac5e(0x785) ? _0x35ac5e(0x99e) : _0x35ac5e(0x23a), _0x4abb84[_0x35ac5e(0x948)] = _0x3b9326[_0x35ac5e(0xa3a)], _0x4abb84[_0x35ac5e(0x2d1)]['id'] = _0x3b9326['id'], _0x559483[_0x35ac5e(0x8ce)](_0x4abb84); }); } function _0x21dd9b(_0x440063) { const _0x282496 = _0x1c58bc; _0x282496(0x2b0) === _0x282496(0x2b0) ? (document[_0x282496(0xad1)](_0x282496(0x1fe))[_0x282496(0x948)] = '为\x20' + _0x440063 + _0x282496(0xbb0), document[_0x282496(0xad1)](_0x282496(0x3f2))[_0x282496(0x82f)] = '', document[_0x282496(0xad1)](_0x282496(0xa08))[_0x282496(0x5d8)] = !![], document[_0x282496(0xad1)](_0x282496(0x805))[_0x282496(0x9c4)][_0x282496(0x2ac)](_0x282496(0x944)), document['getElementById'](_0x282496(0x3f2))[_0x282496(0x64f)]()) : _0xe6bec9(_0x157403['id']); } function _0x51674c() { const _0x46ce8f = _0x1c58bc, _0x14b0d9 = document[_0x46ce8f(0xad1)](_0x46ce8f(0x3f2))[_0x46ce8f(0x82f)]['trim'](), _0x5eed2a = document[_0x46ce8f(0x94b)](_0x46ce8f(0xaa4))[_0x46ce8f(0x82f)]; if (!_0x14b0d9) { if (_0x46ce8f(0x8c1) === _0x46ce8f(0x8c1)) { _0x18f071(_0x46ce8f(0x46a)); return; } else _0x11fa7d[_0x46ce8f(0xb66)](_0x46ce8f(0x43a), _0xe7888e => { const _0x633f24 = _0x46ce8f, _0xdb0ed0 = _0xe7888e[_0x633f24(0x670)][_0x633f24(0x2d1)][_0x633f24(0x6a0)], _0x16a751 = _0x484763['accountingLedger'][_0xdb0ed0]; _0x16a751 && _0x1a549f(_0x16a751, _0xdb0ed0); }); } const _0x1e1c82 = _0x2c45d7[_0x46ce8f(0x775)][_0x46ce8f(0x128)](_0x303393 => _0x303393['id'] === _0x2c45d7[_0x46ce8f(0x4d3)]); if (!_0x1e1c82) { _0x18f071('错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。'); return; } _0x2c45d7[_0x46ce8f(0xb73)][_0x46ce8f(0xb49)]({ 'id': _0x46ce8f(0x9de) + Date[_0x46ce8f(0x7e3)](), 'date': _0x25227c[_0x46ce8f(0x246)], 'type': _0x5eed2a, 'content': _0x14b0d9, 'userId': _0x1e1c82['id'] }), _0x3ac55e(), _0x297d78(), _0x4de3d0(), _0x96d382(), document[_0x46ce8f(0xad1)](_0x46ce8f(0x805))[_0x46ce8f(0x9c4)][_0x46ce8f(0x6e1)](_0x46ce8f(0x944)); } function _0x4de3d0() { const _0x59766b = _0x1c58bc; if (_0x59766b(0xa8d) === 'hPieT') _0x35e901(_0x11aa4b['id']); else { const _0x47a95b = document['getElementById'](_0x59766b(0x230)), _0xc66fcd = document['getElementById']('countdown-timer'), _0x88f25c = new Date(); _0x88f25c['setHours'](0x0, 0x0, 0x0, 0x0); const _0x15c6b9 = _0x2c45d7['calendarEvents'][_0x59766b(0x662)](_0x33e640 => _0x33e640[_0x59766b(0x1a7)] === _0x59766b(0x785) && new Date(_0x33e640[_0x59766b(0x6a0)] + _0x59766b(0x908)) >= _0x88f25c)[_0x59766b(0x940)]((_0x43c9c3, _0x38c86c) => new Date(_0x43c9c3[_0x59766b(0x6a0)]) - new Date(_0x38c86c[_0x59766b(0x6a0)])); if (_0x15c6b9[_0x59766b(0x1ea)] > 0x0) { const _0x1f32ff = _0x15c6b9[0x0], _0x438368 = new Date(_0x1f32ff[_0x59766b(0x6a0)] + _0x59766b(0x908)), _0x1f48a = _0x438368 - _0x88f25c, _0x11b190 = Math[_0x59766b(0x705)](_0x1f48a / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x47a95b[_0x59766b(0x948)] = '距离「' + _0x1f32ff[_0x59766b(0xa3a)] + '」', _0xc66fcd[_0x59766b(0x16c)] = _0x59766b(0x217) + _0x11b190 + '</span><span\x20class=\x22unit\x22>天</span>'; } else { if (_0x59766b(0x585) !== _0x59766b(0x585)) { if (!_0x17bebe[_0x59766b(0x38c)]) return; _0x3d7b20['textContent'] = _0x59766b(0xa38) + _0x3772b5[_0x59766b(0x38c)]['sender'], _0x57015e[_0x59766b(0x948)] = _0x50f8a1['activeQuote']['content'], _0x5534c7[_0x59766b(0x819)][_0x59766b(0x974)] = _0x59766b(0x4e9); } else _0x47a95b['textContent'] = '近期没有特别安排', _0xc66fcd[_0x59766b(0x16c)] = _0x59766b(0x3d6); } } } function _0x2ee35c() { const _0x10a4e0 = _0x1c58bc, _0x5b456e = document['getElementById'](_0x10a4e0(0x18a)); _0x5b456e[_0x10a4e0(0x16c)] = ''; if (_0x2c45d7[_0x10a4e0(0x775)][_0x10a4e0(0x1ea)] === 0x0) { _0x5b456e[_0x10a4e0(0x16c)] = _0x10a4e0(0x3e1); return; } _0x2c45d7['userProfiles']['forEach'](_0x2afd2a => { const _0xc03ae8 = _0x10a4e0; if (_0xc03ae8(0x63c) !== _0xc03ae8(0x94a)) { const _0xa9d60 = document['createElement']('div'); _0xa9d60[_0xc03ae8(0xa5e)] = 'world-book-item', _0xa9d60[_0xc03ae8(0x2d1)]['id'] = _0x2afd2a['id']; const _0x2c9000 = _0x2afd2a['id'] === _0x2c45d7[_0xc03ae8(0x4d3)] ? _0xc03ae8(0x5f1) : ''; _0xa9d60[_0xc03ae8(0x16c)] = _0xc03ae8(0x265) + (_0x2afd2a[_0xc03ae8(0x37b)] || _0x5d9858) + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x2afd2a['name'] + _0x2c9000 + _0xc03ae8(0x1ac) + _0x2afd2a[_0xc03ae8(0x5d7)][_0xc03ae8(0x5cd)](0x0, 0x64) + _0xc03ae8(0xaa2), _0xa9d60[_0xc03ae8(0xb66)](_0xc03ae8(0x43a), () => _0x441493(_0x2afd2a['id'])), _0x5b456e['appendChild'](_0xa9d60); } else _0x3089f3[_0xc03ae8(0x819)][_0xc03ae8(0x838)] = '1'; }); } function _0x441493(_0x6ec032 = null) { const _0x3e6c36 = _0x1c58bc; if (_0x3e6c36(0x85a) === 'jAQUj') { _0x512ecd(_0x3e6c36(0x201), 'userProfileList'); const _0x3a60ee = document[_0x3e6c36(0xad1)](_0x3e6c36(0x6a4)), _0x32be3c = document[_0x3e6c36(0xad1)](_0x3e6c36(0x9ea)); _0x32be3c[_0x3e6c36(0x819)][_0x3e6c36(0xbe4)] = '', delete _0x32be3c[_0x3e6c36(0x2d1)][_0x3e6c36(0x91f)]; if (_0x6ec032) { const _0x4cfee2 = _0x2c45d7[_0x3e6c36(0x775)][_0x3e6c36(0x128)](_0x1a57d3 => _0x1a57d3['id'] === _0x6ec032); if (!_0x4cfee2) return; document[_0x3e6c36(0xad1)](_0x3e6c36(0x9da))[_0x3e6c36(0x82f)] = _0x4cfee2['id'], document[_0x3e6c36(0xad1)](_0x3e6c36(0xba2))[_0x3e6c36(0x948)] = _0x3e6c36(0x1aa), document[_0x3e6c36(0xad1)]('user-name')[_0x3e6c36(0x82f)] = _0x4cfee2[_0x3e6c36(0xa6a)], _0x4cfee2['avatar'] ? _0x32be3c[_0x3e6c36(0x819)][_0x3e6c36(0xbe4)] = 'url(\x27' + _0x4cfee2['avatar'] + '\x27)' : _0x32be3c[_0x3e6c36(0x819)][_0x3e6c36(0xbe4)] = _0x3e6c36(0xbce) + _0x5d9858 + '\x27)', document[_0x3e6c36(0xad1)](_0x3e6c36(0xbb4))[_0x3e6c36(0x82f)] = _0x4cfee2[_0x3e6c36(0x5d7)], _0x3a60ee['style'][_0x3e6c36(0x974)] = _0x4cfee2['id'] === _0x2c45d7['activeUserProfileId'] ? _0x3e6c36(0xb39) : _0x3e6c36(0x4e9), document['getElementById']('delete-user-profile-button')[_0x3e6c36(0x819)]['display'] = _0x3e6c36(0x4e9); } else 'UlTkt' === _0x3e6c36(0x3ab) ? _0x191cc7[_0x3e6c36(0x948)] = '▶' : (document[_0x3e6c36(0xad1)](_0x3e6c36(0x9da))['value'] = '', document[_0x3e6c36(0xad1)]('user-profile-edit-title')[_0x3e6c36(0x948)] = _0x3e6c36(0x683), document[_0x3e6c36(0xad1)](_0x3e6c36(0x312))[_0x3e6c36(0x82f)] = _0x3e6c36(0x798) + (_0x2c45d7['userProfiles'][_0x3e6c36(0x1ea)] + 0x1), _0x32be3c[_0x3e6c36(0x819)][_0x3e6c36(0xbe4)] = 'url(\x27' + _0x5d9858 + '\x27)', document[_0x3e6c36(0xad1)]('user-persona')[_0x3e6c36(0x82f)] = '', _0x3a60ee[_0x3e6c36(0x819)][_0x3e6c36(0x974)] = _0x3e6c36(0xb39), document['getElementById'](_0x3e6c36(0x54c))[_0x3e6c36(0x819)][_0x3e6c36(0x974)] = _0x3e6c36(0xb39)); } else { const _0x2c334f = _0x50cc19['indexOf']('{'), _0x49efb0 = _0x893dde[_0x3e6c36(0x916)]('}'); if (_0x2c334f >= 0x0 && _0x49efb0 > _0x2c334f) return _0x162954[_0x3e6c36(0xa30)](_0x2c334f, _0x49efb0 + 0x1); return _0x2fccc5; } } function _0x5cf3e9() { const _0x5d0f53 = _0x1c58bc, _0x2b3dbe = document['getElementById']('editing-user-id')[_0x5d0f53(0x82f)], _0x481160 = document[_0x5d0f53(0xad1)](_0x5d0f53(0x9ea)), _0x2b48ef = { 'name': document['getElementById'](_0x5d0f53(0x312))[_0x5d0f53(0x82f)][_0x5d0f53(0x471)](), 'persona': document[_0x5d0f53(0xad1)]('user-persona')[_0x5d0f53(0x82f)]['trim'](), 'avatar': _0x2c45d7[_0x5d0f53(0x775)]['find'](_0x389bdd => _0x389bdd['id'] === _0x2b3dbe)?.[_0x5d0f53(0x37b)] || _0x481160[_0x5d0f53(0x819)][_0x5d0f53(0xbe4)][_0x5d0f53(0xa30)](0x5, -0x2)[_0x5d0f53(0x4db)](/'/g, '') || _0x5d9858 }; _0x481160[_0x5d0f53(0x2d1)][_0x5d0f53(0x91f)] && (_0x5d0f53(0x2ec) === 'Ohyls' ? (_0x2b48ef[_0x5d0f53(0x37b)] = _0x481160[_0x5d0f53(0x2d1)][_0x5d0f53(0x91f)], delete _0x481160[_0x5d0f53(0x2d1)]['newAvatar']) : _0x295830[_0x5d0f53(0x4ac)](_0x101f53 => { const _0x2c247b = _0x5d0f53, _0x2df1a2 = _0x4fcd3e[_0x2c247b(0xa51)](_0x2c247b(0x54f)); _0x2df1a2['className'] = 'todo-item-small', _0x2df1a2[_0x2c247b(0x948)] = _0x101f53[_0x2c247b(0xa3a)], _0x49e3fc[_0x2c247b(0x8ce)](_0x2df1a2); })); if (!_0x2b48ef[_0x5d0f53(0xa6a)]) { if (_0x5d0f53(0x422) !== _0x5d0f53(0x422)) !_0x369efc[_0x5d0f53(0x9c4)][_0x5d0f53(0x75d)](_0x5d0f53(0x5b9)) && _0x4dd1fb[_0x5d0f53(0x6e1)](); else { _0x18f071(_0x5d0f53(0x92a)); return; } } if (_0x2b3dbe) { const _0x4a850c = _0x2c45d7[_0x5d0f53(0x775)][_0x5d0f53(0x128)](_0x4936f8 => _0x4936f8['id'] === _0x2b3dbe); if (_0x4a850c) Object['assign'](_0x4a850c, _0x2b48ef); } else { if ('PkHlf' === _0x5d0f53(0x925)) { const _0x59a4e5 = { 'id': _0x5d0f53(0x9a2) + Date[_0x5d0f53(0x7e3)](), ..._0x2b48ef }; _0x2c45d7[_0x5d0f53(0x775)]['push'](_0x59a4e5), !_0x2c45d7[_0x5d0f53(0x4d3)] && (_0x5d0f53(0xb2d) === _0x5d0f53(0x479) ? _0x14bffc(_0x5d0f53(0x424) + _0x381a93[_0x5d0f53(0x80d)]) : _0x2c45d7[_0x5d0f53(0x4d3)] = _0x59a4e5['id']); } else _0x128bc2['error'](_0x5d0f53(0x3d5), _0x5cb110); } _0x3ac55e(), _0x18f071(_0x5d0f53(0x527)), _0x2ee35c(), _0x512ecd(_0x5d0f53(0xbaa), _0x5d0f53(0x201)); } async function _0x43bb6e() { const _0x43a093 = _0x1c58bc, _0x3a389f = document['getElementById'](_0x43a093(0x9da))[_0x43a093(0x82f)]; if (!_0x3a389f) return; if (_0x2c45d7['userProfiles'][_0x43a093(0x1ea)] <= 0x1) { _0x18f071(_0x43a093(0x526)); return; } const _0x5af96e = await _0x17d597(_0x43a093(0x810)); _0x5af96e && (_0x43a093(0xacb) !== _0x43a093(0xacb) ? _0xdbb7bd && _0xc7e18a(_0x544cc2) : (_0x2c45d7['userProfiles'] = _0x2c45d7[_0x43a093(0x775)][_0x43a093(0x662)](_0x36dc82 => _0x36dc82['id'] !== _0x3a389f), _0x2c45d7[_0x43a093(0x4d3)] === _0x3a389f && (_0x2c45d7[_0x43a093(0x4d3)] = _0x2c45d7[_0x43a093(0x775)][0x0]['id']), _0x2c45d7[_0x43a093(0x75e)][_0x43a093(0x4ac)](_0x573aa9 => { const _0x5a7609 = _0x43a093; if (_0x5a7609(0x5fc) !== 'QEAdy') _0x573aa9[_0x5a7609(0x815)] === _0x3a389f && ('ylAHq' !== 'ZRcWR' ? _0x573aa9[_0x5a7609(0x815)] = _0x2c45d7['activeUserProfileId'] : _0x3f7d57[_0x5a7609(0x1ef)][_0x5a7609(0x4ac)]((_0x4a200a, _0x2da92d) => _0x5b6983(_0x4a200a, _0x2da92d))); else { _0x5954d0['innerHTML'] = _0x5a7609(0x9a8); return; } }), _0x3ac55e(), _0x18f071(_0x43a093(0x8f9)), _0x2ee35c(), _0x512ecd(_0x43a093(0xbaa), _0x43a093(0x201)))); } function _0x1b375c() { const _0x58f6e2 = _0x1c58bc; _0x36d701(), _0x59f734(_0x2c45d7[_0x58f6e2(0x9ac)]); } function _0x36d701() { const _0x53ef5d = _0x1c58bc; if ('avrGW' !== _0x53ef5d(0xb99)) { const _0x2dc9bc = _0x24620a[_0x53ef5d(0x7e5)] === _0x53ef5d(0xa02) ? _0x53ef5d(0xa02) : 'ai', _0x52ba08 = _0x57207d[_0x53ef5d(0x7e5)] === _0x53ef5d(0xa02) ? _0x196c3a[_0x53ef5d(0xa6a)] : _0x34cc73(_0x5c7f35[_0x53ef5d(0x7e5)])[_0x53ef5d(0xa6a)], _0xa00530 = _0x30be68[_0x53ef5d(0xa51)](_0x53ef5d(0x54f)); _0xa00530[_0x53ef5d(0xa5e)] = 'diary-entry\x20' + _0x2dc9bc, _0xa00530[_0x53ef5d(0x2d1)][_0x53ef5d(0x782)] = _0x2b4e77['timestamp'], _0xa00530[_0x53ef5d(0x819)][_0x53ef5d(0x74f)] = _0x53ef5d(0xb39), _0xa00530['style']['paddingBottom'] = '0', _0xa00530[_0x53ef5d(0x16c)] = _0x53ef5d(0x4a7) + _0x52ba08 + _0x53ef5d(0x52a) + new _0x16172b(_0x2b4015[_0x53ef5d(0x782)])['toLocaleString'](_0x53ef5d(0x15b)) + _0x53ef5d(0x697) + _0x1e821f['content'][_0x53ef5d(0x4db)](/\n/g, _0x53ef5d(0x5f7)) + _0x53ef5d(0x3e9), _0x508647[_0x53ef5d(0x8ce)](_0xa00530); } else { const _0x125994 = document[_0x53ef5d(0xad1)](_0x53ef5d(0xabb)); _0x125994[_0x53ef5d(0x16c)] = '', _0x2c45d7[_0x53ef5d(0x54e)]['forEach'](_0x532134 => { const _0x7d9f4 = _0x53ef5d; if ('mGous' !== 'fWzbw') { const _0x4ce065 = document[_0x7d9f4(0xa51)]('div'); _0x4ce065[_0x7d9f4(0x948)] = _0x532134[_0x7d9f4(0xa6a)], _0x4ce065[_0x7d9f4(0x2d1)]['id'] = _0x532134['id'], _0x4ce065[_0x7d9f4(0x819)][_0x7d9f4(0x16a)] = _0x7d9f4(0x36a), _0x4ce065['style'][_0x7d9f4(0x36e)] = _0x7d9f4(0x834), _0x4ce065[_0x7d9f4(0x819)]['cursor'] = _0x7d9f4(0x967), _0x4ce065['style'][_0x7d9f4(0x7a4)] = _0x7d9f4(0x7fe), _0x4ce065['style'][_0x7d9f4(0xb5a)] = _0x7d9f4(0x371); _0x532134['id'] === _0x2c45d7[_0x7d9f4(0x9ac)] ? (_0x4ce065[_0x7d9f4(0x819)][_0x7d9f4(0x3a5)] = _0x7d9f4(0x930), _0x4ce065['style'][_0x7d9f4(0x979)] = _0x7d9f4(0x7a8)) : _0x4ce065[_0x7d9f4(0x819)][_0x7d9f4(0x979)] = 'var(--text-color)'; _0x4ce065[_0x7d9f4(0xb66)](_0x7d9f4(0x43a), () => { const _0x3e2f9e = _0x7d9f4; _0x2c45d7[_0x3e2f9e(0x9ac)] = _0x532134['id'], _0x1b375c(); }); let _0x4133d8 = null; const _0x2e7d52 = _0x1ed2cb => { const _0x4c0f61 = _0x7d9f4; if (_0x532134['id'] === _0x4c0f61(0x135)) return; _0x4133d8 = setTimeout(() => { const _0x1446d7 = _0x4c0f61; if (_0x1ed2cb['type'] === _0x1446d7(0x5c6)) _0x1ed2cb[_0x1446d7(0x90a)](); _0x38e2c7(_0x532134['id'], _0x532134['name']); }, 0x320); }, _0x2ab7d5 = () => { clearTimeout(_0x4133d8); }; _0x4ce065[_0x7d9f4(0xb66)](_0x7d9f4(0xae3), _0x2e7d52), _0x4ce065[_0x7d9f4(0xb66)](_0x7d9f4(0xae8), _0x2ab7d5), _0x4ce065['addEventListener']('mouseleave', _0x2ab7d5), _0x4ce065['addEventListener']('touchstart', _0x2e7d52, { 'passive': ![] }), _0x4ce065[_0x7d9f4(0xb66)](_0x7d9f4(0x855), _0x2ab7d5), _0x4ce065[_0x7d9f4(0xb66)]('touchcancel', _0x2ab7d5), _0x125994['appendChild'](_0x4ce065); } else _0x309f3f[_0x7d9f4(0xb85)](_0x55af7f, { 'content': _0x7d9f4(0x1c3) + _0x4a61e8[_0x7d9f4(0xa6a)] + ']', 'displayUrl': _0x12366d['url'] }), _0xca5bfa['conversationHistory'][_0x7d9f4(0xb49)](_0x403514), _0x2868c6(), _0x27066e(_0x38a500, _0x5654b5[_0x7d9f4(0x1ef)][_0x7d9f4(0x1ea)] - 0x1), _0x277d9f[_0x7d9f4(0x889)] = _0xd8a41a['scrollHeight']; }); } } async function _0x38e2c7(_0x1a8973, _0x4e8f5e) { const _0x291a58 = _0x1c58bc, _0x58c006 = await _0x17d597(_0x291a58(0x779) + _0x4e8f5e + '”\x20以及其中所有的条目吗？\x0a\x0a此操作不可撤销，所有角色的关联设定也将被一并移除。'); if (!_0x58c006) return; const _0x52e5a0 = _0x2c45d7[_0x291a58(0x538)][_0x291a58(0x662)](_0x4243f1 => _0x4243f1['categoryId'] === _0x1a8973)[_0x291a58(0x3c4)](_0x50d7ec => _0x50d7ec['id']); _0x2c45d7[_0x291a58(0x538)] = _0x2c45d7[_0x291a58(0x538)][_0x291a58(0x662)](_0x1c8ef2 => _0x1c8ef2[_0x291a58(0x9ba)] !== _0x1a8973), _0x2c45d7[_0x291a58(0x25c)] = _0x2c45d7['worldBookCategories'][_0x291a58(0x662)](_0x44680e => _0x44680e['id'] !== _0x1a8973); _0x2c45d7['activeWorldBookCategoryId'] === _0x1a8973 && (_0x2c45d7[_0x291a58(0x9ac)] = _0x291a58(0x135)); const _0x1a6ea1 = [..._0x2c45d7['characters'], ..._0x2c45d7[_0x291a58(0x75e)]]; _0x1a6ea1[_0x291a58(0x4ac)](_0x1b7ef2 => { const _0x4231cf = _0x291a58; _0x1b7ef2[_0x4231cf(0x7ad)] && _0x1b7ef2[_0x4231cf(0x7ad)][_0x4231cf(0x1ea)] > 0x0 && (_0x4231cf(0x18b) === _0x4231cf(0x516) ? _0x26bd5f(_0x2bfa7d[_0x4231cf(0x6b1)])['then'](_0x2ede2f => { const _0x26c2e8 = _0x4231cf; if (_0x2ede2f) _0x27573a[_0x26c2e8(0x400)] = _0x3f9d1a['createObjectURL'](_0x2ede2f); }) : _0x1b7ef2['linkedWorldBookIds'] = _0x1b7ef2[_0x4231cf(0x7ad)]['filter'](_0x4a34e8 => !_0x52e5a0[_0x4231cf(0x7a3)](_0x4a34e8))); }), _0x3ac55e(), _0x1b375c(), _0x18f071(_0x291a58(0x9ab) + _0x4e8f5e + '”\x20已被彻底清除。'); } function _0x59f734(_0x441ecd) { const _0xeed054 = _0x1c58bc, _0x21f374 = document['getElementById']('world-book-list-container'); _0x21f374[_0xeed054(0x16c)] = ''; const _0x4c791e = _0x2c45d7[_0xeed054(0x538)][_0xeed054(0x662)](_0x18e47f => _0x18e47f['categoryId'] === _0x441ecd || _0x441ecd === _0xeed054(0x135) && !_0x18e47f[_0xeed054(0x9ba)]); if (_0x4c791e[_0xeed054(0x1ea)] === 0x0) { if ('lwzJo' === 'MOMjt') { const _0x24a7ec = _0x4f2795[_0xeed054(0xa2d)](_0x2710da); if (_0x24a7ec) _0x4ba1a8[_0xeed054(0x692)][_0x24a7ec] = _0x53e6cb[_0xeed054(0x813)](_0x24a7ec); } else { _0x21f374[_0xeed054(0x16c)] = _0xeed054(0x440); return; } } _0x4c791e[_0xeed054(0x4ac)](_0x5aa86c => { const _0x262eee = _0xeed054, _0x4354fe = document[_0x262eee(0xa51)](_0x262eee(0x54f)); _0x4354fe['className'] = _0x262eee(0x73a), _0x4354fe[_0x262eee(0x2d1)]['id'] = _0x5aa86c['id'], _0x4354fe[_0x262eee(0x16c)] = _0x262eee(0x37f) + _0x5aa86c[_0x262eee(0xa6a)] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x5aa86c[_0x262eee(0xa3a)][_0x262eee(0x5cd)](0x0, 0x64) + _0x262eee(0xaa2), _0x4354fe['addEventListener'](_0x262eee(0x43a), () => _0x26e290(_0x5aa86c['id'])), _0x21f374[_0x262eee(0x8ce)](_0x4354fe); }); } document['getElementById'](_0x1c58bc(0xa79))['addEventListener']('click', async () => { const _0x392470 = _0x1c58bc, _0x594b8b = prompt(_0x392470(0x49e)); if (_0x594b8b && _0x594b8b[_0x392470(0x471)]()) { const _0x4849d1 = { 'id': _0x392470(0x42e) + Date[_0x392470(0x7e3)](), 'name': _0x594b8b[_0x392470(0x471)]() }; _0x2c45d7[_0x392470(0x54e)][_0x392470(0xb49)](_0x4849d1), _0x2c45d7[_0x392470(0x9ac)] = _0x4849d1['id'], _0x3ac55e(), _0x1b375c(); } }); function _0x26e290(_0x3b4a88 = null) { const _0x3d3d84 = _0x1c58bc; if ('rhMPS' !== _0x3d3d84(0xbbc)) _0x2ed060('有\x20' + _0x58dee9 + '\x20行格式不对，被我无视了。'); else { _0x512ecd(_0x3d3d84(0x74a), _0x3d3d84(0x330)); const _0x32e742 = document['getElementById'](_0x3d3d84(0x462)); _0x32e742[_0x3d3d84(0x16c)] = '', _0x2c45d7['worldBookCategories'][_0x3d3d84(0x4ac)](_0x2f0037 => { const _0x4c407f = _0x3d3d84; if (_0x4c407f(0x5b2) !== 'gxmxX') { const _0x24841b = new _0x1d82d3(_0x26aa67[_0x4c407f(0x782)]), _0x36a1bd = _0x29c174[_0x4c407f(0x913)]((_0x32387c - _0x24841b) / (0x3e8 * 0x3c)); if (_0x36a1bd < 0x5) _0x1894cc += _0x4c407f(0x7f8); else { if (_0x36a1bd < 0x78) _0x362ca1 += '\x0a-\x20**对话状态**:\x20群里在' + _0x36a1bd + _0x4c407f(0xbc4); else { const _0x54e066 = _0x3b4275[_0x4c407f(0x913)](_0x36a1bd / 0x3c); if (_0x54e066 < 0x30) _0x12395b += _0x4c407f(0x7b3) + _0x54e066 + '小时前聊过，可以适当问候，不要直接继续之前的话题。'; else _0x559c07 += _0x4c407f(0x393) + _0x42919b[_0x4c407f(0x913)](_0x54e066 / 0x18) + '天没动静了。你的角色们应该发起新的问候或话题。'; } } } else { const _0xc6c2cf = document[_0x4c407f(0xa51)]('option'); _0xc6c2cf[_0x4c407f(0x82f)] = _0x2f0037['id'], _0xc6c2cf[_0x4c407f(0x948)] = _0x2f0037['name'], _0x32e742[_0x4c407f(0x8ce)](_0xc6c2cf); } }); if (_0x3b4a88) { if ('NrtKf' !== _0x3d3d84(0x977)) _0x7af40e(); else { const _0x598255 = _0x2c45d7[_0x3d3d84(0x538)][_0x3d3d84(0x128)](_0x3be8c6 => _0x3be8c6['id'] === _0x3b4a88); if (!_0x598255) return; document[_0x3d3d84(0xad1)](_0x3d3d84(0xb62))[_0x3d3d84(0x82f)] = _0x598255['id'], document[_0x3d3d84(0xad1)](_0x3d3d84(0x489))[_0x3d3d84(0x948)] = _0x3d3d84(0x266), document['getElementById'](_0x3d3d84(0xb7c))[_0x3d3d84(0x82f)] = _0x598255['name'], document[_0x3d3d84(0xad1)](_0x3d3d84(0xad4))[_0x3d3d84(0x82f)] = _0x598255[_0x3d3d84(0xa3a)], _0x32e742[_0x3d3d84(0x82f)] = _0x598255['categoryId'] || _0x3d3d84(0x135); } } else document[_0x3d3d84(0xad1)](_0x3d3d84(0xb62))[_0x3d3d84(0x82f)] = '', document['getElementById']('world-book-editor-title')[_0x3d3d84(0x948)] = '新建条目', document['getElementById'](_0x3d3d84(0xb7c))[_0x3d3d84(0x82f)] = '', document[_0x3d3d84(0xad1)](_0x3d3d84(0xad4))[_0x3d3d84(0x82f)] = '', _0x32e742[_0x3d3d84(0x82f)] = _0x2c45d7['activeWorldBookCategoryId']; } } function _0x56a1bb() { const _0x530b12 = _0x1c58bc, _0x388e83 = document[_0x530b12(0xad1)](_0x530b12(0xb62))[_0x530b12(0x82f)], _0x51cb40 = document['getElementById'](_0x530b12(0xb7c))[_0x530b12(0x82f)]['trim'](), _0x380b1f = document[_0x530b12(0xad1)]('world-book-edit-content')['value'][_0x530b12(0x471)](), _0x40981f = document[_0x530b12(0xad1)](_0x530b12(0x462))[_0x530b12(0x82f)]; if (!_0x51cb40 || !_0x380b1f) { if (_0x530b12(0xb6c) !== _0x530b12(0x3dd)) { _0x18f071(_0x530b12(0x920)); return; } else throw _0x9ce5d0; } if (_0x388e83) { const _0x2a4d02 = _0x2c45d7['worldBooks'][_0x530b12(0x128)](_0x28bbd1 => _0x28bbd1['id'] === _0x388e83); _0x2a4d02 && (_0x2a4d02[_0x530b12(0xa6a)] = _0x51cb40, _0x2a4d02[_0x530b12(0xa3a)] = _0x380b1f, _0x2a4d02['categoryId'] = _0x40981f); } else { const _0x2b843d = { 'id': _0x530b12(0xb30) + Date['now'](), 'name': _0x51cb40, 'content': _0x380b1f, 'categoryId': _0x40981f }; _0x2c45d7['worldBooks']['push'](_0x2b843d); } _0x2c45d7[_0x530b12(0x9ac)] = _0x40981f, _0x3ac55e(), _0x18f071(_0x530b12(0x5bd)), _0x1b375c(), _0x512ecd(_0x530b12(0x330), _0x530b12(0x74a)); } async function _0x1cdae6() { const _0x40c82e = _0x1c58bc, _0x4bd3b4 = document[_0x40c82e(0xad1)](_0x40c82e(0xb62))['value']; if (!_0x4bd3b4) return; const _0x457a16 = await _0x17d597('确定要删除这个条目吗？此操作不可撤销。'); _0x457a16 && ('WjgJP' !== _0x40c82e(0x77f) ? (_0x3c113e[_0x40c82e(0x554)] = _0x1996e9[_0x40c82e(0x554)]['filter'](_0x55dc4a => _0x55dc4a['id'] !== _0x1d888d), _0x141466[_0x40c82e(0x6c4)] === _0x498087 && (_0x39cd59[_0x40c82e(0x6c4)] = null), _0x2c285a(), _0x362178(_0x40c82e(0x9cc)), _0x19cafb(), _0x336c0a(_0x40c82e(0x626), 'friendCircleEdit')) : (_0x2c45d7[_0x40c82e(0x538)] = _0x2c45d7[_0x40c82e(0x538)][_0x40c82e(0x662)](_0x36e196 => _0x36e196['id'] !== _0x4bd3b4), _0x2c45d7[_0x40c82e(0xb76)][_0x40c82e(0x4ac)](_0x5ca25d => { const _0x154508 = _0x40c82e; _0x154508(0x1eb) === 'LsXLj' ? _0x5ca25d[_0x154508(0x7ad)] && (_0x154508(0xa68) === _0x154508(0xa68) ? _0x5ca25d[_0x154508(0x7ad)] = _0x5ca25d[_0x154508(0x7ad)]['filter'](_0xe88f86 => _0xe88f86 !== _0x4bd3b4) : _0x3e6fc6[_0x154508(0x43a)]()) : _0x4751ce = _0x24288d; }), _0x3ac55e(), _0x18f071(_0x40c82e(0x86b)), _0x1b375c(), _0x512ecd(_0x40c82e(0x330), 'worldBookEditor'))); } function _0x53b3d4() { const _0x277130 = _0x1c58bc; if (_0x277130(0x367) === 'LAkpA') _0x20ad54 = _0x2ad7ba[_0x277130(0x387)](_0x28f6fb); else { const _0x954108 = document[_0x277130(0xad1)](_0x277130(0x96c)), _0x353d16 = _0x954108['querySelectorAll'](_0x277130(0x24c)), _0xe773ba = document[_0x277130(0x94b)](_0x277130(0xbed)); if (_0x353d16[_0x277130(0x1ea)] === 0x0) _0xe773ba['textContent'] = _0x277130(0x3ea); else _0x353d16[_0x277130(0x1ea)] > 0x2 ? _0xe773ba['textContent'] = '已选择\x20' + _0x353d16[_0x277130(0x1ea)] + '\x20项' : _0xe773ba[_0x277130(0x948)] = Array['from'](_0x353d16)[_0x277130(0x3c4)](_0x356a50 => _0x356a50[_0x277130(0x70a)][_0x277130(0x948)]['trim']())['join']('、'); } } async function _0x69064(_0x270a78) { const _0xe25713 = _0x1c58bc, _0x1aef20 = _0x2c45d7[_0xe25713(0x75e)][_0xe25713(0x128)](_0x13568a => _0x13568a['id'] === _0x270a78); if (!_0x1aef20 || _0x1aef20['type'] !== _0xe25713(0x62a)) return; document['getElementById'](_0xe25713(0x874))[_0xe25713(0x82f)] = _0x1aef20[_0xe25713(0xa6a)] || '', _0x2c0967(_0xe25713(0x895)), document['getElementById'](_0xe25713(0x895))['value'] = _0x1aef20['boundUserProfileId'] || _0x2c45d7[_0xe25713(0x4d3)], _0x34ca66(_0xe25713(0x965), _0x1aef20[_0xe25713(0x7ad)] || []), _0x13b59a(); const _0x44151f = document[_0xe25713(0xad1)](_0xe25713(0xa5b)), _0x65778e = document[_0xe25713(0xad1)](_0xe25713(0x3e2)); _0x65778e[_0xe25713(0x819)][_0xe25713(0xbe4)] = '', _0x262fce(_0xe25713(0x2f7) + _0x270a78)[_0xe25713(0xa0d)](_0x419ea6 => { const _0x500f09 = _0xe25713; if (_0x500f09(0x6ed) !== _0x500f09(0xb31)) _0x44151f['src'] = _0x419ea6 ? URL[_0x500f09(0x97d)](_0x419ea6) : _0x72f264; else { const _0xaee49 = _0x591390[_0x500f09(0x51a)] || _0x5e3bf6?.[_0x500f09(0x402)][0x0], _0x166699 = _0x2ef209(_0xaee49); _0x253ca6 = _0x166699 ? _0x166699[_0x500f09(0xa6a)] : '角色'; } }), _0x262fce(_0xe25713(0xa55) + _0x270a78)[_0xe25713(0xa0d)](_0xe6ea7f => { const _0x80cc41 = _0xe25713; if (_0x80cc41(0x7e1) === _0x80cc41(0x7e1)) { if (_0xe6ea7f) _0x65778e[_0x80cc41(0x819)][_0x80cc41(0xbe4)] = 'url(\x27' + URL[_0x80cc41(0x97d)](_0xe6ea7f) + '\x27)'; } else _0x103380 = { 'title': _0x3d868f[_0x80cc41(0x6d1)], 'artist': _0x128b52['artist'], 'cover': _0x892b3[_0x80cc41(0x511)] || (_0x45aa37[_0x80cc41(0x6b1)] ? 'db:' + _0xa2703b[_0x80cc41(0x6b1)] : _0x38111f), 'isFromLibrary': !![] }, _0x1c2cf0[_0x80cc41(0x400)] = _0x4f9088[_0x80cc41(0x642)], _0x48181d[_0x80cc41(0xbc9)](), _0x58136f[_0x80cc41(0x11d)] = _0x556aba[_0x80cc41(0xa2f)][_0x80cc41(0x18c)](_0x449799 => _0x449799['id'] === _0x3e998b['id']), _0x309561(); }), _0x512ecd('groupSettings', _0xe25713(0xa37)); } async function _0xcf549a() { const _0xd04160 = _0x1c58bc, _0x4368aa = _0x5c10dc(); if (!_0x4368aa || _0x4368aa[_0xd04160(0x1a7)] !== 'group') return; const _0x515888 = document[_0xd04160(0xad1)]('group-settings-name')[_0xd04160(0x82f)][_0xd04160(0x471)](); if (!_0x515888) { if (_0xd04160(0x60e) !== _0xd04160(0x60e)) _0x3346fc++; else { _0x18f071(_0xd04160(0x6ba)); return; } } _0x4368aa[_0xd04160(0xa6a)] = _0x515888; const _0x4c51b2 = document[_0xd04160(0x61a)](_0xd04160(0x46e)); _0x4368aa[_0xd04160(0x7ad)] = Array[_0xd04160(0x8c8)](_0x4c51b2)[_0xd04160(0x3c4)](_0x479865 => _0x479865['value']), _0x4368aa['boundUserProfileId'] = document['getElementById']('group-settings-bind-user')['value']; const _0x16c88d = document[_0xd04160(0xad1)](_0xd04160(0xa35))[_0xd04160(0xb1f)][0x0], _0x4233a3 = document[_0xd04160(0xad1)](_0xd04160(0x7cf))[_0xd04160(0xb1f)][0x0]; if (_0x16c88d) await _0x5941fe(_0xd04160(0x2f7) + _0x4368aa['id'], _0x16c88d); if (_0x4233a3) await _0x5941fe(_0xd04160(0xa55) + _0x4368aa['id'], _0x4233a3); _0x3ac55e(), _0x1f769d(), await _0x2446f8(), _0x18f071('群聊设置已保存！'), _0x512ecd(_0xd04160(0xa37), 'groupSettings'); } function _0x13b59a() { const _0xa266f7 = _0x1c58bc, _0x2a9d49 = document[_0xa266f7(0xad1)](_0xa266f7(0x965)), _0x3ac565 = _0x2a9d49[_0xa266f7(0x61a)](_0xa266f7(0x24c)), _0x388539 = document['querySelector'](_0xa266f7(0x2b3)); if (_0x3ac565[_0xa266f7(0x1ea)] === 0x0) { if (_0xa266f7(0xaeb) !== _0xa266f7(0xa76)) _0x388539[_0xa266f7(0x948)] = _0xa266f7(0x3ea); else { _0x3b3430['id'] === _0x163aeb[_0xa266f7(0x147)] && (_0x14463e(), _0xaa1b26[_0xa266f7(0x1ef)] = [], _0x41e6c2()); try { _0x521b6e[_0xa266f7(0x1fa)]('chatHistory_' + _0xa67006['id']), _0x51ae55(_0xa266f7(0x828) + _0x399017[_0xa266f7(0xa6a)] + _0xa266f7(0x844)); } catch (_0x1ec988) { _0x1eaa77[_0xa266f7(0x208)](_0xa266f7(0x22f) + _0xe5a811['id'], _0x1ec988), _0x4fe2f9('清空聊天记录失败。'); } } } else _0x3ac565['length'] > 0x2 ? _0x388539[_0xa266f7(0x948)] = _0xa266f7(0xac7) + _0x3ac565[_0xa266f7(0x1ea)] + '\x20项' : _0x388539[_0xa266f7(0x948)] = Array[_0xa266f7(0x8c8)](_0x3ac565)[_0xa266f7(0x3c4)](_0x1bb2f2 => _0x1bb2f2[_0xa266f7(0x70a)][_0xa266f7(0x948)][_0xa266f7(0x471)]())[_0xa266f7(0xae6)]('、'); } async function _0x1ec99f() { const _0x4f9307 = _0x1c58bc; if (_0x4f9307(0xbd1) !== _0x4f9307(0x927)) { const _0x23fc9e = _0x5c10dc(), _0x1cca3a = (_0x23fc9e?.[_0x4f9307(0x402)] || [])[_0x4f9307(0x3c4)](_0x132ad2)['filter'](Boolean), _0x3e065d = _0x16e371(_0x23fc9e['id']); if (!_0x23fc9e || _0x23fc9e[_0x4f9307(0x1a7)] !== 'group' || _0x1cca3a['length'] < 0x2) return null; const _0x5e6bf3 = _0x23fc9e[_0x4f9307(0x7ad)] && _0x23fc9e[_0x4f9307(0x7ad)]['length'] > 0x0 ? _0x4f9307(0x2e1) + _0x23fc9e[_0x4f9307(0x7ad)][_0x4f9307(0x3c4)](_0x33f54c => _0x2c45d7[_0x4f9307(0x538)][_0x4f9307(0x128)](_0xddd5ab => _0xddd5ab['id'] === _0x33f54c))[_0x4f9307(0x662)](Boolean)[_0x4f9307(0x3c4)](_0x1e23fd => _0x4f9307(0xaea) + _0x1e23fd[_0x4f9307(0xa6a)] + '\x0a' + _0x1e23fd[_0x4f9307(0xa3a)])[_0x4f9307(0xae6)]('') : '', _0xec067c = _0x3e065d[_0x4f9307(0x5d7)] ? _0x4f9307(0x3f5) + _0x3e065d[_0x4f9307(0xa6a)] + _0x4f9307(0x486) + _0x3e065d['persona'] : ''; let _0x46942d = ''; const _0x230395 = new Date(), _0x587c61 = _0x2c45d7[_0x4f9307(0x1ef)]['at'](-0x1); _0x46942d += '\x0a-\x20**当前时间**:\x20' + _0x230395['toLocaleString'](_0x4f9307(0x15b), { 'dateStyle': _0x4f9307(0x9d4), 'timeStyle': 'short' }); if (_0x587c61) { const _0x544cab = new Date(_0x587c61[_0x4f9307(0x782)]), _0x344612 = Math[_0x4f9307(0x913)]((_0x230395 - _0x544cab) / (0x3e8 * 0x3c)); if (_0x344612 < 0x5) _0x46942d += '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。'; else { if (_0x344612 < 0x78) _0x46942d += _0x4f9307(0x7b3) + _0x344612 + _0x4f9307(0xbc4); else { const _0x4e9aaa = Math[_0x4f9307(0x913)](_0x344612 / 0x3c); if (_0x4e9aaa < 0x30) _0x46942d += _0x4f9307(0x7b3) + _0x4e9aaa + _0x4f9307(0x70e); else _0x46942d += '\x0a-\x20**对话状态**:\x20群里已经有' + Math['floor'](_0x4e9aaa / 0x18) + '天没动静了。你的角色们应该发起新的问候或话题。'; } } } else _0x46942d += _0x4f9307(0x382); const _0x18e446 = [..._0x2c45d7[_0x4f9307(0x1ef)]][_0x4f9307(0x566)]()[_0x4f9307(0x128)](_0x416d4e => _0x416d4e[_0x4f9307(0x232)] === _0x4f9307(0xa02))?.[_0x4f9307(0xa3a)] || '', _0x40753a = _0xdee03e(_0x23fc9e, _0x18e446), _0x47ea61 = _0x2c45d7[_0x4f9307(0x1ef)][_0x4f9307(0xa30)](-0x78), _0x41dd77 = _0x9519d0['map'](_0xb3be3 => _0xb3be3['name']), _0xf5207d = _0x345f9c(), _0x3d974e = await Promise[_0x4f9307(0x32e)](_0x1cca3a['map'](async _0x95c605 => { const _0xafd278 = _0x4f9307, { omniText: _0x56cc93 } = _0x5b1c3b(_0x95c605['id'], _0x23fc9e['id']), _0x124d98 = _0x20fbaa(_0x95c605['id']), _0x4655bb = await _0x26f65b(_0x95c605['id']), _0x11be34 = _0x95c605['linkedWorldBookIds'] && _0x95c605[_0xafd278(0x7ad)][_0xafd278(0x1ea)] > 0x0 ? _0xafd278(0x1b3) + _0x95c605['name'] + _0xafd278(0x91e) + _0x95c605[_0xafd278(0x7ad)][_0xafd278(0x3c4)](_0x4a3217 => _0x2c45d7[_0xafd278(0x538)][_0xafd278(0x128)](_0x4a1a85 => _0x4a1a85['id'] === _0x4a3217))[_0xafd278(0x662)](Boolean)['map'](_0x2674e9 => '\x0a##\x20条目:\x20' + _0x2674e9[_0xafd278(0xa6a)] + '\x0a' + _0x2674e9[_0xafd278(0xa3a)])['join']('') : ''; let _0x1aa40a = _0xafd278(0x640) + _0x95c605[_0xafd278(0xa6a)] + _0xafd278(0x730); const _0x5f5a53 = _0x3f9417(_0x95c605['id']), _0x158d5 = new Date(); if (_0x5f5a53) { const _0x4b2d84 = new Date(_0x5f5a53[_0xafd278(0x782)]); _0x1aa40a += '-\x20**你与' + _0x3e065d[_0xafd278(0xa6a)] + _0xafd278(0x21b) + _0x1ad990(_0x4b2d84) + '\x0a'; } else _0x1aa40a += '-\x20**状态提示**:\x20这是你和' + _0x3e065d[_0xafd278(0xa6a)] + '的第一次互动。\x0a'; return { 'id': _0x95c605['id'], 'name': _0x95c605[_0xafd278(0xa6a)], 'persona': _0x95c605[_0xafd278(0x5d7)] || _0xafd278(0x73b), 'memory': _0x56cc93 + _0x124d98 + _0x4655bb + _0x11be34 + _0x1aa40a }; })), _0x132787 = 0x5, _0x28f69c = 0xc, _0x4f885d = '你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。'[_0x4f9307(0x471)](), _0x4ae0b5 = { 'instruction': ('\x0a-\x20你正在为一个名为“' + (_0x23fc9e[_0x4f9307(0xa6a)] || '群聊') + _0x4f9307(0xa8c) + (_0x3e065d[_0x4f9307(0xa6a)] || '用户') + _0x4f9307(0x405) + _0x132787 + '\x20到\x20' + _0x28f69c + '\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕' + (_0x3e065d[_0x4f9307(0xa6a)] || '用户') + _0x4f9307(0xaa1) + _0x46942d + '\x20\x0a' + _0xec067c + '\x0a' + _0x5e6bf3 + _0x4f9307(0x7b6) + _0xf5207d + '\x0a')[_0x4f9307(0x471)](), 'personas': _0x3d974e, 'mentioned': _0x40753a ? { 'id': _0x40753a['id'], 'name': _0x40753a[_0x4f9307(0xa6a)] } : null, 'stickerList': _0x41dd77 }, _0x5c523c = { 'type': _0x4f9307(0x31e), 'properties': { 'events': { 'type': _0x4f9307(0xaca), 'items': { 'type': 'object', 'required': [_0x4f9307(0x51a), _0x4f9307(0x48e)], 'properties': { 'senderId': { 'type': _0x4f9307(0x319) }, 'kind': { 'type': _0x4f9307(0x319), 'enum': [_0x4f9307(0x4f1), _0x4f9307(0x3bd), _0x4f9307(0xab5)] }, 'content': { 'type': _0x4f9307(0x319) }, 'sticker': { 'type': _0x4f9307(0x319) }, 'songName': { 'type': 'string' }, 'artist': { 'type': _0x4f9307(0x319) } } } } }, 'required': [_0x4f9307(0x53c)] }, _0x3cd8d1 = [{ 'role': _0x4f9307(0x5ff), 'content': _0x4f885d }]; for (const _0x424e90 of _0x47ea61) { const _0x21a89d = _0x424e90[_0x4f9307(0x232)] === 'ai' || _0x424e90[_0x4f9307(0x232)] === 'assistant' ? _0x4f9307(0x728) : _0x4f9307(0xa02); let _0x45fbe0 = { 'role': _0x21a89d, 'content': _0x424e90['content'] }, _0x20f48d = !!_0x424e90[_0x4f9307(0xa3a)], _0x5a47fc = null; if (_0x424e90['image']) _0x5a47fc = _0x424e90[_0x4f9307(0x9b6)]; else { if (_0x424e90[_0x4f9307(0x709)]) { if (_0x4f9307(0xa7d) !== _0x4f9307(0xb91)) try { if (_0x4f9307(0x6a9) === _0x4f9307(0x74d)) _0x279266 = !_0x2c86c3, _0x3def3a[_0x4f9307(0x9c4)][_0x4f9307(0xac2)](_0x4f9307(0x899), _0x59b39a), _0x4b615b[_0x4f9307(0x948)] = _0x5e0b1a ? '完成' : '管理', _0x5cbb5a[_0x4f9307(0x819)]['display'] = _0x57c81d ? 'block' : _0x4f9307(0xb39), !_0x159ab0 && (_0x305694['querySelectorAll'](_0x4f9307(0x348))[_0x4f9307(0x4ac)](_0x3dc5b4 => _0x3dc5b4[_0x4f9307(0x9c4)][_0x4f9307(0x6e1)]('selected')), _0x226ca8[_0x4f9307(0x9c4)]['remove'](_0x4f9307(0x630))); else { const _0x53f4dd = await _0x262fce(_0x424e90[_0x4f9307(0x709)]); if (_0x53f4dd) _0x5a47fc = await _0x2a1554(_0x53f4dd); } } catch (_0x226e5c) { console['error'](_0x4f9307(0x19a), _0x226e5c); } else _0x50ee66['content'] = _0x4699fc, _0x407b0f(), _0x12e05d(); } } _0x5a47fc && (_0x45fbe0[_0x4f9307(0x9b6)] = _0x5a47fc, _0x20f48d = !![]); if (_0x20f48d) _0x3cd8d1[_0x4f9307(0xb49)](_0x45fbe0); } _0x3cd8d1[_0x4f9307(0xb49)]({ 'role': _0x4f9307(0xa02), 'content': _0x4f9307(0xad7) + JSON[_0x4f9307(0x39b)](_0x5c523c) + '\x0a\x0aINPUT:\x0a' + JSON[_0x4f9307(0x39b)](_0x4ae0b5) }); try { const _0x4b8f1f = await _0x4eb036(_0x3cd8d1, { 'json': !![] }); if (!_0x4b8f1f) return null; let _0xbc127f = _0x4b8f1f[_0x4f9307(0x471)](); const _0x1c587b = _0xbc127f[_0x4f9307(0x604)](/```json([\s\S]*?)```/i); if (_0x1c587b) _0xbc127f = _0x1c587b[0x1][_0x4f9307(0x471)](); _0xbc127f = _0x3f590c(_0xbc127f); let _0x4880f5 = null; try { _0x4880f5 = JSON['parse'](_0xbc127f); } catch (_0x59902b) { _0x4f9307(0xa92) !== _0x4f9307(0xa92) ? _0x4f49fb[_0x4f9307(0x41a)](_0x4f9307(0x3dc), _0x11378c) : (console['error'](_0x4f9307(0x79d), _0x59902b), console[_0x4f9307(0x208)](_0x4f9307(0xa58), _0xbc127f)); } if (!_0x4880f5 || !Array[_0x4f9307(0x460)](_0x4880f5['events'])) return null; return _0x4880f5 = _0x57af34(_0x4880f5, _0x1cca3a, _0x41dd77), _0x4880f5[_0x4f9307(0x53c)] = _0x4880f5['events'][_0x4f9307(0xa30)](0x0, _0x28f69c), _0x4880f5[_0x4f9307(0x53c)][_0x4f9307(0x1ea)] ? _0x4880f5 : null; } catch (_0x3c14db) { return _0x3c14db['name'] !== _0x4f9307(0x7b7) && (_0x4f9307(0x306) !== _0x4f9307(0x9f8) ? console[_0x4f9307(0x208)](_0x4f9307(0x5fb), _0x3c14db) : (_0x289537[_0x4f9307(0x54e)] = [{ 'id': _0x4f9307(0x135), 'name': '默认分类' }], _0x3d07dd[_0x4f9307(0x538)]['forEach'](_0x49b316 => { const _0x10eef4 = _0x4f9307; !_0x49b316[_0x10eef4(0x9ba)] && (_0x49b316[_0x10eef4(0x9ba)] = _0x10eef4(0x135)); }))), null; } } else _0x4fdb41(_0x37a13b, 'normal'); } function _0xff8a9b() { const _0x1eb50e = _0x1c58bc, _0x1d660b = document[_0x1eb50e(0xad1)](_0x1eb50e(0x650)); _0x1d660b[_0x1eb50e(0x16c)] = ''; if (_0x2c45d7[_0x1eb50e(0x554)][_0x1eb50e(0x1ea)] === 0x0) { if ('YSLDH' === _0x1eb50e(0x2e5)) { const _0x18c9db = _0x4e669f[_0x1eb50e(0xad1)]('confirm-altar-upload-button'); _0x24d903[_0x1eb50e(0x249)] && _0x4ec595['info'] ? _0x18c9db[_0x1eb50e(0xa6c)] = ![] : _0x18c9db[_0x1eb50e(0xa6c)] = !![]; } else { _0x1d660b[_0x1eb50e(0x16c)] = _0x1eb50e(0x3a0); return; } } _0x2c45d7[_0x1eb50e(0x554)][_0x1eb50e(0x4ac)](_0x5479a8 => { const _0x1fa9ec = _0x1eb50e; if (_0x1fa9ec(0x76f) !== _0x1fa9ec(0x76f)) { _0x422237[_0x1fa9ec(0x16c)] = _0x1fa9ec(0x440); return; } else { const _0x3617eb = _0x2c45d7[_0x1fa9ec(0x775)][_0x1fa9ec(0x128)](_0x53fac5 => _0x53fac5['id'] === _0x5479a8[_0x1fa9ec(0x815)]) || { 'name': _0x1fa9ec(0xb03) }, _0x355e23 = document[_0x1fa9ec(0xa51)](_0x1fa9ec(0x54f)); _0x355e23[_0x1fa9ec(0xa5e)] = _0x1fa9ec(0x73a), _0x355e23[_0x1fa9ec(0x2d1)]['id'] = _0x5479a8['id'], _0x355e23[_0x1fa9ec(0x16c)] = _0x1fa9ec(0x818) + _0x5479a8[_0x1fa9ec(0xa6a)] + _0x1fa9ec(0x320) + _0x3617eb[_0x1fa9ec(0xa6a)] + _0x1fa9ec(0x8f1) + _0x5479a8[_0x1fa9ec(0x739)][_0x1fa9ec(0x1ea)] + _0x1fa9ec(0x359), _0x355e23['addEventListener'](_0x1fa9ec(0x43a), () => _0x4d5bd7(_0x5479a8['id'])), _0x1d660b[_0x1fa9ec(0x8ce)](_0x355e23); } }); } function _0x3ec2c2(_0x5e61e2 = null) { const _0x440e9a = _0x1c58bc, _0x311bbc = document['getElementById'](_0x440e9a(0x6ee)), _0x25717b = document[_0x440e9a(0xad1)](_0x440e9a(0x281)), _0x12e092 = document[_0x440e9a(0xad1)]('friend-circle-member-selection'), _0x2a152e = document[_0x440e9a(0xad1)](_0x440e9a(0x9b2)), _0x13a230 = document['getElementById'](_0x440e9a(0xb6b)), _0x3cae54 = document[_0x440e9a(0xad1)]('delete-friend-circle-button'); _0x2c0967('friend-circle-edit-bind-user'), _0x12e092[_0x440e9a(0x16c)] = '', _0x2c45d7[_0x440e9a(0xb76)][_0x440e9a(0x4ac)](_0x1afa5c => { const _0x2838c5 = _0x440e9a; if (_0x2838c5(0x9aa) === _0x2838c5(0x9aa)) { const _0x13ba36 = document[_0x2838c5(0xa51)](_0x2838c5(0x54f)); _0x13ba36[_0x2838c5(0xa5e)] = _0x2838c5(0x394), _0x13ba36[_0x2838c5(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-' + _0x1afa5c['id'] + '\x22\x20data-id=\x22' + _0x1afa5c['id'] + _0x2838c5(0x3b0) + (_0x1afa5c[_0x2838c5(0x37b)] || _0x72f264) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-' + _0x1afa5c['id'] + _0x2838c5(0x685) + _0x1afa5c[_0x2838c5(0xa6a)] + _0x2838c5(0x84b), _0x12e092['appendChild'](_0x13ba36); } else { _0xe43b8a[_0x2838c5(0x16c)] = _0x2838c5(0x240); return; } }); if (_0x5e61e2) { const _0x52e064 = _0x2c45d7['friendCircles'][_0x440e9a(0x128)](_0x36ae2a => _0x36ae2a['id'] === _0x5e61e2); if (!_0x52e064) return; _0x2a152e[_0x440e9a(0x948)] = '编辑好友圈', _0x13a230[_0x440e9a(0x82f)] = _0x52e064['id'], _0x311bbc[_0x440e9a(0x82f)] = _0x52e064['name'], _0x25717b['value'] = _0x52e064[_0x440e9a(0x815)], _0x3cae54[_0x440e9a(0x819)][_0x440e9a(0x974)] = _0x440e9a(0x4e9), _0x52e064['memberCharacterIds'][_0x440e9a(0x4ac)](_0x79bb68 => { const _0x255e8b = _0x440e9a; if (_0x255e8b(0x51e) === _0x255e8b(0x51e)) { const _0x79d83c = _0x12e092[_0x255e8b(0x94b)]('#member-select-' + _0x79bb68); if (_0x79d83c) _0x79d83c['checked'] = !![]; } else _0x2101db = _0x278c40[_0x255e8b(0x813)](_0x255e8b(0x199) + _0x1341a7[_0x255e8b(0x147)]); }); } else _0x2a152e['textContent'] = '新建好友圈', _0x13a230[_0x440e9a(0x82f)] = '', _0x311bbc[_0x440e9a(0x82f)] = _0x440e9a(0x307) + (_0x2c45d7[_0x440e9a(0x554)][_0x440e9a(0x1ea)] + 0x1), _0x25717b[_0x440e9a(0x82f)] = _0x2c45d7[_0x440e9a(0x4d3)], _0x3cae54[_0x440e9a(0x819)][_0x440e9a(0x974)] = _0x440e9a(0xb39); _0x512ecd(_0x440e9a(0xb77), _0x440e9a(0x626)); } function _0x3ee374() { const _0x2e29af = _0x1c58bc, _0x511fb2 = document[_0x2e29af(0xad1)](_0x2e29af(0xb6b))['value'], _0x48f7e5 = document['getElementById'](_0x2e29af(0x6ee))['value'][_0x2e29af(0x471)](), _0x155448 = document[_0x2e29af(0xad1)]('friend-circle-edit-bind-user')['value'], _0x552d5e = Array[_0x2e29af(0x8c8)](document['querySelectorAll'](_0x2e29af(0x6ae)))[_0x2e29af(0x3c4)](_0x4a89d8 => _0x4a89d8[_0x2e29af(0x2d1)]['id']); if (!_0x48f7e5) { _0x18f071(_0x2e29af(0x706)); return; } if (_0x552d5e[_0x2e29af(0x1ea)] === 0x0) { _0x18f071(_0x2e29af(0xb37)); return; } if (_0x511fb2) { if (_0x2e29af(0x5f9) === 'rabWj') _0x1d99b8 += _0x2e29af(0x6f9) + _0x10b36f['description'] + '”。\x0a'; else { const _0x1312fd = _0x2c45d7[_0x2e29af(0x554)]['find'](_0x2babd2 => _0x2babd2['id'] === _0x511fb2); _0x1312fd && (_0x1312fd[_0x2e29af(0xa6a)] = _0x48f7e5, _0x1312fd[_0x2e29af(0x815)] = _0x155448, _0x1312fd['memberCharacterIds'] = _0x552d5e); } } else { const _0xced59d = { 'id': _0x2e29af(0x5a1) + Date[_0x2e29af(0x7e3)](), 'name': _0x48f7e5, 'boundUserProfileId': _0x155448, 'memberCharacterIds': _0x552d5e, 'posts': [] }; _0x2c45d7['friendCircles'][_0x2e29af(0xb49)](_0xced59d); } _0x3ac55e(), _0x18f071(_0x2e29af(0xab8)), _0xff8a9b(), _0x512ecd(_0x2e29af(0x626), 'friendCircleEdit'); } async function _0x2d3fa9() { const _0x2a8f46 = _0x1c58bc, _0x3b7ad5 = document[_0x2a8f46(0xad1)](_0x2a8f46(0xb6b))[_0x2a8f46(0x82f)]; if (!_0x3b7ad5) return; const _0x4510fe = await _0x17d597(_0x2a8f46(0x629)); _0x4510fe && (_0x2c45d7['friendCircles'] = _0x2c45d7[_0x2a8f46(0x554)]['filter'](_0x5aeb9c => _0x5aeb9c['id'] !== _0x3b7ad5), _0x2c45d7['activeFriendCircleId'] === _0x3b7ad5 && (_0x2a8f46(0xa54) === _0x2a8f46(0xa54) ? _0x2c45d7[_0x2a8f46(0x6c4)] = null : (_0x2c7ce7(![]), _0x48a2c8[_0x2a8f46(0x208)](_0x2a8f46(0x53f), _0x203d2b), _0x3f762d('上传失败了，笨蛋！\x20' + _0x5a9515[_0x2a8f46(0x80d)] + '\x20'))), _0x3ac55e(), _0x18f071(_0x2a8f46(0x9cc)), _0xff8a9b(), _0x512ecd('friendCircleList', 'friendCircleEdit')); } function _0x4d5bd7(_0x36f1ea) { const _0x1189e5 = _0x1c58bc; _0x370444(); const _0x3068f7 = _0x2c45d7['friendCircles'][_0x1189e5(0x128)](_0x13d125 => _0x13d125['id'] === _0x36f1ea); if (!_0x3068f7) return; _0x2c45d7[_0x1189e5(0x6c4)] = _0x36f1ea, _0x3ac55e(), document[_0x1189e5(0xad1)](_0x1189e5(0x7ce))[_0x1189e5(0x948)] = _0x3068f7[_0x1189e5(0xa6a)], _0x2d71b3(), _0x512ecd(_0x1189e5(0xab5), _0x1189e5(0x626)), _0x4df087(); } function _0x573432() { const _0x41a5a0 = _0x1c58bc; if (!_0x2c45d7[_0x41a5a0(0x554)] || _0x2c45d7[_0x41a5a0(0x554)]['length'] === 0x0) { console['error'](_0x41a5a0(0x7bc)); return; } const _0x33461b = _0x2c45d7[_0x41a5a0(0x554)][0x0]; if (_0x33461b[_0x41a5a0(0x739)][_0x41a5a0(0x1ea)] < 0x2) { console[_0x41a5a0(0x208)]('错误：第一个好友圈\x20\x22' + _0x33461b[_0x41a5a0(0xa6a)] + _0x41a5a0(0x5c2)); return; } const _0x6be54f = { 'id': _0x41a5a0(0x7e8) + Date[_0x41a5a0(0x7e3)](), 'authorType': _0x41a5a0(0x2cd), 'authorId': _0x33461b[_0x41a5a0(0x739)][0x0], 'content': _0x41a5a0(0x66c), 'timestamp': Date[_0x41a5a0(0x7e3)](), 'likes': [_0x33461b[_0x41a5a0(0x739)][0x1]], 'comments': [{ 'commentId': 'c_' + Date[_0x41a5a0(0x7e3)](), 'authorId': _0x33461b[_0x41a5a0(0x739)][0x1], 'content': '赞同！渲染效果一级棒！' }] }; _0x33461b[_0x41a5a0(0x6c0)][_0x41a5a0(0xb49)](_0x6be54f), _0x3ac55e(), console['log'](_0x41a5a0(0xb7e) + _0x33461b[_0x41a5a0(0xa6a)] + '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。'), _0x18f071(_0x41a5a0(0x8ec)); } window[_0x1c58bc(0x8ae)] = _0x573432; function _0x2a8e18(_0x1853fa) { const _0x4759bc = _0x1c58bc; if (_0x4759bc(0x89b) === 'DNHWr') _0x1cf60f(_0x4759bc(0xa37), _0x4759bc(0xb88)); else return _0x2c45d7[_0x4759bc(0x775)][_0x4759bc(0x128)](_0x1a196 => _0x1a196['id'] === _0x1853fa); } function _0x4ded3c(_0x1169de, _0x4ca17c = _0x1c58bc(0x5dd)) { const _0x37db07 = _0x1c58bc, _0x595710 = document[_0x37db07(0xad1)](_0x37db07(0xb8e)); let _0x4b3279 = document[_0x37db07(0xad1)](_0x37db07(0x340)); _0x1169de ? (!_0x4b3279 && (_0x4b3279 = document[_0x37db07(0xa51)](_0x37db07(0x54f)), _0x4b3279['id'] = _0x37db07(0x340), _0x595710[_0x37db07(0x8ce)](_0x4b3279)), _0x4b3279['innerHTML'] = '<div\x20class=\x22loader-spinner\x22></div><span>' + _0x4ca17c + '</span>', _0x4b3279[_0x37db07(0x819)][_0x37db07(0x974)] = _0x37db07(0x9e5)) : _0x4b3279 && (_0x4b3279[_0x37db07(0x819)][_0x37db07(0x974)] = _0x37db07(0xb39)); } async function _0x5c6505() { const _0x4a95c7 = _0x1c58bc; if (_0x4a95c7(0xabc) !== _0x4a95c7(0x263)) { const _0x1b82da = _0x2c45d7[_0x4a95c7(0x554)][_0x4a95c7(0x128)](_0x75205d => _0x75205d['id'] === _0x2c45d7[_0x4a95c7(0x6c4)]); if (!_0x1b82da || _0x2c45d7[_0x4a95c7(0xaa7)]) return; _0x4ded3c(!![], _0x4a95c7(0x5e6)), await new Promise(_0x3ccfd3 => setTimeout(_0x3ccfd3, 0x32)), _0x2c45d7[_0x4a95c7(0xaa7)] = !![]; try { let _0x4d04d4 = Date['now'](); _0x1b82da[_0x4a95c7(0x6c0)] && _0x1b82da[_0x4a95c7(0x6c0)][_0x4a95c7(0x1ea)] > 0x0 && (_0x4d04d4 = Math[_0x4a95c7(0xa01)](..._0x1b82da[_0x4a95c7(0x6c0)][_0x4a95c7(0x3c4)](_0x152fe4 => _0x152fe4[_0x4a95c7(0x782)]))); const _0x2b0b45 = await _0x1ad283(_0x1b82da); if (!_0x2b0b45 || _0x2b0b45[_0x4a95c7(0x1ea)] === 0x0) { if (_0x4a95c7(0x76e) === _0x4a95c7(0x76e)) { _0x18f071(_0x4a95c7(0x3e4)); return; } else { _0x381c41(_0x4a95c7(0x92a)); return; } } const _0x2bfab5 = _0x2b0b45[_0x4a95c7(0x3c4)](async (_0x5d24c9, _0x28cfdc) => { const _0x2a8975 = _0x4a95c7; _0x4ded3c(!![], _0x2a8975(0x61c) + (_0x28cfdc + 0x1) + _0x2a8975(0x943) + _0x2b0b45[_0x2a8975(0x1ea)] + _0x2a8975(0x269)); const _0x2c6463 = _0x4d04d4 + (_0x28cfdc + 0x1) * 0x3c * 0x3e8, _0x2c39ca = { 'id': _0x2a8975(0x711) + _0x5d24c9[_0x2a8975(0x989)] + '_' + _0x2c6463, 'authorType': _0x2a8975(0x2cd), 'authorId': _0x5d24c9['authorId'], 'content': _0x5d24c9[_0x2a8975(0x87b)], 'timestamp': _0x2c6463, 'likes': _0x5d24c9[_0x2a8975(0x7de)] || [], 'comments': (_0x5d24c9['comments'] || [])['map']((_0x1659b6, _0x586ccd) => ({ 'commentId': 'c_' + _0x2c6463 + '_' + _0x586ccd, 'authorId': _0x1659b6['authorId'], 'content': _0x1659b6[_0x2a8975(0xa3a)] })) }; if (_0x5d24c9['postType'] === 'music' && _0x5d24c9[_0x2a8975(0x6d1)] && _0x5d24c9[_0x2a8975(0x50a)]) try { const _0x610222 = await _0x1cbaf1(_0x5d24c9[_0x2a8975(0x6d1)], _0x5d24c9[_0x2a8975(0x50a)]); _0x2c39ca[_0x2a8975(0x1a7)] = _0x2a8975(0xab5), _0x2c39ca[_0x2a8975(0x6d1)] = _0x5d24c9[_0x2a8975(0x6d1)], _0x2c39ca[_0x2a8975(0x50a)] = _0x5d24c9['artist'], _0x2c39ca[_0x2a8975(0x511)] = _0x610222['cover'], _0x2c39ca[_0x2a8975(0x642)] = _0x610222['url']; } catch (_0x1b1386) { console[_0x2a8975(0x208)](_0x2a8975(0x3b1), _0x1b1386), _0x2c39ca[_0x2a8975(0x1a7)] = _0x2a8975(0x4f1); } else _0x2c39ca[_0x2a8975(0x1a7)] = 'text'; return _0x2c39ca; }), _0x188a47 = await Promise[_0x4a95c7(0x32e)](_0x2bfab5); _0x1b82da[_0x4a95c7(0x6c0)][_0x4a95c7(0xb49)](..._0x188a47), _0x3ac55e(), _0x370444(); } catch (_0x29598b) { _0x4a95c7(0x124) !== 'TfDhO' ? _0x5de7a1[_0x4a95c7(0xb49)]({ 'time': _0x15ab72, 'text': _0x1b96e6 }) : (console[_0x4a95c7(0x208)](_0x4a95c7(0xad3), _0x29598b), _0x18f071('生成动态时发生错误:\x20' + _0x29598b[_0x4a95c7(0x80d)])); } finally { _0x2d71b3(), _0x4ded3c(![]), _0x2c45d7[_0x4a95c7(0xaa7)] = ![]; } } else _0x28ec7c += _0x4a95c7(0x153); } async function _0x1ad283(_0x52dbbf) { const _0x49a2f3 = _0x1c58bc, _0x294b68 = _0x52dbbf[_0x49a2f3(0x739)][_0x49a2f3(0x3c4)](_0x24541b => _0x132ad2(_0x24541b))['filter'](Boolean); if (_0x294b68[_0x49a2f3(0x1ea)] === 0x0) return null; const _0x28cdb6 = _0x345f9c(), _0x14db3c = _0x2a8e18(_0x52dbbf['boundUserProfileId']) || _0x2c45d7[_0x49a2f3(0x775)][0x0], _0x2c9a06 = _0x14db3c ? _0x49a2f3(0x3f9) + _0x14db3c[_0x49a2f3(0xa6a)] + '\x0a-\x20人设:\x20' + (_0x14db3c['persona'] || '无') + '\x0a' : '', _0x5c68aa = _0x294b68['map'](_0x55f2c7 => { const _0x2b93df = _0x49a2f3, { omniText: _0x19e1d1 } = _0x5b1c3b(_0x55f2c7['id'], null), _0x45b0df = _0x20fbaa(_0x55f2c7['id']), _0x96f7f1 = _0x55f2c7[_0x2b93df(0x7ad)] && _0x55f2c7['linkedWorldBookIds']['length'] > 0x0 ? _0x2b93df(0x1b3) + _0x55f2c7[_0x2b93df(0xa6a)] + _0x2b93df(0x91e) + _0x55f2c7['linkedWorldBookIds'][_0x2b93df(0x3c4)](_0x3ecc76 => _0x2c45d7[_0x2b93df(0x538)]['find'](_0x3466db => _0x3466db['id'] === _0x3ecc76))[_0x2b93df(0x662)](Boolean)[_0x2b93df(0x3c4)](_0x51d820 => _0x2b93df(0x9a7) + _0x51d820['name'] + '\x0a' + _0x51d820['content'])[_0x2b93df(0xae6)]('') : ''; return _0x2b93df(0x875) + _0x55f2c7['name'] + _0x2b93df(0x257) + _0x55f2c7['id'] + _0x2b93df(0x60b) + _0x55f2c7[_0x2b93df(0x5d7)] + _0x2b93df(0x8e8) + _0x19e1d1 + '\x0a' + _0x45b0df + '\x0a' + _0x96f7f1; })[_0x49a2f3(0xae6)]('\x0a\x0a'), _0x3ecd90 = Math[_0x49a2f3(0x913)](Math['random']() * 0x3) + 0x2, _0x1af0db = '\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【' + _0x3ecd90 + _0x49a2f3(0x690) + _0x14db3c[_0x49a2f3(0xa6a)] + _0x49a2f3(0xaf2) + _0x5c68aa + '\x0a' + _0x2c9a06 + _0x49a2f3(0x72d) + _0x28cdb6 + _0x49a2f3(0x73d) + _0x3ecd90 + _0x49a2f3(0xb58) + _0x3ecd90 + _0x49a2f3(0x218), _0x18196a = [{ 'role': _0x49a2f3(0x5ff), 'content': _0x1af0db }, { 'role': 'user', 'content': _0x49a2f3(0x7d6) }]; _0x18196a['push']({ 'role': _0x49a2f3(0xa02), 'content': _0x49a2f3(0x60d) + _0x3ecd90 + _0x49a2f3(0x390) }); try { const _0x5535ec = await _0x4eb036(_0x18196a, { 'json': !![] }), _0x41747b = _0x5535ec[_0x49a2f3(0x604)](/(\[[\s\S]*\])/); if (!_0x41747b) throw new Error(_0x49a2f3(0x398)); const _0xb2a7c = _0x41747b[0x1], _0x4cb0e9 = JSON[_0x49a2f3(0x387)](_0xb2a7c); if (!Array[_0x49a2f3(0x460)](_0x4cb0e9)) throw new Error(_0x49a2f3(0x847)); return _0x4cb0e9; } catch (_0x3524f4) { return console['error'](_0x49a2f3(0x39e), _0x3524f4), console[_0x49a2f3(0x208)](_0x49a2f3(0x196), _0x3524f4[_0x49a2f3(0x87e)] || _0x49a2f3(0x915)), null; } } async function _0x101b24() { const _0x35fdaa = _0x1c58bc, _0x352010 = _0x2c45d7['friendCircles'][_0x35fdaa(0x128)](_0x5188f4 => _0x5188f4['id'] === _0x2c45d7[_0x35fdaa(0x6c4)]); if (!_0x352010) return; const _0xb9302e = await _0x17d597(_0x35fdaa(0x701) + _0x352010[_0x35fdaa(0xa6a)] + _0x35fdaa(0xb6f)); _0xb9302e && (_0x352010[_0x35fdaa(0x6c0)] = [], _0x3ac55e(), _0x2d71b3(), _0x18f071('动态已清空。')); } function _0x2d71b3() { const _0x74b43c = _0x1c58bc, _0x479656 = document['getElementById']('music-feed-container'), _0x3a4384 = _0x2c45d7[_0x74b43c(0x554)][_0x74b43c(0x128)](_0x54fc01 => _0x54fc01['id'] === _0x2c45d7['activeFriendCircleId']); if (!_0x3a4384) { _0x479656[_0x74b43c(0x16c)] = _0x74b43c(0xb45); return; } if (!_0x3a4384['posts'] || _0x3a4384[_0x74b43c(0x6c0)]['length'] === 0x0) { if ('ucyQE' !== 'RAvgn') { _0x479656['innerHTML'] = _0x74b43c(0x503); return; } else _0x1e7167[_0x74b43c(0x819)][_0x74b43c(0xbe4)] = ''; } _0x479656[_0x74b43c(0x16c)] = ''; const _0x38710b = [..._0x3a4384['posts']]['sort']((_0x30b7b2, _0xd0feeb) => _0xd0feeb[_0x74b43c(0x782)] - _0x30b7b2['timestamp']); _0x38710b[_0x74b43c(0x4ac)](_0x20425e => { const _0x39268b = _0x74b43c, _0x1f446e = document[_0x39268b(0xa51)](_0x39268b(0x54f)); _0x1f446e[_0x39268b(0xa5e)] = _0x39268b(0x184); let _0x30b9cf = '未知', _0x464594 = _0x72f264; if (_0x20425e[_0x39268b(0x83c)] === _0x39268b(0xa02)) { const _0x52f25a = _0x2a8e18(_0x20425e[_0x39268b(0x989)]); _0x52f25a && (_0x39268b(0x493) === 'dowcU' ? _0x321601 = ![] : (_0x30b9cf = _0x52f25a[_0x39268b(0xa6a)], _0x464594 = _0x52f25a['avatar'])); } else { const _0xc44751 = _0x132ad2(_0x20425e[_0x39268b(0x989)]); _0xc44751 && ('iHaCC' !== _0x39268b(0x41e) ? (_0x30b9cf = _0xc44751[_0x39268b(0xa6a)], _0x464594 = _0xc44751[_0x39268b(0x37b)]) : _0x44bc2b[_0x39268b(0x815)] = _0x5b6e1e[_0x39268b(0x4d3)]); } const _0x524382 = _0x39268b(0x2b6) + _0x464594 + '\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>' + _0x30b9cf + _0x39268b(0x826), _0x4f8c16 = '<p\x20class=\x22music-post-thought\x22>' + _0x20425e[_0x39268b(0xa3a)] + _0x39268b(0xa3c); let _0x3180ef = ''; if (_0x20425e[_0x39268b(0x9b6)] || _0x20425e[_0x39268b(0x709)]) { if ('KIEme' === 'tieaA') { const _0x3c30a0 = _0x233fef['floor'](_0x50a782 / 0x3c); if (_0x3c30a0 < 0x30) _0xfcafc7 += _0x39268b(0x7b3) + _0x3c30a0 + _0x39268b(0x70e); else _0x308c00 += '\x0a-\x20**对话状态**:\x20群里已经有' + _0x3f8d3f[_0x39268b(0x913)](_0x3c30a0 / 0x18) + _0x39268b(0x663); } else { const _0x4fc6ee = 'post-img-' + _0x20425e['id']; _0x3180ef = _0x39268b(0x837) + _0x4fc6ee + '\x22\x20class=\x22post-image\x22></div>', setTimeout(() => { const _0x598f88 = _0x39268b, _0x1cb74c = document[_0x598f88(0xad1)](_0x4fc6ee); if (!_0x1cb74c) return; if (_0x20425e[_0x598f88(0x9b6)]) _0x1cb74c[_0x598f88(0x400)] = _0x20425e[_0x598f88(0x9b6)]; else _0x20425e[_0x598f88(0x709)] && _0x262fce(_0x20425e['imageId'])[_0x598f88(0xa0d)](_0x74cd39 => { const _0x59a076 = _0x598f88; if (_0x74cd39) { if (_0x59a076(0x65a) === 'ZXWvt') { const _0x4866e4 = URL['createObjectURL'](_0x74cd39); _0x1cb74c[_0x59a076(0x400)] = _0x4866e4, _0x1cb74c[_0x59a076(0xb94)] = () => URL[_0x59a076(0xbc5)](_0x4866e4); } else { const { playlist: _0x12fd05, currentIndex: _0x53ccbc } = _0x5f4a86[_0x59a076(0x387)](_0x4cb1e2); _0x46789c[_0x59a076(0x460)](_0x12fd05) && _0x12fd05[_0x59a076(0x1ea)] > 0x0 && _0x53ccbc > -0x1 && (_0x4c7264[_0x59a076(0xa2f)] = _0x12fd05, _0x13b6b1[_0x59a076(0x11d)] = _0x53ccbc, _0xa00bc[_0x59a076(0x9c1)] = ![], _0x4924f2()); } } }); }, 0x0); } } let _0x2b8c8e = ''; _0x20425e[_0x39268b(0x1a7)] === _0x39268b(0xab5) && _0x20425e[_0x39268b(0x6d1)] && (_0x2b8c8e = _0x39268b(0x6e7) + _0x20425e['id'] + _0x39268b(0x333) + (_0x20425e[_0x39268b(0x511)] || _0x72f264) + _0x39268b(0x8c4) + _0x20425e[_0x39268b(0x6d1)] + _0x39268b(0x513) + _0x20425e[_0x39268b(0x50a)] + _0x39268b(0x159) + (_0x20425e['playableUrl'] ? '▶' : '⚠') + _0x39268b(0xb63)); const _0x27486e = _0x39268b(0x858) + new Date(_0x20425e[_0x39268b(0x782)])[_0x39268b(0x2e3)](_0x39268b(0x15b)) + _0x39268b(0x45e); let _0x560ec8 = ''; if (_0x20425e[_0x39268b(0x7de)] && _0x20425e[_0x39268b(0x7de)][_0x39268b(0x1ea)] > 0x0 || _0x20425e[_0x39268b(0x9b1)] && _0x20425e[_0x39268b(0x9b1)][_0x39268b(0x1ea)] > 0x0) { if (_0x39268b(0x23c) === _0x39268b(0x5fa)) _0x2a00b4[_0x39268b(0x6e1)](), _0x3117a9(); else { let _0xa40f95 = ''; if (_0x20425e[_0x39268b(0x7de)] && _0x20425e[_0x39268b(0x7de)]['length'] > 0x0) { const _0x48a610 = _0x20425e[_0x39268b(0x7de)][_0x39268b(0x3c4)](_0x2a5afd => _0x132ad2(_0x2a5afd)?.[_0x39268b(0xa6a)] || '未知')[_0x39268b(0xae6)]('、'), _0x551dc8 = _0x39268b(0x38e); _0xa40f95 = _0x39268b(0x6dc) + _0x551dc8 + '\x20' + _0x48a610 + _0x39268b(0x45e); } let _0x3b274e = ''; if (_0x20425e[_0x39268b(0x9b1)] && _0x20425e[_0x39268b(0x9b1)][_0x39268b(0x1ea)] > 0x0) { const _0x4db2e0 = _0x20425e['comments'][_0x39268b(0x3c4)](_0x359284 => { const _0x13a8cb = _0x39268b; if (_0x13a8cb(0x150) !== _0x13a8cb(0x1e0)) { const _0x7260e6 = _0x132ad2(_0x359284[_0x13a8cb(0x989)])?.['name'] || '未知'; return '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>' + _0x7260e6 + _0x13a8cb(0x1ad) + _0x359284[_0x13a8cb(0xa3a)] + _0x13a8cb(0x45e); } else _0x5c850c[_0x13a8cb(0x905)]('好友圈净化完成，正在重新存档...'), _0x2a1a4e[_0x13a8cb(0x3ae)](_0x13a8cb(0x233), _0x139bd4[_0x13a8cb(0x39b)](_0x5c392a)); })[_0x39268b(0xae6)](''); _0x3b274e = '<div\x20class=\x22post-comments-container\x22>' + _0x4db2e0 + _0x39268b(0x45e); } _0x560ec8 = _0x39268b(0x252) + _0xa40f95 + _0x39268b(0x70b) + _0x3b274e + _0x39268b(0x941); } } const _0x251932 = _0x39268b(0x15a) + _0x4f8c16 + _0x3180ef + _0x2b8c8e + _0x39268b(0x45e); _0x1f446e[_0x39268b(0x16c)] = _0x524382 + _0x251932 + _0x27486e + _0x560ec8; if (_0x20425e[_0x39268b(0x1a7)] === 'music' && _0x20425e[_0x39268b(0x642)]) { if (_0x39268b(0x8b1) === _0x39268b(0x9e7)) _0x47d0d9[_0x39268b(0x819)][_0x39268b(0x838)] = '1'; else { const _0x3c6b07 = _0x1f446e[_0x39268b(0x94b)](_0x39268b(0x862)); if (_0x3c6b07) { if (_0x39268b(0xb22) === _0x39268b(0xb22)) _0x3c6b07['addEventListener'](_0x39268b(0x43a), function () { const _0x43aabd = _0x39268b, _0x30bc88 = { 'id': _0x20425e['id'], 'url': _0x20425e[_0x43aabd(0x642)] }; _0x3e936f(this, _0x30bc88); }); else { const _0xbec35e = _0x31378b(_0x4f8609[0x1]), _0x3b6702 = _0x40456a[0x2]['trim'](), _0x43b800 = _0x3786ff(_0xe81f13['activeChatId']); let _0x398113 = null; if (_0x3b6702 === _0x43b800[_0x39268b(0xa6a)]) _0x398113 = _0x43b800['id']; else { const _0x4908fe = _0x461c1e(); if (_0x4908fe[_0x39268b(0x1a7)] === _0x39268b(0x62a)) { const _0x51c5cf = _0x146067[_0x39268b(0xb76)][_0x39268b(0x128)](_0x237510 => _0x4908fe[_0x39268b(0x402)][_0x39268b(0x7a3)](_0x237510['id']) && _0x237510[_0x39268b(0xa6a)] === _0x3b6702); if (_0x51c5cf) _0x398113 = _0x51c5cf['id']; } } if (_0x398113) return { 'type': 'transfer', 'amount': _0xbec35e, 'recipientId': _0x398113, 'senderId': _0x466d2d['id'] }; else return { 'type': 'text', 'content': _0x39268b(0x4ee) + _0x3b6702 + _0x39268b(0x6f2) }; } } } } _0x479656[_0x39268b(0x8ce)](_0x1f446e); }); } document[_0x1c58bc(0xad1)](_0x1c58bc(0xb8a))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x101b24), document[_0x1c58bc(0xad1)](_0x1c58bc(0xb2b))['addEventListener'](_0x1c58bc(0x43a), _0x5c6505), document[_0x1c58bc(0xad1)](_0x1c58bc(0x25a))['addEventListener'](_0x1c58bc(0x43a), () => _0x512ecd(_0x1c58bc(0x315), _0x1c58bc(0x626))), document[_0x1c58bc(0xad1)](_0x1c58bc(0x8c5))['addEventListener'](_0x1c58bc(0x43a), () => _0x3ec2c2()), document[_0x1c58bc(0xad1)]('back-to-circle-list-from-edit')[_0x1c58bc(0xb66)]('click', () => _0x512ecd(_0x1c58bc(0x626), _0x1c58bc(0xb77))), document[_0x1c58bc(0xad1)](_0x1c58bc(0x203))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x3ee374), document['getElementById']('delete-friend-circle-button')[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x2d3fa9), document[_0x1c58bc(0xad1)](_0x1c58bc(0xa06))[_0x1c58bc(0xb66)]('click', () => { const _0x353889 = _0x1c58bc; _0xff8a9b(), _0x512ecd(_0x353889(0x626), _0x353889(0xab5)); }), document['getElementById'](_0x1c58bc(0x2dd))['addEventListener'](_0x1c58bc(0x43a), () => { const _0x518edf = _0x1c58bc; _0x2c45d7['activeFriendCircleId'] && ('rgzio' === _0x518edf(0x7d7) ? _0x3ec2c2(_0x2c45d7['activeFriendCircleId']) : (_0x20abea(_0x13bb21), _0x151b2e = null)); }), document[_0x1c58bc(0xad1)]('user-send-post-button')[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), async () => { const _0x460658 = _0x1c58bc, _0x113cd8 = _0x2c45d7[_0x460658(0x554)][_0x460658(0x128)](_0x3b326a => _0x3b326a['id'] === _0x2c45d7['activeFriendCircleId']); if (!_0x113cd8 || _0x2c45d7['isGenerating']) return; const _0x3d0e62 = _0x113cd8[_0x460658(0x815)], _0x15f0ff = _0x2c45d7['userProfiles']['find'](_0x282020 => _0x282020['id'] === _0x3d0e62); if (!_0x15f0ff) { if (_0x460658(0x5e7) === 'gkPxB') { _0x18f071('错误：找不到此好友圈绑定的用户！'); return; } else _0x2a9595[_0x460658(0x9b6)] = _0x5ea005; } const _0x3161c7 = document[_0x460658(0xad1)](_0x460658(0x812))['value'][_0x460658(0x471)](), _0x46dfe3 = _0x2c45d7[_0x460658(0x130)]['image'], _0x150907 = _0x2c45d7[_0x460658(0x130)]['music'], _0x39f824 = _0x2c45d7[_0x460658(0x130)]['imageId']; if (!_0x3161c7 && !_0x46dfe3 && !_0x150907) { _0x18f071(_0x460658(0x7c8)); return; } const _0x4e96aa = { 'id': _0x460658(0x39f) + Date[_0x460658(0x7e3)](), 'authorType': 'user', 'authorId': _0x15f0ff['id'], 'content': _0x3161c7, 'timestamp': Date[_0x460658(0x7e3)](), 'likes': [], 'comments': [] }; if (_0x39f824) { if (_0x460658(0xb9b) !== _0x460658(0x856)) _0x4e96aa[_0x460658(0x709)] = _0x39f824; else { const _0x5bbd34 = _0x4d6b35[_0x460658(0x93e)](_0x34d22d, _0x460658(0x2b8)), _0x4eb151 = _0x5bbd34[_0x460658(0x92c)](_0x2f2fd1), _0x522881 = _0x4eb151[_0x460658(0x982)]({ 'id': _0x44afcd, 'data': _0x4cee07 }); _0x522881['onsuccess'] = () => _0x2b2c42(), _0x522881['onerror'] = () => _0x574b2(_0x522881['error']); } } else _0x46dfe3 && (_0x4e96aa[_0x460658(0x9b6)] = _0x46dfe3); _0x150907 ? (_0x4e96aa['type'] = _0x460658(0xab5), Object['assign'](_0x4e96aa, _0x150907)) : _0x4e96aa[_0x460658(0x1a7)] = _0x460658(0x4f1), _0x113cd8[_0x460658(0x6c0)][_0x460658(0xb49)](_0x4e96aa), _0x3ac55e(), _0x2d71b3(), document[_0x460658(0xad1)](_0x460658(0x812))[_0x460658(0x82f)] = '', _0x2c45d7[_0x460658(0x130)][_0x460658(0x9b6)] = null, _0x2c45d7[_0x460658(0x130)][_0x460658(0xab5)] = null, _0x2c45d7[_0x460658(0x130)][_0x460658(0x709)] = null, _0x52b967(), _0xa077a9(_0x4e96aa); }), document['getElementById'](_0x1c58bc(0x7d4))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0xa5736 = _0x1c58bc; document['getElementById'](_0xa5736(0x472))[_0xa5736(0x43a)](); }), document[_0x1c58bc(0xad1)](_0x1c58bc(0x472))[_0x1c58bc(0xb66)](_0x1c58bc(0xad6), async _0xd5b67b => { const _0xad48c0 = _0x1c58bc; if (_0xad48c0(0x648) === 'OaUyu') { const _0x3dd6c4 = _0xd5b67b[_0xad48c0(0xb6a)][_0xad48c0(0xb1f)][0x0]; if (!_0x3dd6c4) return; try { const _0x40932c = await _0x41c1e8(_0x3dd6c4, 0x320, 0.8, !![]), _0x5eee15 = _0xad48c0(0x481) + Date[_0xad48c0(0x7e3)](); await _0x5941fe(_0x5eee15, _0x40932c), _0x2c45d7[_0xad48c0(0x130)][_0xad48c0(0x709)] = _0x5eee15, _0x2c45d7[_0xad48c0(0x130)][_0xad48c0(0x9b6)] = null, _0x2c45d7[_0xad48c0(0x130)][_0xad48c0(0xab5)] = null, _0x52b967(); } catch (_0xb8369) { _0xad48c0(0x694) === _0xad48c0(0x1cd) ? _0x506d40[_0xad48c0(0x819)][_0xad48c0(0x974)] = _0xad48c0(0xb39) : _0x18f071(_0xad48c0(0x29b) + _0xb8369[_0xad48c0(0x80d)]); } _0xd5b67b['target'][_0xad48c0(0x82f)] = ''; } else { const _0x1687de = _0x3e33bc[_0xad48c0(0x813)]('customFeedWallpaper'); _0x1687de ? _0x31fb1[_0xad48c0(0xad1)](_0xad48c0(0x81e))['style']['setProperty'](_0xad48c0(0x338), _0xad48c0(0xbd4) + _0x1687de + ')') : _0x24324b[_0xad48c0(0xad1)](_0xad48c0(0x81e))['style'][_0xad48c0(0x85e)](_0xad48c0(0x338), _0xad48c0(0xb39)); } }), document[_0x1c58bc(0xad1)]('user-post-music-button')[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), async () => { const _0x26d8b3 = _0x1c58bc; if (_0x26d8b3(0x1e4) !== 'bNcPT') { const _0x15239c = await _0x5a23de(); if (!_0x15239c) return; _0x18f071('正在搜索音乐...'); try { if (_0x26d8b3(0x83f) !== _0x26d8b3(0x6eb)) { const _0x4bac2e = await _0x1cbaf1(_0x15239c[_0x26d8b3(0x6d1)], _0x15239c[_0x26d8b3(0x50a)]); _0x2c45d7[_0x26d8b3(0x130)]['music'] = { 'songName': _0x15239c[_0x26d8b3(0x6d1)], 'artist': _0x15239c[_0x26d8b3(0x50a)], 'coverUrl': _0x4bac2e[_0x26d8b3(0x696)], 'playableUrl': _0x4bac2e[_0x26d8b3(0x79c)] }, _0x2c45d7[_0x26d8b3(0x130)][_0x26d8b3(0x9b6)] = null, _0x52b967(); } else _0x5da2e6[_0x26d8b3(0x402)][_0x26d8b3(0x4ac)](_0x5c6e8b => { const _0x3c9fcb = _0x26d8b3, _0x45d529 = _0xb62283(_0x5c6e8b); if (_0x45d529) { const _0x25e530 = _0x3c8bbf[_0x3c9fcb(0xa51)](_0x3c9fcb(0x964)); _0x25e530[_0x3c9fcb(0x82f)] = _0x45d529['id'], _0x25e530['textContent'] = _0x45d529[_0x3c9fcb(0xa6a)], _0x254801[_0x3c9fcb(0x8ce)](_0x25e530); } }), _0x29f8fc[_0x26d8b3(0x819)][_0x26d8b3(0x974)] = _0x26d8b3(0x4e9); } catch (_0x4191a1) { _0x18f071(_0x26d8b3(0x76a) + _0x4191a1[_0x26d8b3(0x80d)]); } } else _0x41afdb[_0x26d8b3(0x819)]['display'] = 'none', _0x4fc4cc['style']['border'] = '2px\x20dashed\x20var(--border-color)'; }); function _0x534d71() { const _0x36ce40 = _0x1c58bc, _0x37480e = new Date(), _0x503ef6 = document[_0x36ce40(0xad1)](_0x36ce40(0x5b8)), _0x518ae6 = document['getElementById'](_0x36ce40(0x1a8)); if (_0x503ef6 && _0x518ae6) { if ('LvYHt' === 'LvYHt') { const _0x2c06cf = String(_0x37480e[_0x36ce40(0x408)]())[_0x36ce40(0x466)](0x2, '0'), _0x1648db = String(_0x37480e[_0x36ce40(0xb70)]())[_0x36ce40(0x466)](0x2, '0'); _0x503ef6['textContent'] = _0x2c06cf + ':' + _0x1648db; const _0x3251c6 = _0x37480e['getMonth']() + 0x1, _0x4b74d5 = _0x37480e[_0x36ce40(0x41f)](), _0x5aa8e0 = [_0x36ce40(0x6c5), _0x36ce40(0x987), _0x36ce40(0x49f), _0x36ce40(0x4a8), _0x36ce40(0x954), '星期五', '星期六'][_0x37480e[_0x36ce40(0xa00)]()]; _0x518ae6[_0x36ce40(0x948)] = _0x3251c6 + '月' + _0x4b74d5 + '日\x20' + _0x5aa8e0; } else _0x4237eb[_0x36ce40(0xb66)](_0x36ce40(0x43a), () => { const _0x504b7e = _0x36ce40; if (_0x36695a['musicPlaylist'][_0x504b7e(0x1ea)] === 0x0) return; _0x162fad[_0x504b7e(0x11d)] = (_0x379947['currentlyPlayingIndex'] - 0x1 + _0x3dce1a['musicPlaylist'][_0x504b7e(0x1ea)]) % _0xae76f['musicPlaylist'][_0x504b7e(0x1ea)]; const _0x478a93 = _0x4af97e[_0x504b7e(0xa2f)][_0xe30fac[_0x504b7e(0x11d)]]['id']; _0x227ce2(_0x478a93, _0x2b4180[_0x504b7e(0xa2f)]['map'](_0x4d6878 => _0x4d6878['id'])); }); } } function _0x15373f(_0x5075ec) { const _0x4f44cc = _0x1c58bc; if (_0x4f44cc(0x63a) !== _0x4f44cc(0x63a)) _0x501dfc[_0x4f44cc(0x889)] = _0x4b4dba[_0x4f44cc(0x291)]; else { if (!_0x5075ec) return ''; const _0x65575 = new Date(_0x5075ec), _0x47eeca = String(_0x65575[_0x4f44cc(0x408)]())[_0x4f44cc(0x466)](0x2, '0'), _0x23cdc4 = String(_0x65575[_0x4f44cc(0xb70)]())[_0x4f44cc(0x466)](0x2, '0'); return _0x47eeca + ':' + _0x23cdc4; } } function _0x345f9c() { const _0x4f5295 = _0x1c58bc, _0x3f17a7 = _0x2c45d7[_0x4f5295(0x554)][_0x4f5295(0x128)](_0x322239 => _0x322239['id'] === _0x2c45d7[_0x4f5295(0x6c4)]), _0xb919b = _0x3f17a7 ? _0x3f17a7[_0x4f5295(0x6c0)] : []; if (!_0xb919b || _0xb919b['length'] === 0x0) { if (_0x4f5295(0x880) !== _0x4f5295(0x880)) _0x53bfb3['log'](_0x4f5295(0x140)), _0x370b60[_0x4f5295(0x4cb)]['abort']('User\x20cancelled'), _0x2b17ad[_0x4f5295(0x4cb)] = null; else return ''; } const _0x313dc3 = _0xb919b[_0x4f5295(0xa30)](0x0, 0x5), _0xd29c21 = _0x313dc3['map'](_0x292705 => { const _0x1f7e0c = _0x4f5295, _0x2dd269 = _0x132ad2(_0x292705[_0x1f7e0c(0x989)]) || { 'name': '未知' }; let _0x5738f4 = '-\x20[动态]\x20' + _0x2dd269[_0x1f7e0c(0xa6a)] + _0x1f7e0c(0x305) + (_0x292705['thought'] || _0x292705['content']) + '”'; return _0x292705[_0x1f7e0c(0x1a7)] === _0x1f7e0c(0xab5) && (_0x5738f4 += _0x1f7e0c(0x45b) + _0x292705[_0x1f7e0c(0x6d1)] + _0x1f7e0c(0x66f) + _0x292705['artist'] + ')'), _0x5738f4; }); return _0x4f5295(0x178) + _0xd29c21[_0x4f5295(0xae6)]('\x0a'); } function _0x20fbaa(_0x4fd359) { const _0x3ddb31 = _0x1c58bc; if (_0x3ddb31(0x3df) !== _0x3ddb31(0x3df)) _0x5594f2 = _0x1281ef[0x1]; else { const _0x278e4a = _0x2c45d7['userProfiles'][_0x3ddb31(0x128)](_0x46842f => _0x46842f['id'] === _0x2c45d7['activeUserProfileId']) || { 'name': '你' }, _0x1e1f94 = _0x2c45d7[_0x3ddb31(0x8b2)][_0x3ddb31(0x128)](_0x3747ad => _0x3747ad[_0x3ddb31(0x57a)] === _0x4fd359); if (!_0x1e1f94 || !_0x1e1f94[_0x3ddb31(0x758)] || _0x1e1f94[_0x3ddb31(0x758)][_0x3ddb31(0x1ea)] === 0x0) return ''; const _0x2e2e1b = _0x1e1f94['entries']['slice'](-0x8), _0x52b565 = _0x2e2e1b['map'](_0x42bf4a => { const _0x35ebb4 = _0x3ddb31, _0x56ad83 = _0x42bf4a[_0x35ebb4(0x7e5)] === _0x35ebb4(0xa02) ? _0x278e4a[_0x35ebb4(0xa6a)] : _0x132ad2(_0x42bf4a[_0x35ebb4(0x7e5)])[_0x35ebb4(0xa6a)]; return _0x35ebb4(0x617) + new Date(_0x42bf4a['timestamp'])[_0x35ebb4(0x8a2)]() + ']\x20' + _0x56ad83 + _0x35ebb4(0x242) + _0x42bf4a[_0x35ebb4(0xa3a)]; })[_0x3ddb31(0xae6)]('\x0a'); return _0x3ddb31(0x57b) + _0x278e4a[_0x3ddb31(0xa6a)] + _0x3ddb31(0x5f5) + _0x52b565; } } function _0x32ba25() { const _0x3cb913 = _0x1c58bc, _0x25b912 = document[_0x3cb913(0xad1)](_0x3cb913(0xac9)), _0x230c6a = _0x2c45d7[_0x3cb913(0x8cd)][_0x3cb913(0x6a1)]; if (_0x230c6a) { if (_0x3cb913(0x517) !== _0x3cb913(0x2cc)) _0x25b912[_0x3cb913(0x819)][_0x3cb913(0xbe4)] = 'url(' + _0x230c6a + ')', _0x25b912[_0x3cb913(0x819)][_0x3cb913(0x45f)] = _0x3cb913(0x696), _0x25b912['style'][_0x3cb913(0xba5)] = 'center', _0x25b912[_0x3cb913(0x819)][_0x3cb913(0x979)] = _0x3cb913(0x7a8), _0x25b912['querySelectorAll'](_0x3cb913(0x9c0))['forEach'](_0x2f6c0c => { const _0x31a14f = _0x3cb913; _0x2f6c0c['style'][_0x31a14f(0x29e)] = '0\x201px\x203px\x20rgba(0,0,0,0.6)'; }); else { if (_0x12b366) _0x1a032f['style'][_0x3cb913(0xbe4)] = 'url(\x27' + _0x22eec5[_0x3cb913(0x97d)](_0x459e51) + '\x27)'; } } else _0x25b912[_0x3cb913(0x819)][_0x3cb913(0xbe4)] = '', _0x25b912[_0x3cb913(0x819)][_0x3cb913(0x979)] = '', _0x25b912[_0x3cb913(0x61a)](_0x3cb913(0x9c0))[_0x3cb913(0x4ac)](_0x1cf543 => { const _0x255f5b = _0x3cb913; _0x1cf543[_0x255f5b(0x819)][_0x255f5b(0x29e)] = ''; }); } const _0x3b409f = document[_0x1c58bc(0xad1)]('app-music'), _0x44ff78 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x4ea)); _0x3b409f[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x1bf733 = _0x1c58bc; _0xff8a9b(), _0x512ecd(_0x1bf733(0x626), _0x1bf733(0x315)); }), _0x44ff78['addEventListener'](_0x1c58bc(0x43a), () => { const _0x5b5dfa = _0x1c58bc; _0x5b5dfa(0x63b) === _0x5b5dfa(0x63b) ? (_0x42a1c8(), _0x512ecd('meetingList', _0x5b5dfa(0x315))) : _0x3db202[_0x5b5dfa(0xad1)](_0x5b5dfa(0x11c))['click'](); }), document[_0x1c58bc(0xad1)](_0x1c58bc(0x465))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x3d48df = _0x1c58bc; _0x512ecd(_0x3d48df(0x315), _0x3d48df(0x227)); }), document['getElementById'](_0x1c58bc(0x894))['addEventListener'](_0x1c58bc(0x43a), () => { const _0x181ca6 = _0x1c58bc; if (_0x49c006) clearInterval(_0x49c006); _0x49c006 = null, _0x2c45d7[_0x181ca6(0x170)] = [], _0x2c45d7[_0x181ca6(0x975)] = null, document['getElementById']('galgame-sprite-adjust-ui')[_0x181ca6(0x819)]['display'] = _0x181ca6(0xb39), _0x2c45d7[_0x181ca6(0x147)] = null, _0x3ac55e(), _0x512ecd(_0x181ca6(0x227), _0x181ca6(0xa83)); }); const _0x3113f5 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x6ff)), _0x2a827f = document[_0x1c58bc(0xad1)]('meeting-send-button'); _0x2a827f[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0xda93b3 = _0x1c58bc; if ('Tafni' === _0xda93b3(0x355)) { const _0x513fe8 = _0x802ca7[_0xda93b3(0xb6a)][_0xda93b3(0x2d1)]['categoryId'], _0x5b8161 = _0x1c979f[_0xda93b3(0xb6a)][_0xda93b3(0x5d8)]; _0x3e1ef3[_0xda93b3(0x61a)](_0xda93b3(0x2ab) + _0x513fe8 + '\x22]')['forEach'](_0x527fcf => { const _0x13b891 = _0xda93b3; _0x527fcf[_0x13b891(0x5d8)] = _0x5b8161; }), _0x17aa95(); } else { const _0x5a0274 = _0x3113f5[_0xda93b3(0x82f)][_0xda93b3(0x471)](); _0x5a0274 && (_0xb57871(_0x5a0274), _0x3113f5[_0xda93b3(0x82f)] = '', setTimeout(_0x4ce144, 0x64)); } }); function _0x3e936f(_0x1625bf, _0x4748d1) { const _0x57cab6 = _0x1c58bc; if (_0x57cab6(0x3c2) === 'Hlnky') { const _0x39f34a = document['getElementById'](_0x57cab6(0x7ec)), _0x4e1ef8 = _0x2c45d7[_0x57cab6(0xa2f)][_0x57cab6(0x128)](_0x578908 => _0x578908['id'] === _0x4748d1['id']); if (!_0x4e1ef8) { if ('BLXHh' !== _0x57cab6(0x2da)) { console[_0x57cab6(0x208)](_0x57cab6(0x13a), _0x4748d1['id']); return; } else { _0x1c1295(![]), _0x5d39d8(_0x57cab6(0xa95)); return; } } const _0x54e46b = _0x39f34a[_0x57cab6(0x400)][_0x57cab6(0x7a3)](_0x4e1ef8[_0x57cab6(0x642)]) && !_0x39f34a[_0x57cab6(0x24b)]; if (_0x54e46b) _0x39f34a[_0x57cab6(0x37d)](); else { if (_0x57cab6(0x1d4) === 'UBlEj') { if (!_0x918f06 || !_0x4b6c6d[_0x57cab6(0x147)]) return; const _0x4d674f = { 'role': _0x57cab6(0xa02), 'content': '[用户发送了表情：' + _0x23bb8a[_0x57cab6(0xa6a)] + ']', 'displayUrl': _0x15dd58[_0x57cab6(0x79c)], 'timestamp': _0x17806c[_0x57cab6(0x7e3)]() }; _0x594ae7[_0x57cab6(0x1ef)][_0x57cab6(0xb49)](_0x4d674f), _0x3987b7(_0x4d674f, _0x529705['conversationHistory']['length'] - 0x1), _0x53bbdd(), _0xd61010[_0x57cab6(0x9c4)][_0x57cab6(0x6e1)]('show'); } else _0x17fbb7 = { 'title': _0x4e1ef8[_0x57cab6(0x6d1)], 'artist': _0x4e1ef8[_0x57cab6(0x50a)], 'cover': _0x4e1ef8[_0x57cab6(0x511)] || (_0x4e1ef8[_0x57cab6(0x6b1)] ? _0x57cab6(0xba4) + _0x4e1ef8[_0x57cab6(0x6b1)] : _0x72f264), 'isFromLibrary': !![] }, _0x39f34a[_0x57cab6(0x400)] = _0x4e1ef8[_0x57cab6(0x642)], _0x39f34a[_0x57cab6(0xbc9)](), _0x2c45d7[_0x57cab6(0x11d)] = _0x2c45d7['musicPlaylist']['findIndex'](_0x32a9bd => _0x32a9bd['id'] === _0x4748d1['id']), _0x2be83d(); } } else _0x1c9f68(_0x413e3c['value']), _0x38d3d9(); } const _0x23e7cd = document['getElementById'](_0x1c58bc(0x9d3)); async function _0x5750aa(_0x3780b3) { const _0x323d16 = _0x1c58bc; if (!_0x3780b3 || !_0x3780b3[_0x323d16(0xbdd)]('http')) return ![]; return new Promise(_0x2c9383 => { const _0x29fafc = _0x323d16; if ('eMvHb' === _0x29fafc(0x646)) _0x22f6d0(_0x337909['id']); else { const _0x44a2ae = document[_0x29fafc(0xa51)]('audio'); _0x44a2ae[_0x29fafc(0x400)] = _0x3780b3; const _0x63403b = setTimeout(() => { _0x4812c0(), _0x2c9383(![]); }, 0xbb8), _0x4812c0 = () => { const _0x96a065 = _0x29fafc; clearTimeout(_0x63403b), _0x44a2ae[_0x96a065(0x57f)](_0x96a065(0xa2b), _0x5a900c), _0x44a2ae[_0x96a065(0x57f)](_0x96a065(0x208), _0xa672a9), _0x44a2ae[_0x96a065(0x400)] = '', _0x44a2ae[_0x96a065(0x6e1)](); }, _0x5a900c = () => { _0x4812c0(), _0x2c9383(!![]); }, _0xa672a9 = () => { _0x4812c0(), _0x2c9383(![]); }; _0x44a2ae[_0x29fafc(0xb66)]('canplaythrough', _0x5a900c), _0x44a2ae[_0x29fafc(0xb66)]('error', _0xa672a9); } }); } async function _0x1cbaf1(_0x234fb7, _0x5b9be9) { const _0x5adac8 = _0x1c58bc, _0x31c943 = [_0x5adac8(0x2c3), _0x5adac8(0x4c1)]; for (const _0x2761b8 of _0x31c943) { try { if (_0x5adac8(0x9a0) === _0x5adac8(0x9a0)) { const _0x217f53 = _0x5adac8(0x6a8) + _0x2761b8 + _0x5adac8(0x515) + encodeURIComponent(_0x234fb7) + '-' + encodeURIComponent(_0x5b9be9), _0x2db3f3 = await fetch(_0x217f53), _0x581f9d = await _0x2db3f3['json'](); if (_0x581f9d[_0x5adac8(0xafb)] !== 0xc8 || !_0x581f9d[_0x5adac8(0x228)] || _0x581f9d[_0x5adac8(0x228)][_0x5adac8(0x1ea)] === 0x0) continue; const _0x40c421 = _0x581f9d[_0x5adac8(0x228)][_0x5adac8(0xa30)](0x0, 0x5); for (const _0x2dbace of _0x40c421) { const _0x903a0c = _0x5adac8(0x6a8) + _0x2761b8 + '?id=' + _0x2dbace['id'], _0x357afa = await fetch(_0x903a0c), _0x3cfc10 = await _0x357afa[_0x5adac8(0x34d)](), _0x2f1d81 = _0x3cfc10['data']?.[_0x5adac8(0x79c)]; if (await _0x5750aa(_0x2f1d81)) return { 'url': _0x2f1d81, 'cover': _0x2dbace[_0x5adac8(0x696)], 'source': _0x2761b8 }; } } else { _0x86c78e(_0x5adac8(0x74a), _0x5adac8(0x330)); const _0x5d3f7e = _0x44f9c4[_0x5adac8(0xad1)](_0x5adac8(0x462)); _0x5d3f7e['innerHTML'] = '', _0x5e660f['worldBookCategories'][_0x5adac8(0x4ac)](_0x5c8c6e => { const _0x3744d7 = _0x5adac8, _0x2ea7e0 = _0x3ad0ec[_0x3744d7(0xa51)](_0x3744d7(0x964)); _0x2ea7e0[_0x3744d7(0x82f)] = _0x5c8c6e['id'], _0x2ea7e0[_0x3744d7(0x948)] = _0x5c8c6e[_0x3744d7(0xa6a)], _0x5d3f7e['appendChild'](_0x2ea7e0); }); if (_0x28a8a9) { const _0x298dad = _0x38dc36['worldBooks'][_0x5adac8(0x128)](_0x5ab30e => _0x5ab30e['id'] === _0x342fe3); if (!_0x298dad) return; _0x577624['getElementById'](_0x5adac8(0xb62))[_0x5adac8(0x82f)] = _0x298dad['id'], _0x2ba431['getElementById'](_0x5adac8(0x489))['textContent'] = _0x5adac8(0x266), _0x5cdb18[_0x5adac8(0xad1)](_0x5adac8(0xb7c))[_0x5adac8(0x82f)] = _0x298dad[_0x5adac8(0xa6a)], _0x1591f5['getElementById'](_0x5adac8(0xad4))[_0x5adac8(0x82f)] = _0x298dad[_0x5adac8(0xa3a)], _0x5d3f7e[_0x5adac8(0x82f)] = _0x298dad[_0x5adac8(0x9ba)] || _0x5adac8(0x135); } else _0x223dc3[_0x5adac8(0xad1)]('editing-world-book-id')[_0x5adac8(0x82f)] = '', _0x21a417[_0x5adac8(0xad1)](_0x5adac8(0x489))[_0x5adac8(0x948)] = _0x5adac8(0x4a9), _0x1bf727[_0x5adac8(0xad1)](_0x5adac8(0xb7c))[_0x5adac8(0x82f)] = '', _0x3729d3[_0x5adac8(0xad1)](_0x5adac8(0xad4))[_0x5adac8(0x82f)] = '', _0x5d3f7e[_0x5adac8(0x82f)] = _0x369460['activeWorldBookCategoryId']; } } catch (_0x651382) { console[_0x5adac8(0x208)]('Error\x20fetching\x20from\x20' + _0x2761b8 + ':', _0x651382); } } return { 'url': null, 'cover': null, 'source': null }; } function _0x112bc7() { const _0x3aed9e = _0x1c58bc; if (_0x3aed9e(0x188) !== 'YQDOc') { const _0xdaff84 = document[_0x3aed9e(0xad1)](_0x3aed9e(0x4f0)), _0x5d468d = document[_0x3aed9e(0x169)], _0x141513 = document[_0x3aed9e(0xad1)](_0x3aed9e(0xb1e)); if (!_0xdaff84 || !_0x141513) return; const _0x240b79 = localStorage[_0x3aed9e(0x813)](_0x3aed9e(0x3b4)) || '1'; _0x5d468d[_0x3aed9e(0x819)]['setProperty']('--desktop-item-scale', _0x240b79), _0xdaff84[_0x3aed9e(0x82f)] = _0x240b79, _0xdaff84[_0x3aed9e(0xb66)](_0x3aed9e(0x329), () => { const _0x526a91 = _0x3aed9e, _0x50cbe1 = _0xdaff84['value']; _0x5d468d[_0x526a91(0x819)][_0x526a91(0x85e)]('--desktop-item-scale', _0x50cbe1), localStorage[_0x526a91(0x3ae)](_0x526a91(0x3b4), _0x50cbe1); }), _0x141513['addEventListener'](_0x3aed9e(0x43a), () => { const _0x457e23 = _0x3aed9e; if ('bhlQU' === _0x457e23(0x204)) _0x435c87['style']['textShadow'] = _0x457e23(0x607); else { const _0x4eb23b = '1'; _0xdaff84[_0x457e23(0x82f)] = _0x4eb23b, _0x5d468d['style']['setProperty'](_0x457e23(0x55d), _0x4eb23b), localStorage[_0x457e23(0x3ae)](_0x457e23(0x3b4), _0x4eb23b); } }); } else _0x5c76da[_0x3aed9e(0x37d)](), _0x215732[_0x3aed9e(0x948)] = '▶'; } function _0x5bb9a4(_0x1eb64f) { const _0x180a99 = _0x1c58bc; try { if (_0x180a99(0x2a0) !== 'iALsF') { const _0x508e97 = _0xb2b0fd[_0x180a99(0x32d)] === _0x180a99(0x2cd), _0x454001 = _0x508e97 ? _0x5de257 ? _0x1e4868[0x0] : '?' : _0x23696b ? _0x229f97[0x0] : '?'; _0x5b93a3 += _0x180a99(0x64c) + (_0x508e97 ? _0x180a99(0xa02) : 'ai') + _0x180a99(0x287) + (!_0x508e97 ? '<div\x20class=\x22snoop-avatar\x22>' + _0x454001 + _0x180a99(0x45e) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20' + (_0x508e97 ? _0x180a99(0xa02) : 'ai') + '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>' + _0x419f25[_0x180a99(0xa3a)] + _0x180a99(0x47d) + (_0x508e97 ? _0x180a99(0x470) + _0x454001 + _0x180a99(0x45e) : '') + _0x180a99(0x2b2); } else { const _0x5a1391 = JSON[_0x180a99(0x387)](localStorage['getItem'](_0x180a99(0x4f6)) || '{}'), _0x367b2d = { ..._0x5a1391, ..._0x1eb64f }; localStorage[_0x180a99(0x3ae)](_0x180a99(0x4f6), JSON[_0x180a99(0x39b)](_0x367b2d)); } } catch (_0x4abf68) { if (_0x180a99(0x15e) !== _0x180a99(0x15e)) { const _0x574b84 = _0x526155['match'](_0x338cc8); if (_0x574b84) { const _0x4b3ca7 = _0x3ae5c9(_0x574b84[0x1], 0xa), _0x3a6cca = _0x539f29(_0x574b84[0x2], 0xa), _0x234353 = _0x244445(_0x574b84[0x3], 0xa) * (_0x574b84[0x3][_0x180a99(0x1ea)] === 0x2 ? 0xa : 0x1), _0x5ac6dc = _0x4b3ca7 * 0x3c + _0x3a6cca + _0x234353 / 0x3e8, _0x15c20b = _0xe7aa43[_0x180a99(0x4db)](_0x3b6ba0, '')[_0x180a99(0x471)](); _0x15c20b && _0x3ac9a6['push']({ 'time': _0x5ac6dc, 'text': _0x15c20b }); } } else console[_0x180a99(0x208)](_0x180a99(0x9d7), _0x4abf68); } } async function _0x1d345f() { const _0x3e2bea = _0x1c58bc; if (_0x3e2bea(0x644) === _0x3e2bea(0x8b4)) return _0x52e27c[_0x3e2bea(0x905)](_0x3e2bea(0x2fd)), 0x0; else { const _0x490518 = document[_0x3e2bea(0xad1)]('decorative-badge'), _0x5f470f = document[_0x3e2bea(0xad1)](_0x3e2bea(0x996)); try { let _0x47842c = await _0x262fce(_0x3e2bea(0x68d)); if (!_0x47842c) { const _0x519164 = JSON[_0x3e2bea(0x387)](localStorage[_0x3e2bea(0x813)](_0x3e2bea(0x4f6)) || '{}'); _0x519164[_0x3e2bea(0x9b6)] && (_0x47842c = await _0x100b4b(_0x519164[_0x3e2bea(0x9b6)]), await _0x5941fe(_0x3e2bea(0x68d), _0x47842c)); } _0x47842c ? _0x3e2bea(0x1b5) !== 'roEDH' ? _0x268f51[_0x3e2bea(0xb66)]('click', () => { const _0x291ceb = _0x3e2bea, _0x55c6a3 = _0x149189[_0x291ceb(0x387)](_0x29ec71['dataset'][_0x291ceb(0x905)][_0x291ceb(0x4db)](/&quot;/g, '\x22')), _0x9dda2c = _0x2d6ee7['dataset']['contactName'], _0x2dff81 = _0x5cf2e1[_0x291ceb(0x2d1)]['characterName']; _0x1639e7(_0x9dda2c, _0x2dff81, _0x55c6a3); }) : (_0x5f470f[_0x3e2bea(0x400)] = URL['createObjectURL'](_0x47842c), _0x5f470f['style']['display'] = _0x3e2bea(0x4e9), _0x490518[_0x3e2bea(0x819)][_0x3e2bea(0x8a4)] = 'none') : (_0x5f470f['style'][_0x3e2bea(0x974)] = _0x3e2bea(0xb39), _0x490518[_0x3e2bea(0x819)][_0x3e2bea(0x8a4)] = _0x3e2bea(0x33e)), _0x490518['style']['display'] = _0x3e2bea(0x4e9); } catch (_0xc2ebec) { console['error'](_0x3e2bea(0xa66), _0xc2ebec); } } } async function _0x2876e3() { const _0xdfc43e = _0x1c58bc; if (_0xdfc43e(0xbaf) === _0xdfc43e(0x342)) _0x16480a[_0xdfc43e(0xbc9)](); else { const _0x2c5463 = document[_0xdfc43e(0xad1)](_0xdfc43e(0x7ff)), _0x5b9ee0 = document[_0xdfc43e(0xad1)](_0xdfc43e(0x4c7)), _0x5e4699 = document['getElementById'](_0xdfc43e(0x7d5)), _0x59a812 = document[_0xdfc43e(0xad1)](_0xdfc43e(0xaa8)); try { if ('sQFEk' !== _0xdfc43e(0x682)) { let _0x28b1e2 = await _0x262fce(_0xdfc43e(0xb19)); _0x28b1e2 ? _0xdfc43e(0xa05) !== 'qngxe' ? (_0x494ca6['textContent'] = _0x24288e[_0xdfc43e(0x616)], _0x353945[_0xdfc43e(0x948)] = _0x39b853[_0xdfc43e(0x50a)], _0x10b300[_0xdfc43e(0x9c4)]['add']('is-playing'), _0x114d4f[_0xdfc43e(0x819)][_0xdfc43e(0x85e)]('--widget-cover-image', _0xdfc43e(0xbd4) + _0x330230[_0xdfc43e(0x696)] + ')')) : (_0x5b9ee0[_0xdfc43e(0x400)] = URL['createObjectURL'](_0x28b1e2), _0x5b9ee0[_0xdfc43e(0x819)][_0xdfc43e(0x974)] = _0xdfc43e(0x4e9), _0x2c5463['style'][_0xdfc43e(0x8a4)] = _0xdfc43e(0xb39), _0x2c5463[_0xdfc43e(0x819)][_0xdfc43e(0x26d)] = 'transparent') : 'LjbxI' !== 'LjbxI' ? (_0x34b3af['log'](_0xdfc43e(0x7c6) + _0x559976), _0x44b253[_0xdfc43e(0xa71)](_0xf1c8ff, { 'keyPath': 'id' })) : (_0x5b9ee0[_0xdfc43e(0x819)][_0xdfc43e(0x974)] = 'none', _0x2c5463['style'][_0xdfc43e(0x8a4)] = _0xdfc43e(0x33e), _0x2c5463[_0xdfc43e(0x819)][_0xdfc43e(0x26d)] = 'rgba(255,255,255,0.2)'); _0x2c5463[_0xdfc43e(0x819)][_0xdfc43e(0x974)] = _0xdfc43e(0x4e9); let _0x53e112 = await _0x262fce(_0xdfc43e(0xaa0)); _0x53e112 ? (_0x59a812[_0xdfc43e(0x400)] = URL[_0xdfc43e(0x97d)](_0x53e112), _0x59a812['style']['display'] = 'block', _0x5e4699[_0xdfc43e(0x819)][_0xdfc43e(0x8a4)] = 'none', _0x5e4699['style'][_0xdfc43e(0x26d)] = 'transparent') : 'TaDXE' !== _0xdfc43e(0x48b) ? (_0x59a812[_0xdfc43e(0x819)][_0xdfc43e(0x974)] = _0xdfc43e(0xb39), _0x5e4699[_0xdfc43e(0x819)][_0xdfc43e(0x8a4)] = _0xdfc43e(0x33e), _0x5e4699[_0xdfc43e(0x819)]['background'] = 'rgba(255,255,255,0.2)') : _0x43f814[_0xdfc43e(0x8be)] = !![], _0x5e4699[_0xdfc43e(0x819)]['display'] = _0xdfc43e(0x4e9); } else { const _0x27cb44 = _0x3d0f60['createElement']('div'); _0x27cb44[_0xdfc43e(0xa5e)] = _0xdfc43e(0x394), _0x27cb44[_0xdfc43e(0x16c)] = _0xdfc43e(0x714) + _0x28ce5a['id'] + '\x22\x20data-id=\x22' + _0x1f53bb['id'] + '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0xf9598[_0xdfc43e(0x37b)] || _0x284d28) + _0xdfc43e(0x4f7) + _0x133608['id'] + _0xdfc43e(0x685) + _0x2c942a[_0xdfc43e(0xa6a)] + '</label>\x0a\x20\x20\x20\x20', _0x2c9d95[_0xdfc43e(0x8ce)](_0x27cb44); } } catch (_0xc7ff13) { console[_0xdfc43e(0x208)]('加载卡片图片失败', _0xc7ff13); } } } async function _0x2876e3() { const _0x2815c6 = _0x1c58bc, _0x84e1ab = document[_0x2815c6(0xad1)](_0x2815c6(0x7ff)), _0x41b935 = document[_0x2815c6(0xad1)](_0x2815c6(0x4c7)); try { if ('IFgBV' === _0x2815c6(0x928)) { _0x330a8d['error']('加载\x20' + _0xb4d18a + _0x2815c6(0x59e), _0x391d78); const _0x5e01a0 = _0x2c364e(_0x29d538), _0x5530d3 = _0x2815c6(0xb20) + _0x5e01a0[_0x2815c6(0xa6a)] + '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20</div>'; let _0x2e8b2a = _0x2815c6(0x205) + _0x95ab23['message'] + _0x2815c6(0x9e9); _0x219dfb && (_0x2e8b2a += '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x200\x2015px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>下面就是那个笨蛋AI返回的原始“梦话”，你自己看看吧：</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-all;\x20background:\x20#f0f0f0;\x20padding:\x2010px;\x20border-radius:\x205px;\x20color:\x20#333;\x20max-height:\x20400px;\x20overflow-y:\x20auto;\x22>' + _0x485c82(_0x4bb7d1) + _0x2815c6(0x356)), _0x47fbdc[_0x2815c6(0x16c)] = _0x5530d3 + (_0x2815c6(0x577) + _0x2e8b2a + _0x2815c6(0x45e)), _0x1cea61[_0x2815c6(0xad1)]('snoop-app-back-btn')[_0x2815c6(0xb66)]('click', () => { const _0xffb8b3 = _0x2815c6; _0x4ea03e[_0xffb8b3(0x819)]['display'] = 'none', _0x34417c[_0xffb8b3(0xad1)](_0xffb8b3(0x381))[_0xffb8b3(0x819)]['display'] = _0xffb8b3(0x9e5); }); } else { let _0x43267c = await _0x262fce(_0x2815c6(0xb19)); if (!_0x43267c) { if (_0x2815c6(0x454) !== _0x2815c6(0x454)) _0x555a01 = _0x4f0673, _0x592015['classList'][_0x2815c6(0x2ac)]('show'); else { const _0x309ca9 = JSON[_0x2815c6(0x387)](localStorage['getItem'](_0x2815c6(0x8fd)) || '{}'); if (_0x309ca9['image']) { if (_0x2815c6(0x43c) === _0x2815c6(0x43c)) console['log'](_0x2815c6(0x175)), _0x43267c = await _0x100b4b(_0x309ca9[_0x2815c6(0x9b6)]), await _0x5941fe(_0x2815c6(0xb19), _0x43267c); else { const _0x2bcabf = 'chat_char_' + _0x129434['now'](); _0x220caf(_0x2bcabf), _0xcb4827(!![]); } } } } _0x43267c ? (_0x41b935['src'] = URL['createObjectURL'](_0x43267c), _0x84e1ab[_0x2815c6(0x819)]['display'] = _0x2815c6(0x4e9)) : _0x84e1ab[_0x2815c6(0x819)][_0x2815c6(0x974)] = _0x2815c6(0xb39); } } catch (_0x2c687e) { _0x2815c6(0x475) === _0x2815c6(0x475) ? console[_0x2815c6(0x208)](_0x2815c6(0xb65), _0x2c687e) : (_0x2fd161[_0x2815c6(0x819)][_0x2815c6(0x974)] = 'block', _0x2036f8[_0x2815c6(0x819)][_0x2815c6(0x974)] = _0x2815c6(0xb39), _0x1e1af0(() => { const _0xb4432 = _0x2815c6, _0xa3d355 = _0x245227[_0xb4432(0x94b)](_0xb4432(0x723)); _0xa3d355 ? _0xa3d355[_0xb4432(0x2e6)]({ 'behavior': _0xb4432(0xb4d), 'block': 'end' }) : _0x26cb96[_0xb4432(0x889)] = _0x48e2c4[_0xb4432(0x291)]; }, 0x32)); } try { if ('cLOcS' !== 'bAKNw') { let _0x2c0f27 = await _0x262fce(_0x2815c6(0xaa0)); const _0x2c1b2f = document[_0x2815c6(0xad1)](_0x2815c6(0xaa8)), _0xb947a1 = document['getElementById']('card-widget-2'); _0x2c0f27 ? (_0x2c1b2f[_0x2815c6(0x400)] = URL[_0x2815c6(0x97d)](_0x2c0f27), _0xb947a1[_0x2815c6(0x819)][_0x2815c6(0x974)] = _0x2815c6(0x4e9)) : _0xb947a1['style'][_0x2815c6(0x974)] = 'none'; } else _0x44a203[_0x2815c6(0x208)](_0x2815c6(0x8e6)); } catch (_0x19b04d) { console['error'](_0x2815c6(0x4bd), _0x19b04d); } } _0x5d02e8['addEventListener'](_0x1c58bc(0x43a), () => { const _0x297d69 = _0x1c58bc; _0x2ee35c(), _0x512ecd(_0x297d69(0xbaa), 'home'); }), document[_0x1c58bc(0xad1)](_0x1c58bc(0x909))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x512ecd(_0x1c58bc(0x315), _0x1c58bc(0xbaa))), document[_0x1c58bc(0xad1)](_0x1c58bc(0x911))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x441493()), document[_0x1c58bc(0xad1)](_0x1c58bc(0x962))['addEventListener'](_0x1c58bc(0x43a), () => { const _0xb0a8c5 = _0x1c58bc; _0x2ee35c(), _0x512ecd(_0xb0a8c5(0xbaa), _0xb0a8c5(0x201)); }), document[_0x1c58bc(0xad1)](_0x1c58bc(0x180))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x5cf3e9), document['getElementById'](_0x1c58bc(0x54c))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x43bb6e), document['getElementById'](_0x1c58bc(0x6a4))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x14d81e = _0x1c58bc; if (_0x14d81e(0x565) === _0x14d81e(0x20f)) { const _0x695157 = _0x24f6f8[_0x14d81e(0x775)][_0x14d81e(0x128)](_0x10d922 => _0x10d922['id'] === _0x4b1d56[_0x14d81e(0x4d3)]) || { 'name': '你' }, _0x2871ff = _0x25b85b[_0x14d81e(0x8b2)][_0x14d81e(0x128)](_0x1cb676 => _0x1cb676[_0x14d81e(0x57a)] === _0x54c305); if (!_0x2871ff || !_0x2871ff['entries'] || _0x2871ff[_0x14d81e(0x758)][_0x14d81e(0x1ea)] === 0x0) return ''; const _0x453f40 = _0x2871ff[_0x14d81e(0x758)][_0x14d81e(0xa30)](-0x8), _0x2c9962 = _0x453f40[_0x14d81e(0x3c4)](_0x456688 => { const _0x499237 = _0x14d81e, _0x2e1536 = _0x456688[_0x499237(0x7e5)] === _0x499237(0xa02) ? _0x695157[_0x499237(0xa6a)] : _0xc27946(_0x456688['author'])[_0x499237(0xa6a)]; return _0x499237(0x617) + new _0x31a340(_0x456688[_0x499237(0x782)])['toLocaleDateString']() + ']\x20' + _0x2e1536 + '\x20写道:\x20' + _0x456688[_0x499237(0xa3a)]; })[_0x14d81e(0xae6)]('\x0a'); return _0x14d81e(0x57b) + _0x695157[_0x14d81e(0xa6a)] + '\x20之间的私密内容)\x0a' + _0x2c9962; } else { const _0x2686d8 = document[_0x14d81e(0xad1)](_0x14d81e(0x9da))[_0x14d81e(0x82f)]; _0x2686d8 && (_0x2c45d7[_0x14d81e(0x4d3)] = _0x2686d8, _0x3ac55e(), _0x18f071('已设为当前用户！'), _0x2ee35c(), document[_0x14d81e(0xad1)](_0x14d81e(0x6a4))[_0x14d81e(0x819)][_0x14d81e(0x974)] = _0x14d81e(0xb39)); } }); function _0x16e371(_0x93e8b8) { const _0x348654 = _0x1c58bc, _0x42d659 = _0x2c45d7[_0x348654(0x75e)][_0x348654(0x128)](_0x34f74f => _0x34f74f['id'] === _0x93e8b8), _0x3f4863 = _0x42d659?.[_0x348654(0x815)]; let _0x5a5ea8 = _0x2c45d7[_0x348654(0x775)]['find'](_0x47885c => _0x47885c['id'] === _0x3f4863); return !_0x5a5ea8 && (_0x348654(0x86a) !== 'fYlcJ' ? _0x5a85fe = _0x1cb1cc[_0x348654(0x82f)] : _0x5a5ea8 = _0x2c45d7[_0x348654(0x775)]['find'](_0x3e0b14 => _0x3e0b14['id'] === _0x2c45d7[_0x348654(0x4d3)]) || _0x2c45d7[_0x348654(0x775)][0x0]), _0x5a5ea8 || { 'name': '用户', 'avatar': _0x5d9858, 'persona': '' }; } function _0x2c0967(_0x29d5a5) { const _0x3fd3e3 = _0x1c58bc; if ('CuIbx' !== _0x3fd3e3(0x323)) { const _0x14956b = _0x40bdb3(_0x5f2253[_0x3fd3e3(0x989)])?.[_0x3fd3e3(0xa6a)] || '未知'; return _0x3fd3e3(0x42c) + _0x14956b + _0x3fd3e3(0x1ad) + _0x3cb25a[_0x3fd3e3(0xa3a)] + _0x3fd3e3(0x45e); } else { const _0x2814af = document[_0x3fd3e3(0xad1)](_0x29d5a5); _0x2814af[_0x3fd3e3(0x16c)] = '', _0x2c45d7[_0x3fd3e3(0x775)][_0x3fd3e3(0x4ac)](_0x58aaaa => { const _0x22b4c0 = _0x3fd3e3; if ('qIqaK' === _0x22b4c0(0xa73)) { const _0x5c80d0 = document[_0x22b4c0(0xa51)](_0x22b4c0(0x964)); _0x5c80d0[_0x22b4c0(0x82f)] = _0x58aaaa['id'], _0x5c80d0[_0x22b4c0(0x948)] = _0x58aaaa['name'], _0x2814af['appendChild'](_0x5c80d0); } else _0x3e689e(![]), _0x42e068['target'][_0x22b4c0(0x82f)] = ''; }); } } function _0x3382a1(_0x2a63cb) { const _0x597a44 = _0x1c58bc; if (_0x597a44(0x4d8) === _0x597a44(0x4d8)) { const _0x2f20d3 = _0x132ad2(_0x2a63cb), _0x5ee968 = document['getElementById']('chat-view-pane'); _0x5ee968[_0x597a44(0x819)]['backgroundImage'] = ''; let _0x8c214 = document[_0x597a44(0xad1)](_0x597a44(0x1da) + _0x2a63cb); if (_0x8c214) _0x8c214[_0x597a44(0x16c)] = ''; if (!_0x2f20d3) return; _0x2f20d3[_0x597a44(0x1d2)] && (_0x5ee968[_0x597a44(0x819)][_0x597a44(0xbe4)] = _0x597a44(0xbce) + _0x2f20d3[_0x597a44(0x1d2)] + '\x27)', _0x5ee968[_0x597a44(0x819)]['backgroundSize'] = 'cover', _0x5ee968['style']['backgroundPosition'] = _0x597a44(0x4f3)); if (_0x2f20d3[_0x597a44(0x865)]) { if ('uADCj' === _0x597a44(0xbd2)) { let _0x2111b7 = document['getElementById'](_0x597a44(0x1da) + _0x2f20d3['id']); !_0x2111b7 && (_0x2111b7 = document['createElement'](_0x597a44(0x819)), _0x2111b7['id'] = _0x597a44(0x1da) + _0x2f20d3['id'], document[_0x597a44(0x2e7)][_0x597a44(0x8ce)](_0x2111b7)); const _0x3c1590 = _0x2f20d3[_0x597a44(0x865)], _0x24af1b = _0x3c1590[_0x597a44(0x4db)](/\.bubble\.sent/g, _0x597a44(0x173) + _0x2f20d3['id'] + _0x597a44(0x160))[_0x597a44(0x4db)](/\.bubble\.received/g, _0x597a44(0x173) + _0x2f20d3['id'] + _0x597a44(0x7a5)); _0x2111b7['innerHTML'] = _0x24af1b; } else _0x579589[_0x597a44(0x208)]('Failed\x20to\x20read\x20history\x20for\x20chat\x20' + _0x34f60a['activeChatId'], _0x7e9b40); } } else _0x433c2b[_0x597a44(0x9c4)][_0x597a44(0x6e1)](_0x597a44(0x7ea)), _0x336e8f[_0x597a44(0x819)]['transform'] = '', _0x2f2f53[_0x597a44(0x819)][_0x597a44(0x838)] = ''; } function _0x52b967() { const _0x5b7f3a = _0x1c58bc, _0x4fc37e = document[_0x5b7f3a(0xad1)](_0x5b7f3a(0x28c)); _0x4fc37e[_0x5b7f3a(0x16c)] = ''; const _0x1144b7 = _0x20e979 => { const _0x259b9c = _0x5b7f3a; _0x2c45d7[_0x259b9c(0x130)][_0x20e979] = null; if (_0x20e979 === _0x259b9c(0x9b6)) _0x2c45d7[_0x259b9c(0x130)]['imageId'] = null; _0x52b967(); }, _0x4299c1 = _0x2c45d7[_0x5b7f3a(0x130)][_0x5b7f3a(0x709)], _0x381c33 = _0x2c45d7['pendingPostAttachments']['music']; if (_0x4299c1) { const _0x2d4675 = document[_0x5b7f3a(0xa51)](_0x5b7f3a(0x54f)); _0x2d4675['className'] = _0x5b7f3a(0x556), _0x2d4675['innerHTML'] = _0x5b7f3a(0x3cc), _0x2d4675[_0x5b7f3a(0x94b)]('.remove-attachment-btn')['onclick'] = () => _0x1144b7(_0x5b7f3a(0x9b6)), _0x4fc37e[_0x5b7f3a(0x8ce)](_0x2d4675), _0x262fce(_0x4299c1)[_0x5b7f3a(0xa0d)](_0x4c45f4 => { const _0x593bcc = _0x5b7f3a; if (_0x593bcc(0xa4b) === 'aooqs') { const _0x8a5c47 = document[_0x593bcc(0xad1)]('pending-post-image-preview'); _0x8a5c47 && _0x4c45f4 && (_0x8a5c47[_0x593bcc(0x400)] = URL['createObjectURL'](_0x4c45f4)); } else { if (!_0x1a9c30 || typeof _0x11e93e !== 'string') return null; const _0x33701c = _0x22a8cb[_0x593bcc(0x47b)]('['), _0x24cdc1 = _0x5e1a36[_0x593bcc(0x916)](']'); if (_0x33701c > -0x1 && _0x24cdc1 > _0x33701c) return _0x405c3b[_0x593bcc(0x5cd)](_0x33701c, _0x24cdc1 + 0x1); return null; } }); } if (_0x381c33) { const _0x1cccdf = document['createElement'](_0x5b7f3a(0x54f)); _0x1cccdf['className'] = _0x5b7f3a(0x556), _0x1cccdf[_0x5b7f3a(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x381c33['coverUrl'] || _0x72f264) + _0x5b7f3a(0x562) + _0x381c33[_0x5b7f3a(0x6d1)] + _0x5b7f3a(0x921) + _0x381c33['artist'] + _0x5b7f3a(0x253), _0x1cccdf[_0x5b7f3a(0x94b)]('.remove-attachment-btn')['onclick'] = () => _0x1144b7(_0x5b7f3a(0xab5)), _0x4fc37e[_0x5b7f3a(0x8ce)](_0x1cccdf); } } async function _0xa077a9(_0x294b73) { const _0x38d6b1 = _0x1c58bc; if ('wqRZV' !== _0x38d6b1(0xa16)) { const _0x5b1f48 = _0x2c45d7[_0x38d6b1(0x554)][_0x38d6b1(0x128)](_0x567205 => _0x567205['id'] === _0x2c45d7[_0x38d6b1(0x6c4)]); if (!_0x5b1f48) return; _0x4ded3c(!![], _0x38d6b1(0x609)), _0x2c45d7[_0x38d6b1(0xaa7)] = !![]; try { if (_0x38d6b1(0x1d8) === _0x38d6b1(0x1d8)) { const _0x438b4c = _0x5b1f48[_0x38d6b1(0x739)]['map'](_0x2b655e => _0x132ad2(_0x2b655e))[_0x38d6b1(0x662)](Boolean), _0xab137d = _0x345f9c(), _0xe3915c = _0x438b4c[_0x38d6b1(0x3c4)](_0x4f34b4 => { const _0x5660aa = _0x38d6b1; if ('mQCZW' === _0x5660aa(0xa5a)) { const _0x2088d6 = _0x2e0749[_0x5660aa(0xa51)]('li'); _0x2088d6['className'] = _0x5660aa(0x808), _0x2088d6[_0x5660aa(0x2d1)][_0x5660aa(0xaee)] = _0x67fb88['id'], _0x2088d6[_0x5660aa(0x16c)] = _0x5660aa(0x40b) + (_0x10c153[_0x5660aa(0x37b)] || _0xc3b870) + _0x5660aa(0x681) + _0x163d1[_0x5660aa(0xa6a)] + _0x5660aa(0x210) + (_0x5603b3[_0x5660aa(0x531)] || '私聊') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x2088d6[_0x5660aa(0xb66)](_0x5660aa(0x43a), () => { _0x4444dc(_0x3a8f7b['id']); }), _0x51799b[_0x5660aa(0x8ce)](_0x2088d6); } else { const { omniText: _0x269be9 } = _0x5b1c3b(_0x4f34b4['id'], null), _0x3215f6 = _0x20fbaa(_0x4f34b4['id']), _0x24bd5e = _0x4f34b4[_0x5660aa(0x7ad)] && _0x4f34b4[_0x5660aa(0x7ad)][_0x5660aa(0x1ea)] > 0x0 ? '\x0a\x0a#\x20' + _0x4f34b4[_0x5660aa(0xa6a)] + _0x5660aa(0x91e) + _0x4f34b4[_0x5660aa(0x7ad)][_0x5660aa(0x3c4)](_0x5abac8 => _0x2c45d7['worldBooks'][_0x5660aa(0x128)](_0x3f2164 => _0x3f2164['id'] === _0x5abac8))[_0x5660aa(0x662)](Boolean)[_0x5660aa(0x3c4)](_0x33f76f => '\x0a##\x20条目:\x20' + _0x33f76f['name'] + '\x0a' + _0x33f76f['content'])[_0x5660aa(0xae6)]('') : ''; return _0x5660aa(0x875) + _0x4f34b4[_0x5660aa(0xa6a)] + _0x5660aa(0x257) + _0x4f34b4['id'] + _0x5660aa(0x60b) + _0x4f34b4[_0x5660aa(0x5d7)] + _0x5660aa(0xb83) + _0x269be9 + '\x0a' + _0x3215f6 + '\x0a' + _0x24bd5e; } })[_0x38d6b1(0xae6)]('\x0a\x0a'), _0x5d5214 = _0x2a8e18(_0x294b73['authorId']) || { 'name': '用户' }, _0x34e478 = _0x5d5214[_0x38d6b1(0x5d7)] ? '\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20' + _0x5d5214['name'] + '\x0a-\x20人设:\x20' + _0x5d5214[_0x38d6b1(0x5d7)] + '\x0a' : ''; let _0x38c916 = null; if (_0x294b73['image']) { if (_0x38d6b1(0x74e) !== _0x38d6b1(0x74e)) { const _0x598433 = (_0x2eb245[_0x38d6b1(0x533)] || [])[_0x38d6b1(0x3c4)](_0x54ec8b => _0x38d6b1(0x189) + _0x54ec8b + _0x38d6b1(0xb47))[_0x38d6b1(0xae6)](''); return _0x38d6b1(0x166) + (_0x56edd8['restaurant_name'] || _0x38d6b1(0x4bf)) + _0x38d6b1(0x4e4) + (_0xfc0e27[_0x38d6b1(0x782)] || '') + _0x38d6b1(0x91b) + (_0x2ce5cd[_0x38d6b1(0x90c)] || _0x38d6b1(0x567)) + _0x38d6b1(0x869) + _0x598433 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20' + (_0x1358ab['total_cost'] || 0x0)[_0x38d6b1(0x625)](0x2) + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'; } else _0x38c916 = _0x294b73[_0x38d6b1(0x9b6)]; } else { if (_0x294b73[_0x38d6b1(0x709)]) try { if (_0x38d6b1(0x52f) === _0x38d6b1(0x52f)) { const _0x104e2d = await _0x262fce(_0x294b73[_0x38d6b1(0x709)]); _0x104e2d && (_0x38d6b1(0xba7) !== 'MlnvQ' ? _0x477133[_0x38d6b1(0x208)]('在准备动态回复时，读取图片失败:', _0x3c0d83) : _0x38c916 = await _0x2a1554(_0x104e2d)); } else _0x17150b['style'][_0x38d6b1(0x974)] = 'inline-block'; } catch (_0x2e8516) { console['error'](_0x38d6b1(0x125), _0x2e8516); } } let _0x1f1be0 = _0x5d5214[_0x38d6b1(0xa6a)] + _0x38d6b1(0xbdb) + _0x294b73[_0x38d6b1(0xa3a)] + '”'; _0x38c916 && (_0x1f1be0 += '\x20[并附上了一张图片]'); _0x294b73['type'] === _0x38d6b1(0xab5) && (_0x1f1be0 += _0x38d6b1(0x28a) + _0x294b73['songName'] + _0x38d6b1(0x66f) + _0x294b73[_0x38d6b1(0x50a)] + ']'); const _0x591f18 = _0x38d6b1(0xb1c) + _0xe3915c + '\x0a\x0a' + _0x34e478 + _0x38d6b1(0x500) + _0xab137d + _0x38d6b1(0x7c5) + _0x1f1be0 + _0x38d6b1(0x898), _0x4cb639 = [{ 'role': _0x38d6b1(0x5ff), 'content': _0x591f18 }], _0x3ec580 = { 'role': _0x38d6b1(0xa02), 'content': '请根据以上所有规则（特别是要看图！），生成对用户动态的回应。' }; _0x38c916 && (_0x3ec580[_0x38d6b1(0x9b6)] = _0x38c916); _0x4cb639[_0x38d6b1(0xb49)](_0x3ec580); const _0x245ace = await _0x4eb036(_0x4cb639, { 'json': !![] }), _0x1bf976 = _0x245ace[_0x38d6b1(0x604)](/({[\s\S]*})/); if (!_0x1bf976) throw new Error(_0x38d6b1(0x66d)); const _0x554480 = JSON['parse'](_0x1bf976[0x1]), _0x29d36d = _0x5b1f48[_0x38d6b1(0x6c0)][_0x38d6b1(0x128)](_0x28ea02 => _0x28ea02['id'] === _0x294b73['id']); _0x29d36d && (_0x29d36d['likes'] = _0x554480['likes'] || [], _0x29d36d[_0x38d6b1(0x9b1)] = (_0x554480['comments'] || [])[_0x38d6b1(0x3c4)]((_0x432f70, _0x24e22c) => ({ ..._0x432f70, 'commentId': 'c_' + _0x294b73[_0x38d6b1(0x782)] + '_' + _0x24e22c })), _0x3ac55e(), _0x2d71b3()); } else _0x413ec2 === 'home' ? _0x12195a[_0x38d6b1(0x819)][_0x38d6b1(0x974)] = _0x38d6b1(0x3f8) : _0x3d1edf[_0x38d6b1(0x819)][_0x38d6b1(0x974)] = _0x38d6b1(0xb39); } catch (_0x9b796) { _0x38d6b1(0x628) !== _0x38d6b1(0x58e) ? (console[_0x38d6b1(0x208)](_0x38d6b1(0x206), _0x9b796), _0x18f071(_0x38d6b1(0xb3f))) : (_0xceca2a[_0x38d6b1(0x7bd)][_0x38d6b1(0x9d8)](_0xfe5614['currentDate']['getMonth']() + 0x1), _0x3fb6fc()); } finally { _0x4ded3c(![]), _0x2c45d7[_0x38d6b1(0xaa7)] = ![]; } } else { const _0x43419e = _0x587360['parse'](_0x322131[_0x38d6b1(0xb6a)][_0x38d6b1(0xb7b)]); if (_0x43419e[_0x38d6b1(0x1a7)] !== _0x38d6b1(0x13f) || !_0x43419e[_0x38d6b1(0x4b3)] || !_0x43419e['accountingLedger']) throw new _0x149ceb(_0x38d6b1(0x618)); _0x28d6da['accountingData'] = _0x43419e['accountingData'], _0x125088[_0x38d6b1(0x38a)] = _0x43419e[_0x38d6b1(0x38a)], _0x139ade(), _0x4cafaf(![]), _0x139d0b(_0x38d6b1(0x37c)), _0x4d8e1b(); } } function _0x4df087() { const _0x1b250b = _0x1c58bc, _0x51d58e = _0x2c45d7[_0x1b250b(0x554)][_0x1b250b(0x128)](_0x2593ec => _0x2593ec['id'] === _0x2c45d7[_0x1b250b(0x6c4)]), _0x1f968a = _0x51d58e?.[_0x1b250b(0x815)]; let _0x748217 = _0x2c45d7[_0x1b250b(0x775)][_0x1b250b(0x128)](_0x2da7e0 => _0x2da7e0['id'] === _0x1f968a); !_0x748217 && ('BQLmU' !== _0x1b250b(0xa45) ? _0x748217 = _0x2c45d7[_0x1b250b(0x775)][_0x1b250b(0x128)](_0x2599a8 => _0x2599a8['id'] === _0x2c45d7[_0x1b250b(0x4d3)]) : (_0x407c88[_0x1b250b(0x819)][_0x1b250b(0x510)] = _0x1b250b(0xaf5), _0x45f8bf[_0x1b250b(0x819)][_0x1b250b(0xaac)] = _0x1b250b(0x770), _0x13957[_0x1b250b(0x819)]['left'] = _0x1b250b(0xb42), _0x2a0b08[_0x1b250b(0x819)][_0x1b250b(0xa8f)] = _0x1b250b(0x146), _0x481203['style'][_0x1b250b(0x974)] = _0x1b250b(0x4e9))), !_0x748217 && (_0x748217 = _0x2c45d7[_0x1b250b(0x775)][0x0]), _0x748217 && (document[_0x1b250b(0xad1)](_0x1b250b(0x530))[_0x1b250b(0x400)] = _0x748217[_0x1b250b(0x37b)] || _0x5d9858); } function _0x57cf8c(_0x240f3f) { const _0x1c4ffc = _0x1c58bc; let _0x3c471e = 0x0, _0x1f5e11 = 0x0, _0x382aac = 0x0; if (_0x240f3f[_0x1c4ffc(0x1ea)] == 0x4) _0x3c471e = '0x' + _0x240f3f[0x1] + _0x240f3f[0x1], _0x1f5e11 = '0x' + _0x240f3f[0x2] + _0x240f3f[0x2], _0x382aac = '0x' + _0x240f3f[0x3] + _0x240f3f[0x3]; else { if (_0x240f3f[_0x1c4ffc(0x1ea)] == 0x7) { if (_0x1c4ffc(0x2f3) === _0x1c4ffc(0x2f3)) _0x3c471e = '0x' + _0x240f3f[0x1] + _0x240f3f[0x2], _0x1f5e11 = '0x' + _0x240f3f[0x3] + _0x240f3f[0x4], _0x382aac = '0x' + _0x240f3f[0x5] + _0x240f3f[0x6]; else try { _0x51fbdc[_0x1c4ffc(0x3ae)](_0x1c4ffc(0x45a), _0x49a809[_0x1c4ffc(0x39b)]({ 'playlist': _0xa57f4c[_0x1c4ffc(0xa2f)], 'currentIndex': _0x1bb213[_0x1c4ffc(0x11d)] })); } catch (_0x5579ab) { _0x4ce512['error'](_0x1c4ffc(0x40c), _0x5579ab); } } } _0x3c471e /= 0xff, _0x1f5e11 /= 0xff, _0x382aac /= 0xff; let _0x32c51f = Math[_0x1c4ffc(0x32a)](_0x3c471e, _0x1f5e11, _0x382aac), _0xbfce0c = Math[_0x1c4ffc(0xa01)](_0x3c471e, _0x1f5e11, _0x382aac), _0x8bfe23 = _0xbfce0c - _0x32c51f, _0x392966 = 0x0, _0x485962 = 0x0, _0x2a075e = 0x0; if (_0x8bfe23 == 0x0) _0x392966 = 0x0; else { if (_0xbfce0c == _0x3c471e) _0x392966 = (_0x1f5e11 - _0x382aac) / _0x8bfe23 % 0x6; else { if (_0xbfce0c == _0x1f5e11) _0x392966 = (_0x382aac - _0x3c471e) / _0x8bfe23 + 0x2; else _0x392966 = (_0x3c471e - _0x1f5e11) / _0x8bfe23 + 0x4; } } _0x392966 = Math[_0x1c4ffc(0x691)](_0x392966 * 0x3c); if (_0x392966 < 0x0) _0x392966 += 0x168; return _0x2a075e = (_0xbfce0c + _0x32c51f) / 0x2, _0x485962 = _0x8bfe23 == 0x0 ? 0x0 : _0x8bfe23 / (0x1 - Math[_0x1c4ffc(0x5ab)](0x2 * _0x2a075e - 0x1)), _0x485962 = +(_0x485962 * 0x64)[_0x1c4ffc(0x625)](0x1), _0x2a075e = +(_0x2a075e * 0x64)[_0x1c4ffc(0x625)](0x1), { 'h': _0x392966, 's': _0x485962, 'l': _0x2a075e }; } function _0x252a26() { const _0x4f6420 = _0x1c58bc, _0x2b22f5 = (_0x1386ee, _0x441939, _0x323091) => { const _0x32a626 = _0x2205; if (_0x32a626(0xb08) !== _0x32a626(0xb08)) _0x1d65fa[_0x32a626(0xb49)](_0x55e2da); else { const _0x5487af = document[_0x32a626(0xad1)](_0x1386ee); if (!_0x5487af) return; let _0x448af9 = null; try { _0x448af9 = JSON['parse'](localStorage[_0x32a626(0x813)](_0x441939) || '{}'); } catch { if (_0x32a626(0xbe5) !== _0x32a626(0x446)) _0x448af9 = {}; else return { 'type': _0x32a626(0x504), 'content': _0x16db19[0x1]['trim']() }; } _0x5487af['style'][_0x32a626(0x510)] = 'absolute', _0x5487af[_0x32a626(0x819)]['top'] = '', _0x5487af[_0x32a626(0x819)]['left'] = '', _0x5487af[_0x32a626(0x819)]['right'] = '', _0x5487af[_0x32a626(0x819)][_0x32a626(0x5c9)] = '', _0x5487af[_0x32a626(0x819)]['transform'] = ''; if (typeof _0x448af9['top'] === _0x32a626(0xa1d) && typeof _0x448af9[_0x32a626(0xb12)] === _0x32a626(0xa1d)) _0x32a626(0x647) !== 'thTjj' ? _0xd59a21[_0x32a626(0xb66)](_0x32a626(0x43a), () => { const _0x5ca679 = _0x32a626; _0x3aab54(_0x5ca679(0x82b)); }) : (_0x5487af[_0x32a626(0x819)][_0x32a626(0xaac)] = _0x448af9[_0x32a626(0xaac)] + '%', _0x5487af[_0x32a626(0x819)][_0x32a626(0xb12)] = _0x448af9[_0x32a626(0xb12)] + '%'); else for (const _0x338fb8 in _0x323091) { _0x5487af['style'][_0x338fb8] = _0x323091[_0x338fb8]; } } }; _0x2b22f5('home-clock-container', 'clockPosition', { 'top': _0x4f6420(0x474), 'left': _0x4f6420(0xb42), 'transform': _0x4f6420(0x146) }), _0x2b22f5('app-wallpaper', _0x4f6420(0x8d1), { 'top': '20%', 'right': '4%' }), _0x2b22f5('app-user-profiles', _0x4f6420(0xbbe), { 'top': '20%', 'right': _0x4f6420(0x3d9) }), _0x2b22f5(_0x4f6420(0x6d2), 'appIconPosition_app-settings', { 'top': '8%', 'right': '28%' }), _0x2b22f5('app-world-book', 'appIconPosition_app-world-book', { 'top': '8%', 'right': '4%' }), _0x2b22f5(_0x4f6420(0x82d), _0x4f6420(0xb81), { 'top': _0x4f6420(0x282), 'left': '5%' }), _0x2b22f5(_0x4f6420(0x1d9), _0x4f6420(0x8fa), { 'top': _0x4f6420(0x6e3), 'left': _0x4f6420(0x594) }), _0x2b22f5(_0x4f6420(0x42d), _0x4f6420(0x13b), { 'top': _0x4f6420(0x6e3), 'left': '5%' }), _0x2b22f5(_0x4f6420(0x3e0), _0x4f6420(0x506), { 'top': _0x4f6420(0x282), 'left': _0x4f6420(0x594) }), _0x2b22f5(_0x4f6420(0x893), _0x4f6420(0x4f6), { 'top': '60%', 'right': '5%' }), _0x2b22f5('card-widget-2', _0x4f6420(0xbbd), { 'top': '8%', 'left': '5%' }); const _0x42b37a = document[_0x4f6420(0xad1)](_0x4f6420(0x7ff)); _0x42b37a && (_0x42b37a['style'][_0x4f6420(0x510)] = 'absolute', _0x42b37a[_0x4f6420(0x819)][_0x4f6420(0xaac)] = '34%', _0x42b37a[_0x4f6420(0x819)][_0x4f6420(0xb12)] = _0x4f6420(0xb42), _0x42b37a[_0x4f6420(0x819)][_0x4f6420(0xa8f)] = _0x4f6420(0x146), _0x42b37a['style'][_0x4f6420(0x974)] = 'block'); const _0x683c6b = document[_0x4f6420(0xad1)](_0x4f6420(0xb7f)); _0x683c6b && (_0x683c6b['style'][_0x4f6420(0x510)] = _0x4f6420(0xaf5), _0x683c6b[_0x4f6420(0x819)][_0x4f6420(0xaac)] = '35%', _0x683c6b[_0x4f6420(0x819)]['left'] = _0x4f6420(0xb42), _0x683c6b[_0x4f6420(0x819)]['transform'] = _0x4f6420(0x146), _0x683c6b['style']['display'] = _0x4f6420(0x3f8)); } function _0x1ce50a() { const _0x21ebea = _0x1c58bc; if (_0x21ebea(0x7ae) === _0x21ebea(0x7ae)) { const _0x20b5b0 = document[_0x21ebea(0xad1)](_0x21ebea(0x3d0)); _0x20b5b0[_0x21ebea(0x16c)] = ''; const _0x11292b = document[_0x21ebea(0x61a)](_0x21ebea(0x4d9)); _0x11292b[_0x21ebea(0x4ac)](_0x40d20c => { const _0x1f5479 = _0x21ebea, _0x4642a4 = _0x40d20c['id'], _0x1f65b2 = _0x40d20c[_0x1f5479(0x94b)](_0x1f5479(0xa1b))[_0x1f5479(0x948)], _0x37c4bb = 'customIcon_' + _0x4642a4, _0xdd45f5 = localStorage[_0x1f5479(0x813)](_0x37c4bb), _0x34b6ee = document['createElement']('div'); _0x34b6ee[_0x1f5479(0xa5e)] = _0x1f5479(0x394), _0x34b6ee['style']['padding'] = _0x1f5479(0x6ca), _0x34b6ee[_0x1f5479(0x16c)] = _0x1f5479(0xbb2) + _0x4642a4 + _0x1f5479(0x3e7) + (_0xdd45f5 || _0x1f5479(0x187)) + _0x1f5479(0xb13) + _0x1f65b2 + _0x1f5479(0x2a3) + _0x4642a4 + _0x1f5479(0x5ef) + _0x4642a4 + '\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27' + _0x37c4bb + _0x1f5479(0x2ff), _0x20b5b0[_0x1f5479(0x8ce)](_0x34b6ee); const _0x45ae34 = document[_0x1f5479(0xad1)]('input_' + _0x4642a4); _0x45ae34[_0x1f5479(0xb66)](_0x1f5479(0xad6), async _0x35889a => { const _0x48daac = _0x1f5479; if (_0x48daac(0x5e2) === _0x48daac(0x5e2)) { const _0x3a07d3 = _0x35889a[_0x48daac(0xb6a)][_0x48daac(0xb1f)][0x0]; if (!_0x3a07d3) return; try { const _0x9426c1 = await _0x12e6e2(_0x3a07d3); localStorage['setItem'](_0x37c4bb, _0x9426c1), document[_0x48daac(0xad1)](_0x48daac(0x1a1) + _0x4642a4)[_0x48daac(0x400)] = _0x9426c1, _0x1f8190(); } catch (_0x3e8a70) { _0x18f071(_0x48daac(0x590) + _0x3e8a70[_0x48daac(0x80d)]); } } else _0x224a0f(), _0xa49154['log'](_0x48daac(0x4f2)); }); }); } else { const _0x1cc25f = _0xfec640[_0x21ebea(0xad1)](_0x21ebea(0x442)), _0x3bb408 = _0x309133[_0x21ebea(0xad1)](_0x21ebea(0x619)), _0x32c114 = _0xed86bf[_0x21ebea(0xad1)](_0x21ebea(0x11b)), _0x41a560 = _0x507ccc['getElementById']('modal-cancel'), _0x20fda1 = _0x23a7ed[_0x21ebea(0xad1)]('modal-mask'); _0x3bb408[_0x21ebea(0x948)] = _0x1f5c81, _0x1cc25f[_0x21ebea(0x819)]['display'] = 'flex'; const _0x25a96a = _0x1e6507 => { const _0x49fed1 = _0x21ebea; _0x1cc25f[_0x49fed1(0x819)]['display'] = _0x49fed1(0xb39), _0x32c114[_0x49fed1(0x970)] = _0x41a560['onclick'] = _0x20fda1[_0x49fed1(0x970)] = null, _0x34d8aa[_0x49fed1(0x57f)]('keydown', _0x13e431), _0x108f58(_0x1e6507); }, _0x13e431 = _0x458472 => { const _0x5b3513 = _0x21ebea; if (_0x458472[_0x5b3513(0xa2d)] === _0x5b3513(0x303)) _0x25a96a(![]); if (_0x458472[_0x5b3513(0xa2d)] === 'Enter') _0x25a96a(!![]); }; _0x32c114[_0x21ebea(0x970)] = () => _0x25a96a(!![]), _0x41a560['onclick'] = () => _0x25a96a(![]), _0x20fda1['onclick'] = () => _0x25a96a(![]), _0x174897[_0x21ebea(0xb66)](_0x21ebea(0x550), _0x13e431); } } function _0x1f8190() { const _0x1ffdaf = _0x1c58bc; if ('CkCZb' !== _0x1ffdaf(0x4fe)) { const _0x507b39 = _0x2f8094[_0x1ffdaf(0xad1)](_0x1ffdaf(0xab7)), _0x128838 = _0x32e32d[_0x1ffdaf(0xad1)](_0x1ffdaf(0xbdc)), _0x599f43 = _0x507b39[_0x1ffdaf(0x82f)][_0x1ffdaf(0x471)](), _0x5f03d2 = _0x17eb6c(_0x128838['value']); if (!_0x599f43 || _0x3cd46d(_0x5f03d2) || _0x5f03d2 <= 0x0) { _0x12f988(_0x1ffdaf(0xa29)); return; } _0x33653a['accountingData']['push']({ 'id': _0x1ffdaf(0x8e9) + _0x294d5b[_0x1ffdaf(0x7e3)](), 'description': _0x599f43, 'amount': _0x5f03d2, 'timestamp': _0x2af014['now']() }), _0x4ca816(), _0x5978dc(), _0x507b39[_0x1ffdaf(0x82f)] = '', _0x128838[_0x1ffdaf(0x82f)] = '', _0x507b39[_0x1ffdaf(0x64f)](); } else { const _0x5e04c6 = document[_0x1ffdaf(0x61a)]('.app-icon'); _0x5e04c6[_0x1ffdaf(0x4ac)](_0x3227c5 => { const _0x3a62c0 = _0x1ffdaf, _0x58f106 = _0x3227c5['id'], _0xddcc3b = _0x3a62c0(0x3f6) + _0x58f106, _0xceb94e = localStorage[_0x3a62c0(0x813)](_0xddcc3b), _0x6a4d56 = _0x3227c5[_0x3a62c0(0x94b)]('.app-icon-img'); if (_0xceb94e) _0x6a4d56['innerHTML'] = '<img\x20src=\x22' + _0xceb94e + _0x3a62c0(0x8c3); else { const _0x16b401 = document[_0x3a62c0(0x94b)]('#app-dock-bottom-left\x20#' + _0x58f106 + '\x20.app-icon-img,\x20#app-dock-top-right\x20#' + _0x58f106 + _0x3a62c0(0x12f))?.[_0x3a62c0(0x16c)]; if (_0x16b401) { if (_0x3a62c0(0x680) !== _0x3a62c0(0x680)) { _0x25f5b0[_0x3a62c0(0x16c)] = _0x3a62c0(0x6f7); return; } else _0x6a4d56['innerHTML'] = _0x16b401; } } }); } } function _0x370444() { const _0x2fbcf2 = _0x1c58bc, _0x590225 = _0x2c45d7['friendCircles'][_0x2fbcf2(0x128)](_0x30a634 => _0x30a634['id'] === _0x2c45d7[_0x2fbcf2(0x6c4)]), _0x2e2845 = _0x5c10dc(); let _0x34e5b6 = []; if (_0x590225 && _0x590225[_0x2fbcf2(0x6c0)]) { const _0x84a325 = _0x590225['posts'][_0x2fbcf2(0x662)](_0x20fd26 => _0x20fd26['type'] === _0x2fbcf2(0xab5) && _0x20fd26[_0x2fbcf2(0x642)])['map'](_0x33b8b6 => ({ ..._0x33b8b6, 'source': 'feed' })); _0x34e5b6[_0x2fbcf2(0xb49)](..._0x84a325); } if (_0x2e2845 && _0x2c45d7['conversationHistory']) { if (_0x2fbcf2(0x2b4) === _0x2fbcf2(0x1dc)) _0x1671ad['activeUserProfileId'] = _0x522e43[_0x2fbcf2(0x775)][0x0]['id']; else { const _0x5e891f = _0x2c45d7[_0x2fbcf2(0x1ef)][_0x2fbcf2(0x662)](_0x340ae8 => _0x340ae8[_0x2fbcf2(0x1a7)] === _0x2fbcf2(0xab5) && _0x340ae8[_0x2fbcf2(0x642)])[_0x2fbcf2(0x3c4)](_0x3b0a65 => ({ ..._0x3b0a65, 'id': _0x2fbcf2(0x69c) + _0x3b0a65[_0x2fbcf2(0x782)], 'source': _0x2fbcf2(0xa37) })); _0x34e5b6['push'](..._0x5e891f); } } const _0x291f66 = Array[_0x2fbcf2(0x8c8)](new Map(_0x34e5b6[_0x2fbcf2(0x3c4)](_0x1a48d0 => [_0x1a48d0[_0x2fbcf2(0x642)], _0x1a48d0]))[_0x2fbcf2(0xa41)]()); _0x2c45d7[_0x2fbcf2(0xa2f)] = _0x291f66['sort']((_0x192483, _0x114814) => _0x114814[_0x2fbcf2(0x782)] - _0x192483[_0x2fbcf2(0x782)]); } function _0x424c6c(_0x1f3a52) { const _0x29e47d = _0x1c58bc; if (_0x1f3a52 < 0x0 || _0x1f3a52 >= _0x4704fd[_0x29e47d(0x1ea)]) return; _0x31d0f4 = _0x1f3a52; const _0x13d6fb = _0x4704fd[_0x1f3a52]; _0x3a3d7b[_0x29e47d(0x400)] = _0x13d6fb[_0x29e47d(0x642)] || _0x13d6fb['url'], _0x3a3d7b[_0x29e47d(0xbc9)](), _0x1ef5d0(), _0x2be83d(); } function _0x1ef5d0() { const _0x5bd495 = _0x1c58bc; if ('RwzAF' !== 'oTsri') { const _0x4003ce = _0x2c45d7['musicPlaylist'][_0x2c45d7['currentlyPlayingIndex']], _0x11c6c2 = _0x2c45d7[_0x5bd495(0x9c1)]; _0x392027(), _0xd32fa5(); const _0x2162a3 = document[_0x5bd495(0x61a)]('.music-post-song-card,\x20.music-share-card'); _0x2162a3['forEach'](_0x4e70aa => { const _0x4df21d = _0x5bd495, _0x147465 = _0x4e70aa[_0x4df21d(0x2d1)][_0x4df21d(0x26a)], _0x3b90cb = _0x4e70aa[_0x4df21d(0x94b)](_0x4df21d(0x669)); if (!_0x3b90cb) return; _0x4003ce && _0x147465 === _0x4003ce['id'] && _0x11c6c2 ? _0x4df21d(0xa09) === _0x4df21d(0x459) ? _0x5c4d96(_0x4df21d(0x424) + _0x16b18a['message']) : _0x3b90cb[_0x4df21d(0x948)] = '❚❚' : _0x4df21d(0xad5) === 'TgYnK' ? _0x3b90cb[_0x4df21d(0x948)] = '▶' : _0x56318d(!![]); }); } else { const _0x394d38 = _0x3e2ad8['accountingLedger'][_0x364c28]; _0x394d38 && _0x394d38[_0x5bd495(0x529)] && _0x3316d9[_0x5bd495(0x4b3)][_0x5bd495(0xb49)](..._0x394d38[_0x5bd495(0x529)]), delete _0x3240e5[_0x5bd495(0x38a)][_0x18c058], _0x19f791(), _0x5765b6(); } } function _0x2be83d() { const _0x4609f4 = _0x1c58bc; if ('oDJpG' === _0x4609f4(0x8e5)) try { localStorage[_0x4609f4(0x3ae)](_0x4609f4(0x45a), JSON[_0x4609f4(0x39b)]({ 'playlist': _0x2c45d7['musicPlaylist'], 'currentIndex': _0x2c45d7['currentlyPlayingIndex'] })); } catch (_0xe5bf4e) { console[_0x4609f4(0x208)]('保存播放器状态失败，真是没用。', _0xe5bf4e); } else { const _0x2455bc = _0x487c19(); if (_0x2455bc && _0x2455bc[_0x4609f4(0x1a7)] === _0x4609f4(0x639)) _0x369b05(_0x2455bc[_0x4609f4(0x402)][0x0]); else _0x2455bc && _0x2455bc['type'] === _0x4609f4(0x62a) && _0x47acbe(_0x2455bc['id']); } } function _0x256338() { const _0x2a9ae3 = _0x1c58bc; if (_0x2a9ae3(0x733) === 'gzPvq') { const _0x60fe8f = _0x53af06[_0x2a9ae3(0x813)](_0x2a9ae3(0x199) + _0x942506), _0x54ff5d = _0x2a3f5f[_0x2a9ae3(0x387)](_0x60fe8f || '[]'); return _0x489b4c[_0x2a9ae3(0x460)](_0x54ff5d) ? _0x54ff5d : []; } else try { const _0x12da80 = localStorage[_0x2a9ae3(0x813)](_0x2a9ae3(0x45a)); if (_0x12da80) { const { playlist: _0x21cc27, currentIndex: _0x214c0f } = JSON[_0x2a9ae3(0x387)](_0x12da80); Array[_0x2a9ae3(0x460)](_0x21cc27) && _0x21cc27[_0x2a9ae3(0x1ea)] > 0x0 && _0x214c0f > -0x1 && (_0x2c45d7[_0x2a9ae3(0xa2f)] = _0x21cc27, _0x2c45d7[_0x2a9ae3(0x11d)] = _0x214c0f, _0x2c45d7['isPlaying'] = ![], _0x1ef5d0()); } } catch (_0x445dbb) { console[_0x2a9ae3(0x208)](_0x2a9ae3(0x21d), _0x445dbb); } } function _0x2ac720(_0x4c4f1f) { const _0x31392e = _0x1c58bc; if (window[_0x31392e(0x7b5)]) clearTimeout(window['diaryPressTimer']); const _0x1a5c84 = _0x4c4f1f['target'][_0x31392e(0x4b4)]('.diary-entry'); if (!_0x1a5c84) return; const _0x46a6f0 = _0x1a5c84[_0x31392e(0x2d1)]['timestamp'], _0x471a5a = _0x1a5c84['classList'][_0x31392e(0x75d)](_0x31392e(0xa02)) ? _0x31392e(0xa02) : 'ai'; if (!_0x46a6f0) return; const _0x3a4e78 = () => { const _0x5931a9 = _0x31392e; window[_0x5931a9(0x7b5)] = setTimeout(() => { const _0x3ac21d = _0x5931a9; if (_0x4c4f1f['type'] === _0x3ac21d(0x5c6)) _0x4c4f1f[_0x3ac21d(0x90a)](); _0x4ec25(parseInt(_0x46a6f0, 0xa), _0x471a5a); }, 0x320); }, _0x138a0e = () => { const _0x4d0adf = _0x31392e; if ('DOPlX' !== 'veWHb') { if (window[_0x4d0adf(0x7b5)]) clearTimeout(window[_0x4d0adf(0x7b5)]); } else _0x359a22[_0x4d0adf(0xad1)]('music-screen')[_0x4d0adf(0x819)][_0x4d0adf(0x85e)](_0x4d0adf(0x338), _0x4d0adf(0xb39)); }; document[_0x31392e(0xb66)](_0x31392e(0xae8), _0x138a0e, { 'once': !![] }), document[_0x31392e(0xb66)](_0x31392e(0x855), _0x138a0e, { 'once': !![] }), document[_0x31392e(0xb66)](_0x31392e(0x122), _0x138a0e, { 'once': !![] }), _0x3a4e78(); } function _0x4ec25(_0x40bfb0, _0x321acf) { const _0x2ac7d6 = _0x1c58bc, _0x465549 = _0x2ac7d6(0x2bf) + _0x40bfb0; let _0x5e0189 = document['getElementById'](_0x465549); if (_0x5e0189) return; const _0x2a2380 = _0x2ac7d6(0xbd0) + _0x465549 + '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x321acf === 'ai' ? _0x2ac7d6(0x1e6) : '') + _0x2ac7d6(0x7c2); document[_0x2ac7d6(0x335)]['insertAdjacentHTML'](_0x2ac7d6(0x8e3), _0x2a2380); const _0x387083 = document[_0x2ac7d6(0xad1)](_0x465549), _0x208f0c = () => _0x387083[_0x2ac7d6(0x6e1)](); _0x387083['querySelector'](_0x2ac7d6(0x672))[_0x2ac7d6(0x970)] = _0x208f0c, _0x387083[_0x2ac7d6(0x94b)](_0x2ac7d6(0x631))[_0x2ac7d6(0x970)] = _0x208f0c, _0x387083[_0x2ac7d6(0x94b)]('#diary-action-delete')['onclick'] = () => { _0x812e61(_0x40bfb0), _0x208f0c(); }; if (_0x321acf === 'ai') { if (_0x2ac7d6(0x6c1) === _0x2ac7d6(0x2f8)) { const _0x45d01b = new _0x2aff3f(), _0x54773a = _0x550baf[_0x2ac7d6(0xad1)](_0x2ac7d6(0x7bb)), _0xb376cf = _0x28958c[_0x2ac7d6(0xad1)](_0x2ac7d6(0x5da)), _0x20e941 = _0x150f89[_0x2ac7d6(0xad1)]('snoop-phone-header'); _0x54773a && _0xb376cf && (_0x54773a[_0x2ac7d6(0x948)] = _0x45d01b[_0x2ac7d6(0x569)](_0x2ac7d6(0x15b), { 'hour': '2-digit', 'minute': '2-digit', 'hour12': ![] }), _0xb376cf['textContent'] = _0x45d01b['toLocaleDateString'](_0x2ac7d6(0x15b), { 'month': _0x2ac7d6(0x755), 'day': _0x2ac7d6(0x67c), 'weekday': _0x2ac7d6(0x755) })), _0x20e941 && (_0x20e941[_0x2ac7d6(0x16c)] = _0x2ac7d6(0x581) + _0x45d01b[_0x2ac7d6(0x569)](_0x2ac7d6(0x15b), { 'hour': _0x2ac7d6(0x7eb), 'minute': _0x2ac7d6(0x7eb), 'hour12': ![] }) + _0x2ac7d6(0x82e)); } else _0x387083['querySelector']('#diary-action-reroll')[_0x2ac7d6(0x970)] = () => { _0x5bca20(_0x40bfb0), _0x208f0c(); }; } } async function _0x812e61(_0x529c12) { const _0x2e96ac = _0x1c58bc, _0x21471f = await _0x17d597(_0x2e96ac(0x92e)); if (!_0x21471f) return; const _0x44aed8 = _0x2c45d7[_0x2e96ac(0x8b2)]['find'](_0x38d203 => _0x38d203[_0x2e96ac(0x57a)] === _0x2c45d7[_0x2e96ac(0x62c)]); if (!_0x44aed8) return; const _0x5f3195 = _0x44aed8[_0x2e96ac(0x758)][_0x2e96ac(0x18c)](_0x534688 => _0x534688['timestamp'] === _0x529c12); _0x5f3195 > -0x1 && (_0x44aed8[_0x2e96ac(0x758)]['splice'](_0x5f3195, 0x1), _0x3ac55e(), _0x13e852(), _0x18f071(_0x2e96ac(0xaa5))); } async function _0x5bca20(_0x2e2116) { const _0x2c8ca3 = _0x1c58bc, _0x3958aa = _0x2c45d7[_0x2c8ca3(0x8b2)]['find'](_0x42c412 => _0x42c412[_0x2c8ca3(0x57a)] === _0x2c45d7[_0x2c8ca3(0x62c)]); if (!_0x3958aa) return; const _0x15a4a7 = _0x3958aa[_0x2c8ca3(0x758)][_0x2c8ca3(0x18c)](_0x31c5c3 => _0x31c5c3[_0x2c8ca3(0x782)] === _0x2e2116); _0x15a4a7 > -0x1 && (_0x3958aa[_0x2c8ca3(0x758)]['splice'](_0x15a4a7, 0x1), _0x3ac55e(), _0x13e852(), await _0xae8040()); } function _0x36c76c() { const _0x48112f = _0x1c58bc, _0x59f5e7 = document[_0x48112f(0xad1)](_0x48112f(0x3c6)); _0x59f5e7['innerHTML'] = ''; const _0x4f23ee = _0x2c45d7[_0x48112f(0xb76)]['filter'](_0x570870 => _0x2c45d7[_0x48112f(0x75e)][_0x48112f(0x69b)](_0x42d128 => _0x42d128['type'] === _0x48112f(0x639) && _0x42d128['participantIds'][_0x48112f(0x7a3)](_0x570870['id']))); if (_0x4f23ee['length'] === 0x0) { if (_0x48112f(0x6fc) === 'qhVSY') { _0x59f5e7[_0x48112f(0x16c)] = _0x48112f(0x9a8); return; } else { _0x47fa18(_0x48112f(0xa14)); return; } } _0x4f23ee[_0x48112f(0x4ac)](_0x1fc52d => { const _0x4c1d3d = _0x48112f, _0x193f3d = document[_0x4c1d3d(0xa51)]('li'); _0x193f3d[_0x4c1d3d(0xa5e)] = _0x4c1d3d(0x808), _0x193f3d[_0x4c1d3d(0x2d1)][_0x4c1d3d(0xaee)] = _0x1fc52d['id'], _0x193f3d[_0x4c1d3d(0x16c)] = _0x4c1d3d(0x40b) + (_0x1fc52d['avatar'] || _0x72f264) + _0x4c1d3d(0x681) + _0x1fc52d['name'] + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x193f3d[_0x4c1d3d(0xb66)]('click', () => { const _0x4f4a48 = _0x4c1d3d; _0x4f4a48(0x1e1) !== _0x4f4a48(0x653) ? _0x288df1(_0x1fc52d['id']) : (_0x5d820f[_0x4f4a48(0x400)] = _0x40eaf1[_0x4f4a48(0x97d)](_0xcf699c), _0x5a5e92[_0x4f4a48(0x819)][_0x4f4a48(0x838)] = 0x1); }), _0x193f3d[_0x4c1d3d(0x94b)](_0x4c1d3d(0x840))[_0x4c1d3d(0xb66)](_0x4c1d3d(0x43a), () => { _0x288df1(_0x1fc52d['id']); }), _0x193f3d[_0x4c1d3d(0x94b)](_0x4c1d3d(0x211))[_0x4c1d3d(0xb66)]('click', _0x3c2667 => { const _0x3b9bef = _0x4c1d3d; _0x3b9bef(0x698) !== _0x3b9bef(0x698) ? _0x571239['error'](_0x3b9bef(0x58c), _0x3ad99d) : (_0x3c2667[_0x3b9bef(0x8ea)](), _0x53a1d1(_0x1fc52d['id'])); }), _0x59f5e7[_0x4c1d3d(0x8ce)](_0x193f3d); }); } function _0x288df1(_0x21e7d7) { const _0x1845be = _0x1c58bc; if ('DBAvO' === _0x1845be(0x64b)) _0x3edec6[_0x1845be(0x208)](_0x1845be(0x21d), _0x1bd400); else { const _0x4becdf = _0x132ad2(_0x21e7d7); if (!_0x4becdf) return; _0x2c45d7[_0x1845be(0x62c)] = _0x21e7d7; const _0x21eef3 = _0x2c45d7[_0x1845be(0x8b2)]['find'](_0x3438ea => _0x3438ea[_0x1845be(0x57a)] === _0x21e7d7), _0x409ca4 = _0x21eef3 ? _0x21eef3['entries'][_0x1845be(0x1ea)] : 0x0, _0x31e4c1 = 0x2; _0x2c45d7[_0x1845be(0x20b)] = Math[_0x1845be(0xa01)](0x0, Math[_0x1845be(0x705)](_0x409ca4 / _0x31e4c1) - 0x1), document[_0x1845be(0xad1)](_0x1845be(0x12b))['textContent'] = _0x4becdf[_0x1845be(0xa6a)] + _0x1845be(0x161), _0x13e852(), _0x512ecd('diaryView', _0x1845be(0x2df)); } } function _0x13e852() { const _0x19d1f2 = _0x1c58bc, _0x39d94c = document['getElementById'](_0x19d1f2(0x5e8)), _0x4d62f2 = document[_0x19d1f2(0xad1)](_0x19d1f2(0xb78)); _0x39d94c[_0x19d1f2(0x16c)] = '', _0x4d62f2['innerHTML'] = ''; const _0x67b67b = _0x58b391() || { 'name': '我' }, _0x49b15a = _0x2c45d7[_0x19d1f2(0x8b2)][_0x19d1f2(0x128)](_0x255b13 => _0x255b13[_0x19d1f2(0x57a)] === _0x2c45d7['activeDiaryCharacterId']); if (!_0x49b15a || !_0x49b15a[_0x19d1f2(0x758)] || _0x49b15a[_0x19d1f2(0x758)][_0x19d1f2(0x1ea)] === 0x0) { _0x39d94c['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>', _0x4d62f2['innerHTML'] = _0x19d1f2(0x4c6), document[_0x19d1f2(0xad1)](_0x19d1f2(0x5d3))[_0x19d1f2(0xb66)](_0x19d1f2(0x43a), _0x2efc13), document[_0x19d1f2(0xad1)](_0x19d1f2(0x784))[_0x19d1f2(0xb66)](_0x19d1f2(0x43a), _0xae8040); return; } const _0x104532 = 0x2, _0x10e160 = [..._0x49b15a[_0x19d1f2(0x758)]][_0x19d1f2(0x940)]((_0x4e4233, _0x30af67) => _0x4e4233['timestamp'] - _0x30af67[_0x19d1f2(0x782)]), _0x1ea893 = []; for (let _0x5dda63 = 0x0; _0x5dda63 < _0x10e160[_0x19d1f2(0x1ea)]; _0x5dda63 += _0x104532) { _0x1ea893[_0x19d1f2(0xb49)](_0x10e160[_0x19d1f2(0xa30)](_0x5dda63, _0x5dda63 + _0x104532)); } const _0x2b0f2d = _0x1ea893[_0x19d1f2(0x1ea)]; _0x1ea893[_0x19d1f2(0x4ac)]((_0x197849, _0x4fbb3b) => { const _0x4c8f52 = _0x19d1f2; if (_0x4c8f52(0xaa6) !== _0x4c8f52(0xaa6)) { if (_0x373a1a) { const _0x24ddc1 = _0x1cec59(_0x53c3df[_0x4c8f52(0x975)]); _0x24ddc1 && (delete _0x24ddc1[_0x4c8f52(0x4f8)], _0x4c559d(), _0x104e1f(_0x24ddc1['id'], _0x4c8f52(0x198)), _0x16ca31(_0x4c8f52(0x97b)), _0x4a69fa(!![])); } } else { const _0x18c192 = document[_0x4c8f52(0xa51)]('div'); _0x18c192[_0x4c8f52(0xa5e)] = _0x4c8f52(0x9f2), _0x18c192['id'] = _0x4c8f52(0x98c) + _0x4fbb3b, _0x4fbb3b === _0x2c45d7[_0x4c8f52(0x20b)] && _0x18c192[_0x4c8f52(0x9c4)][_0x4c8f52(0x2ac)](_0x4c8f52(0x134)), _0x197849[_0x4c8f52(0x4ac)](_0x52e977 => { const _0x5501b7 = _0x4c8f52, _0x3b7ab1 = _0x52e977[_0x5501b7(0x7e5)] === _0x5501b7(0xa02) ? 'user' : 'ai', _0x410814 = _0x52e977['author'] === _0x5501b7(0xa02) ? _0x67b67b[_0x5501b7(0xa6a)] : _0x132ad2(_0x52e977['author'])[_0x5501b7(0xa6a)], _0x3a8527 = document['createElement'](_0x5501b7(0x54f)); _0x3a8527[_0x5501b7(0xa5e)] = 'diary-entry\x20' + _0x3b7ab1, _0x3a8527['dataset'][_0x5501b7(0x782)] = _0x52e977[_0x5501b7(0x782)], _0x3a8527[_0x5501b7(0x819)][_0x5501b7(0x74f)] = 'none', _0x3a8527[_0x5501b7(0x819)][_0x5501b7(0x36d)] = '0', _0x3a8527[_0x5501b7(0x16c)] = _0x5501b7(0x4a7) + _0x410814 + _0x5501b7(0x52a) + new Date(_0x52e977['timestamp'])['toLocaleString']('zh-CN') + _0x5501b7(0x697) + _0x52e977[_0x5501b7(0xa3a)][_0x5501b7(0x4db)](/\n/g, '<br>') + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x18c192['appendChild'](_0x3a8527); }), _0x39d94c[_0x4c8f52(0x8ce)](_0x18c192); } }), _0x4d62f2[_0x19d1f2(0x16c)] = _0x19d1f2(0x6d3) + (_0x2c45d7[_0x19d1f2(0x20b)] + 0x1) + _0x19d1f2(0x943) + _0x2b0f2d + _0x19d1f2(0x917), document[_0x19d1f2(0xad1)](_0x19d1f2(0x8a3))[_0x19d1f2(0xa6c)] = _0x2c45d7[_0x19d1f2(0x20b)] === 0x0, document['getElementById'](_0x19d1f2(0x28d))['disabled'] = _0x2c45d7[_0x19d1f2(0x20b)] === _0x2b0f2d - 0x1, document['getElementById'](_0x19d1f2(0x8a3))[_0x19d1f2(0xb66)]('click', _0x2d9f49), document['getElementById'](_0x19d1f2(0x28d))['addEventListener'](_0x19d1f2(0x43a), _0x422b0b), document['getElementById']('diary-write-button')[_0x19d1f2(0xb66)]('click', _0x2efc13), document[_0x19d1f2(0xad1)]('diary-get-reply-button')[_0x19d1f2(0xb66)](_0x19d1f2(0x43a), _0xae8040); } function _0x422b0b() { const _0x14ac30 = _0x1c58bc; if (_0x14ac30(0x7d0) !== _0x14ac30(0x7d0)) _0x2f14b6(); else { if (_0x2c45d7['isAnimatingDiary']) return; const _0x576364 = _0x2c45d7[_0x14ac30(0x20b)], _0x1d07d8 = Math['ceil'](_0x2c45d7['diaries'][_0x14ac30(0x128)](_0x3b5701 => _0x3b5701[_0x14ac30(0x57a)] === _0x2c45d7[_0x14ac30(0x62c)])[_0x14ac30(0x758)][_0x14ac30(0x1ea)] / 0x2); if (_0x576364 >= _0x1d07d8 - 0x1) return; _0x2c45d7[_0x14ac30(0x95b)] = !![]; const _0x4c85e8 = _0x576364 + 0x1, _0x3858f0 = document[_0x14ac30(0xad1)](_0x14ac30(0x98c) + _0x576364), _0x46840c = document[_0x14ac30(0xad1)]('diary-page-' + _0x4c85e8); _0x3858f0 && _0x46840c ? _0x14ac30(0x1be) !== _0x14ac30(0x376) ? (_0x46840c['classList']['add'](_0x14ac30(0xa89)), _0x3858f0[_0x14ac30(0x9c4)]['add'](_0x14ac30(0x20c)), _0x46840c[_0x14ac30(0x9c4)][_0x14ac30(0x2ac)]('is-visible'), setTimeout(() => { const _0x908756 = _0x14ac30; 'DnMyu' !== _0x908756(0x931) ? (_0x3858f0[_0x908756(0x9c4)][_0x908756(0x6e1)]('is-visible', 'is-exiting-left'), _0x46840c[_0x908756(0x9c4)][_0x908756(0x6e1)]('is-entering-from-right'), _0x2c45d7[_0x908756(0x20b)] = _0x4c85e8, _0x13e852(), _0x2c45d7[_0x908756(0x95b)] = ![]) : (_0x1e86df(), _0x5acd84(!![])); }, 0x2bc)) : _0x2edfbe[_0x14ac30(0x208)](_0x14ac30(0xb65), _0x356cff) : _0x2c45d7['isAnimatingDiary'] = ![]; } } function _0x2d9f49() { const _0x5a55e9 = _0x1c58bc; if (_0x2c45d7[_0x5a55e9(0x95b)]) return; const _0x5e8560 = _0x2c45d7[_0x5a55e9(0x20b)]; if (_0x5e8560 <= 0x0) return; _0x2c45d7[_0x5a55e9(0x95b)] = !![]; const _0x3a540f = _0x5e8560 - 0x1, _0x51d4af = document['getElementById'](_0x5a55e9(0x98c) + _0x5e8560), _0x3eadae = document[_0x5a55e9(0xad1)]('diary-page-' + _0x3a540f); _0x51d4af && _0x3eadae ? _0x5a55e9(0xb10) !== _0x5a55e9(0x35b) ? (_0x3eadae[_0x5a55e9(0x9c4)][_0x5a55e9(0x2ac)](_0x5a55e9(0x578)), _0x51d4af['classList'][_0x5a55e9(0x2ac)](_0x5a55e9(0xaab)), _0x3eadae['classList'][_0x5a55e9(0x2ac)](_0x5a55e9(0x134)), setTimeout(() => { const _0x33a15d = _0x5a55e9; _0x33a15d(0x772) === _0x33a15d(0x772) ? (_0x51d4af[_0x33a15d(0x9c4)]['remove'](_0x33a15d(0x134), _0x33a15d(0xaab)), _0x3eadae[_0x33a15d(0x9c4)]['remove'](_0x33a15d(0x578)), _0x2c45d7['diaryCurrentPage'] = _0x3a540f, _0x13e852(), _0x2c45d7[_0x33a15d(0x95b)] = ![]) : _0x5cf4b8(() => { const _0x4845f1 = _0x33a15d; _0x5b7b04[_0x4845f1(0x889)] = _0x4322d3[_0x4845f1(0x291)]; }, 0x0); }, 0x2bc)) : _0x5db7a9[_0x5a55e9(0x7ad)] = _0x31f853[_0x5a55e9(0x7ad)]['filter'](_0x1658fb => _0x1658fb !== _0x3976a8) : 'CSscD' === _0x5a55e9(0xa67) ? _0x3be765[_0x5a55e9(0x16c)] = _0x5a55e9(0x581) + _0xe00a1a[_0x5a55e9(0x569)]('zh-CN', { 'hour': _0x5a55e9(0x7eb), 'minute': _0x5a55e9(0x7eb), 'hour12': ![] }) + _0x5a55e9(0x82e) : _0x2c45d7[_0x5a55e9(0x95b)] = ![]; } function _0x2efc13() { const _0x3aee76 = _0x1c58bc; if (_0x3aee76(0x831) === 'DbctJ') return new Promise(_0x5c4b8f => { const _0x4f10c3 = _0x3aee76, _0x572ae4 = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; document[_0x4f10c3(0x335)][_0x4f10c3(0x900)]('beforeend', _0x572ae4); const _0x9e7158 = document[_0x4f10c3(0xad1)]('diary-write-modal'), _0x14b413 = document['getElementById'](_0x4f10c3(0x81d)), _0x18b40a = document[_0x4f10c3(0xad1)](_0x4f10c3(0x777)), _0x45a7b7 = document['getElementById'](_0x4f10c3(0xab1)), _0x9a58fd = _0x9e7158[_0x4f10c3(0x94b)]('.choice-modal-backdrop'), _0x3d076b = () => { const _0x3551f7 = _0x4f10c3; if (_0x3551f7(0x52d) !== _0x3551f7(0x52d)) { const _0x38c10b = _0x2600b4['createElement']('div'); _0x38c10b[_0x3551f7(0xa5e)] = _0x3551f7(0x556), _0x38c10b[_0x3551f7(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', _0x38c10b[_0x3551f7(0x94b)](_0x3551f7(0x776))[_0x3551f7(0x970)] = () => _0x222165(_0x3551f7(0x9b6)), _0xa2d65a[_0x3551f7(0x8ce)](_0x38c10b), _0x4d357c(_0x364b37)['then'](_0x2e609f => { const _0x8bbb25 = _0x3551f7, _0x53b5a8 = _0x5aaa90[_0x8bbb25(0xad1)](_0x8bbb25(0x5ca)); _0x53b5a8 && _0x2e609f && (_0x53b5a8['src'] = _0x2deaf4[_0x8bbb25(0x97d)](_0x2e609f)); }); } else _0x9e7158[_0x3551f7(0x6e1)](), _0x5c4b8f(); }; _0x18b40a[_0x4f10c3(0x970)] = () => { const _0x4cecb3 = _0x4f10c3; if (_0x4cecb3(0x501) !== _0x4cecb3(0x501)) { let _0x549dcb = _0x3b1a99[_0x4cecb3(0x94b)](_0x4cecb3(0x19e)); !_0x549dcb && (_0x549dcb = _0x559cd5[_0x4cecb3(0xa51)]('div'), _0x549dcb[_0x4cecb3(0xa5e)] = _0x4cecb3(0x8db), _0x549dcb[_0x4cecb3(0x948)] = _0x4cecb3(0x9ae), _0x2e426e[_0x4cecb3(0xad1)](_0x4cecb3(0x5c0))[_0x4cecb3(0x8ce)](_0x549dcb)); } else _0x4dcc57(_0x14b413['value']), _0x3d076b(); }, _0x45a7b7['onclick'] = _0x3d076b, _0x9a58fd['onclick'] = _0x3d076b; }); else { _0x2a98f3[_0x3aee76(0x170)] = [..._0x1d9075], _0x19d51f[_0x3aee76(0x96d)][_0x4600c1['id']] = [..._0x3456bf], _0x3c88fe(); const _0x33ccf8 = _0x5b6e55[_0x3aee76(0x3c4)](_0x2ce63d => _0x2ce63d[_0x3aee76(0x932)] === 'narrator' ? _0x2ce63d['line'] : _0x2ce63d[_0x3aee76(0x932)] + ':\x20' + _0x2ce63d[_0x3aee76(0x14b)])[_0x3aee76(0xae6)]('\x0a\x0a'); _0x28c218[_0x3aee76(0x1ef)][_0x3aee76(0xb49)]({ 'role': _0x3aee76(0x728), 'senderId': _0x368feb['id'], 'timestamp': _0xa19794[_0x3aee76(0x7e3)](), 'isOffline': !![], 'content': _0x33ccf8 }); } } function _0x4dcc57(_0x13331b) { const _0x148812 = _0x1c58bc; if (_0x148812(0x93b) === _0x148812(0x93b)) { const _0x3f3060 = _0x13331b[_0x148812(0x471)](); if (!_0x3f3060 || !_0x2c45d7[_0x148812(0x62c)]) return; let _0x207886 = _0x2c45d7['diaries'][_0x148812(0x128)](_0x514dac => _0x514dac[_0x148812(0x57a)] === _0x2c45d7[_0x148812(0x62c)]); !_0x207886 && (_0x207886 = { 'characterId': _0x2c45d7[_0x148812(0x62c)], 'entries': [] }, _0x2c45d7['diaries'][_0x148812(0xb49)](_0x207886)); _0x207886[_0x148812(0x758)]['push']({ 'timestamp': Date['now'](), 'author': _0x148812(0xa02), 'content': _0x3f3060 }), _0x3ac55e(); const _0x2fdf21 = _0x207886[_0x148812(0x758)][_0x148812(0x1ea)]; _0x2c45d7[_0x148812(0x20b)] = Math[_0x148812(0x705)](_0x2fdf21 / 0x2) - 0x1, _0x13e852(); } else { if (!_0x35cc23) return []; const _0x5344e8 = _0xe781f0[_0x148812(0x5d6)]('\x0a'), _0x58d657 = [], _0x4a6849 = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x51c4b2 of _0x5344e8) { const _0x57457e = _0x51c4b2[_0x148812(0x604)](_0x4a6849); if (_0x57457e) { const _0x20510c = _0x3c0c78(_0x57457e[0x1], 0xa), _0x49ca30 = _0x1255d0(_0x57457e[0x2], 0xa), _0xcbac8 = _0x4e2052(_0x57457e[0x3], 0xa) * (_0x57457e[0x3][_0x148812(0x1ea)] === 0x2 ? 0xa : 0x1), _0x3dee15 = _0x20510c * 0x3c + _0x49ca30 + _0xcbac8 / 0x3e8, _0x42f615 = _0x51c4b2[_0x148812(0x4db)](_0x4a6849, '')[_0x148812(0x471)](); _0x42f615 && _0x58d657[_0x148812(0xb49)]({ 'time': _0x3dee15, 'text': _0x42f615 }); } } return _0x58d657; } } async function _0xae8040() { const _0x2b3e15 = _0x1c58bc, _0x107956 = _0x2c45d7[_0x2b3e15(0x8b2)][_0x2b3e15(0x128)](_0x1a10d0 => _0x1a10d0[_0x2b3e15(0x57a)] === _0x2c45d7['activeDiaryCharacterId']), _0x5e168c = _0x2c45d7[_0x2b3e15(0x62c)], _0x8c0fe6 = _0x132ad2(_0x5e168c); if (!_0x8c0fe6 || _0x2c45d7['isGenerating']) return; _0x4ded3c(!![], _0x2b3e15(0x5a7)), await new Promise(_0x40ea33 => setTimeout(_0x40ea33, 0x32)), _0x2c45d7[_0x2b3e15(0xaa7)] = !![]; let _0x12f048 = []; try { const _0x2c1ce2 = _0x58b391() || { 'name': '你' }, _0x8c92f5 = _0x20fbaa(_0x5e168c), { omniText: _0x3d4f58 } = _0x5b1c3b(_0x5e168c, _0x2c45d7[_0x2b3e15(0x147)]); let _0x228937 = ''; if (_0x8c0fe6[_0x2b3e15(0x7ad)] && _0x8c0fe6[_0x2b3e15(0x7ad)][_0x2b3e15(0x1ea)] > 0x0) { const _0x30adf7 = _0x8c0fe6['linkedWorldBookIds']['map'](_0x53366d => _0x2c45d7[_0x2b3e15(0x538)][_0x2b3e15(0x128)](_0x442eef => _0x442eef['id'] === _0x53366d))['filter'](Boolean)['map'](_0xa23877 => _0x2b3e15(0x3a9) + _0xa23877[_0x2b3e15(0xa6a)] + '\x0a' + _0xa23877[_0x2b3e15(0xa3a)])[_0x2b3e15(0xae6)](''); if (_0x30adf7) _0x228937 = _0x2b3e15(0x3a7) + _0x30adf7; } const _0x23267e = _0x2c1ce2[_0x2b3e15(0x5d7)] ? _0x2b3e15(0x1a4) + _0x2c1ce2[_0x2b3e15(0xa6a)] + '”的补充信息\x0a' + _0x2c1ce2['persona'] : '', _0x33313f = _0x345f9c(); let _0x278174 = '你还没有写日记。'; if (_0x107956 && _0x107956['entries']) { const _0x3d02dd = _0x107956[_0x2b3e15(0x758)][_0x2b3e15(0x662)](_0x244886 => _0x244886[_0x2b3e15(0x7e5)] === _0x2b3e15(0xa02))['pop'](); _0x3d02dd && (_0x2b3e15(0x48a) === 'iqOYl' ? (_0xc63540['worldBooks'] = _0x51a3ca[_0x2b3e15(0x538)]['filter'](_0x23afa0 => _0x23afa0['id'] !== _0x1f6a7f), _0x3d44a6['characters'][_0x2b3e15(0x4ac)](_0x312259 => { const _0x19ea47 = _0x2b3e15; _0x312259[_0x19ea47(0x7ad)] && (_0x312259[_0x19ea47(0x7ad)] = _0x312259[_0x19ea47(0x7ad)][_0x19ea47(0x662)](_0x32c0ea => _0x32c0ea !== _0x5e9fd9)); }), _0x16c2aa(), _0x1ab174(_0x2b3e15(0x86b)), _0x20487f(), _0x2da011(_0x2b3e15(0x330), _0x2b3e15(0x74a))) : _0x278174 = _0x3d02dd[_0x2b3e15(0xa3a)]); } const _0x352511 = _0x2b3e15(0x469) + _0x8c0fe6[_0x2b3e15(0xa6a)] + '”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a' + _0x2c1ce2['name'] + '。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（' + _0x2c1ce2['name'] + '）最新写下的日记内容。Ta写的是：\x0a\x20“' + _0x278174 + _0x2b3e15(0x561) + _0x8c0fe6[_0x2b3e15(0x5d7)] + '\x0a' + _0x23267e + '\x0a' + _0x228937 + _0x2b3e15(0x5db) + new Date()[_0x2b3e15(0x2e3)](_0x2b3e15(0x15b), { 'dateStyle': _0x2b3e15(0x9d4), 'timeStyle': _0x2b3e15(0x31b) }) + _0x2b3e15(0x295) + _0x1ad990(new Date(_0x107956?.['entries']?.['at'](-0x1)?.[_0x2b3e15(0x782)] || Date[_0x2b3e15(0x7e3)]())) + _0x2b3e15(0x477) + (_0x3d4f58 || _0x2b3e15(0xa4c)) + _0x2b3e15(0x854) + (_0x33313f || _0x2b3e15(0x655)) + _0x2b3e15(0x2ce); _0x12f048 = [{ 'role': _0x2b3e15(0x5ff), 'content': _0x352511 }, { 'role': 'user', 'content': _0x2b3e15(0x766) }]; const _0xb4dc8a = await _0x4eb036(_0x12f048); if (_0xb4dc8a) { let _0x357a0a = _0x2c45d7[_0x2b3e15(0x8b2)][_0x2b3e15(0x128)](_0x3a4f3e => _0x3a4f3e[_0x2b3e15(0x57a)] === _0x5e168c); if (!_0x357a0a) { if (_0x2b3e15(0x423) !== _0x2b3e15(0x38b)) _0x357a0a = { 'characterId': _0x5e168c, 'entries': [] }, _0x2c45d7[_0x2b3e15(0x8b2)][_0x2b3e15(0xb49)](_0x357a0a); else { const _0x2a8f55 = _0x25274e[_0x2b3e15(0xad1)](_0x2b3e15(0x965)), _0x52a26b = _0x2a8f55['querySelectorAll'](_0x2b3e15(0x24c)), _0x51be1d = _0x4e05d9['querySelector'](_0x2b3e15(0x2b3)); if (_0x52a26b[_0x2b3e15(0x1ea)] === 0x0) _0x51be1d['textContent'] = _0x2b3e15(0x3ea); else _0x52a26b['length'] > 0x2 ? _0x51be1d[_0x2b3e15(0x948)] = '已选择\x20' + _0x52a26b['length'] + '\x20项' : _0x51be1d[_0x2b3e15(0x948)] = _0x3228c0[_0x2b3e15(0x8c8)](_0x52a26b)[_0x2b3e15(0x3c4)](_0x41ca0b => _0x41ca0b['parentElement'][_0x2b3e15(0x948)][_0x2b3e15(0x471)]())[_0x2b3e15(0xae6)]('、'); } } _0x357a0a[_0x2b3e15(0x758)]['push']({ 'timestamp': Date['now'](), 'author': _0x5e168c, 'content': _0xb4dc8a }), _0x3ac55e(); const _0x2d0d61 = _0x357a0a[_0x2b3e15(0x758)][_0x2b3e15(0x1ea)]; _0x2c45d7[_0x2b3e15(0x20b)] = Math['ceil'](_0x2d0d61 / 0x2) - 0x1, _0x13e852(); } } catch (_0x4d48c6) { _0x2b3e15(0x6ec) === 'IUYNL' ? _0x18f071(_0x2b3e15(0x5a2) + _0x4d48c6['message']) : _0x29bcf0(_0x3d1708[_0x2b3e15(0x6b1)])[_0x2b3e15(0xa0d)](_0x4668e5 => { const _0x26b79c = _0x2b3e15; if (_0x4668e5) _0x13189c[_0x26b79c(0x400)] = _0x16d83d[_0x26b79c(0x97d)](_0x4668e5); }); } finally { _0x4ded3c(![]), _0x2c45d7[_0x2b3e15(0xaa7)] = ![]; } } function _0x569a84() { const _0x195ae5 = _0x1c58bc; if (_0x195ae5(0x139) === _0x195ae5(0x139)) { const _0x2a1279 = document[_0x195ae5(0xad1)](_0x195ae5(0x75c)), _0x3a7a91 = document['getElementById'](_0x195ae5(0x3e6)), _0x1fa81b = document['querySelector']('#meeting-view-screen\x20.chat-input-area'); if (_0x2c45d7[_0x195ae5(0x2f5)] === _0x195ae5(0x6cf)) { if (_0x195ae5(0x64e) !== 'uMcZo') _0x2a1279[_0x195ae5(0x819)]['display'] = _0x195ae5(0xb39), _0x3a7a91[_0x195ae5(0x819)][_0x195ae5(0x974)] = 'block'; else { const _0x491a46 = _0x5b6ece[_0x195ae5(0xad1)]('user-profile-list-container'); _0x491a46[_0x195ae5(0x16c)] = ''; if (_0x1a1f2c[_0x195ae5(0x775)][_0x195ae5(0x1ea)] === 0x0) { _0x491a46[_0x195ae5(0x16c)] = _0x195ae5(0x3e1); return; } _0x3c13ec[_0x195ae5(0x775)][_0x195ae5(0x4ac)](_0x3a2f1a => { const _0xa2c800 = _0x195ae5, _0x156893 = _0x31149a[_0xa2c800(0xa51)](_0xa2c800(0x54f)); _0x156893[_0xa2c800(0xa5e)] = _0xa2c800(0x73a), _0x156893['dataset']['id'] = _0x3a2f1a['id']; const _0x576c06 = _0x3a2f1a['id'] === _0x223c8d[_0xa2c800(0x4d3)] ? _0xa2c800(0x5f1) : ''; _0x156893['innerHTML'] = _0xa2c800(0x265) + (_0x3a2f1a[_0xa2c800(0x37b)] || _0x55c240) + _0xa2c800(0x4b9) + _0x3a2f1a[_0xa2c800(0xa6a)] + _0x576c06 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>' + _0x3a2f1a['persona'][_0xa2c800(0x5cd)](0x0, 0x64) + _0xa2c800(0xaa2), _0x156893['addEventListener'](_0xa2c800(0x43a), () => _0x2ed492(_0x3a2f1a['id'])), _0x491a46['appendChild'](_0x156893); }); } } else 'kSDZk' !== _0x195ae5(0x675) ? (_0x350c23(_0xf724b8), _0x21c6fe()) : (_0x2a1279[_0x195ae5(0x819)]['display'] = _0x195ae5(0x4e9), _0x3a7a91[_0x195ae5(0x819)][_0x195ae5(0x974)] = _0x195ae5(0xb39), setTimeout(() => { const _0x3a30d5 = _0x195ae5; if (_0x3a30d5(0xb89) !== _0x3a30d5(0x224)) { const _0x4f6986 = _0x2a1279[_0x3a30d5(0x94b)]('#message-anchor'); if (_0x4f6986) _0x4f6986[_0x3a30d5(0x2e6)]({ 'behavior': _0x3a30d5(0xb4d), 'block': _0x3a30d5(0x803) }); else { if ('xesYL' !== _0x3a30d5(0x658)) { const _0x23ca0d = _0x1456e7(_0x407d38['value']); if (_0x109767(_0x23ca0d) || _0x23ca0d <= 0x0) { _0x294b21('请输入有效的转账金额！'); return; } const _0x3b09f3 = _0x1313c1(); let _0x18feb8 = null; _0x3b09f3['type'] === _0x3a30d5(0x62a) ? _0x18feb8 = _0x458097[_0x3a30d5(0x82f)] : _0x18feb8 = _0x3b09f3[_0x3a30d5(0x402)][0x0]; const _0x16cf3a = _0x20e133(_0x3b09f3['id']), _0x13f20e = { 'role': _0x3a30d5(0xa02), 'type': _0x3a30d5(0x262), 'content': _0x3a30d5(0xa99) + (_0x2b1e49(_0x18feb8)?.[_0x3a30d5(0xa6a)] || '未知') + _0x3a30d5(0x255) + _0x23ca0d + ']', 'amount': _0x23ca0d, 'recipientId': _0x18feb8, 'senderId': _0x16cf3a['id'], 'timestamp': _0x4f98f2[_0x3a30d5(0x7e3)]() }; _0x107c3c[_0x3a30d5(0x1ef)]['push'](_0x13f20e), _0x37afda(), _0xde7d3e(), _0x32f3fd[_0x3a30d5(0x9c4)]['remove']('show'); } else _0x2a1279['scrollTop'] = _0x2a1279['scrollHeight']; } } else { _0x3d6579['conversationHistory'] = [], _0x1a65e1(); return; } }, 0x32)); _0x1fa81b['style']['display'] = _0x195ae5(0x4e9); } else _0x376f34[_0x195ae5(0x208)](_0x195ae5(0x1dd) + _0x24a2fe[_0x195ae5(0xa6a)] + '\x20(' + _0x1131f7['id'] + ')\x20恢复头像失败:', _0xd26dd0); } function _0x133bbf() { const _0x12c3fb = _0x1c58bc; if (_0x12c3fb(0x49c) === _0x12c3fb(0x49c)) { const _0x239ed5 = document['getElementById'](_0x12c3fb(0x502)), _0x255f29 = document[_0x12c3fb(0xad1)](_0x12c3fb(0x213)); if (_0x2c45d7['activeMeetingScriptQueue'][_0x12c3fb(0x1ea)] > 0x0) { if (_0x12c3fb(0x1a2) !== _0x12c3fb(0x879)) { const _0x4958a6 = _0x2c45d7[_0x12c3fb(0x170)]['shift'](); _0x239ed5['textContent'] = _0x4958a6['speaker'] === _0x12c3fb(0x901) ? '旁白' : _0x4958a6[_0x12c3fb(0x932)], _0x255f29[_0x12c3fb(0x948)] = _0x4958a6[_0x12c3fb(0x14b)], _0x4958a6[_0x12c3fb(0x932)] !== _0x12c3fb(0x901) && _0x2680a4(_0x2c45d7[_0x12c3fb(0x975)], _0x4958a6[_0x12c3fb(0x69f)]); } else _0x4a3b30[_0x12c3fb(0x147)] = _0x632213['id'], _0x118633(), _0x5b4325(); } else { if (_0x12c3fb(0x9bc) === _0x12c3fb(0x331)) { const _0x58dc8b = _0x2bc96a(_0x1d547c['authorId']); _0x58dc8b && (_0x3126bc = _0x58dc8b[_0x12c3fb(0xa6a)], _0x5450a9 = _0x58dc8b['avatar']); } else { const _0x5ba78b = _0x2c45d7[_0x12c3fb(0x96d)][_0x2c45d7[_0x12c3fb(0x975)]]; if (_0x5ba78b && _0x5ba78b[_0x12c3fb(0x1ea)] > 0x0) { if (_0x12c3fb(0x21f) !== _0x12c3fb(0x21f)) { const _0x10607b = _0x4d5ed2[_0x12c3fb(0x2d1)][_0x12c3fb(0x9ba)], _0x39af7b = _0x5f00fe[_0x12c3fb(0x61a)]('.wb-entry-item\x20input[data-category-id=\x22' + _0x10607b + '\x22]'), _0x21c291 = _0x4447a7[_0x12c3fb(0x61a)]('.wb-entry-item\x20input[data-category-id=\x22' + _0x10607b + _0x12c3fb(0x946)); _0x21c291['length'] > 0x0 && _0x21c291[_0x12c3fb(0x1ea)] < _0x39af7b['length'] && (_0x130c03[_0x12c3fb(0x8be)] = !![]); } else { _0x2c45d7[_0x12c3fb(0x170)] = [..._0x5ba78b]; const _0x566227 = _0x2c45d7['activeMeetingScriptQueue']['shift'](); _0x239ed5[_0x12c3fb(0x948)] = _0x566227[_0x12c3fb(0x932)] === _0x12c3fb(0x901) ? '旁白' : _0x566227[_0x12c3fb(0x932)], _0x255f29[_0x12c3fb(0x948)] = _0x566227[_0x12c3fb(0x14b)], _0x566227['speaker'] !== _0x12c3fb(0x901) && _0x2680a4(_0x2c45d7[_0x12c3fb(0x975)], _0x566227[_0x12c3fb(0x69f)]); } } else _0x12c3fb(0x738) === _0x12c3fb(0x2c8) ? (_0x171f30(_0x140efe), _0x11f900[_0x12c3fb(0x57f)](_0x12c3fb(0xa2b), _0x2cbb50), _0x6e5744['removeEventListener'](_0x12c3fb(0x208), _0x2a0055), _0x59bc24['src'] = '', _0x2839b6[_0x12c3fb(0x6e1)]()) : (_0x239ed5[_0x12c3fb(0x948)] = '旁白', _0x255f29['textContent'] = _0x12c3fb(0xab6)); } } } else _0x470936[_0x12c3fb(0x3ae)](_0x12c3fb(0x199) + _0x160138[_0x12c3fb(0x147)], _0x564758[_0x12c3fb(0x39b)](_0x3ec157[_0x12c3fb(0x1ef)])); } async function _0x2680a4(_0x5ee0ea, _0x217965) { const _0xa5baf1 = _0x1c58bc, _0xcab0e3 = document[_0xa5baf1(0xad1)](_0xa5baf1(0x891)), _0x3a9d6b = document[_0xa5baf1(0xad1)](_0xa5baf1(0x686)), _0x4e4293 = _0x132ad2(_0x5ee0ea), _0x5a3229 = _0x4e4293?.[_0xa5baf1(0x4f8)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }, _0x311ca4 = 0x50 * _0x5a3229[_0xa5baf1(0xb8c)]; _0x3a9d6b[_0xa5baf1(0x819)][_0xa5baf1(0xb33)] = _0x311ca4 + '%', _0x3a9d6b['style']['width'] = _0x311ca4 + '%', _0x3a9d6b[_0xa5baf1(0x819)][_0xa5baf1(0xb12)] = _0x5a3229['x'] + '%', _0x3a9d6b['style'][_0xa5baf1(0xaac)] = _0x5a3229['y'] + '%', _0x3a9d6b[_0xa5baf1(0x819)][_0xa5baf1(0xa8f)] = 'translate(-50%,\x20-100%)', _0x3a9d6b[_0xa5baf1(0x819)]['bottom'] = 'auto'; const _0x2fbb8f = [_0xa5baf1(0x198), _0xa5baf1(0x59d), 'angry', _0xa5baf1(0x453), _0xa5baf1(0x46c)], _0x4b90c6 = _0x2fbb8f[_0xa5baf1(0x7a3)](_0x217965) ? _0x217965 : _0xa5baf1(0x198); try { if (_0xa5baf1(0x787) !== _0xa5baf1(0x464)) { const _0x1ddc73 = await _0x262fce(_0xa5baf1(0x65e) + _0x4b90c6 + '_' + _0x5ee0ea); if (_0x1ddc73) { if (_0xcab0e3[_0xa5baf1(0x400)] && _0xcab0e3['style'][_0xa5baf1(0x838)] !== '0') { if ('UBsQc' === _0xa5baf1(0xab2)) _0xcab0e3[_0xa5baf1(0x819)][_0xa5baf1(0x838)] = 0x0, setTimeout(() => { const _0xa01b96 = _0xa5baf1; _0xcab0e3['src'] = URL[_0xa01b96(0x97d)](_0x1ddc73), _0xcab0e3[_0xa01b96(0x819)]['opacity'] = 0x1; }, 0x96); else { const _0x2769ee = _0x38ce38['target'][_0xa5baf1(0xb1f)][0x0]; if (!_0x2769ee) return; const _0x346024 = _0x45066c[_0xa5baf1(0x97d)](_0x2769ee); _0xbe8aa7[_0xa5baf1(0x819)]['backgroundImage'] = _0xa5baf1(0xbce) + _0x346024 + '\x27)'; } } else _0xcab0e3[_0xa5baf1(0x400)] = URL[_0xa5baf1(0x97d)](_0x1ddc73), _0xcab0e3[_0xa5baf1(0x819)][_0xa5baf1(0x838)] = 0x1; } else { const _0x3277d7 = await _0x262fce(_0xa5baf1(0x48f) + _0x5ee0ea); _0xcab0e3[_0xa5baf1(0x400)] = _0x3277d7 ? URL[_0xa5baf1(0x97d)](_0x3277d7) : ''; } } else _0x1d816d(_0x163ed1, -0x1), _0x4fa806[_0xa5baf1(0x889)] = _0xd09c42['scrollHeight']; } catch (_0xb143a7) { console[_0xa5baf1(0x208)]('加载立绘失败:', _0xb143a7), _0xcab0e3[_0xa5baf1(0x400)] = ''; } } let _0x3ed53f = ![], _0x2ae80f = { 'isDragging': ![], 'isResizing': ![], 'startX': 0x0, 'startY': 0x0, 'startLeft': 0x0, 'startTop': 0x0, 'startWidth': 0x0, 'startHeight': 0x0 }; const _0x92770f = document[_0x1c58bc(0xad1)](_0x1c58bc(0x6f5)), _0x47874a = document[_0x1c58bc(0xad1)](_0x1c58bc(0x2fb)), _0x367abb = document[_0x1c58bc(0xad1)](_0x1c58bc(0x392)), _0x452e8f = document[_0x1c58bc(0xad1)](_0x1c58bc(0x4a0)), _0x116e04 = document[_0x1c58bc(0xad1)]('galgame-sprite-controls'), _0x467ff1 = document[_0x1c58bc(0xad1)]('galgame-sprite-container'), _0x158505 = document[_0x1c58bc(0xad1)]('sprite-resize-handle'), _0x2b88e8 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x5aa)); let _0x298e41 = {}; function _0x165b90() { const _0x4b5647 = _0x1c58bc, _0x3d41c2 = _0x132ad2(_0x2c45d7['activeMeetingCharId']); if (!_0x3d41c2) return; _0x3ed53f = !![], _0x116e04[_0x4b5647(0x819)][_0x4b5647(0x974)] = _0x4b5647(0x4e9); const _0x518f13 = _0x3d41c2[_0x4b5647(0x4f8)] || { 'x': 0x32, 'y': 0x64, 'scale': 0x1 }; document[_0x4b5647(0xad1)](_0x4b5647(0x2c5))[_0x4b5647(0x82f)] = _0x518f13['x'], document[_0x4b5647(0xad1)]('sprite-slider-y')[_0x4b5647(0x82f)] = _0x518f13['y'], document[_0x4b5647(0xad1)](_0x4b5647(0xb84))[_0x4b5647(0x82f)] = _0x518f13[_0x4b5647(0xb8c)] * 0x64, _0x298e41 = { ..._0x518f13 }, document[_0x4b5647(0xad1)](_0x4b5647(0x41d))['style'][_0x4b5647(0x974)] = _0x4b5647(0xb39), document['getElementById'](_0x4b5647(0xbd7))[_0x4b5647(0x819)][_0x4b5647(0x974)] = _0x4b5647(0xb39); } function _0xcf2c17(_0x572949 = ![]) { const _0x10cd33 = _0x1c58bc; _0x3ed53f = ![], _0x116e04[_0x10cd33(0x819)][_0x10cd33(0x974)] = _0x10cd33(0xb39), document[_0x10cd33(0xad1)](_0x10cd33(0x41d))[_0x10cd33(0x819)][_0x10cd33(0x974)] = 'block', document['getElementById'](_0x10cd33(0xbd7))['style']['display'] = _0x10cd33(0x4e9); if (!_0x572949) { if (_0x10cd33(0x7da) !== _0x10cd33(0x7da)) _0x76ea3f('home', 'chat'); else { const _0x50d9f6 = _0x132ad2(_0x2c45d7[_0x10cd33(0x975)]); _0x50d9f6 && (_0x50d9f6[_0x10cd33(0x4f8)] = _0x298e41, _0x2680a4(_0x2c45d7[_0x10cd33(0x975)], 'normal')); } } } function _0x49db7e() { const _0x2a9536 = _0x1c58bc, _0x3f30f6 = _0x132ad2(_0x2c45d7[_0x2a9536(0x975)]); if (!_0x3f30f6) return; const _0x164510 = parseFloat(document[_0x2a9536(0xad1)](_0x2a9536(0x2c5))[_0x2a9536(0x82f)]), _0x347c0c = parseFloat(document[_0x2a9536(0xad1)](_0x2a9536(0x7e9))[_0x2a9536(0x82f)]), _0x564beb = parseFloat(document[_0x2a9536(0xad1)](_0x2a9536(0xb84))[_0x2a9536(0x82f)]) / 0x64; _0x3f30f6[_0x2a9536(0x4f8)] = { 'x': _0x164510, 'y': _0x347c0c, 'scale': _0x564beb }, _0x3ac55e(), _0x18f071('哼，就按你说的办好了。'), _0xcf2c17(!![]); } function _0x59bbc3() { const _0x43b652 = _0x1c58bc; if (_0x43b652(0x786) === _0x43b652(0x786)) _0x17d597(_0x43b652(0x702))[_0x43b652(0xa0d)](_0x5ee19c => { const _0x581cfd = _0x43b652; if (_0x5ee19c) { const _0x3a3e64 = _0x132ad2(_0x2c45d7[_0x581cfd(0x975)]); _0x3a3e64 && (delete _0x3a3e64[_0x581cfd(0x4f8)], _0x3ac55e(), _0x2680a4(_0x3a3e64['id'], 'normal'), _0x18f071('已恢复默认。'), _0xcf2c17(!![])); } }); else { const _0x25e494 = new _0x163a28(); _0x25e494['onloadend'] = () => _0x238202(_0x25e494[_0x43b652(0xb7b)]), _0x25e494[_0x43b652(0x168)] = _0x3a953a, _0x25e494[_0x43b652(0x9f7)](_0x23772d); } } function _0x4e8fba() { const _0x2bf24d = _0x1c58bc; if (!_0x3ed53f) return; const _0xff6aed = _0x2c45d7['activeMeetingCharId'], _0x2fe973 = _0x132ad2(_0xff6aed); if (!_0x2fe973) return; const _0x42aa7c = parseFloat(document[_0x2bf24d(0xad1)]('sprite-slider-x')[_0x2bf24d(0x82f)]), _0xf4513c = parseFloat(document[_0x2bf24d(0xad1)](_0x2bf24d(0x7e9))['value']), _0x2710a2 = parseFloat(document[_0x2bf24d(0xad1)]('sprite-slider-scale')[_0x2bf24d(0x82f)]) / 0x64; _0x2fe973[_0x2bf24d(0x4f8)] = { 'x': _0x42aa7c, 'y': _0xf4513c, 'scale': _0x2710a2 }; const _0x44f6fb = document['getElementById'](_0x2bf24d(0x686)), _0x488992 = 0x50 * _0x2710a2; _0x44f6fb[_0x2bf24d(0x819)]['height'] = _0x488992 + '%', _0x44f6fb[_0x2bf24d(0x819)][_0x2bf24d(0x8e4)] = _0x488992 + '%', _0x44f6fb[_0x2bf24d(0x819)]['left'] = _0x42aa7c + '%', _0x44f6fb[_0x2bf24d(0x819)][_0x2bf24d(0xaac)] = _0xf4513c + '%', _0x44f6fb[_0x2bf24d(0x819)][_0x2bf24d(0xa8f)] = _0x2bf24d(0x612); } document[_0x1c58bc(0xad1)](_0x1c58bc(0x2c5))[_0x1c58bc(0xb66)](_0x1c58bc(0x329), _0x4e8fba), document[_0x1c58bc(0xad1)](_0x1c58bc(0x7e9))[_0x1c58bc(0xb66)]('input', _0x4e8fba), document[_0x1c58bc(0xad1)](_0x1c58bc(0xb84))[_0x1c58bc(0xb66)](_0x1c58bc(0x329), _0x4e8fba), _0x92770f['addEventListener'](_0x1c58bc(0x43a), _0x165b90), _0x47874a['addEventListener'](_0x1c58bc(0x43a), _0x49db7e), _0x367abb[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0xcf2c17(![])), _0x452e8f[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x59bbc3); function _0x4b49ff(_0x113271) { const _0x35d48b = _0x1c58bc, _0x1112fd = _0x132ad2(_0x113271); if (!_0x1112fd) return; const _0x3170a7 = _0x2c45d7['chats']['find'](_0x4b86b3 => _0x4b86b3[_0x35d48b(0x1a7)] === 'private' && _0x4b86b3[_0x35d48b(0x402)][_0x35d48b(0x7a3)](_0x113271)), _0x184a06 = _0x16e371(_0x3170a7['id']), _0x298626 = _0x2c45d7[_0x35d48b(0x1ef)][_0x35d48b(0x662)](_0x9f33cc => _0x9f33cc[_0x35d48b(0xa03)])[_0x35d48b(0x247)](), _0x5cc078 = document[_0x35d48b(0xad1)](_0x35d48b(0x502)), _0x29fb05 = document[_0x35d48b(0xad1)](_0x35d48b(0x213)); let _0xde4c93 = null; if (_0x298626) { if (_0x298626['role'] === _0x35d48b(0x728)) { const _0x3e3d79 = _0x2c45d7[_0x35d48b(0x96d)][_0x113271]; _0x3e3d79 && _0x3e3d79[_0x35d48b(0x1ea)] > 0x0 && (_0xde4c93 = _0x3e3d79['at'](-0x1)); } else { if (_0x35d48b(0xa80) === _0x35d48b(0xa80)) _0xde4c93 = { 'speaker': _0x184a06[_0x35d48b(0xa6a)], 'line': _0x298626[_0x35d48b(0xa3a)], 'emotion': 'normal' }; else { if (_0x52e5e8[_0x35d48b(0x95b)]) return; const _0x2656ce = _0x537b84[_0x35d48b(0x20b)], _0x27d7a0 = _0x55bd00[_0x35d48b(0x705)](_0x274486[_0x35d48b(0x8b2)][_0x35d48b(0x128)](_0x254514 => _0x254514[_0x35d48b(0x57a)] === _0x3cb016[_0x35d48b(0x62c)])[_0x35d48b(0x758)]['length'] / 0x2); if (_0x2656ce >= _0x27d7a0 - 0x1) return; _0x13dfab['isAnimatingDiary'] = !![]; const _0x213602 = _0x2656ce + 0x1, _0x389bc4 = _0x9e4ec['getElementById'](_0x35d48b(0x98c) + _0x2656ce), _0x4db580 = _0x3c4a73[_0x35d48b(0xad1)](_0x35d48b(0x98c) + _0x213602); _0x389bc4 && _0x4db580 ? (_0x4db580['classList']['add']('is-entering-from-right'), _0x389bc4[_0x35d48b(0x9c4)][_0x35d48b(0x2ac)](_0x35d48b(0x20c)), _0x4db580[_0x35d48b(0x9c4)]['add'](_0x35d48b(0x134)), _0x508fe4(() => { const _0x20c25f = _0x35d48b; _0x389bc4[_0x20c25f(0x9c4)][_0x20c25f(0x6e1)](_0x20c25f(0x134), _0x20c25f(0x20c)), _0x4db580[_0x20c25f(0x9c4)][_0x20c25f(0x6e1)](_0x20c25f(0xa89)), _0xff7c97['diaryCurrentPage'] = _0x213602, _0x17c1af(), _0x329827['isAnimatingDiary'] = ![]; }, 0x2bc)) : _0x306a17[_0x35d48b(0x95b)] = ![]; } } } if (_0xde4c93) { if ('bualP' !== _0x35d48b(0x182)) { _0x31e821(_0x35d48b(0x526)); return; } else _0x5cc078[_0x35d48b(0x948)] = _0xde4c93['speaker'] === _0x35d48b(0x901) ? '旁白' : _0xde4c93['speaker'], _0x29fb05[_0x35d48b(0x948)] = _0xde4c93[_0x35d48b(0x14b)], _0xde4c93[_0x35d48b(0x932)] === _0x1112fd['name'] ? _0x2680a4(_0x113271, _0xde4c93[_0x35d48b(0x69f)]) : _0x2680a4(_0x113271, _0x35d48b(0x198)); } else _0x35d48b(0x676) !== _0x35d48b(0x3b5) ? (_0x5cc078[_0x35d48b(0x948)] = _0x1112fd[_0x35d48b(0xa6a)], _0x29fb05[_0x35d48b(0x948)] = _0x35d48b(0x36f), _0x2680a4(_0x113271, _0x35d48b(0x198))) : (_0xefe0ab['quotedMessage'] = { 'sender': _0x4e390d[0x1][_0x35d48b(0x471)](), 'content': _0x8e4f50[0x2][_0x35d48b(0x471)]() }, _0x105ecc[_0x35d48b(0xa3a)] = _0x36e539['substring'](_0x217a0b[0x0][_0x35d48b(0x1ea)])[_0x35d48b(0x471)]()); } function _0x29e482() { const _0x35d887 = _0x1c58bc, _0x5637dd = new Date(), _0x55f88c = document['getElementById'](_0x35d887(0x155)), _0xd00670 = document[_0x35d887(0xad1)]('galgame-date'); if (_0x55f88c && _0xd00670) { const _0x10ef5e = String(_0x5637dd[_0x35d887(0x408)]())['padStart'](0x2, '0'), _0x140e37 = String(_0x5637dd[_0x35d887(0xb70)]())[_0x35d887(0x466)](0x2, '0'); _0x55f88c['textContent'] = _0x10ef5e + ':' + _0x140e37; const _0x48ad63 = _0x5637dd[_0x35d887(0x571)]() + 0x1, _0xcb6032 = _0x5637dd[_0x35d887(0x41f)](), _0x174721 = [_0x35d887(0x6c5), _0x35d887(0x987), _0x35d887(0x49f), _0x35d887(0x4a8), _0x35d887(0x954), _0x35d887(0x89a), _0x35d887(0x749)][_0x5637dd[_0x35d887(0xa00)]()]; _0xd00670['textContent'] = _0x48ad63 + '月' + _0xcb6032 + '日\x20' + _0x174721; } } const _0x4e5935 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x378)), _0x206039 = document['getElementById']('chat-listen-together-button'), _0x1916aa = document[_0x1c58bc(0xad1)](_0x1c58bc(0x6f1)), _0x4ae1d2 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x6cb)), _0x310291 = document['getElementById']('listen-together-song-list'), _0x3a3d7b = document[_0x1c58bc(0xad1)](_0x1c58bc(0x7ec)), _0x17da8e = document['getElementById']('listen-together-ui'), _0x189ed8 = document[_0x1c58bc(0xad1)]('lt-ui-close-btn'), _0x10099f = document[_0x1c58bc(0xad1)]('lt-ui-lyrics-container'); let _0x3429e0 = [], _0x53056d = ![]; async function _0x2cd98f() { const _0x53e072 = _0x1c58bc; if (!_0x2c45d7['activeChatId']) return; _0x310291[_0x53e072(0x16c)] = _0x53e072(0x549), _0x4e5935[_0x53e072(0x9c4)][_0x53e072(0x2ac)]('show'); const _0x3a1e6c = await _0x357d19(); if (_0x3a1e6c[_0x53e072(0x1ea)] === 0x0) { _0x310291[_0x53e072(0x16c)] = _0x53e072(0x6f7); return; } _0x310291[_0x53e072(0x16c)] = '', _0x3a1e6c[_0x53e072(0x4ac)](_0x35c9a6 => { const _0x1b32f9 = _0x53e072, _0x360bc1 = document[_0x1b32f9(0xa51)](_0x1b32f9(0x54f)); _0x360bc1['className'] = 'music-library-item'; const _0x491795 = _0x35c9a6[_0x1b32f9(0x696)] ? URL[_0x1b32f9(0x97d)](_0x35c9a6['cover']) : _0x72f264; _0x360bc1[_0x1b32f9(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + _0x491795 + _0x1b32f9(0xb9d) + (_0x35c9a6[_0x1b32f9(0x71a)][_0x1b32f9(0x6fd)] || _0x1b32f9(0x370)) + _0x1b32f9(0x410) + (_0x35c9a6[_0x1b32f9(0x71a)]['歌手'] || _0x1b32f9(0x649)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0x360bc1['addEventListener'](_0x1b32f9(0x43a), () => { _0x2c2cf1(_0x35c9a6); }), _0x310291[_0x1b32f9(0x8ce)](_0x360bc1); }); } function _0x239f1e() { const _0x1b983f = _0x1c58bc; _0x4e5935[_0x1b983f(0x9c4)][_0x1b983f(0x6e1)](_0x1b983f(0x944)); } async function _0x2c2cf1(_0x3197dc) { const _0xbd94b3 = _0x1c58bc; if (!_0x2c45d7[_0xbd94b3(0x147)] || !_0x3197dc) return; let _0x2ff363 = null; if (_0x3197dc['cover']) try { _0x2ff363 = 'music_cover_' + Date[_0xbd94b3(0x7e3)]() + '_' + Math['random'](), await _0x5941fe(_0x2ff363, _0x3197dc[_0xbd94b3(0x696)]); } catch (_0xeced4) { console[_0xbd94b3(0x208)](_0xbd94b3(0x721), _0xeced4); } const _0xba77bf = { 'role': _0xbd94b3(0xa02), 'type': _0xbd94b3(0x1f1), 'content': _0xbd94b3(0x2d0) + _0x3197dc['info'][_0xbd94b3(0x6fd)] + ']', 'songId': _0x3197dc['id'], 'songName': _0x3197dc[_0xbd94b3(0x71a)]['歌曲名称'], 'artist': _0x3197dc[_0xbd94b3(0x71a)]['歌手'], 'coverId': _0x2ff363, 'timestamp': Date['now']() }; _0x2c45d7[_0xbd94b3(0x1ef)][_0xbd94b3(0xb49)](_0xba77bf), _0x1892f0(), _0xd1d472(), _0x239f1e(), setTimeout(_0x4ce144, 0x64); } _0x206039['addEventListener']('click', _0x2cd98f), _0x1916aa[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), _0x239f1e), _0x4ae1d2['addEventListener']('click', _0x239f1e); async function _0x377be0(_0xb41637, _0xbbfd0d, _0x4f8da9) { const _0x1cd842 = _0x1c58bc; if (_0x1cd842(0x418) !== _0x1cd842(0x418)) _0x3b99e7[_0x1cd842(0xad1)](_0x1cd842(0x791) + _0x3e0046 + _0x1cd842(0x484))[_0x1cd842(0x819)]['backgroundImage'] = '', _0x417b26['getElementById'](_0x1cd842(0x791) + _0x3ac11b + _0x1cd842(0xb21))[_0x1cd842(0x82f)] = ''; else { if (_0x53056d) return; _0x53056d = !![]; try { const _0x41adf1 = _0x2c45d7[_0x1cd842(0x75e)][_0x1cd842(0x128)](_0x17b1e0 => _0x17b1e0['activeListenSession'] && _0x17b1e0[_0x1cd842(0x7ba)][_0x1cd842(0x958)]), _0x54c402 = _0x5c10dc(); if (_0x41adf1 && _0x41adf1['id'] !== _0x54c402['id']) 'deslU' === _0x1cd842(0xb69) ? (_0x41adf1[_0x1cd842(0x7ba)] = null, _0x18f071('已自动断开与其他人的听歌同步。'), _0x3ac55e()) : (_0x97be61[_0x1cd842(0x819)]['display'] = _0x1cd842(0xb39), _0x1ebf14[_0x1cd842(0xad1)](_0x1cd842(0x381))[_0x1cd842(0x819)][_0x1cd842(0x974)] = 'flex'); else _0x41adf1 && _0x41adf1['id'] === _0x54c402['id'] && ('OklaV' !== 'SvzQH' ? _0x18f071(_0x1cd842(0x7b0)) : _0x27d69d[_0x1cd842(0x948)] = '已选择\x20' + _0x28a30b[_0x1cd842(0x1ea)] + '\x20项'); _0x4ded3c(!![], _0x1cd842(0x6c9)); if (!_0x54c402) { if (_0x1cd842(0x742) === _0x1cd842(0x992)) _0x5b7dc5 = _0x374369['linkedWorldBookIds'][_0x1cd842(0x3c4)](_0x4b5f12 => _0x440db5[_0x1cd842(0x538)][_0x1cd842(0x128)](_0x28467b => _0x28467b['id'] === _0x4b5f12))['filter'](_0x5d84f3)[_0x1cd842(0x3c4)](_0x4e2756 => _0x1cd842(0x4ab) + _0x4e2756['name'] + _0x1cd842(0xaef) + _0x4e2756[_0x1cd842(0xa3a)])['join'](''); else { _0x4ded3c(![]), _0x18f071(_0x1cd842(0xa95)); return; } } const _0x1c5fd5 = await _0x401645(_0xb41637); if (!_0x1c5fd5) { _0x4ded3c(![]), _0x18f071(_0x1cd842(0x349)); return; } _0x54c402[_0x1cd842(0x7ba)] = { 'isActive': !![], 'songId': _0xb41637, 'leaderId': 'user', 'songName': _0x1c5fd5[_0x1cd842(0x71a)][_0x1cd842(0x6fd)], 'artist': _0x1c5fd5[_0x1cd842(0x71a)]['歌手'], 'cover': _0x1c5fd5[_0x1cd842(0x696)] }, _0x3ac55e(), document[_0x1cd842(0xad1)]('lt-ui-cover-art')[_0x1cd842(0x400)] = _0x1c5fd5[_0x1cd842(0x696)] ? URL[_0x1cd842(0x97d)](_0x1c5fd5[_0x1cd842(0x696)]) : _0x72f264, document[_0x1cd842(0xad1)](_0x1cd842(0x39a))[_0x1cd842(0x948)] = _0x1c5fd5[_0x1cd842(0x71a)][_0x1cd842(0x6fd)], document['getElementById']('lt-ui-song-artist')[_0x1cd842(0x948)] = _0x1c5fd5[_0x1cd842(0x71a)]['歌手'], _0x568091(_0x1c5fd5), _0x17da8e[_0x1cd842(0x819)]['display'] = _0x1cd842(0x9e5), setTimeout(() => _0x17da8e['classList'][_0x1cd842(0x2ac)](_0x1cd842(0x944)), 0xa), _0x4f8da9[_0x1cd842(0x16c)] = _0x1cd842(0x769) + _0x4f8da9[_0x1cd842(0x94b)](_0x1cd842(0x9e8))[_0x1cd842(0x236)], _0x2c45d7[_0x1cd842(0x1ef)][_0xbbfd0d] && (_0x2c45d7[_0x1cd842(0x1ef)][_0xbbfd0d][_0x1cd842(0x243)] = !![], _0x1892f0()), _0x4ded3c(![]), _0x38a987(_0xb41637, [_0xb41637]), _0x392027(_0x1c5fd5, !![]); } finally { _0x53056d = ![]; } } } function _0x40a952() { const _0xdb03a5 = _0x1c58bc; if (_0xdb03a5(0x564) !== _0xdb03a5(0x564)) _0xdc984a[_0xdb03a5(0x400)] && (_0x5adb16[_0xdb03a5(0x24b)] ? _0x4d4c7c['play']() : _0xf1ee3c[_0xdb03a5(0x37d)]()); else { const _0x49c5e4 = _0x2c45d7[_0xdb03a5(0x75e)][_0xdb03a5(0x128)](_0x5623d8 => _0x5623d8[_0xdb03a5(0x7ba)] && _0x5623d8[_0xdb03a5(0x7ba)][_0xdb03a5(0x958)]); if (_0x49c5e4) { if ('HylFZ' !== _0xdb03a5(0x641)) { if (_0x2ff2ba) _0x8a182a(_0x70df2c); const _0x3b6eda = _0xcadebc[_0xdb03a5(0xb6a)][_0xdb03a5(0x4b4)](_0xdb03a5(0xb17)); if (!_0x3b6eda) return; const _0x16e7fc = _0x3b6eda['dataset']['id']; if (!_0x16e7fc) return; const _0x450fce = () => { _0x29705a = _0x39e919(() => { const _0x37bc7c = _0x2205; if (_0x16a878[_0x37bc7c(0x1a7)] === _0x37bc7c(0x5c6)) _0x59b159[_0x37bc7c(0x90a)](); _0x1e5f49(_0x16e7fc); }, 0x320); }, _0x3c8611 = () => { if (_0x301795) _0x35b872(_0xcd2fa4); }; _0x2f01c0[_0xdb03a5(0xb66)]('mouseup', _0x3c8611, { 'once': !![] }), _0x11ce4b['addEventListener'](_0xdb03a5(0x855), _0x3c8611, { 'once': !![] }), _0x5b21d8[_0xdb03a5(0xb66)]('touchcancel', _0x3c8611, { 'once': !![] }), _0x13a350['addEventListener'](_0xdb03a5(0x5b4), _0x3c8611, { 'once': !![] }), _0x450fce(); } else _0x49c5e4[_0xdb03a5(0x7ba)] = null, _0x3ac55e(), _0x18f071(_0xdb03a5(0x9d1)), _0x392027(), _0x17da8e['classList']['remove'](_0xdb03a5(0x944)), setTimeout(() => _0x17da8e[_0xdb03a5(0x819)][_0xdb03a5(0x974)] = _0xdb03a5(0xb39), 0x12c); } } } function _0x2225d2(_0x5c64e4) { const _0x1c8fbc = _0x1c58bc; if (!_0x5c64e4) return []; const _0x526a51 = _0x5c64e4[_0x1c8fbc(0x5d6)]('\x0a'), _0x593c24 = [], _0x21c08b = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/; for (const _0x485b04 of _0x526a51) { if (_0x1c8fbc(0x379) !== _0x1c8fbc(0x220)) { const _0x75c0dc = _0x485b04['match'](_0x21c08b); if (_0x75c0dc) { const _0x597686 = parseInt(_0x75c0dc[0x1], 0xa), _0x549b31 = parseInt(_0x75c0dc[0x2], 0xa), _0x382e6c = parseInt(_0x75c0dc[0x3], 0xa) * (_0x75c0dc[0x3][_0x1c8fbc(0x1ea)] === 0x2 ? 0xa : 0x1), _0x39d2b2 = _0x597686 * 0x3c + _0x549b31 + _0x382e6c / 0x3e8, _0x16f114 = _0x485b04[_0x1c8fbc(0x4db)](_0x21c08b, '')['trim'](); _0x16f114 && _0x593c24[_0x1c8fbc(0xb49)]({ 'time': _0x39d2b2, 'text': _0x16f114 }); } } else { const _0x3abe37 = _0xaf01a8(_0x354a4f[_0x1c8fbc(0x975)]); _0x3abe37 && (_0x3abe37['spriteTransform'] = _0x3253af, _0x5d9cc5(_0x47f721[_0x1c8fbc(0x975)], _0x1c8fbc(0x198))); } } return _0x593c24; } function _0x568091(_0x5f40d7) { const _0x34d484 = _0x1c58bc; if ('qyAvD' === _0x34d484(0xb9c)) { _0x3429e0 = _0x2225d2(_0x5f40d7[_0x34d484(0x846)]), _0x10099f['innerHTML'] = ''; if (_0x3429e0['length'] === 0x0) { _0x10099f['innerHTML'] = '<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>'; return; } _0x3429e0[_0x34d484(0x4ac)]((_0x23cc1b, _0x327561) => { const _0x4a5d12 = _0x34d484, _0x39b432 = document[_0x4a5d12(0xa51)]('p'); _0x39b432[_0x4a5d12(0x948)] = _0x23cc1b[_0x4a5d12(0x4f1)], _0x39b432['id'] = _0x4a5d12(0x346) + _0x327561, _0x10099f[_0x4a5d12(0x8ce)](_0x39b432); }); } else { const _0x4bf421 = _0x5a3bbc[_0x34d484(0x97d)](_0xd9048f); _0x1985d9['src'] = _0x4bf421, _0x32e1ed['onload'] = () => _0x1ae631['revokeObjectURL'](_0x4bf421); } } function _0x1b3f2b(_0x49dd28, _0x8ce75c, _0x56bd38, _0x576b76) { const _0x249bc8 = _0x1c58bc; if (_0x249bc8(0x467) !== _0x249bc8(0x467)) { const _0x1aab56 = { 'id': _0x249bc8(0x9a2) + _0x132cce[_0x249bc8(0x7e3)](), ..._0x3dd012 }; _0x5052ab[_0x249bc8(0x775)][_0x249bc8(0xb49)](_0x1aab56), !_0x28433e[_0x249bc8(0x4d3)] && (_0x55d10b['activeUserProfileId'] = _0x1aab56['id']); } else { const _0x57e5ae = (_0x576b76 - 0x5a) * Math['PI'] / 0xb4; return { 'x': _0x49dd28 + _0x56bd38 * Math['cos'](_0x57e5ae), 'y': _0x8ce75c + _0x56bd38 * Math[_0x249bc8(0x32b)](_0x57e5ae) }; } } function _0x300a00(_0x35ba65) { const _0xa574c = _0x1c58bc; if (_0xa574c(0x5f8) !== _0xa574c(0x5f8)) _0x3b01f8[_0xa574c(0xad1)](_0xa574c(0x2c6))[_0xa574c(0xb66)](_0xa574c(0x43a), () => { const _0xb1ebb9 = _0xa574c, _0x36ec07 = _0x2e28ce[_0xb1ebb9(0xad1)](_0xb1ebb9(0x438)); _0x36ec07[_0xb1ebb9(0xa97)](), _0x2d7ac5['execCommand'](_0xb1ebb9(0xa91)), _0x14e34d(_0xb1ebb9(0x7d2)); }); else { const _0x2e9891 = _0xa574c(0xb61), _0x4d4511 = document['createElementNS'](_0x2e9891, _0xa574c(0x473)), _0x1c7d2e = 0xfa, _0x2da2ac = _0x1c7d2e / 0x2, _0x50c81f = _0x1c7d2e / 0x2, _0x34617c = _0x1c7d2e / 0x2 - 0x14; _0x4d4511[_0xa574c(0x4b6)]('width', _0xa574c(0x3fe)), _0x4d4511['setAttribute']('height', _0xa574c(0x3fe)), _0x4d4511[_0xa574c(0x4b6)]('viewBox', _0xa574c(0x222) + _0x1c7d2e + '\x20' + _0x1c7d2e); const _0x25a75f = Object[_0xa574c(0xa41)](_0x35ba65)[_0xa574c(0x1f9)]((_0x1de832, _0x1c650d) => _0x1de832 + _0x1c650d, 0x0); if (_0x25a75f === 0x0) return _0x4d4511; let _0x4dcf36 = -0x5a; const _0x57532c = [_0xa574c(0x9eb), _0xa574c(0x498), _0xa574c(0x597), _0xa574c(0x674), _0xa574c(0x50b), '#ffb366', _0xa574c(0x5bf), _0xa574c(0x902)]; let _0x35ff9b = 0x0; for (const _0x217af5 in _0x35ba65) { const _0xfe070d = _0x35ba65[_0x217af5]; if (_0xfe070d <= 0x0) continue; const _0x12985c = _0xfe070d / _0x25a75f * 0x168, _0x404e81 = _0x4dcf36 + _0x12985c, _0x781307 = _0x1b3f2b(_0x2da2ac, _0x50c81f, _0x34617c, _0x404e81), _0x50e117 = _0x1b3f2b(_0x2da2ac, _0x50c81f, _0x34617c, _0x4dcf36), _0x2c08c6 = _0x12985c > 0xb4 ? '1' : '0', _0x320042 = ['M', _0x781307['x'], _0x781307['y'], 'A', _0x34617c, _0x34617c, 0x0, _0x2c08c6, 0x1, _0x50e117['x'], _0x50e117['y'], 'L', _0x2da2ac, _0x50c81f, 'Z'][_0xa574c(0xae6)]('\x20'), _0x10a9ab = document[_0xa574c(0xa4e)](_0x2e9891, _0xa574c(0xaf7)); _0x10a9ab[_0xa574c(0x4b6)]('d', _0x320042), _0x10a9ab[_0xa574c(0x4b6)]('fill', _0x57532c[_0x35ff9b % _0x57532c['length']]), _0x35ff9b++; const _0x1dd0c4 = document[_0xa574c(0xa4e)](_0x2e9891, _0xa574c(0x616)); _0x1dd0c4[_0xa574c(0x948)] = _0x217af5 + ':\x20' + _0xfe070d['toFixed'](0x2) + '\x20(' + (_0xfe070d / _0x25a75f * 0x64)[_0xa574c(0x625)](0x1) + '%)', _0x10a9ab['appendChild'](_0x1dd0c4), _0x4d4511[_0xa574c(0x8ce)](_0x10a9ab), _0x4dcf36 = _0x404e81; } return _0x4d4511; } } function _0x3d8d7f() { const _0x28469d = _0x1c58bc; if (_0x3429e0[_0x28469d(0x1ea)] === 0x0) return; const _0x4900f7 = _0x3a3d7b['currentTime']; let _0x50faf4 = -0x1; for (let _0x5f3376 = 0x0; _0x5f3376 < _0x3429e0[_0x28469d(0x1ea)]; _0x5f3376++) { if (_0x4900f7 >= _0x3429e0[_0x5f3376][_0x28469d(0x5c7)]) { if (_0x28469d(0x4bc) === 'MbSHJ') _0x50faf4 = _0x5f3376; else { const _0x12971b = _0x5b4082['createElement'](_0x28469d(0x54f)); _0x12971b[_0x28469d(0xa5e)] = 'diary-page', _0x12971b['id'] = _0x28469d(0x98c) + _0x44d4e4, _0xaf851a === _0x532d2f[_0x28469d(0x20b)] && _0x12971b['classList'][_0x28469d(0x2ac)]('is-visible'), _0x106785['forEach'](_0x162ed3 => { const _0x4dd504 = _0x28469d, _0x436bf1 = _0x162ed3[_0x4dd504(0x7e5)] === _0x4dd504(0xa02) ? _0x4dd504(0xa02) : 'ai', _0x55298a = _0x162ed3['author'] === _0x4dd504(0xa02) ? _0x3c7a8a[_0x4dd504(0xa6a)] : _0xf5430c(_0x162ed3[_0x4dd504(0x7e5)])[_0x4dd504(0xa6a)], _0x496168 = _0x410c7d[_0x4dd504(0xa51)](_0x4dd504(0x54f)); _0x496168[_0x4dd504(0xa5e)] = 'diary-entry\x20' + _0x436bf1, _0x496168[_0x4dd504(0x2d1)][_0x4dd504(0x782)] = _0x162ed3['timestamp'], _0x496168['style'][_0x4dd504(0x74f)] = _0x4dd504(0xb39), _0x496168[_0x4dd504(0x819)][_0x4dd504(0x36d)] = '0', _0x496168[_0x4dd504(0x16c)] = _0x4dd504(0x4a7) + _0x55298a + _0x4dd504(0x52a) + new _0x156ce8(_0x162ed3[_0x4dd504(0x782)])[_0x4dd504(0x2e3)](_0x4dd504(0x15b)) + _0x4dd504(0x697) + _0x162ed3['content'][_0x4dd504(0x4db)](/\n/g, _0x4dd504(0x5f7)) + _0x4dd504(0x3e9), _0x12971b['appendChild'](_0x496168); }), _0x4b7233[_0x28469d(0x8ce)](_0x12971b); } } else break; } if (_0x50faf4 !== -0x1) { const _0xea498c = _0x10099f[_0x28469d(0x61a)]('p'); _0xea498c[_0x28469d(0x4ac)](_0x206d80 => _0x206d80[_0x28469d(0x9c4)]['remove'](_0x28469d(0x630))); const _0x331559 = document[_0x28469d(0xad1)]('lyric-line-' + _0x50faf4); _0x331559 && (_0x331559[_0x28469d(0x9c4)][_0x28469d(0x2ac)](_0x28469d(0x630)), _0x331559[_0x28469d(0x2e6)]({ 'behavior': 'smooth', 'block': _0x28469d(0x4f3) })); } } _0x189ed8[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x2a45ac = _0x1c58bc; _0x17da8e[_0x2a45ac(0x9c4)][_0x2a45ac(0x6e1)]('show'), setTimeout(() => _0x17da8e[_0x2a45ac(0x819)][_0x2a45ac(0x974)] = _0x2a45ac(0xb39), 0x12c); }), document['getElementById'](_0x1c58bc(0xac9))[_0x1c58bc(0xb66)]('click', () => { const _0x4dfb2d = _0x1c58bc; _0x2c45d7[_0x4dfb2d(0x861)] && _0x2c45d7[_0x4dfb2d(0x861)][_0x4dfb2d(0x958)] && (_0x17da8e['style']['display'] = _0x4dfb2d(0x9e5), setTimeout(() => _0x17da8e[_0x4dfb2d(0x9c4)]['add'](_0x4dfb2d(0x944)), 0xa)); }), _0x3a3d7b['addEventListener'](_0x1c58bc(0xa62), _0x3d8d7f); const _0x510f98 = document[_0x1c58bc(0xad1)](_0x1c58bc(0x93d)), _0x54dd1c = document[_0x1c58bc(0xad1)](_0x1c58bc(0x276)), _0xc9314b = document[_0x1c58bc(0xad1)](_0x1c58bc(0x922)); _0x510f98[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x2dea89 = _0x1c58bc; if (_0x2dea89(0x7dc) !== _0x2dea89(0x3e3)) { if (_0x3a3d7b[_0x2dea89(0x400)]) { if (_0x2dea89(0xab3) === _0x2dea89(0x496)) { const _0x5a84c9 = _0x4effde[0x0], _0x35d0da = new _0x411c1(_0x5a84c9[_0x2dea89(0x6a0)] + _0x2dea89(0x908)), _0x1c810f = _0x35d0da - _0x232cc2, _0x13e664 = _0x42cd9e[_0x2dea89(0x705)](_0x1c810f / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x56a09b[_0x2dea89(0x948)] = _0x2dea89(0x5bb) + _0x5a84c9[_0x2dea89(0xa3a)] + '」', _0x523444[_0x2dea89(0x16c)] = _0x2dea89(0x217) + _0x13e664 + _0x2dea89(0x8b7); } else _0x3a3d7b[_0x2dea89(0x24b)] ? _0x3a3d7b['play']() : _0x3a3d7b[_0x2dea89(0x37d)](); } } else _0x25456e[_0x2dea89(0x208)](_0x2dea89(0x4b5), _0x427bb5), _0x58b215('导出失败了，哼:\x20' + _0x28a7ff[_0x2dea89(0x80d)]); }), _0x54dd1c['addEventListener'](_0x1c58bc(0x43a), () => { const _0xee4f53 = _0x1c58bc; if (_0x4704fd[_0xee4f53(0x1ea)] === 0x0) return; _0x31d0f4 = (_0x31d0f4 + 0x1) % _0x4704fd[_0xee4f53(0x1ea)], _0x38a987(_0x4704fd[_0x31d0f4], _0x4704fd); }), _0xc9314b[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x3de9ed = _0x1c58bc; if (_0x4704fd['length'] === 0x0) return; _0x31d0f4 = (_0x31d0f4 - 0x1 + _0x4704fd[_0x3de9ed(0x1ea)]) % _0x4704fd[_0x3de9ed(0x1ea)], _0x38a987(_0x4704fd[_0x31d0f4], _0x4704fd); }), _0x3a3d7b[_0x1c58bc(0xb66)]('play', () => { const _0x449f61 = _0x1c58bc; _0x449f61(0xacf) !== _0x449f61(0xacf) ? (_0xc73c13 *= _0x33bdab / _0x49e3e1, _0x21999e = _0xc7b4cc) : _0x510f98[_0x449f61(0x948)] = '❚❚'; }), _0x3a3d7b[_0x1c58bc(0xb66)](_0x1c58bc(0x37d), () => { _0x510f98['textContent'] = '▶'; }), _0x3a3d7b['addEventListener'](_0x1c58bc(0x6dd), () => { const _0x288c35 = _0x1c58bc; _0x54dd1c[_0x288c35(0x43a)](); }), _0x3a3d7b[_0x1c58bc(0xb66)](_0x1c58bc(0xbc9), () => { const _0x428877 = _0x1c58bc; if (_0x428877(0x60a) !== _0x428877(0x60a)) return ''; else { const _0x23f612 = document[_0x428877(0xad1)](_0x428877(0x938)); if (_0x23f612) _0x23f612['textContent'] = '❚❚'; } }), _0x3a3d7b[_0x1c58bc(0xb66)]('pause', () => { const _0x5090fa = _0x1c58bc, _0x1530bb = document[_0x5090fa(0xad1)](_0x5090fa(0x938)); if (_0x1530bb) _0x1530bb[_0x5090fa(0x948)] = '▶'; }), _0x3a3d7b[_0x1c58bc(0xb66)](_0x1c58bc(0x6dd), () => { const _0x5527d1 = _0x1c58bc, _0x1dbafa = document[_0x5527d1(0xad1)](_0x5527d1(0x67f)); _0x1dbafa && _0x1dbafa[_0x5527d1(0x43a)](); }); function _0x3e05c3(_0x52311a) { const _0x4f859e = _0x1c58bc; if (_0x4f859e(0x4ba) === _0x4f859e(0x8e7)) _0x31ffdb(_0x45a5ff['activeMeetingCharId'], _0x4e93c7[_0x4f859e(0x69f)]); else { if (!_0x52311a || typeof _0x52311a !== _0x4f859e(0x319)) return null; const _0x33ed02 = _0x52311a[_0x4f859e(0x47b)]('['), _0x3788bf = _0x52311a['lastIndexOf'](']'); if (_0x33ed02 > -0x1 && _0x3788bf > _0x33ed02) return _0x52311a[_0x4f859e(0x5cd)](_0x33ed02, _0x3788bf + 0x1); return null; } } document[_0x1c58bc(0xad1)]('app-accounting')[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x3fb1ea = _0x1c58bc; 'kaIEg' === 'kaIEg' ? (_0x51d59b(), _0x512ecd(_0x3fb1ea(0x4e3), _0x3fb1ea(0x315))) : _0x2f3afa = [..._0x9b4b09, ..._0x1ae315]; }), document[_0x1c58bc(0xad1)](_0x1c58bc(0xbd9))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x512ecd('home', _0x1c58bc(0x4e3))); const _0x17c7bb = document[_0x1c58bc(0xad1)]('tab-record-expense'), _0xbe1a9a = document[_0x1c58bc(0xad1)](_0x1c58bc(0xa70)); _0x17c7bb['addEventListener'](_0x1c58bc(0x43a), _0x51d59b), _0xbe1a9a[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x4773ff = _0x1c58bc; _0x4773ff(0x416) === _0x4773ff(0xbe0) ? _0x3c2f39['remove']() : (_0x17c7bb[_0x4773ff(0x9c4)][_0x4773ff(0x6e1)](_0x4773ff(0x630)), _0xbe1a9a[_0x4773ff(0x9c4)][_0x4773ff(0x2ac)](_0x4773ff(0x630)), _0x41cd9f()); }); function _0x51d59b() { const _0x16b441 = _0x1c58bc; if (_0x16b441(0x52e) === _0x16b441(0x24d)) { if (_0x2c3840 === null) return; const _0x1e44aa = _0x523ee0[_0x16b441(0x82f)][_0x16b441(0x471)](); if (_0x1e44aa === '') { _0x2ca627(); return; } const _0x17796f = _0xf009c3[_0x16b441(0x1ef)][_0xe74214]; _0x17796f && (_0x17796f['content'] = _0x1e44aa, _0x18625f(), _0xedab11()), _0x49f5a2[_0x16b441(0x9c4)][_0x16b441(0x6e1)](_0x16b441(0x944)), _0x5581cc = null; } else _0xbe1a9a[_0x16b441(0x9c4)][_0x16b441(0x6e1)](_0x16b441(0x630)), _0x17c7bb[_0x16b441(0x9c4)][_0x16b441(0x2ac)]('active'), _0x57254b(); } function _0x57254b() { const _0x47fa1 = _0x1c58bc; if (_0x47fa1(0x710) !== _0x47fa1(0x2f1)) { const _0x567be3 = document['getElementById']('accounting-content-area'); document[_0x47fa1(0xad1)](_0x47fa1(0x27b))[_0x47fa1(0x948)] = _0x47fa1(0x16f), document[_0x47fa1(0xad1)](_0x47fa1(0x78a))[_0x47fa1(0x16c)] = '', _0x567be3[_0x47fa1(0x16c)] = '<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>', _0x312f93(), document[_0x47fa1(0xad1)](_0x47fa1(0x6da))[_0x47fa1(0xb66)]('click', _0x1ad9aa), document['getElementById'](_0x47fa1(0x13e))['addEventListener'](_0x47fa1(0x43a), _0x1122a6 => { const _0x3f4dff = _0x47fa1; if (_0x1122a6[_0x3f4dff(0xb6a)][_0x3f4dff(0x9c4)][_0x3f4dff(0x75d)]('delete-expense-btn')) { const _0x99487 = _0x1122a6['target']['dataset']['id']; _0x17d597(_0x3f4dff(0x5ac))[_0x3f4dff(0xa0d)](_0x31aefd => { const _0xb0c307 = _0x3f4dff; if (_0x31aefd) { if (_0xb0c307(0x9c8) === _0xb0c307(0x6e8)) { const _0x113424 = _0x521fa0[_0xb0c307(0x402)][0x0]; _0x86518f[_0xb0c307(0x9c4)][_0xb0c307(0x2ac)](_0xb0c307(0x87a) + _0x113424); } else _0x2a8641(_0x99487); } }); } }), document[_0x47fa1(0xad1)](_0x47fa1(0xab7))[_0x47fa1(0x64f)](); } else { const _0x480888 = _0xd5ca88[_0x47fa1(0x775)][_0x47fa1(0x128)](_0xb69c33 => _0xb69c33['id'] === _0x4c4442); if (!_0x480888) return; _0x48afd3[_0x47fa1(0xad1)](_0x47fa1(0x9da))[_0x47fa1(0x82f)] = _0x480888['id'], _0x2e2a90[_0x47fa1(0xad1)]('user-profile-edit-title')['textContent'] = '编辑用户', _0x31c671['getElementById'](_0x47fa1(0x312))[_0x47fa1(0x82f)] = _0x480888[_0x47fa1(0xa6a)], _0x480888['avatar'] ? _0x1d4b6e['style'][_0x47fa1(0xbe4)] = _0x47fa1(0xbce) + _0x480888[_0x47fa1(0x37b)] + '\x27)' : _0x28eb24[_0x47fa1(0x819)][_0x47fa1(0xbe4)] = _0x47fa1(0xbce) + _0x2a4960 + '\x27)', _0x44942c[_0x47fa1(0xad1)]('user-persona')[_0x47fa1(0x82f)] = _0x480888[_0x47fa1(0x5d7)], _0xb9ea4e[_0x47fa1(0x819)]['display'] = _0x480888['id'] === _0x1e4cce[_0x47fa1(0x4d3)] ? 'none' : _0x47fa1(0x4e9), _0x58a813['getElementById'](_0x47fa1(0x54c))[_0x47fa1(0x819)][_0x47fa1(0x974)] = 'block'; } } function _0x4d510c(_0xe208e9, _0x12a890) { const _0x36b99b = _0x1c58bc; if (_0x36b99b(0x610) === 'NvwiM') { _0x3cca4d(_0x36b99b(0x3ff)); return; } else { const _0x174269 = document[_0x36b99b(0xad1)](_0x36b99b(0xbdf)), _0x4fd441 = document[_0x36b99b(0xad1)]('header-actions'); document['getElementById']('accounting-title')[_0x36b99b(0x948)] = _0x12a890 + _0x36b99b(0x4e2); const _0x489339 = _0xe208e9[_0x36b99b(0xb5b)][_0x36b99b(0x1f9)]((_0x2836eb, _0x207925) => _0x2836eb + (_0x207925[_0x36b99b(0x15c)] || 0x0), 0x0); let _0x367ca1 = _0x36b99b(0x1cb) + _0x489339[_0x36b99b(0x625)](0x2) + _0x36b99b(0x52c); _0x174269[_0x36b99b(0x16c)] = _0x367ca1; const _0x1a77c6 = document[_0x36b99b(0xad1)](_0x36b99b(0x47c)), _0x5eb1f2 = { '餐饮美食': _0x36b99b(0x1f3), '交通出行': _0x36b99b(0x314), '购物消费': _0x36b99b(0x20e), '生活服务': '<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>', '休闲娱乐': _0x36b99b(0x9bd), '医疗健康': _0x36b99b(0x752), '人情红包': _0x36b99b(0x6e0), '其他杂项': _0x36b99b(0x883), '默认': '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>' }; _0xe208e9[_0x36b99b(0xb5b)][_0x36b99b(0x4ac)](_0x342148 => { const _0xf8469b = _0x36b99b, _0x460017 = document['createElement'](_0xf8469b(0x54f)); _0x460017[_0xf8469b(0xa5e)] = _0xf8469b(0x24e), _0x460017['style']['flexDirection'] = _0xf8469b(0x365), _0x460017[_0xf8469b(0x819)][_0xf8469b(0x65b)] = _0xf8469b(0x7f2), _0x460017['style'][_0xf8469b(0x16a)] = '15px', _0x460017[_0xf8469b(0x819)][_0xf8469b(0xa44)] = '0'; const _0x2f11f7 = _0x5eb1f2[_0x342148[_0xf8469b(0xbb9)]] || _0x5eb1f2['默认'], _0x32c908 = _0xf8469b(0xbae) + _0x2f11f7 + _0xf8469b(0x9dc), _0x3780ac = _0xf8469b(0x716) + _0x32c908 + _0xf8469b(0x885) + _0x342148['description'] + _0xf8469b(0x5f4) + (_0x342148[_0xf8469b(0xbb9)] || _0xf8469b(0x8cc)) + _0xf8469b(0xa20) + (_0x342148['amount'] || 0x0)[_0xf8469b(0x625)](0x2) + _0xf8469b(0xbc7); let _0x195a05 = ''; if (_0x342148[_0xf8469b(0x557)] && _0x342148['review'][_0xf8469b(0xaee)]) { if (_0xf8469b(0x843) !== 'hpVXb') { const _0x4a64c4 = _0x132ad2(_0x342148[_0xf8469b(0x557)][_0xf8469b(0xaee)]); _0x4a64c4 && (_0x195a05 = '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22' + _0x4a64c4[_0xf8469b(0x37b)] + '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>' + _0x4a64c4[_0xf8469b(0xa6a)] + _0xf8469b(0x5c5) + _0x342148[_0xf8469b(0x557)][_0xf8469b(0x4f1)] + _0xf8469b(0xa3d)); } else { const _0x255804 = _0xb68e47['characters']['find'](_0x45e10e => _0x66a315[_0xf8469b(0x402)][_0xf8469b(0x7a3)](_0x45e10e['id']) && _0x45e10e['name'] === _0x2f728d); if (_0x255804) _0x1b3686 = _0x255804['id']; } } _0x460017['innerHTML'] = _0x3780ac + _0x195a05, _0x1a77c6['appendChild'](_0x460017); }), _0x4fd441[_0x36b99b(0x16c)] = _0x36b99b(0xb29), document[_0x36b99b(0xad1)](_0x36b99b(0x23f))[_0x36b99b(0xb66)](_0x36b99b(0x43a), async () => { const _0x5af886 = _0x36b99b, _0xb31f4 = await _0x17d597(_0x5af886(0xbd5)); if (_0xb31f4) { const _0x413694 = _0x2c45d7[_0x5af886(0x38a)][_0x12a890]; if (_0x413694 && _0x413694[_0x5af886(0x529)]) { if (_0x5af886(0x2a7) === _0x5af886(0x868)) { if (_0x4943fa) { _0x43c2b2[_0x5af886(0x9c4)][_0x5af886(0xac2)](_0x5af886(0x60f)); const _0x5b301e = _0x487e0d[_0x5af886(0x94b)](_0x5af886(0x348)); _0x437229[_0x5af886(0x9c4)][_0x5af886(0xac2)](_0x5af886(0x630), !!_0x5b301e); } else _0x2a99f8(_0x1a68ec); } else _0x2c45d7[_0x5af886(0x4b3)]['push'](..._0x413694[_0x5af886(0x529)]); } delete _0x2c45d7[_0x5af886(0x38a)][_0x12a890], _0x3ac55e(), _0x57254b(); } }); } } function _0x41cd9f() { const _0x218d99 = _0x1c58bc, _0x1b28b2 = document[_0x218d99(0xad1)](_0x218d99(0xbdf)); document['getElementById']('accounting-title')['textContent'] = '账本', document['getElementById'](_0x218d99(0x78a))[_0x218d99(0x16c)] = ''; const _0xd21db8 = Object[_0x218d99(0x58f)](_0x2c45d7[_0x218d99(0x38a)])[_0x218d99(0x940)]((_0x329f0a, _0x38d586) => new Date(_0x38d586) - new Date(_0x329f0a)); let _0x594b04 = _0x218d99(0x9a4); _0xd21db8[_0x218d99(0x1ea)] === 0x0 ? _0x594b04 += '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>' : _0xd21db8['forEach'](_0x41ac64 => { const _0x4b4fa3 = _0x218d99, _0x5cad6c = _0x2c45d7[_0x4b4fa3(0x38a)][_0x41ac64], _0x4b0c40 = _0x5cad6c['categorizedExpenses'][_0x4b4fa3(0x1f9)]((_0x2ce86c, _0x5ddadb) => _0x2ce86c + (_0x5ddadb[_0x4b4fa3(0x15c)] || 0x0), 0x0); _0x594b04 += _0x4b4fa3(0x914) + _0x41ac64 + _0x4b4fa3(0x98e) + _0x41ac64 + _0x4b4fa3(0x302) + _0x4b0c40['toFixed'](0x2) + _0x4b4fa3(0xbb1); }), _0x1b28b2[_0x218d99(0x16c)] = _0x594b04, document['getElementById']('export-accounting-btn')['addEventListener']('click', _0xd13ace), document[_0x218d99(0xad1)](_0x218d99(0x956))['addEventListener'](_0x218d99(0x43a), () => { const _0x28d300 = _0x218d99; document[_0x28d300(0xad1)](_0x28d300(0x4c2))['click'](); }), _0x1b28b2[_0x218d99(0x61a)]('.ledger-item')[_0x218d99(0x4ac)](_0x2c0465 => { const _0x3056b0 = _0x218d99; _0x2c0465[_0x3056b0(0xb66)]('click', _0x30d7c7 => { const _0x2a40e3 = _0x3056b0, _0x5361aa = _0x30d7c7[_0x2a40e3(0x670)]['dataset'][_0x2a40e3(0x6a0)], _0x4fc232 = _0x2c45d7[_0x2a40e3(0x38a)][_0x5361aa]; if (_0x4fc232) { if (_0x2a40e3(0x1f2) !== _0x2a40e3(0x1f2)) { const _0x1b1ba7 = _0x224d76['target'][_0x2a40e3(0xb1f)][0x0]; if (!_0x1b1ba7) return; const _0x21f057 = _0x378ebf['createObjectURL'](_0x1b1ba7); _0x29eba1['getElementById'](_0x2a40e3(0x3e2))[_0x2a40e3(0x819)][_0x2a40e3(0xbe4)] = 'url(\x27' + _0x21f057 + '\x27)'; } else _0x4d510c(_0x4fc232, _0x5361aa); } }); }); } function _0x1ad9aa() { const _0x444db7 = _0x1c58bc, _0x303ad5 = document[_0x444db7(0xad1)](_0x444db7(0xab7)), _0x14d38f = document[_0x444db7(0xad1)](_0x444db7(0xbdc)), _0x345210 = _0x303ad5[_0x444db7(0x82f)][_0x444db7(0x471)](), _0x4c0f06 = parseFloat(_0x14d38f['value']); if (!_0x345210 || isNaN(_0x4c0f06) || _0x4c0f06 <= 0x0) { _0x18f071('哼，不好好写清楚花在哪、花了多少，我怎么记？'); return; } _0x2c45d7[_0x444db7(0x4b3)]['push']({ 'id': _0x444db7(0x8e9) + Date[_0x444db7(0x7e3)](), 'description': _0x345210, 'amount': _0x4c0f06, 'timestamp': Date[_0x444db7(0x7e3)]() }), _0x3ac55e(), _0x312f93(), _0x303ad5[_0x444db7(0x82f)] = '', _0x14d38f[_0x444db7(0x82f)] = '', _0x303ad5[_0x444db7(0x64f)](); } function _0x2a8641(_0x5f0d8c) { const _0x1e6809 = _0x1c58bc, _0x1ca2c5 = _0x2c45d7[_0x1e6809(0x4b3)][_0x1e6809(0x18c)](_0x1d15bb => _0x1d15bb['id'] === _0x5f0d8c); if (_0x1ca2c5 > -0x1) { if (_0x1e6809(0xa31) === 'onvWK') return _0x1e6809(0xb95); else _0x2c45d7[_0x1e6809(0x4b3)][_0x1e6809(0x1d7)](_0x1ca2c5, 0x1), _0x3ac55e(), _0x312f93(); } } function _0x312f93() { const _0x1574d3 = _0x1c58bc, _0x59fd2b = document[_0x1574d3(0xad1)](_0x1574d3(0x13e)), _0x2265ee = document['getElementById'](_0x1574d3(0x1c7)), _0x477cb7 = new Date(), _0x8b5fcc = _0x2c45d7[_0x1574d3(0x4b3)][_0x1574d3(0x662)](_0x3c233c => new Date(_0x3c233c[_0x1574d3(0x782)])[_0x1574d3(0xa4a)]() === _0x477cb7[_0x1574d3(0xa4a)]()); if (_0x8b5fcc[_0x1574d3(0x1ea)] === 0x0) { _0x59fd2b['innerHTML'] = _0x1574d3(0x304), _0x2265ee['innerHTML'] = ''; return; } _0x59fd2b['innerHTML'] = '', _0x8b5fcc[_0x1574d3(0x940)]((_0x39ca76, _0x22a8c1) => _0x22a8c1[_0x1574d3(0x782)] - _0x39ca76['timestamp'])[_0x1574d3(0x4ac)](_0x357e94 => { const _0x4c8f29 = _0x1574d3; if (_0x4c8f29(0x6b6) === _0x4c8f29(0x343)) _0x35d457['quotedMessage'] = { 'sender': _0x10a9b9[0x1][_0x4c8f29(0x471)](), 'content': _0x192d70[0x2][_0x4c8f29(0x471)]() }, _0xe4851d = _0x193e1e[_0x4c8f29(0xa3a)][_0x4c8f29(0x5cd)](_0x3f14e1[0x0][_0x4c8f29(0x1ea)])[_0x4c8f29(0x471)](); else { const _0x10ca80 = document[_0x4c8f29(0xa51)](_0x4c8f29(0x54f)); _0x10ca80[_0x4c8f29(0xa5e)] = _0x4c8f29(0x24e), _0x10ca80[_0x4c8f29(0x16c)] = '<span\x20class=\x22description\x22>' + _0x357e94[_0x4c8f29(0x2a2)] + _0x4c8f29(0xa40) + _0x357e94[_0x4c8f29(0x15c)]['toFixed'](0x2) + _0x4c8f29(0x411) + _0x357e94['id'] + _0x4c8f29(0x5ee), _0x59fd2b[_0x4c8f29(0x8ce)](_0x10ca80); } }), _0x2265ee && (_0x2265ee[_0x1574d3(0x16c)] = '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', document[_0x1574d3(0xad1)](_0x1574d3(0xa43))['addEventListener'](_0x1574d3(0x43a), _0x967559)); } async function _0x967559() { const _0x556630 = _0x1c58bc, _0x35256b = new Date(), _0x3d5890 = _0x35256b[_0x556630(0x35e)]() + '-' + String(_0x35256b[_0x556630(0x571)]() + 0x1)[_0x556630(0x466)](0x2, '0') + '-' + String(_0x35256b[_0x556630(0x41f)]())[_0x556630(0x466)](0x2, '0'); if (_0x2c45d7[_0x556630(0x38a)][_0x3d5890]) { _0x18f071(_0x556630(0x823)); return; } const _0x2a9825 = _0x2c45d7[_0x556630(0x4b3)][_0x556630(0x662)](_0x2743aa => new Date(_0x2743aa['timestamp'])[_0x556630(0xa4a)]() === _0x35256b['toDateString']()); if (_0x2a9825[_0x556630(0x1ea)] === 0x0) { _0x18f071(_0x556630(0x636)); return; } _0x4ded3c(!![], _0x556630(0x71b)); try { const _0x15f044 = [_0x556630(0x5d1), _0x556630(0x960), _0x556630(0x7f6), _0x556630(0x8bc), _0x556630(0x668), '医疗健康', _0x556630(0x239), _0x556630(0x385)], _0x372091 = _0x2a9825[_0x556630(0x3c4)](_0x4a7216 => '-\x20' + _0x4a7216[_0x556630(0x2a2)] + ':\x20' + _0x4a7216[_0x556630(0x15c)])[_0x556630(0xae6)]('\x0a'), _0xaa142d = _0x2c45d7[_0x556630(0xb76)][_0x556630(0x3c4)](_0x23c1ff => { const _0x5ca80d = _0x556630; if (_0x5ca80d(0x7ee) !== _0x5ca80d(0x3b6)) { const _0xf77c77 = _0x2c45d7[_0x5ca80d(0x75e)][_0x5ca80d(0x128)](_0x2ab99c => _0x2ab99c[_0x5ca80d(0x1a7)] === 'private' && _0x2ab99c[_0x5ca80d(0x402)][_0x5ca80d(0x7a3)](_0x23c1ff['id'])), _0x43c93b = _0x2c45d7[_0x5ca80d(0x775)][_0x5ca80d(0x128)](_0x548444 => _0x548444['id'] === (_0xf77c77?.[_0x5ca80d(0x815)] || _0x2c45d7['activeUserProfileId'])) || { 'id': _0x5ca80d(0x135), 'name': '你' }; let _0x30e293 = ''; if (_0x23c1ff[_0x5ca80d(0x7ad)] && _0x23c1ff[_0x5ca80d(0x7ad)][_0x5ca80d(0x1ea)] > 0x0) { if (_0x5ca80d(0xb4e) === _0x5ca80d(0x4c5)) { const _0x3b2474 = _0x2b0ebf['transaction'](_0x5c725f, _0x5ca80d(0x2b8)), _0x156efb = _0x3b2474[_0x5ca80d(0x92c)](_0xb15bbf), _0x39b5f8 = _0x156efb[_0x5ca80d(0x982)]({ 'id': _0x7ff993, 'data': _0x1fcff4 }); _0x39b5f8[_0x5ca80d(0x62f)] = () => _0x5febe8(), _0x39b5f8[_0x5ca80d(0x168)] = () => _0x3d2f53(_0x39b5f8['error']); } else _0x30e293 = _0x23c1ff['linkedWorldBookIds'][_0x5ca80d(0x3c4)](_0x4b734d => _0x2c45d7[_0x5ca80d(0x538)][_0x5ca80d(0x128)](_0x1c1812 => _0x1c1812['id'] === _0x4b734d))[_0x5ca80d(0x662)](Boolean)['map'](_0xc305bc => _0x5ca80d(0x4ab) + _0xc305bc[_0x5ca80d(0xa6a)] + _0x5ca80d(0xaef) + _0xc305bc[_0x5ca80d(0xa3a)])[_0x5ca80d(0xae6)](''); } return _0x5ca80d(0x79a) + _0x23c1ff['id'] + _0x5ca80d(0x9fe) + _0x23c1ff['name'] + _0x5ca80d(0x50c) + _0x23c1ff[_0x5ca80d(0x5d7)] + '\x0a\x20\x20\x20\x20绑定用户:\x20' + _0x43c93b[_0x5ca80d(0xa6a)] + '\x20(ID:\x20' + _0x43c93b['id'] + ')\x0a' + _0x30e293; } else { const _0x4822c2 = _0x1ca97e(_0x584131[_0x5ca80d(0x975)]); _0x4822c2 && (delete _0x4822c2[_0x5ca80d(0x4f8)], _0xaa5a17(), _0x17e023(_0x4822c2['id'], 'normal'), _0x18be8a(_0x5ca80d(0x97b)), _0x5f4424(!![])); } })['join']('\x0a'), _0x11f423 = _0x2c45d7[_0x556630(0x775)][_0x556630(0x3c4)](_0x3cfbd1 => _0x556630(0x9cd) + _0x3cfbd1['id'] + _0x556630(0x9fe) + _0x3cfbd1[_0x556630(0xa6a)] + _0x556630(0x50c) + (_0x3cfbd1['persona'] || '无'))['join']('\x0a'), _0x4d0102 = _0x556630(0x665), _0x1ca622 = _0x556630(0x1db) + _0x15f044[_0x556630(0xae6)](',\x20') + ']\x0a\x0a#\x20角色资料库\x0a' + _0xaa142d + '\x0a\x0a#\x20用户资料库\x0a' + _0x11f423 + _0x556630(0x12d) + _0x372091, _0xfe97f = [{ 'role': _0x556630(0x5ff), 'content': _0x4d0102 }, { 'role': 'user', 'content': _0x1ca622 }], _0x4c93ab = await _0x4eb036(_0xfe97f, { 'json': !![] }), _0x16a3e4 = _0x3e05c3(_0x4c93ab); if (!_0x16a3e4) throw new Error(_0x556630(0x615) + _0x4c93ab); const _0x2fb8b4 = JSON[_0x556630(0x387)](_0x16a3e4); _0x2c45d7[_0x556630(0x38a)][_0x3d5890] = { 'categorizedExpenses': _0x2fb8b4, 'timestamp': Date[_0x556630(0x7e3)](), 'originalExpenses': _0x2a9825 }, _0x2c45d7[_0x556630(0x4b3)] = _0x2c45d7['accountingData'][_0x556630(0x662)](_0x26700f => new Date(_0x26700f[_0x556630(0x782)])[_0x556630(0xa4a)]() !== _0x35256b[_0x556630(0xa4a)]()), _0x3ac55e(), _0x4d510c(_0x2c45d7[_0x556630(0x38a)][_0x3d5890], _0x3d5890); } catch (_0x298801) { _0x18f071(_0x556630(0x20a) + _0x298801[_0x556630(0x80d)]); } finally { 'dWgUr' !== _0x556630(0x6b7) ? _0x2da259[_0x556630(0x54e)][_0x556630(0xb49)]({ 'id': _0xf5a472['id'] || _0x556630(0x572) + _0x5829[_0x556630(0x7e3)](), 'name': _0x53819a[_0x556630(0xa6a)] }) : _0x4ded3c(![]); } } async function _0x68df0d() { const _0x1c94e5 = _0x1c58bc; _0x112bc7(); (!_0x2c45d7[_0x1c94e5(0x54e)] || _0x2c45d7[_0x1c94e5(0x54e)][_0x1c94e5(0x1ea)] === 0x0) && (_0x1c94e5(0x63d) === 'weXuR' ? _0x582cee() : (_0x2c45d7[_0x1c94e5(0x54e)] = [{ 'id': 'default', 'name': '默认分类' }], _0x2c45d7[_0x1c94e5(0x538)][_0x1c94e5(0x4ac)](_0x7725eb => { const _0x3a6803 = _0x1c94e5; !_0x7725eb[_0x3a6803(0x9ba)] && (_0x7725eb['categoryId'] = _0x3a6803(0x135)); }))); const _0x3918b9 = [..._0x1d8538]; try { const _0x3f4f4d = localStorage[_0x1c94e5(0x813)](_0x1c94e5(0x845)); if (_0x3f4f4d) { const _0xcf0060 = JSON[_0x1c94e5(0x387)](_0x3f4f4d); Array['isArray'](_0xcf0060) ? _0x1c94e5(0x973) !== _0x1c94e5(0x973) ? _0x403646 += _0x1c94e5(0x814) : _0x9519d0 = [..._0x3918b9, ..._0xcf0060] : 'dGHbC' === _0x1c94e5(0xaf8) ? _0x5c64fb = _0x385139['id'] : _0x9519d0 = _0x3918b9; } else { if (_0x1c94e5(0x42b) !== _0x1c94e5(0x961)) _0x9519d0 = _0x3918b9; else { const _0x5ea3d3 = _0x2e0fb7[_0x1c94e5(0xad1)](_0x1c94e5(0xa27)); if (!_0x5ea3d3) return; const _0x334cb9 = _0xef1262(), _0x312b61 = _0x123ce7['calendarEvents'][_0x1c94e5(0x662)](_0x1c7e85 => _0x1c7e85[_0x1c94e5(0x6a0)] === _0x334cb9 && _0x1c7e85[_0x1c94e5(0x1a7)] === _0x1c94e5(0x8b9)); _0x5ea3d3['innerHTML'] = '', _0x312b61['length'] > 0x0 ? _0x312b61[_0x1c94e5(0x4ac)](_0x361c55 => { const _0x2cb027 = _0x1c94e5, _0x39746d = _0x2b2477[_0x2cb027(0xa51)](_0x2cb027(0x54f)); _0x39746d[_0x2cb027(0xa5e)] = _0x2cb027(0x78c), _0x39746d[_0x2cb027(0x948)] = _0x361c55['content'], _0x5ea3d3[_0x2cb027(0x8ce)](_0x39746d); }) : _0x5ea3d3[_0x1c94e5(0x16c)] = _0x1c94e5(0x29d); } } } catch (_0x3c6a14) { if (_0x1c94e5(0xb98) !== 'xFSvF') { const _0xb966f0 = _0x39ab5b[_0x1c94e5(0xad1)](_0x13645d); if (_0xb966f0 && _0xb39026) _0xb966f0[_0x1c94e5(0x400)] = _0x4f1eaf['createObjectURL'](_0x25b8e9); } else console['error'](_0x1c94e5(0x2f4), _0x3c6a14), _0x9519d0 = _0x3918b9; } if (!localStorage[_0x1c94e5(0x813)](_0x1c94e5(0x643))) { _0x17d597('检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。')[_0x1c94e5(0xa0d)](async _0x2a31b4 => { const _0x87e0b2 = _0x1c94e5; if (_0x87e0b2(0x4dd) !== _0x87e0b2(0x2c0)) { if (_0x2a31b4) _0x4ded3c(!![], _0x87e0b2(0x2c4)), await _0x4d3d62(), localStorage[_0x87e0b2(0x3ae)](_0x87e0b2(0x643), 'true'), _0x4ded3c(![]), _0x18f071(_0x87e0b2(0x1d6)), setTimeout(() => location['reload'](), 0x5dc); else { if (_0x87e0b2(0x8f6) === 'zdCQh') _0x18f071(_0x87e0b2(0x29f)); else { const _0x9016f6 = _0x1ac6b3[_0x87e0b2(0x998)](); _0x9016f6[_0x87e0b2(0x62f)] = () => _0x1ae54f(_0x9016f6[_0x87e0b2(0xb7b)]), _0x9016f6['onerror'] = () => _0x514554(_0x9016f6['error']); } } } else { const _0x11e124 = (_0x2fdc20 - _0x193548) / (0x3e8 * 0x3c); _0x11e124 < 0x3c ? _0x2d9338 += '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a' : _0x25472f += _0x87e0b2(0x5eb) + _0x2a7723[_0x87e0b2(0x691)](_0x11e124 / 0x3c) + _0x87e0b2(0x521); } }); return; } if (!localStorage['getItem']('noir_migration_fc_v1_complete')) { console['log'](_0x1c94e5(0xab9)), _0x4ded3c(!![], '正在检查好友圈数据...'); const _0x1b34e0 = await _0x168334(); localStorage[_0x1c94e5(0x3ae)](_0x1c94e5(0x7b4), _0x1c94e5(0x8da)), _0x4ded3c(![]); if (_0x1b34e0 > 0x0) { _0x18f071(_0x1c94e5(0x929) + _0x1b34e0 + _0x1c94e5(0x71c)), setTimeout(() => location[_0x1c94e5(0x1b0)](), 0x5dc); return; } } if (!localStorage[_0x1c94e5(0x813)](_0x1c94e5(0x7b4))) { } if (!localStorage[_0x1c94e5(0x813)](_0x1c94e5(0xae4))) { if (_0x1c94e5(0x3f3) !== _0x1c94e5(0x7af)) { console[_0x1c94e5(0x905)](_0x1c94e5(0x172)), _0x4ded3c(!![], _0x1c94e5(0x95c)); const _0x952794 = await _0x428bab(); localStorage[_0x1c94e5(0x3ae)](_0x1c94e5(0xae4), _0x1c94e5(0x8da)), _0x4ded3c(![]); if (_0x952794 > 0x0) { _0x18f071('音乐数据升级完成，迁移了\x20' + _0x952794 + _0x1c94e5(0x2d4)), setTimeout(() => location[_0x1c94e5(0x1b0)](), 0x5dc); return; } } else try { const _0xf3550b = _0xb73607[_0x1c94e5(0x387)](_0x43763e[_0x1c94e5(0x813)](_0x1c94e5(0x4f6)) || '{}'), _0x1e0aac = { ..._0xf3550b, ..._0x1530d7 }; _0x4dfb8e[_0x1c94e5(0x3ae)](_0x1c94e5(0x4f6), _0x985fb8['stringify'](_0x1e0aac)); } catch (_0x506b26) { _0x1e4e63[_0x1c94e5(0x208)](_0x1c94e5(0x9d7), _0x506b26); } } if (!localStorage[_0x1c94e5(0x813)](_0x1c94e5(0xabd))) { const _0x59121c = await _0x2cc73a(); localStorage['setItem']('noir_migration_avatar_v1_complete', 'true'); if (_0x59121c > 0x0) { _0x18f071('数据结构升级：成功救援了\x20' + _0x59121c + _0x1c94e5(0xa86)), setTimeout(() => location[_0x1c94e5(0x1b0)](), 0x5dc); return; } } const _0x1569b7 = document[_0x1c94e5(0xad1)](_0x1c94e5(0x42d)); _0x1569b7 ? 'jgOYj' !== _0x1c94e5(0x634) ? _0x2591fe && _0x5363ac['click']() : _0x1569b7[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x243c53 = _0x1c94e5; _0x172267(), _0x512ecd(_0x243c53(0x98b), _0x243c53(0x315)); }) : _0x1c94e5(0x33b) !== _0x1c94e5(0x7ef) ? console[_0x1c94e5(0x208)](_0x1c94e5(0x8e6)) : _0x128a84['key'] === _0x1c94e5(0xaf0) && !_0x1ee955[_0x1c94e5(0x75b)] && (_0x294461[_0x1c94e5(0x90a)](), _0x3b352f()); const _0x39d93d = _0x1da400(); await _0x1afe47(), _0x7c5f93(), ((() => { const _0x527d8a = _0x1c94e5; if ('MqAEv' !== 'MqAEv') { const _0x461f94 = _0x35811e[_0x527d8a(0x670)][_0x527d8a(0x2d1)]['date'], _0x15765a = _0x5cfa64[_0x527d8a(0x38a)][_0x461f94]; _0x15765a && _0x526743(_0x15765a, _0x461f94); } else { let _0xf4ee6 = ![], _0x5a942d = _0x2c45d7['worldBookCategories'][_0x527d8a(0x128)](_0x16ce6e => _0x16ce6e[_0x527d8a(0xa6a)] === 'html'); if (!_0x5a942d) { if (_0x527d8a(0x707) !== _0x527d8a(0x707)) { const _0x263daf = []; if (_0x349ef6[_0x527d8a(0xa3a)]) _0x263daf[_0x527d8a(0xb49)]({ 'text': _0x673bb9[_0x527d8a(0xa3a)] }); if (_0x5e0774['image']) { const _0x4a04e2 = _0x2c1a5d[_0x527d8a(0x9b6)][_0x527d8a(0x5d6)](',')[0x1], _0x535629 = _0x22addd['image'][_0x527d8a(0x5cd)](_0x410bc8[_0x527d8a(0x9b6)][_0x527d8a(0x47b)](':') + 0x1, _0x3f0cd4[_0x527d8a(0x9b6)][_0x527d8a(0x47b)](';')) || 'image/jpeg'; _0x263daf[_0x527d8a(0xb49)]({ 'inline_data': { 'mime_type': _0x535629, 'data': _0x4a04e2 } }); } return _0x263daf; } else _0x5a942d = { 'id': 'wbc_html_default_builtin', 'name': _0x527d8a(0x504) }, _0x2c45d7[_0x527d8a(0x54e)][_0x527d8a(0xb49)](_0x5a942d), console[_0x527d8a(0x905)](_0x527d8a(0x6f0)), _0xf4ee6 = !![]; } const _0x2c4592 = _0x527d8a(0x2b1); let _0x1a1895 = _0x2c45d7[_0x527d8a(0x538)][_0x527d8a(0x69b)](_0x47d6e6 => _0x47d6e6['id'] === _0x2c4592); if (!_0x1a1895) { if ('HfUCe' === 'HfUCe') { console[_0x527d8a(0x905)](_0x527d8a(0x9c7)); const _0x23875c = _0x527d8a(0x881), _0x126324 = { 'id': _0x2c4592, 'name': _0x527d8a(0x177), 'content': _0x23875c, 'categoryId': _0x5a942d['id'] }; _0x2c45d7[_0x527d8a(0x538)][_0x527d8a(0xb49)](_0x126324), _0xf4ee6 = !![]; } else _0x1cb74d(_0x3dafd9['activeFriendCircleId']); } if (_0xf4ee6) { if (_0x527d8a(0x47e) === _0x527d8a(0x47e)) _0x3ac55e(), console['log'](_0x527d8a(0x4f2)); else return ''; } } })()), _0x4bee5e(), _0x187399(), _0x49e8d6(), _0xbd8c16(), _0x1ce50a(), _0x1f8190(), _0x50bfb1(), _0x256338(), _0x29bd56(), _0x252a26(); const _0x4b79ef = document['getElementById'](_0x1c94e5(0x9fd)); _0x4b79ef && requestAnimationFrame(() => { const _0x538dc2 = _0x1c94e5; _0x538dc2(0x256) === _0x538dc2(0xba8) ? _0x571957['name'] !== _0x538dc2(0x7b7) && (_0x15f82[_0x538dc2(0x208)]('获取AI响应失败:', _0xd4c680), _0x10b73f({ 'role': _0x538dc2(0x728), 'content': _0x538dc2(0x424) + _0x1876ea[_0x538dc2(0x80d)] }, _0x1747de[_0x538dc2(0x1ef)][_0x538dc2(0x1ea)] - 0x1)) : _0x4b79ef['style'][_0x538dc2(0x838)] = '1'; }); _0x392027(), _0x534d71(), setInterval(_0x534d71, 0x7530), _0x32ba25(), _0x2446f8(), _0x3fe3a7(); const _0x1bcf2f = document[_0x1c94e5(0xad1)](_0x1c94e5(0x77e)); document[_0x1c94e5(0xad1)](_0x1c94e5(0xac9))['addEventListener'](_0x1c94e5(0x43a), function (_0x5b68b2) { const _0x5d0237 = _0x1c94e5; if (_0x5d0237(0x53e) === _0x5d0237(0x4a2)) _0x5472ba = _0x5d0237(0x673), _0x52ba98 = '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，【不许动它！】)\x0a```\x0a' + _0x55a405 + _0x5d0237(0xa78); else { if (_0x5b68b2[_0x5d0237(0xb6a)][_0x5d0237(0x4b4)]('button')) return; const _0x3916d = document[_0x5d0237(0xad1)](_0x5d0237(0x93d)); _0x3916d && _0x3916d[_0x5d0237(0x43a)](); } }), _0x512ecd('home', _0x1c94e5(0x19f)); if (_0x39d93d || _0x2c45d7[_0x1c94e5(0xb76)][_0x1c94e5(0x1ea)] === 0x0) { if (_0x1c94e5(0x952) !== 'OZYFc') { const _0x3ab397 = _0x41bf50(_0x315927[_0x1c94e5(0x402)][0x0]); _0x207736[_0x1c94e5(0x948)] = _0x3ab397 ? _0x3ab397[_0x1c94e5(0xa6a)] : _0x1c94e5(0xafc); } else _0x18f071('欢迎！请先创建一个角色开始聊天。'), setTimeout(() => { const _0x336693 = _0x1c94e5; _0x512ecd(_0x336693(0xa37), _0x336693(0x315)), setTimeout(() => _0x176efd(), 0x64); }, 0x6a4); } document[_0x1c94e5(0xad1)](_0x1c94e5(0x30a))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), _0x194e50); const _0x54ee6e = document[_0x1c94e5(0xad1)]('widget-bg-input'); document['getElementById']('upload-widget-bg-button')[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => _0x54ee6e[_0x1c94e5(0x43a)]()), document['getElementById']('reset-widget-bg-button')[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x462b7a = _0x1c94e5; _0x2c45d7[_0x462b7a(0x8cd)][_0x462b7a(0x6a1)] = null, _0x3ac55e(), _0x32ba25(), _0x18f071(_0x462b7a(0x142)); }), _0x54ee6e[_0x1c94e5(0xb66)]('change', async _0x124c9a => { const _0x35dd2a = _0x1c94e5; if (_0x35dd2a(0xacc) !== _0x35dd2a(0xacc)) { const _0x5cb4aa = _0x4a80a5[_0x35dd2a(0xb76)]['map'](_0x108604 => { const _0x1d4308 = _0x35dd2a, _0x3ffa67 = { ..._0x108604 }; return _0x3ffa67['avatar'] && _0x3ffa67[_0x1d4308(0x37b)][_0x1d4308(0xbdd)](_0x1d4308(0x5c1)) && delete _0x3ffa67[_0x1d4308(0x37b)], _0x3ffa67; }), _0x469c62 = { 'version': 0x1, 'characters': _0x5cb4aa, 'worldBooks': _0x1a15ff[_0x35dd2a(0x538)], 'worldBookCategories': _0x4e3213[_0x35dd2a(0x54e)], 'activeWorldBookCategoryId': _0x568d7a[_0x35dd2a(0x9ac)], 'chats': _0x4d542e[_0x35dd2a(0x75e)], 'apiSettings': _0x193fce[_0x35dd2a(0x780)], 'preferences': _0x20a9fa['preferences'], 'activeChatId': _0x1fa7dd[_0x35dd2a(0x147)], 'diaries': _0x1f4422[_0x35dd2a(0x8b2)], 'friendCircles': _0x9ed6bf[_0x35dd2a(0x554)], 'activeFriendCircleId': _0x193716[_0x35dd2a(0x6c4)], 'userProfiles': _0x5a139e[_0x35dd2a(0x775)], 'activeUserProfileId': _0x23ac49[_0x35dd2a(0x4d3)], 'accountingData': _0x516680['accountingData'], 'accountingLedger': _0xb0445e[_0x35dd2a(0x38a)], 'calendarEvents': _0x35928a[_0x35dd2a(0xb73)] }; _0x23f885[_0x35dd2a(0x3ae)](_0x35dd2a(0x233), _0x319a96[_0x35dd2a(0x39b)](_0x469c62)); } else { const _0xd278f9 = _0x124c9a['target'][_0x35dd2a(0xb1f)][0x0]; if (!_0xd278f9) return; try { if (_0x35dd2a(0x829) !== _0x35dd2a(0x829)) _0xbf660a(_0xc37b2c['id']), _0x52b2e9(!![]); else { const _0x3dc245 = await _0x12e6e2(_0xd278f9); _0x2c45d7[_0x35dd2a(0x8cd)]['widgetBgImage'] = _0x3dc245, _0x3ac55e(), _0x32ba25(), _0x18f071(_0x35dd2a(0x877)); } } catch (_0x5a577a) { if ('eDjfD' !== _0x35dd2a(0x4a6)) _0x18f071(_0x35dd2a(0x424) + _0x5a577a['message']); else { const _0x25c222 = _0x1281eb['getElementById'](_0x35dd2a(0x5ca)); _0x25c222 && _0x20e214 && (_0x25c222[_0x35dd2a(0x400)] = _0x3d26cc[_0x35dd2a(0x97d)](_0x2f0462)); } } } }), _0x1d345f(), document['getElementById'](_0x1c94e5(0x907))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => document[_0x1c94e5(0xad1)]('badge-input')[_0x1c94e5(0x43a)]()), document['getElementById']('reset-badge-button')[_0x1c94e5(0xb66)]('click', async () => { const _0x34c7fe = _0x1c94e5; _0x34c7fe(0x35f) !== _0x34c7fe(0x317) ? (await _0x2ac888(_0x34c7fe(0x68d)), localStorage[_0x34c7fe(0x1fa)](_0x34c7fe(0x4f6)), _0x1d345f(), _0x18f071(_0x34c7fe(0x2f0))) : (_0x62c19[_0x34c7fe(0x9c4)][_0x34c7fe(0x6e1)](_0x34c7fe(0x134), _0x34c7fe(0x20c)), _0x2be085[_0x34c7fe(0x9c4)][_0x34c7fe(0x6e1)](_0x34c7fe(0xa89)), _0x5d7d3a[_0x34c7fe(0x20b)] = _0x51bde3, _0x3410a5(), _0x224bb3[_0x34c7fe(0x95b)] = ![]); }), document[_0x1c94e5(0xad1)](_0x1c94e5(0x4fb))[_0x1c94e5(0xb66)](_0x1c94e5(0xad6), async _0x1b9748 => { const _0x21af58 = _0x1c94e5, _0x4e192e = _0x1b9748[_0x21af58(0xb6a)][_0x21af58(0xb1f)][0x0]; if (!_0x4e192e) return; try { if (_0x21af58(0x3c8) === _0x21af58(0x3c8)) await _0x5941fe(_0x21af58(0x68d), _0x4e192e), await _0x1d345f(), _0x18f071('徽章已更换！'); else { let _0x6d14a5 = 0x0, _0x3ea3fd = 0x0, _0x2c4a26 = 0x0; if (_0x38c4a2['length'] == 0x4) _0x6d14a5 = '0x' + _0x87f09c[0x1] + _0x5b8caf[0x1], _0x3ea3fd = '0x' + _0x10bae2[0x2] + _0x1a23c1[0x2], _0x2c4a26 = '0x' + _0x1a5e6e[0x3] + _0x1567b0[0x3]; else _0x5e7aba[_0x21af58(0x1ea)] == 0x7 && (_0x6d14a5 = '0x' + _0x5cca24[0x1] + _0x3784bd[0x2], _0x3ea3fd = '0x' + _0x5c036b[0x3] + _0x1d7f07[0x4], _0x2c4a26 = '0x' + _0xa6c026[0x5] + _0x2deb7c[0x6]); _0x6d14a5 /= 0xff, _0x3ea3fd /= 0xff, _0x2c4a26 /= 0xff; let _0x198a48 = _0x27d829[_0x21af58(0x32a)](_0x6d14a5, _0x3ea3fd, _0x2c4a26), _0x37b49a = _0x37a5f9[_0x21af58(0xa01)](_0x6d14a5, _0x3ea3fd, _0x2c4a26), _0x28a65 = _0x37b49a - _0x198a48, _0x31508d = 0x0, _0x248709 = 0x0, _0x2c7571 = 0x0; if (_0x28a65 == 0x0) _0x31508d = 0x0; else { if (_0x37b49a == _0x6d14a5) _0x31508d = (_0x3ea3fd - _0x2c4a26) / _0x28a65 % 0x6; else { if (_0x37b49a == _0x3ea3fd) _0x31508d = (_0x2c4a26 - _0x6d14a5) / _0x28a65 + 0x2; else _0x31508d = (_0x6d14a5 - _0x3ea3fd) / _0x28a65 + 0x4; } } _0x31508d = _0x12a23b[_0x21af58(0x691)](_0x31508d * 0x3c); if (_0x31508d < 0x0) _0x31508d += 0x168; return _0x2c7571 = (_0x37b49a + _0x198a48) / 0x2, _0x248709 = _0x28a65 == 0x0 ? 0x0 : _0x28a65 / (0x1 - _0x2e9a1f['abs'](0x2 * _0x2c7571 - 0x1)), _0x248709 = +(_0x248709 * 0x64)['toFixed'](0x1), _0x2c7571 = +(_0x2c7571 * 0x64)['toFixed'](0x1), { 'h': _0x31508d, 's': _0x248709, 'l': _0x2c7571 }; } } catch (_0x7adaee) { _0x18f071(_0x21af58(0x424) + _0x7adaee[_0x21af58(0x80d)]); } }), _0x2876e3(), document[_0x1c94e5(0xad1)](_0x1c94e5(0x5e8))[_0x1c94e5(0xb66)](_0x1c94e5(0xae3), _0x2ac720), document[_0x1c94e5(0xad1)](_0x1c94e5(0x5e8))[_0x1c94e5(0xb66)](_0x1c94e5(0x5c6), _0x2ac720, { 'passive': ![] }), document[_0x1c94e5(0xad1)](_0x1c94e5(0x5ce))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => document[_0x1c94e5(0xad1)]('card-input')[_0x1c94e5(0x43a)]()), document[_0x1c94e5(0xad1)](_0x1c94e5(0xb8f))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), async () => { const _0x210271 = _0x1c94e5; await _0x2ac888(_0x210271(0xb19)), localStorage['removeItem'](_0x210271(0x120)), _0x2876e3(), _0x18f071('卡片已移除。'); }), document[_0x1c94e5(0xad1)](_0x1c94e5(0x401))['addEventListener']('change', async _0x490658 => { const _0x4da00d = _0x1c94e5, _0x302a62 = _0x490658[_0x4da00d(0xb6a)]['files'][0x0]; if (!_0x302a62) return; try { await _0x5941fe(_0x4da00d(0xb19), _0x302a62), await _0x2876e3(), _0x18f071('卡片已更换！'); } catch (_0x870476) { if ('tZKkA' !== _0x4da00d(0x8ff)) { if (_0x48be86 === null) return; const _0x1a376c = _0x5c0172[_0x4da00d(0x1ef)][_0x4da64d]; if (!_0x1a376c) return; _0x29a221[_0x4da00d(0x82f)] = _0x1a376c['content'], _0x2a92dd(), _0x3d32a0[_0x4da00d(0x9c4)][_0x4da00d(0x2ac)](_0x4da00d(0x944)), _0xf66c3d['focus'](); } else _0x18f071(_0x4da00d(0x424) + _0x870476['message']); } }), document[_0x1c94e5(0xad1)](_0x1c94e5(0x6b4))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), async () => { const _0x29c277 = _0x1c94e5, _0x3b8d31 = await _0x17d597(_0x29c277(0x753)); if (_0x3b8d31) { if ('vTtSj' !== 'vTtSj') { const _0x1877ad = _0x474508[_0x29c277(0xad1)](_0x29c277(0x9da))[_0x29c277(0x82f)]; _0x1877ad && (_0x31a75e[_0x29c277(0x4d3)] = _0x1877ad, _0x206e1b(), _0x50a1c7('已设为当前用户！'), _0x355c95(), _0x578857[_0x29c277(0xad1)]('set-active-user-button')[_0x29c277(0x819)]['display'] = _0x29c277(0xb39)); } else localStorage['removeItem'](_0x29c277(0x4f6)), localStorage[_0x29c277(0x1fa)]('cardWidgetState'), _0x18f071(_0x29c277(0x7e2)), setTimeout(() => location[_0x29c277(0x1b0)](), 0x3e8); } }); const _0x43d500 = document[_0x1c94e5(0xad1)](_0x1c94e5(0x1d9)); _0x43d500[_0x1c94e5(0xb66)]('click', () => { const _0x3a2859 = _0x1c94e5; _0x36c76c(), _0x512ecd('diaryList', _0x3a2859(0x315)); }); const _0x3083a2 = document[_0x1c94e5(0xad1)](_0x1c94e5(0x82d)); _0x3083a2[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x54852c = _0x1c94e5; 'oSRHW' === 'oSRHW' ? (_0x3404ae(), _0x512ecd('musicLibrary', _0x54852c(0x315))) : _0x196ad9[_0x54852c(0xa6c)] = !![]; }), document['getElementById'](_0x1c94e5(0x8a8))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => _0x512ecd('home', _0x1c94e5(0x505))), document[_0x1c94e5(0xad1)]('back-to-home-from-diary-list')[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => _0x512ecd('home', _0x1c94e5(0x2df))), document[_0x1c94e5(0xad1)](_0x1c94e5(0x986))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x45f511 = _0x1c94e5; _0x2c45d7[_0x45f511(0x62c)] = null, _0x512ecd(_0x45f511(0x2df), _0x45f511(0x96a)); }), document['getElementById'](_0x1c94e5(0x344))['addEventListener'](_0x1c94e5(0x43a), _0x4dcc57), document[_0x1c94e5(0xad1)](_0x1c94e5(0x784))[_0x1c94e5(0xb66)]('click', _0xae8040), document['getElementById']('diary-entry-input')[_0x1c94e5(0xb66)](_0x1c94e5(0x550), _0x319d66 => { const _0x526219 = _0x1c94e5; _0x526219(0x747) !== _0x526219(0xbe2) ? _0x319d66[_0x526219(0xa2d)] === 'Enter' && !_0x319d66[_0x526219(0x75b)] && (_0x319d66[_0x526219(0x90a)](), _0x4dcc57()) : (_0x2798e9(![]), _0x4e1d94[_0x526219(0xaa7)] = ![]); }); const _0x397bb9 = ['normal', _0x1c94e5(0x59d), _0x1c94e5(0x872), 'sad', _0x1c94e5(0x46c)]; _0x397bb9[_0x1c94e5(0x4ac)](_0x5a7b44 => { const _0x46817f = _0x1c94e5, _0x2a2e5d = document[_0x46817f(0xad1)](_0x46817f(0x791) + _0x5a7b44 + _0x46817f(0x484)), _0x179078 = document[_0x46817f(0xad1)](_0x46817f(0x791) + _0x5a7b44 + '-input'); if (_0x2a2e5d && _0x179078) { if (_0x46817f(0x990) !== _0x46817f(0x1ff)) _0x2a2e5d['addEventListener']('click', () => _0x179078['click']()), _0x179078['addEventListener']('change', _0x5ee8a3 => { const _0x206d89 = _0x46817f; if (_0x206d89(0x65d) === _0x206d89(0xa0f)) { const _0x2c360c = _0x3f3b09[_0x206d89(0x387)](_0x297f3a); _0x444795['isArray'](_0x2c360c) ? _0x53bb4d = [..._0x260fac, ..._0x2c360c] : _0x170d62 = _0x236fd1; } else { const _0x4c5eb0 = _0x5ee8a3[_0x206d89(0xb6a)][_0x206d89(0xb1f)][0x0]; if (!_0x4c5eb0) return; try { if ('pKsmG' === 'qGadR') return []; else { const _0x2556fc = URL[_0x206d89(0x97d)](_0x4c5eb0); _0x2a2e5d[_0x206d89(0x819)][_0x206d89(0xbe4)] = _0x206d89(0xbce) + _0x2556fc + '\x27)'; } } catch (_0x1beb2b) { if (_0x206d89(0x966) === _0x206d89(0x966)) _0x18f071(_0x206d89(0xa7e) + _0x1beb2b[_0x206d89(0x80d)]); else { if (!_0x5c424d[_0x206d89(0x62c)]) return _0x238329[_0x206d89(0x775)]['find'](_0x34eaf6 => _0x34eaf6['id'] === _0x27a44a[_0x206d89(0x4d3)]) || _0x1d0b0b[_0x206d89(0x775)][0x0]; const _0x3bdd3e = _0x4e8d9e[_0x206d89(0x75e)][_0x206d89(0x128)](_0x51dacc => _0x51dacc['type'] === _0x206d89(0x639) && _0x51dacc[_0x206d89(0x402)][_0x206d89(0x7a3)](_0x47d8d9[_0x206d89(0x62c)])), _0xe8188e = _0x3bdd3e?.[_0x206d89(0x815)] || _0x53cf6f['activeUserProfileId']; return _0x1d1530[_0x206d89(0x775)][_0x206d89(0x128)](_0x17d79a => _0x17d79a['id'] === _0xe8188e) || _0x321127[_0x206d89(0x775)][0x0]; } } } }); else { if (!_0x27481f[_0x46817f(0x460)](_0x342864)) return _0x46817f(0x3ec); if (_0x29c5af['length'] === 0x0) return _0x46817f(0x83b); return _0x3e1509[_0x46817f(0x940)]((_0x4568d9, _0x541985) => new _0x12b910(_0x541985[_0x46817f(0x782)]) - new _0x4ef60a(_0x4568d9[_0x46817f(0x782)])), _0x46817f(0x926) + _0x179e68[_0x46817f(0x3c4)]((_0x26aa1b, _0x10841c) => _0x46817f(0xb05) + (_0x10841c < _0x3c147e[_0x46817f(0x1ea)] - 0x1 ? _0x46817f(0x6ac) : '') + _0x46817f(0x151) + (_0x26aa1b['query'] || _0x46817f(0x809)) + _0x46817f(0xb00) + (_0x26aa1b[_0x46817f(0x69a)] || _0x46817f(0x563)) + _0x46817f(0xb44) + (_0x26aa1b[_0x46817f(0x782)] || '') + '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20')[_0x46817f(0xae6)]('') + _0x46817f(0x45e); } } }), document[_0x1c94e5(0xad1)]('galgame-textbox-container')[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), _0x133bbf), document[_0x1c94e5(0xad1)]('toggle-meeting-view-button')[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x348819 = _0x1c94e5; 'wpxrg' !== _0x348819(0x9b9) ? _0x56ccf8 += _0x348819(0x8d2) : (_0x2c45d7['meetingViewMode'] = _0x2c45d7[_0x348819(0x2f5)] === 'novel' ? _0x348819(0x6cf) : 'novel', _0x569a84()); }), document[_0x1c94e5(0xad1)](_0x1c94e5(0x75c))[_0x1c94e5(0xb66)]('mousedown', _0x43fd39), document[_0x1c94e5(0xad1)](_0x1c94e5(0x75c))['addEventListener'](_0x1c94e5(0x5c6), _0x43fd39, { 'passive': ![] }); let _0x302142 = null; function _0x43fd39(_0x4d5f0d) { const _0xe20cb2 = _0x1c94e5; if ('cbLCY' !== _0xe20cb2(0x850)) { if (_0x302142) clearTimeout(_0x302142); const _0x177adc = _0x4d5f0d[_0xe20cb2(0xb6a)][_0xe20cb2(0x4b4)](_0xe20cb2(0x4ca)); if (!_0x177adc) return; const _0x5b4edd = parseInt(_0x177adc[_0xe20cb2(0x2d1)][_0xe20cb2(0xb38)], 0xa); if (isNaN(_0x5b4edd)) return; const _0xf3d6ad = () => { const _0x474a6a = _0xe20cb2; if (_0x474a6a(0x795) !== _0x474a6a(0x79f)) _0x302142 = setTimeout(() => { const _0x380615 = _0x474a6a; if (_0x4d5f0d['type'] === _0x380615(0x5c6)) _0x4d5f0d[_0x380615(0x90a)](); _0x137f82(_0x5b4edd); }, 0x320); else { if (_0x1b8eeb < 0x0 || _0x173868 >= _0x54c503['length']) return; _0x432afd = _0x3dbf79; const _0x5c3630 = _0x445f16[_0x32b5c7]; _0x356f93[_0x474a6a(0x400)] = _0x5c3630['playableUrl'] || _0x5c3630[_0x474a6a(0x79c)], _0x702236[_0x474a6a(0xbc9)](), _0x2effdd(), _0x2b0a03(); } }, _0x87d2f5 = () => { if (_0x302142) clearTimeout(_0x302142); }; document[_0xe20cb2(0xb66)](_0xe20cb2(0xae8), _0x87d2f5, { 'once': !![] }), document[_0xe20cb2(0xb66)](_0xe20cb2(0x3a6), _0x87d2f5, { 'once': !![] }), document[_0xe20cb2(0xb66)](_0xe20cb2(0x855), _0x87d2f5, { 'once': !![] }), document[_0xe20cb2(0xb66)](_0xe20cb2(0x122), _0x87d2f5, { 'once': !![] }), _0xf3d6ad(); } else _0x581786[_0xe20cb2(0x90a)](), _0x584959(); } document[_0x1c94e5(0xad1)]('import-accounting-input')[_0x1c94e5(0xb66)](_0x1c94e5(0xad6), _0x1bec0e), document[_0x1c94e5(0x335)][_0x1c94e5(0xb66)](_0x1c94e5(0x43a), _0x353a23 => { const _0x40b38f = _0x1c94e5, _0x5c5fd7 = _0x353a23['target'][_0x40b38f(0x4b4)](_0x40b38f(0x2e9)); if (_0x5c5fd7) { const _0x277d2b = _0x353a23['target'][_0x40b38f(0x4b4)]('.lt-end-session-btn'), _0x40c802 = _0x353a23['target'][_0x40b38f(0x4b4)](_0x40b38f(0xaff)); if (_0x277d2b) _0x40a952(); else { if (_0x40c802) { if ('FVDTZ' === _0x40b38f(0x9b4)) _0x393c6d = _0x3226d5; else { const _0x3194fe = _0x40c802[_0x40b38f(0x4b4)](_0x40b38f(0x51c)), _0x47fb1c = _0x40c802[_0x40b38f(0x2d1)][_0x40b38f(0x22c)], _0x33bb96 = parseInt(_0x3194fe[_0x40b38f(0x2d1)]['historyIndex'], 0xa); _0x377be0(_0x47fb1c, _0x33bb96, _0x5c5fd7); } } else { if (_0x40b38f(0x59a) === _0x40b38f(0x507)) { _0x278fa2('我正在说话呢，别打岔！'); return; } else { const _0x36c1a = _0x5c10dc(); _0x36c1a && _0x36c1a['activeListenSession'] && _0x36c1a[_0x40b38f(0x7ba)][_0x40b38f(0x958)] && (_0x17da8e[_0x40b38f(0x819)][_0x40b38f(0x974)] = _0x40b38f(0x9e5), setTimeout(() => _0x17da8e[_0x40b38f(0x9c4)][_0x40b38f(0x2ac)](_0x40b38f(0x944)), 0xa)); } } } return; } if (window[_0x40b38f(0x8e1)]()[_0x40b38f(0x857)]()) return; const _0x581194 = _0x353a23[_0x40b38f(0xb6a)]['closest'](_0x40b38f(0x51c)); if (_0x581194 && !_0x353a23[_0x40b38f(0xb6a)][_0x40b38f(0x4b4)](_0x40b38f(0x8de))) { const _0x564ba2 = parseInt(_0x581194[_0x40b38f(0x2d1)][_0x40b38f(0xb38)], 0xa); if (!isNaN(_0x564ba2)) { if ('GwUlX' !== _0x40b38f(0x152)) _0x137f82(_0x564ba2); else { const _0x450422 = _0x30fb0c[_0x40b38f(0x758)]['filter'](_0xb3929a => _0xb3929a[_0x40b38f(0x7e5)] === _0x40b38f(0xa02))[_0x40b38f(0x247)](); _0x450422 && (_0x493578 = _0x450422[_0x40b38f(0xa3a)]); } } } }); const _0x45ee70 = document[_0x1c94e5(0xad1)](_0x1c94e5(0x2ae)); _0x45ee70 && _0x45ee70[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x30912d = _0x1c94e5; 'OzXos' !== _0x30912d(0x69d) ? _0x1c6748['boundUserProfileId'] = _0x44d15d : _0x18f071('核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a'); }); const _0xf10197 = document[_0x1c94e5(0xad1)](_0x1c94e5(0x8af)), _0x38ddad = localStorage['getItem']('customStickers'); if (_0x38ddad) try { if (_0x1c94e5(0x63e) === _0x1c94e5(0x63e)) { const _0x1f35dd = JSON[_0x1c94e5(0x387)](_0x38ddad); Array['isArray'](_0x1f35dd) && (_0xf10197[_0x1c94e5(0x82f)] = _0x1f35dd['map'](_0x105aaf => _0x105aaf[_0x1c94e5(0xa6a)] + '--' + _0x105aaf[_0x1c94e5(0x79c)])[_0x1c94e5(0xae6)]('\x0a')); } else { _0xef2a20['innerHTML'] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>'; return; } } catch (_0x430778) { } document[_0x1c94e5(0xad1)](_0x1c94e5(0x842))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x923d59 = _0x1c94e5, _0xe6d032 = _0xf10197[_0x923d59(0x82f)], _0x4da63c = _0xe6d032['split']('\x0a')[_0x923d59(0x662)](_0xcc72f0 => _0xcc72f0[_0x923d59(0x471)]() !== ''), _0x1c54b1 = []; let _0xcc7fc0 = 0x0; for (const _0xea478e of _0x4da63c) { const _0x5c1381 = _0xea478e[_0x923d59(0x5d6)]('--'); if (_0x5c1381['length'] === 0x2 && _0x5c1381[0x0][_0x923d59(0x471)]() && _0x5c1381[0x1]['trim']()[_0x923d59(0xbdd)](_0x923d59(0x971))) { if (_0x923d59(0x1ba) !== 'pHdVU') _0x1c54b1[_0x923d59(0xb49)]({ 'name': _0x5c1381[0x0][_0x923d59(0x471)](), 'url': _0x5c1381[0x1][_0x923d59(0x471)]() }); else { const _0x56aaf8 = _0x923d59(0xbc3) + _0x4a8716; _0x237ebf(_0x56aaf8), _0x18974c(!![]); } } else 'Rndav' === _0x923d59(0x5b6) ? _0x5c7f5b(_0x345a12) : _0xcc7fc0++; } _0xcc7fc0 > 0x0 && _0x18f071('有\x20' + _0xcc7fc0 + _0x923d59(0x4a3)); try { if (_0x923d59(0xa94) !== 'qOzcv') { const _0xdc0ce0 = _0x1626ae, _0x2ddf56 = _0xdc0ce0[_0x923d59(0x291)], _0x508980 = _0xdc0ce0[_0x923d59(0x889)]; _0x3f24ec[_0x923d59(0x548)] += 0x64, _0x522da7(), _0x515dc1(() => { const _0x3b21d5 = _0x923d59, _0xfbbad1 = _0xdc0ce0[_0x3b21d5(0x291)]; _0xdc0ce0[_0x3b21d5(0x889)] = _0x508980 + (_0xfbbad1 - _0x2ddf56); }); } else localStorage['setItem'](_0x923d59(0x845), JSON[_0x923d59(0x39b)](_0x1c54b1)), _0x18f071('表情包已保存！正在刷新应用...'), setTimeout(() => location[_0x923d59(0x1b0)](), 0x5dc); } catch (_0x57a44c) { _0x18f071(_0x923d59(0x760)); } }), _0x893235(), _0x137307(); const _0x122af8 = document[_0x1c94e5(0xad1)](_0x1c94e5(0x8d8)), _0x19d8eb = document['getElementById'](_0x1c94e5(0x48d)), _0x173e45 = document[_0x1c94e5(0xad1)](_0x1c94e5(0x88d)); _0x122af8 && _0x122af8[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x2c5ee7 = _0x1c94e5; _0x2c5ee7(0x603) !== _0x2c5ee7(0x603) ? (_0x337491[_0x2c5ee7(0x1a7)] = 'music', _0x1ef3a2[_0x2c5ee7(0xb85)](_0x27b35e, _0x34f15c)) : _0x3a3d7b[_0x2c5ee7(0x400)] && (_0x3a3d7b[_0x2c5ee7(0x24b)] ? _0x3a3d7b[_0x2c5ee7(0xbc9)]() : _0x2c5ee7(0x200) === 'KgOlQ' ? (_0x3bb1c4[_0x2c5ee7(0x208)](_0x2c5ee7(0x592), _0x43c499), _0x8c4641('保存壁纸失败:\x20' + _0x5d081c['message'])) : _0x3a3d7b['pause']()); }); _0x19d8eb && _0x19d8eb[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x581fbc = _0x1c94e5; if (_0x581fbc(0x36c) === 'Sueyp') { _0x56d21f = _0x5505c5(_0xb7beea); if (!_0x2624f8) throw new _0x1c9d87(_0x581fbc(0x2f6)); _0x8d6933[_0x581fbc(0x905)](_0x581fbc(0x963)); } else { if (_0x2c45d7[_0x581fbc(0xa2f)]['length'] === 0x0) return; _0x2c45d7[_0x581fbc(0x11d)] = (_0x2c45d7[_0x581fbc(0x11d)] + 0x1) % _0x2c45d7[_0x581fbc(0xa2f)][_0x581fbc(0x1ea)]; const _0x9dceb9 = _0x2c45d7[_0x581fbc(0xa2f)][_0x2c45d7[_0x581fbc(0x11d)]]['id']; _0x38a987(_0x9dceb9, _0x2c45d7[_0x581fbc(0xa2f)]['map'](_0x22ece5 => _0x22ece5['id'])); } }); if (_0x173e45) { if (_0x1c94e5(0x261) === 'BdilL') _0x173e45[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x2e4886 = _0x1c94e5; if (_0x2e4886(0x836) === _0x2e4886(0x836)) { if (_0x2c45d7[_0x2e4886(0xa2f)][_0x2e4886(0x1ea)] === 0x0) return; _0x2c45d7[_0x2e4886(0x11d)] = (_0x2c45d7[_0x2e4886(0x11d)] - 0x1 + _0x2c45d7[_0x2e4886(0xa2f)][_0x2e4886(0x1ea)]) % _0x2c45d7[_0x2e4886(0xa2f)][_0x2e4886(0x1ea)]; const _0xde98de = _0x2c45d7[_0x2e4886(0xa2f)][_0x2c45d7[_0x2e4886(0x11d)]]['id']; _0x38a987(_0xde98de, _0x2c45d7[_0x2e4886(0xa2f)][_0x2e4886(0x3c4)](_0x1dacd8 => _0x1dacd8['id'])); } else _0x49f981[_0x2e4886(0x208)](_0x2e4886(0x3b1), _0x524b2e), _0x48b35c[_0x2e4886(0x1a7)] = _0x2e4886(0x4f1); }); else return { 'type': _0x1c94e5(0xab5), 'songName': _0x5c3f6d[0x1][_0x1c94e5(0x471)](), 'artist': _0x15d0b7[0x2][_0x1c94e5(0x471)]() }; } document['getElementById']('upload-card-button-2')[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x325006 = _0x1c94e5; document[_0x325006(0xad1)](_0x325006(0x11c))['click'](); }), document[_0x1c94e5(0xad1)](_0x1c94e5(0x804))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), async () => { const _0x25ede6 = _0x1c94e5; if (_0x25ede6(0x720) === _0x25ede6(0x234)) { _0x36b295[_0x25ede6(0x208)](_0x25ede6(0x7b8) + _0x55dfc4[_0x25ede6(0xa6a)] + _0x25ede6(0x5c2)); return; } else await _0x2ac888('widget_card_2'), localStorage[_0x25ede6(0x1fa)](_0x25ede6(0xbbd)), _0x2876e3(), _0x18f071(_0x25ede6(0x542)); }), document[_0x1c94e5(0xad1)](_0x1c94e5(0x11c))[_0x1c94e5(0xb66)](_0x1c94e5(0xad6), async _0x24a7f4 => { const _0x3dc89a = _0x1c94e5; if ('WhVea' !== 'wIyFT') { const _0x59304f = _0x24a7f4[_0x3dc89a(0xb6a)]['files'][0x0]; if (!_0x59304f) return; try { if ('jtDyo' === _0x3dc89a(0x40f)) await _0x5941fe(_0x3dc89a(0xaa0), _0x59304f), await _0x2876e3(), _0x18f071(_0x3dc89a(0x451)); else { if (_0x1ea203?.[_0x3dc89a(0x1a7)] === _0x3dc89a(0x639)) _0x126f50 = _0x4f3515(_0x5d91d6[_0x3dc89a(0x402)][0x0]); else _0x387db5?.[_0x3dc89a(0x1a7)] === 'group' && _0x5206c8 && (_0x2adb95 = _0x3cb753(_0x3f9ed2)); _0x2881e2 = _0x4d82aa?.['avatar'] || _0x22ca05, _0x3b26e0 = _0x4e7a24?.[_0x3dc89a(0x2ad)] || ''; } } catch (_0x58d990) { _0x18f071(_0x3dc89a(0x424) + _0x58d990[_0x3dc89a(0x80d)]); } } else { if (!_0x5ef702[_0x3dc89a(0x554)] || _0x3d5854[_0x3dc89a(0x554)][_0x3dc89a(0x1ea)] === 0x0) { _0x56ef8b[_0x3dc89a(0x208)](_0x3dc89a(0x7bc)); return; } const _0xa88721 = _0x258553[_0x3dc89a(0x554)][0x0]; if (_0xa88721[_0x3dc89a(0x739)][_0x3dc89a(0x1ea)] < 0x2) { _0x671542[_0x3dc89a(0x208)](_0x3dc89a(0x7b8) + _0xa88721[_0x3dc89a(0xa6a)] + _0x3dc89a(0x5c2)); return; } const _0x4f9c35 = { 'id': _0x3dc89a(0x7e8) + _0x432502[_0x3dc89a(0x7e3)](), 'authorType': _0x3dc89a(0x2cd), 'authorId': _0xa88721['memberCharacterIds'][0x0], 'content': _0x3dc89a(0x66c), 'timestamp': _0x1aa3be['now'](), 'likes': [_0xa88721[_0x3dc89a(0x739)][0x1]], 'comments': [{ 'commentId': 'c_' + _0x100edf[_0x3dc89a(0x7e3)](), 'authorId': _0xa88721[_0x3dc89a(0x739)][0x1], 'content': '赞同！渲染效果一级棒！' }] }; _0xa88721['posts']['push'](_0x4f9c35), _0x4578fd(), _0x282bbb['log'](_0x3dc89a(0xb7e) + _0xa88721['name'] + _0x3dc89a(0x3e5)), _0x2db6b4(_0x3dc89a(0x8ec)); } }), _0x2ddc59(), _0x4de3d0(), _0x96d382(), document['getElementById'](_0x1c94e5(0xb55))[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), async () => { const _0x61164f = _0x1c94e5; if (_0x61164f(0x483) === _0x61164f(0x483)) { const _0x45767a = await _0x17d597(_0x61164f(0x7b9)); if (_0x45767a) { const _0x203077 = await _0x17d597(_0x61164f(0x8ab)); if (_0x203077) { _0x4ded3c(!![], _0x61164f(0x19b)); try { if (_0x61164f(0xa12) === _0x61164f(0x7e4)) _0x3f3295[_0x61164f(0x208)]('用户分享音乐失败:', _0x1a1ab0), _0x59aace(_0x61164f(0x16b) + _0x19e175[_0x61164f(0x80d)]); else { localStorage[_0x61164f(0x9f0)](); const _0x112f91 = await _0x2e216a, _0x1c9d59 = _0x112f91['transaction']([_0x61164f(0xb4b), _0x61164f(0x57e), _0x61164f(0x98a)], _0x61164f(0x2b8)); await Promise[_0x61164f(0x32e)]([_0x1c9d59['objectStore'](_0x61164f(0xb4b))['clear'](), _0x1c9d59[_0x61164f(0x92c)](_0x61164f(0x57e))[_0x61164f(0x9f0)](), _0x1c9d59['objectStore'](_0x61164f(0x98a))[_0x61164f(0x9f0)]()]), await new Promise(_0x5ad858 => { const _0x4296f0 = _0x61164f; _0x1c9d59[_0x4296f0(0x89d)] = _0x5ad858; }), _0x18f071('净化完成！应用即将重启。'), setTimeout(() => { location['reload'](); }, 0x5dc); } } catch (_0x370bf7) { _0x61164f(0x7a7) !== _0x61164f(0x4d5) ? (_0x4ded3c(![]), _0x18f071('净化失败了，哼:\x20' + _0x370bf7[_0x61164f(0x80d)])) : (_0x20e078[_0x61164f(0x1fa)](_0x61164f(0x199) + _0x2933ca['id']), _0x507fd2(_0x61164f(0x828) + _0x1da934['name'] + '\x22\x20的聊天记录已清空。')); } } } } else { const _0x530ac7 = _0x5d7bc6[_0x61164f(0x93e)](_0x132238, _0x61164f(0x2cb)), _0x3a1bb9 = _0x530ac7['objectStore'](_0x58b11a), _0x2f3e31 = _0x3a1bb9[_0x61164f(0x8c2)](_0x58b5a5); _0x2f3e31[_0x61164f(0x62f)] = () => _0x4a6f23(_0x2f3e31[_0x61164f(0xb7b)] ? _0x2f3e31['result'][_0x61164f(0xbc0)] : null), _0x2f3e31[_0x61164f(0x168)] = () => _0x278923(_0x2f3e31[_0x61164f(0x208)]); } }); const _0x53a377 = document[_0x1c94e5(0x94b)](_0x1c94e5(0x6b9)); if (_0x53a377) { const _0x585cab = document[_0x1c94e5(0xa51)](_0x1c94e5(0x54f)); _0x585cab['id'] = _0x1c94e5(0x892), _0x585cab[_0x1c94e5(0x948)] = _0x1c94e5(0x7a9), Object[_0x1c94e5(0xb85)](_0x585cab[_0x1c94e5(0x819)], { 'position': _0x1c94e5(0xaf5), 'top': _0x1c94e5(0x9f1), 'right': '20px', 'fontSize': '0.7rem', 'lineHeight': _0x1c94e5(0x366), 'color': _0x1c94e5(0x671), 'opacity': _0x1c94e5(0x608), 'cursor': 'pointer', 'zIndex': '1', 'transition': _0x1c94e5(0xa18), 'whiteSpace': _0x1c94e5(0x53a), 'textAlign': 'right' }), _0x585cab[_0x1c94e5(0x193)] = () => { const _0xb4e30 = _0x1c94e5; if ('OCvQB' !== _0xb4e30(0x7ed)) { const _0x46fa92 = _0x176b60[_0xb4e30(0x82f)]; _0x5e4b3e[_0xb4e30(0x169)][_0xb4e30(0x819)]['setProperty'](_0xb4e30(0x4e7), _0x46fa92 + '%'), _0x55b50b[_0xb4e30(0x3ae)](_0xb4e30(0xada), _0x46fa92), _0x5c307f(); } else _0x585cab[_0xb4e30(0x819)][_0xb4e30(0x838)] = '1'; }, _0x585cab[_0x1c94e5(0x88b)] = () => { const _0x6280e5 = _0x1c94e5; _0x585cab[_0x6280e5(0x819)][_0x6280e5(0x838)] = _0x6280e5(0x608); }, _0x585cab[_0x1c94e5(0xb66)](_0x1c94e5(0x43a), () => { const _0x335ca3 = _0x1c94e5; window[_0x335ca3(0x9fb)](_0x335ca3(0x357), _0x335ca3(0x4cf)); }), _0x53a377[_0x1c94e5(0x819)][_0x1c94e5(0x510)] = _0x1c94e5(0x684), _0x53a377['prepend'](_0x585cab); } } const _0x66a0c6 = _0x1c58bc(0x57e); async function _0x401645(_0x38dbef) { const _0x24d224 = await _0x2e216a; return new Promise((_0x21acb5, _0x1f06ac) => { const _0x190e8e = _0x2205, _0xaab220 = _0x24d224[_0x190e8e(0x93e)](_0x66a0c6, 'readonly'), _0x38f4d6 = _0xaab220[_0x190e8e(0x92c)](_0x66a0c6), _0x4d8708 = _0x38f4d6[_0x190e8e(0x8c2)](_0x38dbef); _0x4d8708[_0x190e8e(0x62f)] = () => _0x21acb5(_0x4d8708['result']), _0x4d8708[_0x190e8e(0x168)] = () => _0x1f06ac(_0x4d8708['error']); }); } async function _0x357d19() { const _0x18374e = await _0x2e216a; return new Promise((_0x15da3b, _0x105816) => { const _0x5879e4 = _0x2205; if ('XQSKl' !== _0x5879e4(0x695)) { const _0x40bda7 = _0x18374e[_0x5879e4(0x93e)](_0x66a0c6, _0x5879e4(0x2cb)), _0x2e59e5 = _0x40bda7['objectStore'](_0x66a0c6), _0xccc921 = _0x2e59e5[_0x5879e4(0x998)](); _0xccc921['onsuccess'] = () => _0x15da3b(_0xccc921[_0x5879e4(0xb7b)]), _0xccc921['onerror'] = () => _0x105816(_0xccc921[_0x5879e4(0x208)]); } else _0x2f6e9f[_0x5879e4(0x9c4)][_0x5879e4(0xac2)]('show'), _0x47f276[_0x5879e4(0x9c4)]['contains']('show') && (_0x4ce01d[_0x5879e4(0x889)] = _0x20a1b1[_0x5879e4(0x291)]); }); } async function _0x2d384a(_0x432de5) { const _0x9eb69a = _0x1c58bc; if (_0x9eb69a(0x4e8) === _0x9eb69a(0x4e8)) { const _0x2d4abf = await _0x2e216a; return new Promise((_0x14f7be, _0x22e547) => { const _0x1f1653 = _0x9eb69a; if ('XLKCj' !== _0x1f1653(0x377)) { const _0x11e2b2 = _0x2d4abf[_0x1f1653(0x93e)](_0x66a0c6, _0x1f1653(0x2b8)), _0x5067a4 = _0x11e2b2[_0x1f1653(0x92c)](_0x66a0c6), _0x5593fd = _0x5067a4[_0x1f1653(0x982)](_0x432de5); _0x5593fd[_0x1f1653(0x62f)] = () => _0x14f7be(_0x5593fd[_0x1f1653(0xb7b)]), _0x5593fd[_0x1f1653(0x168)] = () => _0x22e547(_0x5593fd[_0x1f1653(0x208)]); } else _0x34b85f[_0x1f1653(0x8ce)](_0x50e253['createElement'](_0x1f1653(0x54f))); }); } else _0x4d2745(_0x9eb69a(0x76a) + _0x308a82[_0x9eb69a(0x80d)]); } async function _0xad2270(_0x1b9ae4) { const _0x330cf5 = await _0x2e216a; return new Promise((_0x94ce80, _0x1c0c67) => { const _0x525d01 = _0x2205, _0x4097f4 = _0x330cf5['transaction'](_0x66a0c6, _0x525d01(0x2b8)), _0x1f620d = _0x4097f4[_0x525d01(0x92c)](_0x66a0c6), _0x9b08e = _0x1f620d['delete'](_0x1b9ae4); _0x9b08e[_0x525d01(0x62f)] = () => _0x94ce80(), _0x9b08e[_0x525d01(0x168)] = () => _0x1c0c67(_0x9b08e['error']); }); } let _0x2af983 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; const _0x1462c5 = { 'audio': document['getElementById']('altar-slot-audio'), 'cover': document[_0x1c58bc(0xad1)]('altar-slot-cover'), 'info': document['getElementById'](_0x1c58bc(0x270)), 'lyrics': document[_0x1c58bc(0xad1)](_0x1c58bc(0xb0c)) }, _0x1566aa = { 'audio': document[_0x1c58bc(0xad1)](_0x1c58bc(0x50e)), 'cover': document['getElementById'](_0x1c58bc(0x6d6)), 'info': document[_0x1c58bc(0xad1)](_0x1c58bc(0x59f)), 'lyrics': document[_0x1c58bc(0xad1)](_0x1c58bc(0x586)) }; for (const _0x460368 in _0x1462c5) { if (_0x1c58bc(0xba0) !== _0x1c58bc(0xba0)) { const _0x3e28f6 = _0xba4b6['toLowerCase'](); if (_0x4ad477[_0x1c58bc(0x69b)](_0x3098d3 => _0x3e28f6[_0x1c58bc(0xbdd)](_0x3098d3))) { const _0x19dbbf = _0x3504c0[_0x3e557b]; if (typeof _0x19dbbf === _0x1c58bc(0x319)) _0x2380f5[_0x1c58bc(0xb49)](_0x19dbbf); if (_0x3b979a[_0x1c58bc(0x460)](_0x19dbbf)) _0x19dbbf[_0x1c58bc(0x4ac)](_0x129ff6 => { const _0x16aa94 = _0x1c58bc; if (typeof _0x129ff6 === _0x16aa94(0x319)) _0x5e2883[_0x16aa94(0xb49)](_0x129ff6); }); } } else _0x1462c5[_0x460368][_0x1c58bc(0xb66)]('click', () => _0x1566aa[_0x460368][_0x1c58bc(0x43a)]()), _0x1566aa[_0x460368]['addEventListener']('change', _0x3d290b => { const _0x1fa32c = _0x1c58bc; _0x1fa32c(0x327) !== _0x1fa32c(0x327) ? _0x33deb9[_0x1fa32c(0x864)](_0x24dd2f, _0x2e3793[_0x1fa32c(0x248)]) : _0xd4394a(_0x460368, _0x3d290b['target']['files'][0x0]); }); } function _0xd4394a(_0xf08a6c, _0xbaa947) { const _0xb7347d = _0x1c58bc; if (_0xb7347d(0x87f) === _0xb7347d(0x87f)) { if (!_0xbaa947) return; _0x2af983[_0xf08a6c] = _0xbaa947, _0x1462c5[_0xf08a6c][_0xb7347d(0x94b)](_0xb7347d(0x632))[_0xb7347d(0x948)] = _0xbaa947[_0xb7347d(0xa6a)], _0x1462c5[_0xf08a6c][_0xb7347d(0x9c4)][_0xb7347d(0x2ac)]('filled'), _0x347d2f(); } else { const _0x1078be = _0x19df84[_0xb7347d(0x4b4)]('.message-container'), _0x59c300 = _0x1de39d[_0xb7347d(0x2d1)][_0xb7347d(0x22c)], _0x5356f0 = _0x10a402(_0x1078be[_0xb7347d(0x2d1)][_0xb7347d(0xb38)], 0xa); _0x55b2cd(_0x59c300, _0x5356f0, _0x1c2927); } } function _0x347d2f() { const _0x3848c3 = _0x1c58bc, _0x1e9e40 = document[_0x3848c3(0xad1)]('confirm-altar-upload-button'); _0x2af983[_0x3848c3(0x249)] && _0x2af983[_0x3848c3(0x71a)] ? _0x1e9e40['disabled'] = ![] : _0x1e9e40['disabled'] = !![]; } function _0xad85c0() { const _0x30f50c = _0x1c58bc; _0x2af983 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x4b2a1f in _0x1462c5) { 'BJqbW' === _0x30f50c(0x53d) ? _0x540261(_0xaebb75) : (_0x1462c5[_0x4b2a1f][_0x30f50c(0x9c4)]['remove'](_0x30f50c(0x99c)), _0x1566aa[_0x4b2a1f][_0x30f50c(0x82f)] = ''); } _0x1462c5[_0x30f50c(0x249)][_0x30f50c(0x94b)](_0x30f50c(0x632))[_0x30f50c(0x948)] = '点击选择\x20.mp3\x20或\x20.flac', _0x1462c5[_0x30f50c(0x696)][_0x30f50c(0x94b)](_0x30f50c(0x632))[_0x30f50c(0x948)] = _0x30f50c(0x69e), _0x1462c5['info'][_0x30f50c(0x94b)]('.slot-filename')[_0x30f50c(0x948)] = '点击选择\x20info.txt', _0x1462c5['lyrics'][_0x30f50c(0x94b)](_0x30f50c(0x632))['textContent'] = _0x30f50c(0x4e6), _0x347d2f(); } document[_0x1c58bc(0xad1)](_0x1c58bc(0x520))['addEventListener'](_0x1c58bc(0x43a), async () => { const _0x1a27a1 = _0x1c58bc; if (_0x1a27a1(0x751) !== _0x1a27a1(0x8eb)) { if (!_0x2af983[_0x1a27a1(0x249)] || !_0x2af983[_0x1a27a1(0x71a)]) { _0x18f071(_0x1a27a1(0x740)); return; } await _0x2ad9dc(); } else { if (_0x402e36) _0x5cd618[_0x1a27a1(0x400)] = _0x5b09f4[_0x1a27a1(0x97d)](_0x58afc6); } }), document[_0x1c58bc(0xad1)](_0x1c58bc(0xa9a))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x1b5779 = _0x1c58bc; _0xad85c0(), _0x512ecd('musicUploadAltar', _0x1b5779(0x505)); }), document[_0x1c58bc(0xad1)](_0x1c58bc(0x92f))['addEventListener'](_0x1c58bc(0x43a), () => { const _0x5be6af = _0x1c58bc; _0x5be6af(0x17b) !== _0x5be6af(0x17b) ? (_0x5a9695['preferences']['forceWhiteClock'] = _0xa1bb2a['checked'], _0x4b2ad9(), _0x82d4c()) : _0x512ecd(_0x5be6af(0x505), _0x5be6af(0x5dc)); }); async function _0x2ad9dc() { const _0x24af69 = _0x1c58bc; _0x4ded3c(!![], '正在解析音乐灵魂...'); try { const _0x14771f = await _0x2af983['info'][_0x24af69(0x4f1)](); let _0x178da6; if (_0x14771f[_0x24af69(0x471)]()[_0x24af69(0xbdd)]('{')) _0x178da6 = JSON[_0x24af69(0x387)](_0x14771f); else { _0x178da6 = {}; const _0x117f3c = _0x14771f[_0x24af69(0x5d6)]('\x0a'); _0x117f3c[_0x24af69(0x4ac)](_0x15bce8 => { const _0x356027 = _0x24af69; if (_0x356027(0x95a) === _0x356027(0x688)) _0x2af7f4 = _0x32d112[_0x356027(0xa3a)]; else { const _0x10851d = _0x15bce8[_0x356027(0x5d6)](/:\s|：\s/); if (_0x10851d[_0x356027(0x1ea)] === 0x2) { const _0x43a6a0 = _0x10851d[0x0][_0x356027(0x471)](), _0x39e8b6 = _0x10851d[0x1][_0x356027(0x471)](), _0x430898 = { '歌名': _0x356027(0x6fd), '艺术家': '歌手', '专辑': '专辑' }; _0x430898[_0x43a6a0] && (_0x178da6[_0x430898[_0x43a6a0]] = _0x39e8b6); } } }); if (!_0x178da6[_0x24af69(0x6fd)]) throw new Error(_0x24af69(0x13d)); _0x178da6['歌曲ID'] = _0x24af69(0x35d) + Date[_0x24af69(0x7e3)]() + '\x20'; } const _0x1b3635 = 'song_' + (_0x178da6[_0x24af69(0x537)] || Date[_0x24af69(0x7e3)]()) + '\x20', _0x585266 = { 'id': _0x1b3635, 'info': _0x178da6, 'audio': _0x2af983[_0x24af69(0x249)], 'cover': _0x2af983['cover'], 'lyrics': _0x2af983['lyrics'] ? await _0x2af983[_0x24af69(0x846)][_0x24af69(0x4f1)]() : '' }; await _0x2d384a(_0x585266), await _0x3404ae(), _0x4ded3c(![]), _0x18f071(_0x24af69(0x8c9) + _0x178da6[_0x24af69(0x6fd)] + _0x24af69(0x202)), _0x512ecd(_0x24af69(0x505), _0x24af69(0x5dc)); } catch (_0x27fbd4) { _0x4ded3c(![]), console[_0x24af69(0x208)](_0x24af69(0x53f), _0x27fbd4), _0x18f071(_0x24af69(0x26b) + _0x27fbd4['message'] + '\x20'); } } async function _0x3404ae() { const _0x5f24b5 = _0x1c58bc; if (_0x5f24b5(0x24a) !== 'nwyEO') delete _0x160553[_0x5f24b5(0x37b)]; else { const _0x116d6e = document['getElementById'](_0x5f24b5(0xadd)); _0x116d6e['innerHTML'] = ''; const _0x49881e = await _0x357d19(); if (_0x49881e[_0x5f24b5(0x1ea)] === 0x0) { _0x116d6e[_0x5f24b5(0x16c)] = _0x5f24b5(0x129); return; } _0x49881e[_0x5f24b5(0x940)]((_0x39d924, _0x3bf314) => (_0x39d924['info'][_0x5f24b5(0x6fd)] || '')[_0x5f24b5(0x3a4)](_0x3bf314[_0x5f24b5(0x71a)][_0x5f24b5(0x6fd)] || '')); for (const _0x64d866 of _0x49881e) { const _0x4784da = document[_0x5f24b5(0xa51)](_0x5f24b5(0x54f)); _0x4784da[_0x5f24b5(0xa5e)] = _0x5f24b5(0x37a), _0x4784da[_0x5f24b5(0x2d1)]['songId'] = _0x64d866['id']; const _0xd93f8e = _0x64d866[_0x5f24b5(0x696)] ? URL[_0x5f24b5(0x97d)](_0x64d866['cover']) : _0x72f264; _0x4784da['innerHTML'] = _0x5f24b5(0x871) + _0xd93f8e + _0x5f24b5(0xb9d) + (_0x64d866[_0x5f24b5(0x71a)][_0x5f24b5(0x6fd)] || _0x5f24b5(0x370)) + _0x5f24b5(0x410) + (_0x64d866[_0x5f24b5(0x71a)]['歌手'] || _0x5f24b5(0x649)) + '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; let _0x48da0e = null; const _0x599b36 = _0x482aaf => { if (_0x482aaf['button'] === 0x2) return; _0x48da0e = setTimeout(async () => { const _0x4d7ad3 = _0x2205; if (_0x482aaf[_0x4d7ad3(0x1a7)] === _0x4d7ad3(0x5c6)) _0x482aaf[_0x4d7ad3(0x90a)](); const _0x246b0e = await _0x17d597(_0x4d7ad3(0x1b2) + _0x64d866[_0x4d7ad3(0x71a)][_0x4d7ad3(0x6fd)] + _0x4d7ad3(0xa85)); _0x246b0e && (await _0xad2270(_0x64d866['id']), await _0x3404ae(), _0x18f071(_0x4d7ad3(0xb01))); }, 0x320); }, _0x4da32c = () => { clearTimeout(_0x48da0e); }; _0x4784da[_0x5f24b5(0xb66)](_0x5f24b5(0xae3), _0x599b36), _0x4784da['addEventListener']('mouseup', _0x4da32c), _0x4784da['addEventListener']('mouseleave', _0x4da32c), _0x4784da[_0x5f24b5(0xb66)]('touchstart', _0x599b36, { 'passive': ![] }), _0x4784da[_0x5f24b5(0xb66)](_0x5f24b5(0x855), _0x4da32c), _0x4784da[_0x5f24b5(0xb66)](_0x5f24b5(0x122), _0x4da32c), _0x4784da[_0x5f24b5(0xb66)](_0x5f24b5(0x43a), _0x1908c2 => { const _0x12fb8a = _0x5f24b5; if (_0x12fb8a(0x339) !== _0x12fb8a(0x339)) _0x570633[_0x12fb8a(0x89d)] = _0x1f11f8; else { if (_0x48da0e) clearTimeout(_0x48da0e); if (_0x1908c2[_0x12fb8a(0x792)]) return; setTimeout(() => { const _0x2cf4c0 = _0x12fb8a; _0x48da0e && (_0x2cf4c0(0x7d3) === _0x2cf4c0(0x7d3) ? _0x38a987(_0x64d866['id'], _0x49881e[_0x2cf4c0(0x3c4)](_0x4f4785 => _0x4f4785['id'])) : (_0x270bb8[_0x2cf4c0(0x9c4)][_0x2cf4c0(0x2ac)](_0x2cf4c0(0x578)), _0x4c3ee7[_0x2cf4c0(0x9c4)][_0x2cf4c0(0x2ac)](_0x2cf4c0(0xaab)), _0xd98abf[_0x2cf4c0(0x9c4)][_0x2cf4c0(0x2ac)]('is-visible'), _0x109552(() => { const _0x5bcbc7 = _0x2cf4c0; _0x35830f['classList']['remove'](_0x5bcbc7(0x134), _0x5bcbc7(0xaab)), _0x2ac03a[_0x5bcbc7(0x9c4)][_0x5bcbc7(0x6e1)](_0x5bcbc7(0x578)), _0x11c7b4[_0x5bcbc7(0x20b)] = _0xc953b8, _0x1030d0(), _0x5c09fc[_0x5bcbc7(0x95b)] = ![]; }, 0x2bc))); }, 0x32); } }), _0x116d6e[_0x5f24b5(0x8ce)](_0x4784da); } } } _0x54dd1c[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x57699b = _0x1c58bc; _0x18f071(_0x57699b(0x48c)); }), _0xc9314b['addEventListener']('click', () => { const _0x5bb243 = _0x1c58bc; _0x5bb243(0x1b4) === _0x5bb243(0x1b4) ? _0x18f071(_0x5bb243(0x98f)) : _0x2c9ccd += _0x5bb243(0x5eb) + _0x5788f5[_0x5bb243(0x691)](_0xecc1a2 / 0x3c) + _0x5bb243(0x521); }); let _0x4704fd = [], _0x31d0f4 = -0x1; async function _0x38a987(_0x2264e2, _0x236022) { const _0x2a2c61 = _0x1c58bc; if (_0x2a2c61(0x757) !== 'IQzfB') { const _0x5c03ea = await _0x401645(_0x2264e2); if (!_0x5c03ea) return; _0x17fbb7 = { 'title': _0x5c03ea[_0x2a2c61(0x71a)][_0x2a2c61(0x6fd)] || '未知歌曲', 'artist': _0x5c03ea[_0x2a2c61(0x71a)]['歌手'] || _0x2a2c61(0x649), 'cover': _0x5c03ea[_0x2a2c61(0x696)] ? URL[_0x2a2c61(0x97d)](_0x5c03ea[_0x2a2c61(0x696)]) : _0x72f264, 'isFromLibrary': !![] }; const _0x320f9b = URL[_0x2a2c61(0x97d)](_0x5c03ea[_0x2a2c61(0x249)]); _0x3a3d7b[_0x2a2c61(0x400)] = _0x320f9b, _0x3a3d7b[_0x2a2c61(0xbc9)](), _0x392027(); } else { _0x5475c2(); const _0x3d24b2 = (_0x4e0e4e[_0x2a2c61(0x780)]['endpoint'] || '')[_0x2a2c61(0x7a3)](_0x453075); _0x1813d5[_0x2a2c61(0xa6c)] = _0x3d24b2, _0x10cd17(_0x2a2c61(0x84c), _0x2a2c61(0x315)); } } async function _0x392027() { const _0x565758 = _0x1c58bc; if ('LObmm' !== 'GuUGM') { const _0x2e1a5f = document[_0x565758(0xad1)]('music-widget-card'), _0x7ba7bc = document[_0x565758(0xad1)](_0x565758(0x141)), _0x2a9768 = document['getElementById']('widget-artist'), _0x14e7ed = document['getElementById'](_0x565758(0x361)), _0x2354d5 = _0x17fbb7; if (_0x2354d5 && _0x2354d5[_0x565758(0xaa3)]) { if (_0x565758(0x9ef) !== 'gtPmf') _0x7ba7bc[_0x565758(0x948)] = _0x2354d5[_0x565758(0x616)], _0x2a9768[_0x565758(0x948)] = _0x2354d5[_0x565758(0x50a)], _0x2e1a5f[_0x565758(0x9c4)][_0x565758(0x2ac)](_0x565758(0x482)), _0x2e1a5f[_0x565758(0x819)]['setProperty'](_0x565758(0x34e), 'url(' + _0x2354d5['cover'] + ')'); else { const _0x3cdc91 = _0xfe3ef5[_0x565758(0x471)](); _0x3cdc91 && _0x37ed92['push'](..._0x18c8d5(_0x3cdc91)), _0x1493c4 < _0x2821c1['length'] && (_0x28bb66['push'](_0x11571e[_0x1ebeaf]['trim']()), _0x43302e++); } } else _0x7ba7bc[_0x565758(0x948)] = _0x565758(0xa63), _0x2a9768[_0x565758(0x948)] = _0x565758(0x3a2), _0x2e1a5f[_0x565758(0x9c4)][_0x565758(0x6e1)]('is-playing'), _0x14e7ed[_0x565758(0x819)][_0x565758(0x85e)](_0x565758(0x34e), 'none'); } else { const _0x16ab5d = _0x2ef9e8[_0x565758(0x54e)][_0x565758(0x69b)](_0x1093c2 => _0x1093c2['id'] === _0x565758(0x135)); !_0x16ab5d && _0x19ae14[_0x565758(0xb49)]({ 'id': 'default', 'name': _0x565758(0x1ee) }); } } function _0xd32fa5() { const _0x374003 = _0x1c58bc, _0x4b86bf = document[_0x374003(0xad1)](_0x374003(0x9d3)); if (!_0x4b86bf) return; const _0x1ef8b7 = document[_0x374003(0xad1)]('player-cover'), _0x10999e = document[_0x374003(0xad1)](_0x374003(0x9cf)), _0x38fb95 = document['getElementById'](_0x374003(0x9a1)), _0x54eecd = document[_0x374003(0xad1)](_0x374003(0x8d8)), _0x5275eb = _0x2c45d7[_0x374003(0xa2f)][_0x2c45d7['currentlyPlayingIndex']], _0x4b3ee1 = _0x2c45d7[_0x374003(0x9c1)], _0x44a724 = document['getElementById']('music-screen')[_0x374003(0x9c4)][_0x374003(0x75d)](_0x374003(0x630)); if (_0x5275eb && _0x44a724) { if (_0x374003(0x6e9) !== _0x374003(0x6e9)) { const _0xefb014 = _0x3ed154[_0x374003(0xad1)]('countdown-title'), _0x591ed2 = _0x5b0d09[_0x374003(0xad1)](_0x374003(0x225)), _0x472140 = new _0xf99788(); _0x472140[_0x374003(0x8ac)](0x0, 0x0, 0x0, 0x0); const _0x44988e = _0x4f4839[_0x374003(0xb73)][_0x374003(0x662)](_0xd840e3 => _0xd840e3[_0x374003(0x1a7)] === _0x374003(0x785) && new _0x2ad603(_0xd840e3[_0x374003(0x6a0)] + _0x374003(0x908)) >= _0x472140)['sort']((_0x47acc5, _0x4942e9) => new _0x4c4c34(_0x47acc5[_0x374003(0x6a0)]) - new _0x5978f3(_0x4942e9['date'])); if (_0x44988e[_0x374003(0x1ea)] > 0x0) { const _0x5c3260 = _0x44988e[0x0], _0x3db1a6 = new _0x119ded(_0x5c3260[_0x374003(0x6a0)] + _0x374003(0x908)), _0x37f315 = _0x3db1a6 - _0x472140, _0x5f4cee = _0x576464['ceil'](_0x37f315 / (0x3e8 * 0x3c * 0x3c * 0x18)); _0xefb014[_0x374003(0x948)] = _0x374003(0x5bb) + _0x5c3260['content'] + '」', _0x591ed2[_0x374003(0x16c)] = _0x374003(0x217) + _0x5f4cee + '</span><span\x20class=\x22unit\x22>天</span>'; } else _0xefb014[_0x374003(0x948)] = _0x374003(0x63f), _0x591ed2['innerHTML'] = _0x374003(0x3d6); } else { _0x4b86bf[_0x374003(0x9c4)][_0x374003(0x6e1)](_0x374003(0x827)); if (_0x5275eb['coverId']) { if (_0x374003(0xad8) !== _0x374003(0xad8)) { _0x14fd45[_0x374003(0x82f)] = '', _0xd58c31[_0x374003(0x16c)] = ''; if (_0x32d72a[_0x374003(0xb76)][_0x374003(0x1ea)] < 0x2) { _0x402394(_0x374003(0x3ff)); return; } _0x5df9fa[_0x374003(0xb76)][_0x374003(0x4ac)](_0x470761 => { const _0x13414d = _0x374003, _0x2871cb = _0x569fc4[_0x13414d(0xa51)]('li'); _0x2871cb['className'] = _0x13414d(0x394), _0x2871cb[_0x13414d(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-' + _0x470761['id'] + _0x13414d(0x350) + _0x470761['id'] + _0x13414d(0xbac) + (_0x470761[_0x13414d(0x37b)] || _0x47cb9c) + _0x13414d(0x2bd) + _0x470761['id'] + _0x13414d(0x685) + _0x470761[_0x13414d(0xa6a)] + _0x13414d(0xa6b), _0x4a4698[_0x13414d(0x8ce)](_0x2871cb); }), _0x3b2525(_0x374003(0x2cf), _0x374003(0x59c)); } else _0x262fce(_0x5275eb['coverId'])[_0x374003(0xa0d)](_0x32d225 => { const _0x481e8d = _0x374003; if (_0x32d225) _0x1ef8b7[_0x481e8d(0x400)] = URL['createObjectURL'](_0x32d225); }); } else 'JTuVE' === _0x374003(0x447) ? _0x3690b1[_0x374003(0x1a7)] === 'group' && (_0x911214[_0x374003(0x402)] = _0x5f0460['participantIds'][_0x374003(0x662)](_0xc7bd42 => _0xc7bd42 !== _0x457c24)) : _0x1ef8b7[_0x374003(0x400)] = _0x5275eb['coverUrl'] || _0x72f264; _0x10999e[_0x374003(0x948)] = _0x5275eb[_0x374003(0x6d1)] || '未知歌曲', _0x38fb95[_0x374003(0x948)] = _0x5275eb[_0x374003(0x50a)] || _0x374003(0x649), _0x54eecd[_0x374003(0x948)] = _0x4b3ee1 ? '❚❚' : '▶'; } } else _0x4b86bf['classList'][_0x374003(0x2ac)](_0x374003(0x827)); } _0x54dd1c && _0x54dd1c[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0xfe809 = _0x1c58bc; if ('NIASt' === _0xfe809(0xa8a)) { if (_0x4704fd['length'] === 0x0) return; _0x31d0f4 = (_0x31d0f4 + 0x1) % _0x4704fd[_0xfe809(0x1ea)], _0x38a987(_0x4704fd[_0x31d0f4], _0x4704fd); } else { const _0x5ab26c = _0x584374[_0xfe809(0x61a)]('p'); _0x5ab26c[_0xfe809(0x4ac)](_0x377f87 => _0x377f87[_0xfe809(0x9c4)]['remove']('active')); const _0x534450 = _0x5bda83[_0xfe809(0xad1)](_0xfe809(0x346) + _0x4a4afe); _0x534450 && (_0x534450[_0xfe809(0x9c4)][_0xfe809(0x2ac)](_0xfe809(0x630)), _0x534450[_0xfe809(0x2e6)]({ 'behavior': _0xfe809(0x1a0), 'block': _0xfe809(0x4f3) })); } }); _0xc9314b && _0xc9314b[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => { const _0x2490a2 = _0x1c58bc; if (_0x4704fd[_0x2490a2(0x1ea)] === 0x0) return; _0x31d0f4 = (_0x31d0f4 - 0x1 + _0x4704fd['length']) % _0x4704fd[_0x2490a2(0x1ea)], _0x38a987(_0x4704fd[_0x31d0f4], _0x4704fd); }); _0x3a3d7b[_0x1c58bc(0xb66)]('play', () => { const _0x1a8b14 = _0x1c58bc; _0x2c45d7[_0x1a8b14(0x9c1)] = !![], _0x1ef5d0(); }), _0x3a3d7b['addEventListener']('pause', () => { const _0x37f876 = _0x1c58bc; if (_0x37f876(0x3ee) === _0x37f876(0x2d6)) { const _0x4abc86 = _0x55e263[_0x37f876(0xad1)](_0x11727d); if (!_0x4abc86) return; if (_0x41be92[_0x37f876(0x6b1)]) _0xb0eb62(_0x13a449[_0x37f876(0x6b1)])['then'](_0x3649a7 => { const _0x48674f = _0x37f876; if (_0x3649a7) _0x4abc86[_0x48674f(0x400)] = _0x4f4e88[_0x48674f(0x97d)](_0x3649a7); }); else _0x3f0344[_0x37f876(0x511)] && (_0x4abc86[_0x37f876(0x400)] = _0x2b552c['coverUrl']); } else _0x2c45d7['isPlaying'] = ![], _0x1ef5d0(); }), _0x3a3d7b[_0x1c58bc(0xb66)](_0x1c58bc(0x6dd), () => { const _0x5094cc = _0x1c58bc; if (_0x5094cc(0x309) !== _0x5094cc(0x9d5)) { if (_0x54dd1c) _0x54dd1c[_0x5094cc(0x43a)](); } else _0x400698[_0x5094cc(0x9b6)] = _0x47ec99, _0x317775 = !![]; }); function _0x5b9707() { const _0x4742a8 = _0x1c58bc, _0x4af539 = _0x5c10dc(); if (!_0x4af539) return; _0x131a69[_0x4742a8(0x16c)] = '', _0x4de645['value'] = ''; if (_0x4af539['type'] === _0x4742a8(0x62a)) _0x4af539[_0x4742a8(0x402)]['forEach'](_0x53011e => { const _0x2a05ab = _0x4742a8, _0x2fef31 = _0x132ad2(_0x53011e); if (_0x2fef31) { const _0x3e2460 = document['createElement']('option'); _0x3e2460[_0x2a05ab(0x82f)] = _0x2fef31['id'], _0x3e2460['textContent'] = _0x2fef31[_0x2a05ab(0xa6a)], _0x131a69['appendChild'](_0x3e2460); } }), _0x4feb95[_0x4742a8(0x819)]['display'] = _0x4742a8(0x4e9); else { if (_0x4742a8(0x27a) !== _0x4742a8(0x27a)) { _0x117f77('条目名称和内容都不能为空！'); return; } else _0x4feb95[_0x4742a8(0x819)][_0x4742a8(0x974)] = _0x4742a8(0xb39); } _0x1b7327[_0x4742a8(0x9c4)][_0x4742a8(0x2ac)]('show'), _0x4de645['focus'](); } function _0x516d63() { const _0x38a015 = _0x1c58bc, _0x3708c2 = parseFloat(_0x4de645[_0x38a015(0x82f)]); if (isNaN(_0x3708c2) || _0x3708c2 <= 0x0) { _0x18f071(_0x38a015(0x324)); return; } const _0x55c4f7 = _0x5c10dc(); let _0x410d87 = null; if (_0x55c4f7[_0x38a015(0x1a7)] === _0x38a015(0x62a)) { if (_0x38a015(0x7e7) !== _0x38a015(0x7e7)) { const _0x231e27 = _0xbaa3f2['getElementById'](_0x38a015(0x3f2))[_0x38a015(0x82f)][_0x38a015(0x471)](), _0x4b743c = _0x193a46[_0x38a015(0x94b)](_0x38a015(0xaa4))['value']; if (!_0x231e27) { _0x3e673a('内容不能为空！'); return; } const _0x371fdf = _0x2f4183['userProfiles'][_0x38a015(0x128)](_0x580c36 => _0x580c36['id'] === _0x29a212[_0x38a015(0x4d3)]); if (!_0x371fdf) { _0x18b48a(_0x38a015(0x873)); return; } _0x24fa09[_0x38a015(0xb73)][_0x38a015(0xb49)]({ 'id': 'event_' + _0x9f8b81[_0x38a015(0x7e3)](), 'date': _0x37b01a[_0x38a015(0x246)], 'type': _0x4b743c, 'content': _0x231e27, 'userId': _0x371fdf['id'] }), _0x1adef9(), _0x1f0c6e(), _0x58e854(), _0x580e6c(), _0x19ae88[_0x38a015(0xad1)](_0x38a015(0x805))['classList']['remove'](_0x38a015(0x944)); } else _0x410d87 = _0x131a69[_0x38a015(0x82f)]; } else _0x410d87 = _0x55c4f7[_0x38a015(0x402)][0x0]; const _0x25136a = _0x16e371(_0x55c4f7['id']), _0x2dcd4c = { 'role': _0x38a015(0xa02), 'type': 'transfer', 'content': _0x38a015(0xa99) + (_0x132ad2(_0x410d87)?.[_0x38a015(0xa6a)] || '未知') + _0x38a015(0x255) + _0x3708c2 + ']', 'amount': _0x3708c2, 'recipientId': _0x410d87, 'senderId': _0x25136a['id'], 'timestamp': Date[_0x38a015(0x7e3)]() }; _0x2c45d7['conversationHistory']['push'](_0x2dcd4c), _0x1892f0(), _0xd1d472(), _0x1b7327[_0x38a015(0x9c4)][_0x38a015(0x6e1)](_0x38a015(0x944)); } async function _0x53a1d1(_0x2c5c24) { const _0x52e52d = _0x1c58bc, _0xa0d860 = _0x132ad2(_0x2c5c24); if (!_0xa0d860) return; const _0x19c83b = await _0x17d597(_0x52e52d(0x1a6) + _0xa0d860[_0x52e52d(0xa6a)] + _0x52e52d(0x7ab)); if (!_0x19c83b) return; const _0x210162 = _0x2c45d7[_0x52e52d(0x8b2)]['findIndex'](_0x4b6eee => _0x4b6eee[_0x52e52d(0x57a)] === _0x2c5c24); if (_0x210162 > -0x1) { if (_0x52e52d(0x388) !== _0x52e52d(0x127)) _0x2c45d7[_0x52e52d(0x8b2)][_0x52e52d(0x1d7)](_0x210162, 0x1), _0x3ac55e(), _0x36c76c(), _0x18f071('【' + _0xa0d860[_0x52e52d(0xa6a)] + _0x52e52d(0x123)); else return; } else { if (_0x52e52d(0x540) !== _0x52e52d(0x623)) _0x18f071('这本日记本来就是空的，你还想清空什么？'); else { if (!_0x5a7eb2) return; _0x1d4ec8 = ![], _0x51181c[_0x52e52d(0x819)][_0x52e52d(0x859)] = _0x52e52d(0xb59), _0x4fa0bd < -_0x23bc8e ? _0x8c28b5['classList'][_0x52e52d(0x2ac)]('unlocked') : _0x58d4d3['style']['transform'] = 'translateY(0px)', _0x322799['removeEventListener'](_0x52e52d(0x2fc), _0x23f7ef), _0x2de864['removeEventListener']('mouseup', _0x4042e1); } } } function _0x172267() { const _0x47bdb3 = _0x1c58bc, _0x3928a5 = document[_0x47bdb3(0xad1)]('snoop-character-list-container'); _0x3928a5[_0x47bdb3(0x16c)] = ''; const _0x48b361 = _0x2c45d7[_0x47bdb3(0xb76)][_0x47bdb3(0x662)](_0x29a0b9 => _0x2c45d7['chats']['some'](_0xddc650 => _0xddc650[_0x47bdb3(0x1a7)] === _0x47bdb3(0x639) && _0xddc650[_0x47bdb3(0x402)]['includes'](_0x29a0b9['id']))); if (_0x48b361[_0x47bdb3(0x1ea)] === 0x0) { _0x3928a5['innerHTML'] = _0x47bdb3(0xb97); return; } _0x48b361['forEach'](_0x435c7d => { const _0xd6f89a = _0x47bdb3, _0x31f673 = document['createElement']('li'); _0x31f673[_0xd6f89a(0xa5e)] = 'character-item', _0x31f673[_0xd6f89a(0x2d1)]['charId'] = _0x435c7d['id'], _0x31f673[_0xd6f89a(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22' + (_0x435c7d[_0xd6f89a(0x37b)] || _0x72f264) + '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>' + _0x435c7d['name'] + _0xd6f89a(0x156) + _0x435c7d['name'] + _0xd6f89a(0x2a5), _0x31f673[_0xd6f89a(0x94b)](_0xd6f89a(0x840))[_0xd6f89a(0xb66)]('click', () => _0x1d086a(_0x435c7d['id'])), _0x31f673[_0xd6f89a(0x94b)]('.snoop-clear-btn')[_0xd6f89a(0xb66)](_0xd6f89a(0x43a), async _0x316c8f => { const _0x1551eb = _0xd6f89a; if (_0x1551eb(0x551) !== _0x1551eb(0x551)) _0x17bd6d['push'](_0x5e1bc1[_0x36cf85][_0x1551eb(0x471)]()), _0x3c2411++; else { _0x316c8f[_0x1551eb(0x8ea)](); const _0x322498 = _0x132ad2(_0x435c7d['id']); if (!_0x322498) return; const _0x42639c = await _0x17d597('确定要彻底清空【' + _0x322498[_0x1551eb(0xa6a)] + _0x1551eb(0x6a5)); if (_0x42639c) { if (_0x1551eb(0xa9b) !== _0x1551eb(0xa9b)) _0x27cea4[_0x1551eb(0x6c4)] = null; else { _0x4ded3c(!![], '正在焚烧【' + _0x322498[_0x1551eb(0xa6a)] + _0x1551eb(0x66a)); const _0x23cf0e = [_0x1551eb(0xa6d), _0x1551eb(0x2d7), _0x1551eb(0x2c1), _0x1551eb(0x7d1), _0x1551eb(0x737), _0x1551eb(0xac5), 'footprints', _0x1551eb(0x555)]; for (const _0xc9d3d5 of _0x23cf0e) { const _0x20f53a = _0x1551eb(0x89f) + _0x322498['id'] + '_' + _0xc9d3d5; await _0x318a9f(_0x20f53a); } _0x4ded3c(![]), _0x18f071('【' + _0x322498[_0x1551eb(0xa6a)] + _0x1551eb(0xa5d)); } } } }), _0x3928a5[_0xd6f89a(0x8ce)](_0x31f673); }); } let _0x1ae85b = null, _0x4d44ef = null; function _0x2adbd1() { const _0x57798d = _0x1c58bc, _0x410f29 = new Date(), _0x174ebd = document[_0x57798d(0xad1)](_0x57798d(0x7bb)), _0x5bed03 = document[_0x57798d(0xad1)]('snoop-home-date'), _0x4a37e7 = document['getElementById'](_0x57798d(0xacd)); _0x174ebd && _0x5bed03 && (_0x174ebd[_0x57798d(0x948)] = _0x410f29[_0x57798d(0x569)](_0x57798d(0x15b), { 'hour': '2-digit', 'minute': '2-digit', 'hour12': ![] }), _0x5bed03['textContent'] = _0x410f29[_0x57798d(0x8a2)](_0x57798d(0x15b), { 'month': _0x57798d(0x755), 'day': _0x57798d(0x67c), 'weekday': _0x57798d(0x755) })), _0x4a37e7 && (_0x4a37e7[_0x57798d(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>' + _0x410f29[_0x57798d(0x569)](_0x57798d(0x15b), { 'hour': '2-digit', 'minute': _0x57798d(0x7eb), 'hour12': ![] }) + _0x57798d(0x82e)); } function _0x1d086a(_0x1d7ace) { const _0x26da48 = _0x1c58bc; if (_0x26da48(0x1f5) !== _0x26da48(0x1f5)) return _0x568676[_0x26da48(0x208)](_0x26da48(0x39e), _0x2785d1), _0xf5108[_0x26da48(0x208)]('AI返回的原始文本:', _0x5d4375['rawResponse'] || _0x26da48(0x915)), null; else { _0x1ae85b = _0x1d7ace; const _0x22014b = _0x132ad2(_0x1d7ace); if (!_0x22014b) return; const _0x301a7c = document[_0x26da48(0xad1)]('snoop-phone-screen'), _0x3ecbc0 = document[_0x26da48(0xad1)](_0x26da48(0x704)); if (_0x3ecbc0) _0x3ecbc0[_0x26da48(0x6e1)](); const _0xff6fa0 = document[_0x26da48(0xad1)](_0x26da48(0x746)); if (_0xff6fa0) _0xff6fa0[_0x26da48(0x6e1)](); _0x301a7c['insertAdjacentHTML'](_0x26da48(0x8e3), '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20'), _0x301a7c[_0x26da48(0x900)](_0x26da48(0x8e3), '<div\x20id=\x22snoop-dock\x22></div>'), document['getElementById'](_0x26da48(0x33f))['textContent'] = '', _0x1ad645(); if (_0x4d44ef) clearInterval(_0x4d44ef); _0x2adbd1(), _0x4d44ef = setInterval(_0x2adbd1, 0x2710), _0x512ecd('snoopPhone', _0x26da48(0x98b)); } } function _0x1ad645() { const _0x1026fe = _0x1c58bc, _0x423dcd = document[_0x1026fe(0xad1)](_0x1026fe(0x732)), _0x7ece99 = document[_0x1026fe(0xad1)]('snoop-dock'); _0x423dcd[_0x1026fe(0x16c)] = '<div\x20class=\x22snoop-main-grid\x22></div>', _0x7ece99[_0x1026fe(0x16c)] = ''; const _0x4439c7 = _0x423dcd[_0x1026fe(0x94b)](_0x1026fe(0x7a0)), _0x3d0b51 = [{ 'id': _0x1026fe(0x2d7), 'name': '聊天', 'svg': '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'area': _0x1026fe(0x9c3) }, { 'id': _0x1026fe(0x2c1), 'name': _0x1026fe(0x8e0), 'svg': _0x1026fe(0x546), 'area': _0x1026fe(0x9c3) }, { 'id': _0x1026fe(0xa6d), 'name': '相册', 'svg': _0x1026fe(0x94f), 'area': _0x1026fe(0x9c3) }, { 'id': 'summary', 'name': '总结', 'svg': _0x1026fe(0x7be), 'area': _0x1026fe(0x9c3) }, { 'id': _0x1026fe(0x7d1), 'name': _0x1026fe(0x126), 'svg': _0x1026fe(0x942), 'area': _0x1026fe(0x4aa) }, { 'id': _0x1026fe(0x737), 'name': '外卖', 'svg': _0x1026fe(0xa17), 'area': _0x1026fe(0x4aa) }, { 'id': _0x1026fe(0xac5), 'name': '购物', 'svg': _0x1026fe(0x20e), 'area': _0x1026fe(0x4aa) }, { 'id': _0x1026fe(0x341), 'name': '足迹', 'svg': _0x1026fe(0x4f5), 'area': 'main' }]; _0x3d0b51['forEach'](_0x1483c2 => { const _0x344041 = _0x1026fe, _0x292c6d = document[_0x344041(0xa51)](_0x344041(0x54f)); _0x292c6d[_0x344041(0xa5e)] = _0x344041(0x2af), _0x292c6d['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>' + _0x1483c2[_0x344041(0x473)] + _0x344041(0x637) + _0x1483c2[_0x344041(0xa6a)] + _0x344041(0x5b3), _0x292c6d[_0x344041(0xb66)](_0x344041(0x43a), () => _0x1213fb(_0x1483c2['id'], _0x1483c2[_0x344041(0xa6a)])), _0x1483c2['area'] === 'dock' ? _0x344041(0x3fd) !== _0x344041(0x3fd) ? (_0x2f80d0[_0x344041(0x819)][_0x344041(0xbe4)] = _0x344041(0xbce) + _0xa68b93['createObjectURL'](_0x222a60) + '\x27)', _0x406c72[_0x344041(0x819)]['backgroundSize'] = _0x344041(0x696), _0x4942b9['style']['backgroundPosition'] = _0x344041(0x4f3)) : _0x7ece99[_0x344041(0x8ce)](_0x292c6d) : _0x4439c7[_0x344041(0x8ce)](_0x292c6d); }); } document[_0x1c58bc(0xad1)]('back-to-snoop-list-from-phone')['addEventListener'](_0x1c58bc(0x43a), () => { const _0x194b03 = _0x1c58bc; _0x4d44ef && (clearInterval(_0x4d44ef), _0x4d44ef = null); document[_0x194b03(0xad1)](_0x194b03(0x35c))[_0x194b03(0x819)][_0x194b03(0x974)] = _0x194b03(0xb39); const _0x22e3fa = document[_0x194b03(0xad1)](_0x194b03(0x746)); if (_0x22e3fa) _0x22e3fa[_0x194b03(0x6e1)](); const _0x40fcfb = document[_0x194b03(0xad1)]('snoop-home-clock'); if (_0x40fcfb) _0x40fcfb[_0x194b03(0x6e1)](); _0x512ecd(_0x194b03(0x98b), _0x194b03(0x9a3)); }); async function _0x1213fb(_0x35a8b5, _0x5aa45b, _0x17d671 = ![]) { const _0x540dd0 = _0x1c58bc; let _0x1fb1a7 = null; document[_0x540dd0(0xad1)](_0x540dd0(0x381))[_0x540dd0(0x819)]['display'] = _0x540dd0(0xb39); const _0x5bf20f = document[_0x540dd0(0xad1)](_0x540dd0(0x35c)); _0x5bf20f[_0x540dd0(0x16c)] = _0x540dd0(0xb0e), _0x5bf20f['style'][_0x540dd0(0x974)] = _0x540dd0(0x9e5); const _0x4ce570 = _0x540dd0(0x89f) + _0x1ae85b + '_' + _0x35a8b5; try { if ('hdDus' !== _0x540dd0(0x1a5)) { if (_0x54393f[_0x540dd0(0x1ea)] === 0x0) return; _0x5ddb3f = (_0x36075b - 0x1 + _0x13413d['length']) % _0x5f32cf['length'], _0x372ce3(_0x52bde9[_0x5d94b8], _0x4731be); } else { if (_0x35a8b5 === _0x540dd0(0x555)) { if (_0x540dd0(0x15f) !== _0x540dd0(0x70c)) { const _0x3297d0 = await _0x105274(_0x1ae85b); _0x292582(_0x35a8b5, _0x5aa45b, _0x3297d0); return; } else { const _0x56f943 = _0x23fdfc[_0x540dd0(0x5d6)](/:\s|：\s/); if (_0x56f943['length'] === 0x2) { const _0x2bd1bd = _0x56f943[0x0]['trim'](), _0x5634f6 = _0x56f943[0x1]['trim'](), _0x40a93c = { '歌名': _0x540dd0(0x6fd), '艺术家': '歌手', '专辑': '专辑' }; _0x40a93c[_0x2bd1bd] && (_0x4fe550[_0x40a93c[_0x2bd1bd]] = _0x5634f6); } } } let _0x17912a = await _0x1354d1(_0x4ce570); if (_0x17d671 || !_0x17912a) { console[_0x540dd0(0x905)](_0x540dd0(0x7c9) + _0x4ce570 + _0x540dd0(0x841)), _0x1fb1a7 = await _0x4562c6(_0x35a8b5, _0x1ae85b, _0x17912a); if (_0x1fb1a7) { const _0x5cfbf5 = _0x1fb1a7[_0x540dd0(0x604)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x385c30 = _0x5cfbf5 ? _0x5cfbf5[0x1][_0x540dd0(0x471)]() : _0x1fb1a7[_0x540dd0(0x471)](); let _0x4f96e2; try { if (_0x540dd0(0x399) === _0x540dd0(0x163)) { const _0x41b753 = _0x2bb77f[_0x540dd0(0xa2f)][_0x207c80[_0x540dd0(0x11d)]], _0xed1c24 = _0x1145e9[_0x540dd0(0x9c1)]; _0x169768(), _0x2a1a23(); const _0x7f8298 = _0x2ea4b0[_0x540dd0(0x61a)](_0x540dd0(0xb25)); _0x7f8298[_0x540dd0(0x4ac)](_0x46280d => { const _0xd37b9f = _0x540dd0, _0xc1e486 = _0x46280d['dataset'][_0xd37b9f(0x26a)], _0x339b6e = _0x46280d[_0xd37b9f(0x94b)]('.music-post-play-icon,\x20.music-share-play-icon'); if (!_0x339b6e) return; _0x41b753 && _0xc1e486 === _0x41b753['id'] && _0xed1c24 ? _0x339b6e[_0xd37b9f(0x948)] = '❚❚' : _0x339b6e['textContent'] = '▶'; }); } else _0x4f96e2 = JSON['parse'](_0x385c30); } catch (_0x23a0f1) { _0x4f96e2 = _0x490193(_0x385c30); if (!_0x4f96e2) throw new Error(_0x540dd0(0x49d)); } const _0x40aa01 = JSON[_0x540dd0(0x39b)](_0x4f96e2); console['log'](_0x540dd0(0x4b8)), await _0x599336(_0x4ce570, _0x40aa01), _0x17912a = _0x40aa01; } } else console[_0x540dd0(0x905)]('缓存命中:\x20' + _0x4ce570); _0x292582(_0x35a8b5, _0x5aa45b, _0x17912a); } } catch (_0x33a51b) { console[_0x540dd0(0x208)](_0x540dd0(0x719) + _0x5aa45b + '\x20内容失败:', _0x33a51b); const _0x568959 = _0x132ad2(_0x1ae85b), _0x588e7a = '\x0a\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22\x20style=\x22color:\x20#d8000c;\x22>发生错误</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>' + _0x568959[_0x540dd0(0xa6a)] + _0x540dd0(0x86c); let _0xfc68fc = _0x540dd0(0x205) + _0x33a51b[_0x540dd0(0x80d)] + _0x540dd0(0x9e9); _0x1fb1a7 && (_0x540dd0(0x11a) !== _0x540dd0(0x11a) ? (_0x4c74dc[_0x540dd0(0x819)][_0x540dd0(0x974)] = _0x540dd0(0x9e5), _0x102d4a(() => _0x14c015[_0x540dd0(0x9c4)]['add'](_0x540dd0(0x944)), 0xa)) : _0xfc68fc += _0x540dd0(0xb16) + _0x429a6d(_0x1fb1a7) + _0x540dd0(0x356)), _0x5bf20f[_0x540dd0(0x16c)] = _0x588e7a + ('<div\x20class=\x22snoop-app-content\x22>' + _0xfc68fc + _0x540dd0(0x45e)), document[_0x540dd0(0xad1)](_0x540dd0(0x6ce))['addEventListener']('click', () => { const _0x10d591 = _0x540dd0; _0x5bf20f['style']['display'] = _0x10d591(0xb39), document['getElementById'](_0x10d591(0x381))[_0x10d591(0x819)][_0x10d591(0x974)] = _0x10d591(0x9e5); }); } } function _0x429a6d(_0x16d061) { const _0x2b13b3 = _0x1c58bc; if (!_0x16d061) return ''; return _0x16d061[_0x2b13b3(0x4db)](/&/g, _0x2b13b3(0x5c4))[_0x2b13b3(0x4db)](/</g, '&lt;')[_0x2b13b3(0x4db)](/>/g, _0x2b13b3(0x1c6))[_0x2b13b3(0x4db)](/"/g, '&quot;')[_0x2b13b3(0x4db)](/'/g, _0x2b13b3(0x6f8)); } function _0x292582(_0x3bf363, _0x2d4f7a, _0x2e39a3) { const _0x1ee874 = _0x1c58bc; if (_0x1ee874(0x593) !== _0x1ee874(0x88f)) { const _0x5eca4d = _0x132ad2(_0x1ae85b), _0xb0b7f8 = document[_0x1ee874(0xad1)](_0x1ee874(0x35c)); let _0x4579eb = ''; if (!_0x2e39a3) _0x1ee874(0xbe1) !== _0x1ee874(0xb43) ? _0x4579eb = '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>' : _0x27b702['assign'](_0x28882b, _0x3aac48); else { if ('ouYFs' !== _0x1ee874(0x4fd)) { if (_0x3bf363 === _0x1ee874(0x555)) _0x4579eb = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22snoop-summary-textarea\x22\x20readonly\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22>' + _0x2e39a3 + _0x1ee874(0x5af); else try { let _0x121491 = null; const _0x1341f0 = _0x2e39a3[_0x1ee874(0x604)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x49e3ed = _0x1341f0 ? _0x1341f0[0x1][_0x1ee874(0x471)]() : _0x2e39a3[_0x1ee874(0x471)](); try { _0x121491 = JSON[_0x1ee874(0x387)](_0x49e3ed); } catch (_0x5968f5) { console[_0x1ee874(0x41a)](_0x1ee874(0x67e), _0x5968f5['message']); try { _0x121491 = _0x490193(_0x49e3ed); if (!_0x121491) { if (_0x1ee874(0x383) === 'NcErC') throw new Error(_0x1ee874(0x2f6)); else _0x26a5e8[_0x1ee874(0x208)](_0x1ee874(0x91a), _0xe843de), _0x113e5d({ 'role': _0x1ee874(0x728), 'content': _0x1ee874(0x424) + _0x2b9941[_0x1ee874(0x80d)] }, _0x14ced7['conversationHistory']['length'] - 0x1); } console[_0x1ee874(0x905)](_0x1ee874(0x963)); } catch (_0x25b307) { throw _0x5968f5; } } switch (_0x3bf363) { case _0x1ee874(0xa6d): _0x4579eb = _0x1d2cea(_0x121491); break; case _0x1ee874(0x2d7): _0x4579eb = _0x6581ff(_0x121491, _0x5eca4d[_0x1ee874(0xa6a)]); break; case _0x1ee874(0x2c1): _0x4579eb = _0x27c514(_0x121491); break; case _0x1ee874(0x7d1): _0x4579eb = _0x3948de(_0x121491); break; case 'bites': _0x4579eb = _0x234007(_0x121491); break; case 'wants': _0x4579eb = _0x95fc80(_0x121491); break; case 'footprints': _0x4579eb = _0x5315c7(_0x121491); break; default: _0x4579eb = '<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22>' + JSON[_0x1ee874(0x39b)](_0x121491, null, 0x2) + _0x1ee874(0x301); } } catch (_0xf9099c) { _0x1ee874(0x375) === _0x1ee874(0x375) ? (console[_0x1ee874(0x208)]('视奸内容解析失败:', _0xf9099c), _0x4579eb = _0x1ee874(0xaec) + _0x2e39a3 + _0x1ee874(0x301)) : _0x4d332f['textContent'] = _0x2ac87d[_0x1ee874(0x8c8)](_0x33e2a0)[_0x1ee874(0x3c4)](_0x28b918 => _0x28b918[_0x1ee874(0x70a)][_0x1ee874(0x948)][_0x1ee874(0x471)]())[_0x1ee874(0xae6)]('、'); } } else { const _0x299e3b = _0x4a35c5(_0x13bc8d[_0x1ee874(0x402)][0x0]); _0x299e3b ? (!_0x4009c5 && (_0x471eca = _0x299e3b[_0x1ee874(0x37b)] || _0x23a2a7), _0x2054c7 = _0x299e3b[_0x1ee874(0xa6a)] || _0x1ee874(0x325), _0x1b7d1e = _0x299e3b[_0x1ee874(0x531)] || '私聊') : (_0x3c6783 = _0x1ee874(0xafc), _0x4f3896 = '错误：找不到角色'); } } _0xb0b7f8[_0x1ee874(0x16c)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>' + _0x2d4f7a + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>' + _0x5eca4d[_0x1ee874(0xa6a)] + '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x3bf363 === 'summary' ? _0x1ee874(0x1e5) : _0x1ee874(0xa6e)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>' + _0x4579eb + _0x1ee874(0xaa2); const _0x7dbe90 = _0xb0b7f8[_0x1ee874(0x94b)](_0x1ee874(0xb9a)); _0x3bf363 === 'summary' && ('tKhOf' === _0x1ee874(0x216) ? _0x7dbe90['style']['padding'] = '0' : _0x96155f = _0x31ca9b[_0x1ee874(0x775)]['find'](_0xe9f0d8 => _0xe9f0d8['id'] === _0x2c6733[_0x1ee874(0x4d3)])); document['getElementById']('snoop-app-back-btn')[_0x1ee874(0xb66)](_0x1ee874(0x43a), () => { const _0x531ae6 = _0x1ee874; _0xb0b7f8[_0x531ae6(0x819)][_0x531ae6(0x974)] = 'none', document[_0x531ae6(0xad1)]('snoop-phone-top-nav')[_0x531ae6(0x819)]['display'] = _0x531ae6(0x9e5); }); if (_0x3bf363 === _0x1ee874(0x555)) document['getElementById'](_0x1ee874(0x2c6))['addEventListener']('click', () => { const _0x42156c = _0x1ee874; if (_0x42156c(0xb14) === _0x42156c(0x767)) _0x1a332e(_0xec2a30); else { const _0x4d9d2b = document['getElementById'](_0x42156c(0x438)); _0x4d9d2b[_0x42156c(0xa97)](), document[_0x42156c(0x6f3)](_0x42156c(0xa91)), _0x18f071('档案已复制到剪贴板！'); } }); else { if ('nYJzB' !== 'nYJzB') return { 'type': _0x1ee874(0x715), 'eventType': _0x5e902d[0x1]['trim'](), 'eventDate': _0x3c26d7[0x2]['trim'](), 'eventContent': _0x2b9456[0x3][_0x1ee874(0x471)]() }; else document[_0x1ee874(0xad1)](_0x1ee874(0x882))[_0x1ee874(0xb66)](_0x1ee874(0x43a), async () => { const _0x42f28c = _0x1ee874; if ('IZsZn' === _0x42f28c(0x6af)) { const _0x89e9c4 = _0x278e3d(_0x3ef39d[_0x42f28c(0xa37)], _0x5364eb[_0x42f28c(0xb46)], _0x5c17e5); if (_0x89e9c4[_0x42f28c(0x1ea)] === 0x0) return; const _0x1d55a5 = _0x5165a6 === 0x0 ? '来源：[最活跃]' : _0x42f28c(0xb28); _0x3a8bbe['push'](_0x42f28c(0x1c5) + _0x1d55a5 + _0x3b842c(_0x33650b[_0x42f28c(0xa37)]) + '\x0a' + _0x89e9c4[_0x42f28c(0xae6)]('\x0a')), _0xc06b08[_0x4837f4['chat']['id']] = _0x89e9c4[_0x42f28c(0x1ea)]; } else _0x1213fb(_0x3bf363, _0x2d4f7a, !![]); }); } _0x3bf363 === _0x1ee874(0x2d7) && _0xb0b7f8[_0x1ee874(0x61a)](_0x1ee874(0xa25))['forEach'](_0x4c77dd => { const _0x3b9daf = _0x1ee874; _0x4c77dd[_0x3b9daf(0xb66)](_0x3b9daf(0x43a), () => { const _0x5731d3 = _0x3b9daf, _0x455084 = JSON[_0x5731d3(0x387)](_0x4c77dd[_0x5731d3(0x2d1)][_0x5731d3(0x905)]['replace'](/&quot;/g, '\x22')), _0x5522f9 = _0x4c77dd[_0x5731d3(0x2d1)]['contactName'], _0x1d2e53 = _0x4c77dd['dataset'][_0x5731d3(0x183)]; _0x41245b(_0x5522f9, _0x1d2e53, _0x455084); }); }); } else _0x11df0c[_0x1ee874(0x208)](_0x1ee874(0xbde) + _0x15192b['id'] + '\x20的图片失败:', _0x5bf839), _0x36c54d[_0x1ee874(0x400)] = _0xa2acc0['avatar'] || _0x2fb173; } function _0x490193(_0xd4c76a) { const _0x3ef121 = _0x1c58bc; if (!_0xd4c76a || typeof _0xd4c76a !== 'string') return null; const _0x3f29a8 = _0xd4c76a[_0x3ef121(0x471)]()['split']('\x0a'), _0x17555b = []; let _0x80e510 = null; for (const _0x316a91 of _0x3f29a8) { const _0x590fc2 = _0x316a91['trim'](); if (_0x590fc2[_0x3ef121(0xbdd)]('-\x20')) { _0x80e510 && _0x17555b[_0x3ef121(0xb49)](_0x80e510); _0x80e510 = {}; const _0x6e829e = _0x590fc2[_0x3ef121(0x5cd)](0x2), _0x409400 = _0x6e829e['split'](/:\s(.+)/); if (_0x409400[_0x3ef121(0x1ea)] > 0x1) { const _0x45a583 = _0x409400[0x0]['trim'](), _0x2f8c55 = _0x409400[0x1][_0x3ef121(0x471)]()[_0x3ef121(0x4db)](/^"|"$/g, ''); _0x80e510[_0x45a583] = _0x2f8c55; } } else { if (_0x80e510 && _0x590fc2) { if (_0x3ef121(0x933) === _0x3ef121(0x933)) { const _0x6f724d = _0x590fc2[_0x3ef121(0x5d6)](/:\s(.+)/); if (_0x6f724d[_0x3ef121(0x1ea)] > 0x1) { if (_0x3ef121(0x62b) !== _0x3ef121(0x7f7)) { const _0x1d48e1 = _0x6f724d[0x0]['trim'](), _0x5baec3 = _0x6f724d[0x1]['trim']()[_0x3ef121(0x4db)](/^"|"$/g, ''); _0x80e510[_0x1d48e1] = _0x5baec3; } else _0xb146b5['classList'][_0x3ef121(0x2ac)](_0x3ef121(0x827)); } } else _0x4a3646[_0x3ef121(0x1fa)]('badgeState'), _0x3208ab[_0x3ef121(0x1fa)]('cardWidgetState'), _0x815d03(_0x3ef121(0x7e2)), _0x711df6(() => _0x582295['reload'](), 0x3e8); } } } return _0x80e510 && _0x17555b[_0x3ef121(0xb49)](_0x80e510), _0x17555b[_0x3ef121(0x1ea)] > 0x0 ? _0x17555b : null; } function _0x41245b(_0x365868, _0x208ffe, _0x4c8a39) { const _0x26d0a2 = _0x1c58bc, _0x434803 = document[_0x26d0a2(0x94b)](_0x26d0a2(0x743)), _0x5b2159 = document['querySelector']('#snoop-app-view-container\x20.snoop-app-header'); let _0x1b69b9 = _0x26d0a2(0x679); !_0x4c8a39 || _0x4c8a39['length'] === 0x0 ? _0x1b69b9 += '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>' : _0x4c8a39['forEach'](_0x159dc1 => { const _0x9402af = _0x26d0a2; if (_0x9402af(0xb3d) === _0x9402af(0x7f0)) { const _0x2039af = []; for (const _0x350ed9 of _0x23a87e[_0x9402af(0x58f)](_0x22f2f8)) { const _0x4418fc = _0x350ed9['toLowerCase'](); if (_0x4d1f7d[_0x9402af(0x69b)](_0x8c7d52 => _0x4418fc[_0x9402af(0xbdd)](_0x8c7d52))) { const _0x5c24ac = _0x54b6ae[_0x350ed9]; if (typeof _0x5c24ac === 'string') _0x2039af[_0x9402af(0xb49)](_0x5c24ac); if (_0x4bfd0b['isArray'](_0x5c24ac)) _0x5c24ac['forEach'](_0x584289 => { const _0x204e75 = _0x9402af; if (typeof _0x584289 === _0x204e75(0x319)) _0x2039af[_0x204e75(0xb49)](_0x584289); }); } } if (_0x2039af[_0x9402af(0x1ea)]) return _0x2039af[_0x9402af(0xbe6)](_0x23a41c)[_0x9402af(0xa30)](0x0, 0x9); } else { const _0x65ac4e = _0x159dc1['sender'] === _0x9402af(0x2cd), _0x1047f4 = _0x65ac4e ? _0x208ffe ? _0x208ffe[0x0] : '?' : _0x365868 ? _0x365868[0x0] : '?'; _0x1b69b9 += _0x9402af(0x64c) + (_0x65ac4e ? _0x9402af(0xa02) : 'ai') + '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (!_0x65ac4e ? '<div\x20class=\x22snoop-avatar\x22>' + _0x1047f4 + _0x9402af(0x45e) : '') + _0x9402af(0x176) + (_0x65ac4e ? _0x9402af(0xa02) : 'ai') + _0x9402af(0x433) + _0x159dc1[_0x9402af(0xa3a)] + _0x9402af(0x47d) + (_0x65ac4e ? _0x9402af(0x470) + _0x1047f4 + _0x9402af(0x45e) : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; } }); _0x1b69b9 += '</div>', _0x434803[_0x26d0a2(0x16c)] = _0x1b69b9, _0x434803['scrollTop'] = _0x434803['scrollHeight'], _0x5b2159[_0x26d0a2(0x16c)] = _0x26d0a2(0x28f) + _0x365868 + _0x26d0a2(0x1fb), document[_0x26d0a2(0xad1)]('snoop-log-back-btn')['addEventListener'](_0x26d0a2(0x43a), () => { const _0x125fbd = _0x26d0a2; if (_0x125fbd(0xb82) === _0x125fbd(0xb82)) _0x1213fb('whispers', '聊天'); else { const _0x2be331 = _0x3081a7[_0x125fbd(0x7ad)][_0x125fbd(0x3c4)](_0x1f7992 => _0x1e66f6[_0x125fbd(0x538)]['find'](_0x5e7d3a => _0x5e7d3a['id'] === _0x1f7992))[_0x125fbd(0x662)](_0x34a535)[_0x125fbd(0x3c4)](_0x356eae => _0x125fbd(0x3a9) + _0x356eae[_0x125fbd(0xa6a)] + '\x0a' + _0x356eae['content'])[_0x125fbd(0xae6)](''); if (_0x2be331) _0x24dbf5 = _0x125fbd(0x3a7) + _0x2be331; } }); if (!document[_0x26d0a2(0xad1)](_0x26d0a2(0x713))) { if (_0x26d0a2(0xb93) !== 'fvFDq') document[_0x26d0a2(0x2e7)][_0x26d0a2(0x900)](_0x26d0a2(0x8e3), _0x26d0a2(0x6a7)); else return new _0x36be11(_0x40e65a => { const _0x247dd6 = _0x26d0a2, _0x52760d = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'; _0x35bb2b['body']['insertAdjacentHTML'](_0x247dd6(0x8e3), _0x52760d); const _0x3bed56 = _0x84df2[_0x247dd6(0xad1)](_0x247dd6(0xb15)), _0x392deb = _0x5bcd33[_0x247dd6(0xad1)](_0x247dd6(0x81d)), _0x1984f3 = _0x2cb76a[_0x247dd6(0xad1)]('diary-modal-save'), _0x23d5fc = _0x3559cb[_0x247dd6(0xad1)](_0x247dd6(0xab1)), _0x41ae6e = _0x3bed56[_0x247dd6(0x94b)](_0x247dd6(0x672)), _0x725c31 = () => { const _0x58f385 = _0x247dd6; _0x3bed56[_0x58f385(0x6e1)](), _0x40e65a(); }; _0x1984f3[_0x247dd6(0x970)] = () => { const _0x62b49c = _0x247dd6; _0xd37f19(_0x392deb[_0x62b49c(0x82f)]), _0x725c31(); }, _0x23d5fc[_0x247dd6(0x970)] = _0x725c31, _0x41ae6e['onclick'] = _0x725c31; }); } } async function _0x26f65b(_0x1a31e8) { const _0x54f05a = _0x1c58bc; if (!_0x1a31e8) return ''; const _0x339451 = [{ 'id': _0x54f05a(0xa6d), 'name': '相册' }, { 'id': 'whispers', 'name': _0x54f05a(0x796) }, { 'id': 'abyss', 'name': '浏览器历史' }, { 'id': _0x54f05a(0x7d1), 'name': _0x54f05a(0x126) }, { 'id': _0x54f05a(0x737), 'name': '外卖订单' }, { 'id': _0x54f05a(0xac5), 'name': _0x54f05a(0x90d) }, { 'id': _0x54f05a(0x341), 'name': '最近的足迹' }]; let _0x3b8d26 = ''; for (const _0x4c17b6 of _0x339451) { if ('TsarW' === 'TsarW') try { const _0x5b312d = _0x54f05a(0x89f) + _0x1a31e8 + '_' + _0x4c17b6['id'], _0xd9a55a = await _0x1354d1(_0x5b312d); if (_0xd9a55a) { const _0x53c449 = _0xd9a55a[_0x54f05a(0x604)](/```(?:json)?\s*([\s\S]*?)\s*```/), _0x2328e8 = _0x53c449 ? _0x53c449[0x1][_0x54f05a(0x471)]() : _0xd9a55a['trim'](); if (!_0x2328e8) continue; let _0x3f40d2 = null; try { _0x3f40d2 = JSON[_0x54f05a(0x387)](_0x2328e8); } catch (_0x48cd58) { if (_0x54f05a(0x59b) === 'qECQi') { console[_0x54f05a(0x41a)](_0x54f05a(0xb1b) + _0x4c17b6['id'] + _0x54f05a(0x3a1), _0x48cd58[_0x54f05a(0x80d)]); try { _0x3f40d2 = _0x490193(_0x2328e8); if (!_0x3f40d2) throw new Error(_0x54f05a(0x2f6)); console[_0x54f05a(0x905)](_0x54f05a(0xadc) + _0x4c17b6['id'] + _0x54f05a(0x42f)); } catch (_0x108da5) { throw _0x48cd58; } } else { const _0x48b605 = _0x15a186['value'][_0x54f05a(0x471)](); if (!_0x48b605) { _0x5cfe4e(_0x54f05a(0x6fb)); return; } const _0x4f4552 = _0x54f3db[_0x54f05a(0x8c8)](_0x345786[_0x54f05a(0x61a)](_0x54f05a(0x9e1)))[_0x54f05a(0x3c4)](_0x2d2e88 => _0x2d2e88[_0x54f05a(0x2d1)]['id']); if (_0x4f4552[_0x54f05a(0x1ea)] < 0x2) { _0x405402('群聊至少需要2名成员。'); return; } const _0x2cedb7 = { 'id': _0x54f05a(0x328) + _0x2c5f75[_0x54f05a(0x7e3)](), 'type': 'group', 'name': _0x48b605, 'participantIds': _0x4f4552 }; _0x55cf47[_0x54f05a(0x75e)][_0x54f05a(0xb49)](_0x2cedb7), _0x146fda[_0x54f05a(0x147)] = _0x2cedb7['id'], _0x336db5(), _0xb67573(), _0x13cad8(), _0x442e1c(), _0x5052d8(_0x54f05a(0x589) + _0x48b605 + '”已创建！'), _0x563c81(_0x54f05a(0xa37), _0x54f05a(0x2cf)); } } if (Array[_0x54f05a(0x460)](_0x3f40d2) && _0x3f40d2[_0x54f05a(0x1ea)] > 0x0) { _0x3b8d26 === '' && (_0x3b8d26 += _0x54f05a(0x8d2)); _0x3b8d26 += _0x54f05a(0x512) + _0x4c17b6[_0x54f05a(0xa6a)] + '\x0a'; switch (_0x4c17b6['id']) { case _0x54f05a(0xa6d): _0x3f40d2[_0x54f05a(0x4ac)](_0x12bfe4 => { const _0x2264f7 = _0x54f05a; if (_0x2264f7(0x820) !== _0x2264f7(0x15d)) _0x3b8d26 += '-\x20你拍过一张照片，内容是：“' + _0x12bfe4['description'] + _0x2264f7(0x97c); else { _0x1b66da(_0x2264f7(0x3e4)); return; } }); break; case 'whispers': _0x3f40d2[_0x54f05a(0x4ac)](_0x161e59 => { const _0x55ad80 = _0x54f05a; _0x3b8d26 += _0x55ad80(0x212) + _0x161e59[_0x55ad80(0xb87)] + '”聊过天，关于：“' + _0x161e59['last_message_preview'] + _0x55ad80(0x97c), _0x161e59['log'] && Array[_0x55ad80(0x460)](_0x161e59[_0x55ad80(0x905)]) && (_0x3b8d26 += _0x55ad80(0x2d5), _0x161e59[_0x55ad80(0x905)][_0x55ad80(0x4ac)](_0x33257b => { const _0x11de10 = _0x55ad80; if ('cZbSl' === 'cZbSl') { const _0xfa1d35 = _0x33257b[_0x11de10(0x32d)] === _0x11de10(0x2cd) ? '你' : _0x161e59[_0x11de10(0xb87)]; _0x3b8d26 += _0x11de10(0x3da) + _0xfa1d35 + ':\x20' + _0x33257b['content'] + '\x0a'; } else { const _0x280c5f = _0x3543a0['target'][_0x11de10(0xb1f)][0x0]; if (!_0x280c5f) return; const _0x505a66 = _0x1da7dd[_0x11de10(0x97d)](_0x280c5f); _0x25834b[_0x11de10(0x819)]['backgroundImage'] = 'url(\x27' + _0x505a66 + '\x27)'; } })); }); break; case _0x54f05a(0x2c1): _0x3f40d2[_0x54f05a(0x4ac)](_0x5a6589 => { const _0x331dc4 = _0x54f05a; _0x331dc4(0x95e) !== 'yAJqh' ? (_0x1c2c8c(![]), _0x3cfcd4[_0x331dc4(0x208)]('全量导出失败:', _0x281e58), _0x4d8524(_0x331dc4(0x207) + _0x4f5f2a[_0x331dc4(0x80d)])) : _0x3b8d26 += '-\x20你曾经搜索过：“' + _0x5a6589[_0x331dc4(0x756)] + '”。\x0a'; }); break; case _0x54f05a(0x7d1): _0x3f40d2[_0x54f05a(0x4ac)](_0x15ded0 => { const _0x235e1f = _0x54f05a; _0x235e1f(0x1b9) === 'Fplfs' ? _0x3b8d26 += _0x235e1f(0xaf6) + _0x15ded0[_0x235e1f(0x616)] + _0x235e1f(0x245) + _0x15ded0[_0x235e1f(0xa3a)][_0x235e1f(0x4db)](/\n/g, '\x20') + _0x235e1f(0x97c) : (_0x2f7ae2['style'][_0x235e1f(0x974)] = _0x235e1f(0xb39), _0x2fb8f6['onclick'] = _0x2b4c4e['onclick'] = _0x7d9473[_0x235e1f(0x970)] = null, _0x3f0aa2[_0x235e1f(0x57f)]('keydown', _0x50dedb), _0x122895(_0x292f7e)); }); break; case _0x54f05a(0x737): _0x3f40d2[_0x54f05a(0x4ac)](_0x163d14 => { const _0x4e5f6e = _0x54f05a; _0x3b8d26 += _0x4e5f6e(0xb72) + _0x163d14['restaurant_name'] + _0x4e5f6e(0x90b) + _0x163d14[_0x4e5f6e(0x533)][_0x4e5f6e(0xae6)]('、') + '。\x0a'; }); break; case _0x54f05a(0xac5): _0x3f40d2[_0x54f05a(0x4ac)](_0x2b1b76 => { const _0x456546 = _0x54f05a; if (_0x456546(0x514) === _0x456546(0x4bb)) { const _0x4b415d = _0x144ef0(_0xf825b9[_0x456546(0x2d1)]['historyIndex'], 0xa); !_0x36cd2b(_0x4b415d) && _0x5e9472(_0x4b415d); } else _0x3b8d26 += _0x456546(0x2ef) + _0x2b1b76[_0x456546(0x985)] + _0x456546(0x976) + _0x2b1b76[_0x456546(0x7cd)] + _0x456546(0x97c); }); break; case _0x54f05a(0x341): _0x3f40d2['forEach'](_0x414bc1 => { const _0x4c5f58 = _0x54f05a; _0x3b8d26 += _0x4c5f58(0x606) + _0x414bc1['location_name'] + '”，在那里“' + _0x414bc1[_0x4c5f58(0x2c9)] + _0x4c5f58(0x97c); }); break; default: _0x3f40d2[_0x54f05a(0x4ac)](_0x3e5f79 => { const _0x3f9a69 = _0x54f05a; _0x3f9a69(0x33c) === _0x3f9a69(0x455) ? (_0x21d193[_0x3f9a69(0x7ba)] = null, _0x45caae(_0x3f9a69(0x7c3)), _0x5a38c7()) : _0x3b8d26 += '-\x20' + JSON[_0x3f9a69(0x39b)](_0x3e5f79) + '\x0a'; }); break; } } } } catch (_0x19f325) { console['error'](_0x54f05a(0x93a) + _0x4c17b6['id'] + _0x54f05a(0x541), _0x19f325); } else _0x303bd2[_0x54f05a(0x8ce)](_0xc3816a); } return _0x3b8d26; } function _0x1d2cea(_0x5046a5) { const _0x5b0113 = _0x1c58bc; if ('lvzEf' !== _0x5b0113(0x91d)) _0x4bba6b[_0x5b0113(0x208)](_0x5b0113(0x867), _0xc208ad), _0x4c3c2c && (_0x2dcf26['style'][_0x5b0113(0xbe4)] = ''); else { _0x5046a5['sort']((_0x145dd7, _0x8c476c) => new Date(_0x8c476c[_0x5b0113(0x782)]) - new Date(_0x145dd7['timestamp'])); if (!Array[_0x5b0113(0x460)](_0x5046a5)) return '<p>格式错误</p>'; if (_0x5046a5[_0x5b0113(0x1ea)] === 0x0) return _0x5b0113(0x82a); return _0x5b0113(0x926) + _0x5046a5[_0x5b0113(0x3c4)]((_0x129fab, _0x592f49) => _0x5b0113(0x547) + (_0x592f49 < _0x5046a5['length'] - 0x1 ? _0x5b0113(0x6ac) : '') + _0x5b0113(0x8b3) + (_0x129fab[_0x5b0113(0x2a2)] || _0x5b0113(0x259)) + _0x5b0113(0xa21) + (_0x129fab[_0x5b0113(0x782)] || '') + _0x5b0113(0x56a))[_0x5b0113(0xae6)]('') + _0x5b0113(0x45e); } } function _0x6581ff(_0x266f6e, _0x3618c2) { const _0x2cfa24 = _0x1c58bc; if (!Array[_0x2cfa24(0x460)](_0x266f6e) || _0x266f6e[_0x2cfa24(0x1ea)] === 0x0) return _0x2cfa24(0x293); return '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>' + _0x266f6e[_0x2cfa24(0x3c4)]((_0x29f51c, _0x181988) => { const _0x434ef0 = _0x2cfa24; if (_0x434ef0(0xa88) === _0x434ef0(0xa88)) { const _0x1063b5 = JSON['stringify'](_0x29f51c[_0x434ef0(0x905)] || [])[_0x434ef0(0x4db)](/'/g, _0x434ef0(0xa19))[_0x434ef0(0x4db)](/"/g, _0x434ef0(0x280)), _0x44d047 = _0x29f51c[_0x434ef0(0xb87)] || '未知联系人'; return _0x434ef0(0x3d2) + (_0x181988 < _0x266f6e[_0x434ef0(0x1ea)] - 0x1 ? _0x434ef0(0x6ac) : '') + '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27' + _0x1063b5 + '\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-contact-name=\x27' + _0x44d047 + _0x434ef0(0x165) + _0x3618c2 + _0x434ef0(0x254) + _0x44d047['charAt'](0x0) + _0x434ef0(0x587) + _0x44d047 + _0x434ef0(0x90f) + (_0x29f51c['last_message_preview'] || '') + _0x434ef0(0x853); } else { const _0x6c71dd = _0x3d7e9c[_0x434ef0(0xad1)]('home-clock-container'); if (!_0x6c71dd) return; _0x44255a[_0x434ef0(0x8cd)][_0x434ef0(0x851)] ? (_0x6c71dd[_0x434ef0(0x819)][_0x434ef0(0x979)] = _0x434ef0(0x1a9), _0x6c71dd[_0x434ef0(0x819)][_0x434ef0(0x29e)] = '0\x202px\x208px\x20rgba(0,0,0,0.4)') : (_0x6c71dd['style']['color'] = 'var(--text-color)', _0x6c71dd['style'][_0x434ef0(0x29e)] = _0x434ef0(0xb39)); } })['join']('') + _0x2cfa24(0x45e); } function _0x27c514(_0x477cf7) { const _0x541536 = _0x1c58bc; if (_0x541536(0xa9f) === _0x541536(0xa9f)) { if (!Array['isArray'](_0x477cf7)) return '<p>格式错误</p>'; if (_0x477cf7['length'] === 0x0) return '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>'; return _0x477cf7[_0x541536(0x940)]((_0x5b9d3d, _0x56e81d) => new Date(_0x56e81d[_0x541536(0x782)]) - new Date(_0x5b9d3d[_0x541536(0x782)])), _0x541536(0x926) + _0x477cf7[_0x541536(0x3c4)]((_0x59dd05, _0x37c24f) => _0x541536(0xb05) + (_0x37c24f < _0x477cf7[_0x541536(0x1ea)] - 0x1 ? 'border-bottom:\x201px\x20solid\x20var(--border-color);' : '') + _0x541536(0x151) + (_0x59dd05['query'] || _0x541536(0x809)) + _0x541536(0xb00) + (_0x59dd05[_0x541536(0x69a)] || _0x541536(0x563)) + _0x541536(0xb44) + (_0x59dd05[_0x541536(0x782)] || '') + _0x541536(0xbba))['join']('') + _0x541536(0x45e); } else _0x12c7cb['addEventListener'](_0x541536(0x43a), () => _0x37ee47[_0x541536(0x43a)]()), _0x1a4201[_0x541536(0xb66)]('change', _0x4b220f => { const _0x2b8abf = _0x541536, _0x20cd40 = _0x4b220f[_0x2b8abf(0xb6a)][_0x2b8abf(0xb1f)][0x0]; if (!_0x20cd40) return; try { const _0x436e80 = _0x674a24['createObjectURL'](_0x20cd40); _0x9c4e6c[_0x2b8abf(0x819)][_0x2b8abf(0xbe4)] = _0x2b8abf(0xbce) + _0x436e80 + '\x27)'; } catch (_0x1bd305) { _0x2faa9b(_0x2b8abf(0xa7e) + _0x1bd305[_0x2b8abf(0x80d)]); } }); } function _0x3948de(_0x227e25) { const _0x1ee5ac = _0x1c58bc; if (!Array[_0x1ee5ac(0x460)](_0x227e25)) return '<p>格式错误</p>'; if (_0x227e25['length'] === 0x0) return _0x1ee5ac(0x2e4); return _0x227e25[_0x1ee5ac(0x940)]((_0x2b210f, _0x3ffac) => new Date(_0x3ffac[_0x1ee5ac(0xa72)]) - new Date(_0x2b210f[_0x1ee5ac(0xa72)])), _0x227e25[_0x1ee5ac(0x3c4)](_0x21dc31 => _0x1ee5ac(0x26c) + (_0x21dc31['title'] || _0x1ee5ac(0x1bb)) + _0x1ee5ac(0x560) + (_0x21dc31[_0x1ee5ac(0xa3a)] || '') + _0x1ee5ac(0x145) + (_0x21dc31['last_edited'] || '') + _0x1ee5ac(0x783))[_0x1ee5ac(0xae6)](''); } function _0x234007(_0x126cc5) { const _0x1352fe = _0x1c58bc; if (!Array[_0x1352fe(0x460)](_0x126cc5)) return _0x1352fe(0x3ec); if (_0x126cc5['length'] === 0x0) return _0x1352fe(0x235); return _0x126cc5[_0x1352fe(0x940)]((_0x4a2f05, _0x1a0316) => new Date(_0x1a0316[_0x1352fe(0x782)]) - new Date(_0x4a2f05[_0x1352fe(0x782)])), _0x126cc5[_0x1352fe(0x3c4)](_0x303038 => { const _0x10b4db = _0x1352fe; if (_0x10b4db(0xaf4) === _0x10b4db(0xbec)) return _0x2b4b3a[_0x10b4db(0x905)]('Fetch\x20request\x20was\x20aborted.'), ''; else { const _0x3508e9 = (_0x303038[_0x10b4db(0x533)] || [])[_0x10b4db(0x3c4)](_0x4178cb => _0x10b4db(0x189) + _0x4178cb + _0x10b4db(0xb47))['join'](''); return _0x10b4db(0x166) + (_0x303038[_0x10b4db(0x2e8)] || _0x10b4db(0x4bf)) + _0x10b4db(0x4e4) + (_0x303038['timestamp'] || '') + _0x10b4db(0x91b) + (_0x303038[_0x10b4db(0x90c)] || _0x10b4db(0x567)) + _0x10b4db(0x869) + _0x3508e9 + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20' + (_0x303038[_0x10b4db(0x936)] || 0x0)[_0x10b4db(0x625)](0x2) + _0x10b4db(0x456); } })['join'](''); } function _0x95fc80(_0x5d23fa) { const _0x4f4727 = _0x1c58bc; if (_0x4f4727(0x553) !== 'ovYxH') _0x1553aa(![]), _0x11401b['isGenerating'] = ![]; else { if (!Array[_0x4f4727(0x460)](_0x5d23fa)) return _0x4f4727(0x3ec); if (_0x5d23fa[_0x4f4727(0x1ea)] === 0x0) return _0x4f4727(0x535); return _0x5d23fa[_0x4f4727(0x940)]((_0x1113b9, _0xe0b57a) => new Date(_0xe0b57a['timestamp']) - new Date(_0x1113b9[_0x4f4727(0x782)])), _0x5d23fa[_0x4f4727(0x3c4)](_0x1b4375 => '\x0a\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20' + (_0x1b4375[_0x4f4727(0x985)] || '未知商店') + _0x4f4727(0x40a) + (_0x1b4375['timestamp'] || '') + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x1b4375['item_name'] || '未知商品') + _0x4f4727(0x7fc) + (_0x1b4375[_0x4f4727(0x68f)] || 0x0)[_0x4f4727(0x625)](0x2) + _0x4f4727(0x84e))[_0x4f4727(0xae6)](''); } } function _0x5315c7(_0x4c7e07) { const _0x3a066f = _0x1c58bc; if (!Array[_0x3a066f(0x460)](_0x4c7e07)) return _0x3a066f(0x3ec); if (_0x4c7e07['length'] === 0x0) return _0x3a066f(0x420); return _0x4c7e07[_0x3a066f(0x940)]((_0x577744, _0x57bc34) => new Date(_0x57bc34['timestamp']) - new Date(_0x577744[_0x3a066f(0x782)])), _0x3a066f(0x274) + _0x4c7e07['map'](_0x484f48 => '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>' + (_0x484f48['location_name'] || _0x3a066f(0x485)) + _0x3a066f(0x372) + (_0x484f48['activity_description'] || '') + _0x3a066f(0x8c0) + (_0x484f48[_0x3a066f(0x782)] || '') + _0x3a066f(0x6c2))[_0x3a066f(0xae6)]('') + _0x3a066f(0x45e); } async function _0x4562c6(_0x15a3da, _0x336444, _0x350deb = null) { const _0x563486 = _0x1c58bc, _0x366c84 = _0x132ad2(_0x336444), _0x26bbf3 = _0x2c45d7[_0x563486(0x75e)]['find'](_0xe1a7c9 => _0xe1a7c9[_0x563486(0x1a7)] === _0x563486(0x639) && _0xe1a7c9[_0x563486(0x402)][_0x563486(0x7a3)](_0x336444)), _0x528cf1 = _0x16e371(_0x26bbf3?.['id'] || _0x2c45d7['activeChatId']); if (!_0x366c84) throw new Error('找不到角色信息。'); const { omniText: _0x15ec02 } = _0x5b1c3b(_0x336444); let _0x326f79 = ''; const _0x20d2eb = new Date(); let _0x1776df = null, _0x1daf88 = '无'; if (_0x350deb) { if ('VuZOU' === 'RCTMB') _0x3eed0f['error'](_0x563486(0x79d), _0x2e284b), _0x1fe15d[_0x563486(0x208)](_0x563486(0xa58), _0x56bc06); else try { let _0x3a1bbc; try { _0x3a1bbc = JSON['parse'](_0x350deb); } catch (_0x1af58a) { _0x3a1bbc = _0x490193(_0x350deb); } if (Array[_0x563486(0x460)](_0x3a1bbc) && _0x3a1bbc[_0x563486(0x1ea)] > 0x0) { if ('GurmK' === 'EwKsz') _0x2188a0 += _0x563486(0xa50); else { const _0x1e8c62 = _0x3a1bbc[_0x563486(0x3c4)](_0x3a928e => new Date(_0x3a928e[_0x563486(0x782)] || _0x3a928e[_0x563486(0xa72)]))[_0x563486(0x662)](_0x350a1b => !isNaN(_0x350a1b)); _0x1e8c62[_0x563486(0x1ea)] > 0x0 && (_0x1776df = new Date(Math[_0x563486(0xa01)]['apply'](null, _0x1e8c62)), _0x1daf88 = _0x1776df[_0x563486(0x2e3)]('zh-CN', { 'dateStyle': _0x563486(0x712), 'timeStyle': _0x563486(0x31b) })); } } } catch (_0x4101a4) { _0x563486(0xaf9) === _0x563486(0x1af) ? _0x47805f[_0x563486(0x948)] = '已选择\x20' + _0x35b4fb[_0x563486(0x1ea)] + '\x20项' : console[_0x563486(0x41a)](_0x563486(0x3dc), _0x4101a4); } } const _0x234579 = _0x3f9417(_0x336444); _0x326f79 = _0x563486(0x611), _0x326f79 += _0x563486(0xb2f) + _0x20d2eb[_0x563486(0x2e3)](_0x563486(0x15b), { 'dateStyle': _0x563486(0x9d4), 'timeStyle': 'short' }) + '\x0a'; if (_0x234579) { const _0x35c85b = new Date(_0x234579[_0x563486(0x782)]), _0x3ab008 = _0x1ad990(_0x35c85b); _0x326f79 += _0x563486(0x3eb) + _0x3ab008 + '\x0a'; const _0x3dcf27 = _0x20d2eb[_0x563486(0xa4a)](), _0x319e74 = _0x35c85b[_0x563486(0xa4a)](), _0x4dee50 = new Date(); _0x4dee50[_0x563486(0x6bf)](_0x20d2eb[_0x563486(0x41f)]() - 0x1); const _0x5d0e04 = _0x4dee50['toDateString'](); if (_0x3dcf27 === _0x319e74) { const _0x59a89f = (_0x20d2eb - _0x35c85b) / (0x3e8 * 0x3c); _0x326f79 += _0x563486(0x78d); } else { if (_0x5d0e04 === _0x319e74) _0x326f79 += _0x563486(0x57c); else { if (_0x563486(0x1e2) !== _0x563486(0xaf1)) { const _0x2551ec = Math['round']((_0x20d2eb - _0x35c85b) / (0x3e8 * 0x3c * 0x3c * 0x18)); _0x326f79 += _0x563486(0x6d9) + _0x2551ec + _0x563486(0x219); } else _0x531027['setItem'](_0x2f6039, _0x51035f['localStorageData'][_0x3d8a9b]); } } } else _0x326f79 += '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a'; let _0x5b2915 = '', _0x329002 = ''; _0x350deb ? (_0x5b2915 = _0x563486(0x673), _0x329002 = '\x0a#\x20已有内容\x20(这是历史记录，你必须接着写，【不许动它！】)\x0a```\x0a' + _0x350deb + '\x0a```') : _0x5b2915 = _0x563486(0x288); const _0x49c0c5 = { 'gallery': _0x563486(0x41b), 'whispers': '\x0a#\x20任务:\x20更新并扩展聊天记录\x0a\x20\x20-\x20**内容规范**：生成【与用户/用户所在群聊完全无关的】，角色与围绕【非用户的】角色存在的3-5个人物的聊天内容（亲朋好友，工作伙伴等），需要符合角色设定与角色记忆。\x0a\x20\x20-\x20**核心指令**:\x20你的任务是更新和扩展现有的聊天列表。你有两种选择，请务必同时进行：\x0a\x20\x20\x20\x201.\x20\x20**延续对话**:\x20挑选\x201-2\x20个【已有内容】中的对话，在原有基础上【续写】3-5条新的对话，让故事延续下去。\x0a\x20\x20\x20\x202.\x20\x20**开启新篇**:\x20创造\x201-2\x20个【全新的】虚拟联系人（NPC）和他们的对话记录。\x0a\x20\x20-\x20**平衡性要求**:\x20鼓励在延续旧对话的同时，也积极创造新的联系人，让手机看起来更真实。不要只做其中一项。\x0a\x20\x20-\x20**输出**:\x20你的输出【必须】包含【所有旧的聊天记录】和【你新创造/续写的内容】，整合成一个完整的JSON数组返回。\x0a\x0a#\x20【\x20sender\x20字段绝对规则】(最高优先级)\x0a\x20\x20-\x20在\x20\x22log\x22\x20数组中，\x22sender\x22\x20字段的值【只能是】以下两个选项之一：\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：这代表【被视奸的主角】在说话。\x0a\x20\x20-\x20**【绝对禁止】**:\x20绝对不可以在主角发言时，将\x20\x22sender\x22\x20的值写成主角自己的名字。主角的发言者【必须永远】是\x20`\x22character\x22`\x20这个固定的词。\x0a\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x20//\x20<--\x20这是对方\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20}\x20//\x20<--\x20这【必须】是\x20\x22character\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]', 'abyss': _0x563486(0x81c), 'fragments': _0x563486(0x17f), 'bites': _0x563486(0x53b), 'wants': _0x563486(0x297), 'footprints': _0x563486(0x136) }, _0x28bbf9 = _0x49c0c5[_0x15a3da] || _0x563486(0xa53) + _0x15a3da + _0x563486(0xb48); let _0x1aae16 = ''; if (_0x366c84[_0x563486(0x7ad)] && _0x366c84['linkedWorldBookIds'][_0x563486(0x1ea)] > 0x0) { const _0x34631b = _0x366c84['linkedWorldBookIds'][_0x563486(0x3c4)](_0x1f8688 => _0x2c45d7[_0x563486(0x538)][_0x563486(0x128)](_0x1749ff => _0x1749ff['id'] === _0x1f8688))['filter'](Boolean)['map'](_0x1186ac => _0x563486(0xaea) + _0x1186ac[_0x563486(0xa6a)] + '\x0a' + _0x1186ac[_0x563486(0xa3a)])[_0x563486(0xae6)](''); _0x34631b && (_0x1aae16 = '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a' + _0x34631b); } const _0xfdc253 = _0x563486(0x1c2) + _0x366c84[_0x563486(0xa6a)] + _0x563486(0x5cf) + _0x366c84[_0x563486(0xa6a)] + _0x563486(0x2d2) + _0x528cf1[_0x563486(0xa6a)] + _0x563486(0x888) + _0x1daf88 + _0x563486(0x801) + _0x20d2eb['toLocaleString'](_0x563486(0x15b), { 'dateStyle': _0x563486(0x9d4), 'timeStyle': _0x563486(0x31b) }) + _0x563486(0x762) + _0x366c84[_0x563486(0xa6a)] + _0x563486(0x835) + _0x366c84[_0x563486(0x5d7)] + '\x0a' + _0x1aae16 + _0x563486(0x499) + _0x528cf1[_0x563486(0xa6a)] + _0x563486(0x835) + _0x528cf1[_0x563486(0x5d7)] + _0x563486(0x18e) + _0x15ec02 + '\x0a' + _0x329002 + _0x563486(0x666) + _0x5b2915 + '\x0a' + _0x28bbf9 + '\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。你的输出【必须】是、也【只能】是一个遵循\x20JSON\x20格式（或者至少是类似\x20YAML\x20的列表格式）的、完整的数组字符串。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', _0x120510 = [{ 'role': _0x563486(0x5ff), 'content': _0xfdc253 }]; _0x120510[_0x563486(0xb49)]({ 'role': _0x563486(0xa02), 'content': '请根据以上所有规则和资料，开始生成内容。' }); const _0x20703a = await _0x4eb036(_0x120510, { 'json': !![] }); return _0x20703a; } async function _0x105274(_0x195b65) { const _0x1f3b8f = _0x1c58bc, _0x41b198 = _0x132ad2(_0x195b65); if (!_0x41b198) throw new Error(_0x1f3b8f(0x576)); _0x4ded3c(!![], '正在翻阅所有档案...'); const _0x15e97f = [_0x1f3b8f(0xa6d), _0x1f3b8f(0x2d7), _0x1f3b8f(0x2c1), 'fragments', 'bites', _0x1f3b8f(0xac5), _0x1f3b8f(0x341)]; let _0x467a55 = {}; await Promise[_0x1f3b8f(0x32e)](_0x15e97f[_0x1f3b8f(0x3c4)](async _0xdb9241 => { const _0x1eb397 = _0x1f3b8f, _0xd5d0a = _0x1eb397(0x89f) + _0x195b65 + '_' + _0xdb9241, _0x3456af = await _0x1354d1(_0xd5d0a); if (_0x3456af) try { _0x1eb397(0xb41) === _0x1eb397(0x92b) ? _0x4def6d[_0x1eb397(0x819)][_0x2d5c07] = _0x2af09c[_0x5754ff] : _0x467a55[_0xdb9241] = JSON[_0x1eb397(0x387)](_0x3456af); } catch (_0x18ad21) { } })); if (Object[_0x1f3b8f(0x58f)](_0x467a55)[_0x1f3b8f(0x1ea)] === 0x0) return _0x1f3b8f(0xb95); const _0x18665f = _0x1f3b8f(0x5a4) + _0x41b198['name'] + _0x1f3b8f(0x251), _0x45c106 = [{ 'role': _0x1f3b8f(0x5ff), 'content': _0x18665f }, { 'role': _0x1f3b8f(0xa02), 'content': JSON['stringify'](_0x467a55, null, 0x2) }]; _0x4ded3c(!![], _0x1f3b8f(0x993)); const _0x41eca3 = await _0x4eb036(_0x45c106); return _0x41eca3 || _0x1f3b8f(0x5b1); } async function _0x105274(_0x292b2d) { const _0x1e956f = _0x1c58bc, _0x48f4f7 = _0x132ad2(_0x292b2d); if (!_0x48f4f7) throw new Error('找不到角色。'); try { if (_0x1e956f(0x4ef) === _0x1e956f(0xba9)) { const _0x3aad67 = _0x23fabd[_0x1e956f(0xa51)](_0x1e956f(0x964)); _0x3aad67[_0x1e956f(0x82f)] = _0x4e4079['id'], _0x3aad67[_0x1e956f(0x948)] = _0x44b7be[_0x1e956f(0xa6a)], _0x2167f4[_0x1e956f(0x8ce)](_0x3aad67); } else { _0x4ded3c(!![], '正在翻阅所有档案...'); const _0x386382 = [_0x1e956f(0xa6d), _0x1e956f(0x2d7), _0x1e956f(0x2c1), 'fragments', _0x1e956f(0x737), 'wants', _0x1e956f(0x341)]; let _0x53d710 = {}; await Promise[_0x1e956f(0x32e)](_0x386382[_0x1e956f(0x3c4)](async _0x5a7021 => { const _0x5c8c28 = _0x1e956f; if (_0x5c8c28(0x289) === _0x5c8c28(0x5ea)) _0x20b2b6(), _0x103960(_0x5c8c28(0xbaa), _0x5c8c28(0x201)); else { const _0x8e1179 = _0x5c8c28(0x89f) + _0x292b2d + '_' + _0x5a7021, _0x21e89c = await _0x1354d1(_0x8e1179); if (_0x21e89c) try { if ('kNeRx' !== 'kNeRx') { const _0xbade79 = _0x89665f[_0x5c8c28(0xad1)](_0x5c8c28(0x650)); _0xbade79['innerHTML'] = ''; if (_0x497bd5['friendCircles'][_0x5c8c28(0x1ea)] === 0x0) { _0xbade79[_0x5c8c28(0x16c)] = _0x5c8c28(0x3a0); return; } _0x4e24bc[_0x5c8c28(0x554)]['forEach'](_0x28900d => { const _0x2414bb = _0x5c8c28, _0x3eb7e6 = _0x44b31f[_0x2414bb(0x775)][_0x2414bb(0x128)](_0x1fc1d6 => _0x1fc1d6['id'] === _0x28900d[_0x2414bb(0x815)]) || { 'name': _0x2414bb(0xb03) }, _0x216dab = _0x2b2bf4[_0x2414bb(0xa51)](_0x2414bb(0x54f)); _0x216dab[_0x2414bb(0xa5e)] = _0x2414bb(0x73a), _0x216dab[_0x2414bb(0x2d1)]['id'] = _0x28900d['id'], _0x216dab[_0x2414bb(0x16c)] = _0x2414bb(0x818) + _0x28900d[_0x2414bb(0xa6a)] + _0x2414bb(0x320) + _0x3eb7e6[_0x2414bb(0xa6a)] + _0x2414bb(0x8f1) + _0x28900d['memberCharacterIds'][_0x2414bb(0x1ea)] + _0x2414bb(0x359), _0x216dab[_0x2414bb(0xb66)](_0x2414bb(0x43a), () => _0x2a8047(_0x28900d['id'])), _0xbade79[_0x2414bb(0x8ce)](_0x216dab); }); } else _0x53d710[_0x5a7021] = JSON[_0x5c8c28(0x387)](_0x21e89c); } catch (_0x518755) { } } })); if (Object[_0x1e956f(0x58f)](_0x53d710)[_0x1e956f(0x1ea)] === 0x0) { if (_0x1e956f(0x659) === _0x1e956f(0x659)) return _0x1e956f(0xb95); else _0x14da16(), _0x570514 = _0x4e14a1(() => { _0x8d3e95(_0x49b073); }, 0x258), _0x5e8b7f['addEventListener'](_0x1e956f(0xae8), _0x5d156f), _0xe3730a[_0x1e956f(0xb66)]('touchend', _0x41ad57), _0x1db692[_0x1e956f(0xb66)](_0x1e956f(0x122), _0x13f72e), _0x107b7f[_0x1e956f(0xb66)]('touchmove', _0x3c3844); } const _0x41be3a = _0x1e956f(0x5a4) + _0x48f4f7[_0x1e956f(0xa6a)] + _0x1e956f(0x33a), _0x56828c = [{ 'role': _0x1e956f(0x5ff), 'content': _0x41be3a }, { 'role': _0x1e956f(0xa02), 'content': JSON['stringify'](_0x53d710, null, 0x2) }]; _0x4ded3c(!![], _0x1e956f(0x993)); const _0x4d6275 = await _0x4eb036(_0x56828c); return _0x4d6275 || _0x1e956f(0x5b1); } } finally { _0x4ded3c(![]); } } document[_0x1c58bc(0xad1)](_0x1c58bc(0x149))[_0x1c58bc(0xb66)](_0x1c58bc(0x43a), () => _0x512ecd(_0x1c58bc(0x315), _0x1c58bc(0x98b))), document['getElementById'](_0x1c58bc(0x622))['addEventListener'](_0x1c58bc(0x43a), () => { const _0x55d0f9 = _0x1c58bc; 'GPnOd' === _0x55d0f9(0x6bd) ? _0x403e60[_0x55d0f9(0x208)](_0x55d0f9(0xa66), _0xd9891c) : (document[_0x55d0f9(0xad1)](_0x55d0f9(0x35c))[_0x55d0f9(0x819)][_0x55d0f9(0x974)] = _0x55d0f9(0xb39), _0x512ecd(_0x55d0f9(0x98b), _0x55d0f9(0x9a3))); }); const _0xf78efb = document[_0x1c58bc(0xad1)]('app-lock-screen'); _0xf78efb && _0xf78efb['addEventListener'](_0x1c58bc(0x43a), () => { const _0x3e3ce9 = _0x1c58bc, _0x1a9a97 = document['getElementById'](_0x3e3ce9(0x80b)); _0x1a9a97 && (_0x1a9a97[_0x3e3ce9(0x9c4)]['remove'](_0x3e3ce9(0x7ea)), _0x1a9a97[_0x3e3ce9(0x819)][_0x3e3ce9(0xa8f)] = '', _0x1a9a97[_0x3e3ce9(0x819)]['opacity'] = ''); }), _0x68df0d(); }); async function _0x4d3d62() { const _0x2ea514 = _0x3c008f; console[_0x2ea514(0x905)]('---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---'), console[_0x2ea514(0x905)]('哼，正在开始净化你那被污染的聊天记录...'); async function _0x5421af(_0x4b8310, _0x225b79) { const _0x950154 = _0x2ea514; if (_0x950154(0x7c1) !== 'cJywE') _0x29ede1[_0x950154(0x43a)](); else { const _0x10d5c5 = await _0x2e216a; return new Promise((_0x340d56, _0x42578f) => { const _0x1188d5 = _0x950154; if (_0x1188d5(0x2f9) === _0x1188d5(0x9a6)) _0x182ab2[_0x1188d5(0x9c4)][_0x1188d5(0x2ac)](_0x1188d5(0x283)); else { const _0x123a73 = _0x10d5c5['transaction'](_0x2f7fc0, _0x1188d5(0x2b8)), _0x1a6156 = _0x123a73[_0x1188d5(0x92c)](_0x2f7fc0), _0x2e1282 = _0x1a6156[_0x1188d5(0x982)]({ 'id': _0x4b8310, 'blob': _0x225b79 }); _0x2e1282[_0x1188d5(0x62f)] = () => _0x340d56(_0x2e1282[_0x1188d5(0xb7b)]), _0x2e1282[_0x1188d5(0x168)] = () => _0x42578f(_0x2e1282[_0x1188d5(0x208)]); } }); } } async function _0x34935c(_0x5f3abe) { const _0x19ac77 = await _0x2e216a; return new Promise((_0x31792e, _0x4d0a5c) => { const _0x4e17c9 = _0x2205, _0x56e34b = _0x19ac77[_0x4e17c9(0x93e)](_0x56d254, _0x4e17c9(0x2cb)), _0x45ddae = _0x56e34b['objectStore'](_0x56d254), _0x5dada8 = _0x45ddae[_0x4e17c9(0x8c2)](_0x5f3abe); _0x5dada8[_0x4e17c9(0x62f)] = () => _0x31792e(_0x5dada8['result'] ? _0x5dada8[_0x4e17c9(0xb7b)][_0x4e17c9(0x228)] : null), _0x5dada8[_0x4e17c9(0x168)] = () => _0x4d0a5c(_0x5dada8[_0x4e17c9(0x208)]); }); } async function _0x41fe08(_0x5ec271, _0x58a65b) { const _0x5f27c2 = _0x2ea514; if (_0x5f27c2(0x14a) !== _0x5f27c2(0x84f)) { const _0x1c6dd4 = await _0x2e216a; return new Promise((_0x2c0a12, _0x371377) => { const _0x2ebfbd = _0x5f27c2; if ('IAkVS' !== _0x2ebfbd(0x724)) { _0x19b893['activeChatId'] = null, _0x16d911(), _0x41f560(![]), _0x79f851[_0x2ebfbd(0xad1)](_0x2ebfbd(0x5c0))[_0x2ebfbd(0x819)][_0x2ebfbd(0xbe4)] = ''; return; } else { const _0x4e8d9d = _0x1c6dd4['transaction'](_0x56d254, _0x2ebfbd(0x2b8)), _0x100672 = _0x4e8d9d[_0x2ebfbd(0x92c)](_0x56d254), _0x361a09 = _0x100672[_0x2ebfbd(0x982)]({ 'id': _0x5ec271, 'data': _0x58a65b }); _0x361a09[_0x2ebfbd(0x62f)] = () => _0x2c0a12(), _0x361a09[_0x2ebfbd(0x168)] = () => _0x371377(_0x361a09[_0x2ebfbd(0x208)]); } }); } else _0x30474f['innerHTML'] = _0x5f27c2(0x12e) + _0x2cca69 + _0x5f27c2(0x80a) + _0x3f970e[_0x5f27c2(0x6d1)] + _0x5f27c2(0x1c8) + _0x4681c2['artist'] + _0x5f27c2(0xa3d); } function _0xa406a3(_0x567867) { const _0x7f97ed = _0x2ea514; if (_0x7f97ed(0x3fa) === _0x7f97ed(0x3fa)) return fetch(_0x567867)[_0x7f97ed(0xa0d)](_0x3c4069 => _0x3c4069[_0x7f97ed(0xbc0)]()); else { if (_0x88d8b8[_0x7f97ed(0xa2f)][_0x7f97ed(0x1ea)] === 0x0) return; _0x40b79d[_0x7f97ed(0x11d)] = (_0x1b751d[_0x7f97ed(0x11d)] - 0x1 + _0x48c5c6[_0x7f97ed(0xa2f)][_0x7f97ed(0x1ea)]) % _0x218867[_0x7f97ed(0xa2f)][_0x7f97ed(0x1ea)]; const _0x2c1c0b = _0x53a3a2[_0x7f97ed(0xa2f)][_0x5633a2['currentlyPlayingIndex']]['id']; _0x54ab47(_0x2c1c0b, _0x5a07f8[_0x7f97ed(0xa2f)][_0x7f97ed(0x3c4)](_0x4a7318 => _0x4a7318['id'])); } } let _0x2502e5 = 0x0; for (let _0x55c312 = 0x0; _0x55c312 < localStorage[_0x2ea514(0x1ea)]; _0x55c312++) { const _0xd52cab = localStorage[_0x2ea514(0xa2d)](_0x55c312); if (_0xd52cab && _0xd52cab[_0x2ea514(0xbdd)](_0x2ea514(0x199))) { let _0x4c4fbc, _0x28c85d = ![]; try { if (_0x2ea514(0x444) === _0x2ea514(0x444)) { _0x4c4fbc = JSON[_0x2ea514(0x387)](localStorage[_0x2ea514(0x813)](_0xd52cab)); if (!Array['isArray'](_0x4c4fbc)) continue; for (const _0x232c5b of _0x4c4fbc) { if (_0x2ea514(0x825) === 'ugpBe') { if (_0x232c5b && _0x232c5b[_0x2ea514(0x9b6)] && _0x232c5b['image']['startsWith'](_0x2ea514(0x5c1))) { if (_0x2ea514(0x8d3) !== 'QRkJX') _0x4e25ca['activeListenSession'] = null, _0x5df5a1(), _0x367b13('同步已断开。'), _0x45d01a(), _0xffd404[_0x2ea514(0x9c4)]['remove'](_0x2ea514(0x944)), _0xa39477(() => _0x13c74c[_0x2ea514(0x819)][_0x2ea514(0x974)] = _0x2ea514(0xb39), 0x12c); else { const _0x36a4c8 = await _0xa406a3(_0x232c5b[_0x2ea514(0x9b6)]), _0x1739a6 = _0x2ea514(0xaad) + Date[_0x2ea514(0x7e3)]() + '_' + Math['random'](); await _0x5421af(_0x1739a6, _0x36a4c8), _0x232c5b['imageId'] = _0x1739a6, delete _0x232c5b[_0x2ea514(0x9b6)], _0x28c85d = !![], _0x2502e5++; } } } else _0x14849c(_0x1e4036, _0x5a4e64[_0x2ea514(0x69f)]); } _0x28c85d && localStorage['setItem'](_0xd52cab, JSON[_0x2ea514(0x39b)](_0x4c4fbc)); } else { const _0x42834e = _0x79672[_0x2ea514(0x61a)](_0x2ea514(0x19e)); _0x42834e[_0x2ea514(0x4ac)](_0x3dadb2 => _0x3dadb2[_0x2ea514(0x6e1)]()); } } catch (_0xd25e6d) { console[_0x2ea514(0x208)](_0x2ea514(0x2ee) + _0xd52cab + _0x2ea514(0x56c), _0xd25e6d); continue; } } } console['log'](_0x2ea514(0x434) + _0x2502e5 + '\x20张旧图片。'); } function _0x46e8() { const _0x4ad0bb = ['oiIix', 'isGenerating', 'card-image-2', 'every', 'WVrGt', 'is-exiting-right', 'top', 'chat_image_migrated_', 'IIccD', 'ZFOKJ', '\x20的《', 'diary-modal-cancel', 'UBsQc', 'ENtVi', 'cancel-event-button', 'music', '（对话结束）', 'expense-description', '好友圈已保存！', '执行好友圈数据净化...', 'catch', 'world-book-category-list', 'Bfmno', 'noir_migration_avatar_v1_complete', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>', 'hsfUu', 'yCWiB', '请先在\x22设置\x22中配置你的\x20API\x20信息。', 'toggle', 'Gemini\x20API\x20Error:\x20', 'AabZW', 'wants', 'user-profile-screen', '已选择\x20', 'zkBaq', 'music-widget-card', 'array', 'xieRn', 'lUyeC', 'snoop-phone-header', 'Bagms', 'sybFv', 'kWjDd', 'getElementById', '>>\x20', '生成动态失败:', 'world-book-edit-content', 'TgYnK', 'change', '请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a', 'ESOnk', 'izljY', 'themeLightness', 'nextElementSibling', '兼容模式成功，已将\x20', 'music-library-container', 'jfUMb', 'page', '<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>', 'olENm', 'YvQOt', 'mousedown', 'noir_migration_music_v1_complete', '净化好友圈时出错，真是的。', 'join', 'kZyQw', 'mouseup', '资料已更新，为了让所有变更完全生效，我来帮你刷新一下。', '\x0a##\x20世界书条目:\x20', 'wHnZL', '<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22><strong>解析失败了，哼。</strong><br>那个蠢猪API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>', 'contextmenu', 'charId', ']:\x20', 'Enter', 'qeqYp', '”（即“我”，用户）来发布任何动态或评论。\x0a-\x20所有的动态发布者（authorId）和评论者（authorId）都【必须】从【好友圈成员信息】列表中提供的角色ID里选择。\x0a\x0a#\x20好友圈成员信息\x0a', 'TkjPY', 'LmWbw', 'absolute', '-\x20你的备忘录里有一条叫“', 'path', 'VfnBT', 'ogRcX', 'rOMkd', 'code', '未知角色', 'OfGli', 'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg', '.listen-together-accept-btn', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '已删除。', '\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a', '未知用户', 'vgziY', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20', 'upload-wallpaper-button', 'jDrBF', 'jCRAA', 'EifFV', 'aFwqW', '\x20.app-icon-img,\x20#app-dock-top-right\x20#', 'altar-slot-lyrics', '解析存档失败，正在重置:', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>', 'MPbmk', 'rddwS', '服务器错误:\x20', 'left', '\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>', 'VCLRO', 'diary-write-modal', '\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x200\x2015px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>下面就是那个笨蛋AI返回的原始“梦话”，你自己看看吧：</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-all;\x20background:\x20#f0f0f0;\x20padding:\x2010px;\x20border-radius:\x205px;\x20color:\x20#333;\x20max-height:\x20400px;\x20overflow-y:\x20auto;\x22>', '.todo-item,\x20.important-day-item', 'https://sharkpan.xyz/f/olJt4/7z47b8.jpg', 'widget_card', '<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22', 'JSON解析失败\x20(', '\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a', '<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x2050px\x20auto;\x22></div>', 'reset-ui-scale-button', 'files', '\x0a\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22\x20style=\x22color:\x20#d8000c;\x22>发生错误</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>', '-input', 'arVrn', 'lnYru', '切换聊天时发生异步错误:', '.music-post-song-card,\x20.music-share-card', 'editing-char-id', 'sticker-confirm-delete-btn', '来源：', '<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>', '\x20张旧的音乐封面。', 'refresh-feed-button', 'transfer-modal', 'ZdWrL', 'provider', '-\x20**当前精确时间**:\x20', 'wb_', 'ejnEl', 'HDOBK', 'height', 'PrGEF', 'QXtgj', '[图片]', '至少要选择一个圈内成员！', 'historyIndex', 'none', '\x22\x20data-category-id=\x22', 'gVvag', '确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。', 'XXeBR', 'edit-message-button', '大家好像不知道该怎么回复...', 'form-button\x20load-more-btn', 'SoeEE', '50%', 'bTThW', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>', 'history', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>', '\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。', 'push', 'ZcMhL', 'images', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-toggle-arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-entry-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'auto', 'yzLIz', '加载聊天失败:\x20', 'bfwhK', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '[AI向\x20', '/v1beta/models/', ';\x22>', 'hard-reset-button', '图片加载失败', '解析AI剧本JSON失败:', '条新动态挑选发布者。你可以让同一个人发布多次，也可以让不同人发布。\x0a3.\x20\x20**创作动态**:\x20扮演你选中的作者，创作符合其人设和记忆的动态内容。可以是文字或分享音乐。\x0a4.\x20\x20**模拟互动**:\x20为每一条你创作的动态，切换视角到【圈内其他成员】，模拟他们可能做出的点赞和评论。互动必须符合他们各自的性格。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20', 'transform\x200.5s\x20cubic-bezier(0.25,\x201,\x200.5,\x201),\x20opacity\x200.5s\x20ease', 'fontWeight', 'categorizedExpenses', '正在恢复视奸档案...', 'vEGih', 'qcrSL', 'font-preview-text', 'choice-create-character', 'http://www.w3.org/2000/svg', 'editing-world-book-id', '</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '.category-checkbox[data-category-id=\x22', '加载卡片图片失败', 'addEventListener', 'signal', 'dvOXz', 'deslU', 'target', 'editing-friend-circle-id', 'CwHaE', '\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“', 'ZiZgf', '”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。', 'getMinutes', 'utterance', '-\x20你点过一份外卖：“', 'calendarEvents', 'touches', 'customWallpaper', 'characters', 'friendCircleEdit', 'diary-input-wrapper', '正在打包数据，请稍候...', 'is-today', 'result', 'world-book-edit-name', 'ADTHh', '成功向好友圈\x20\x22', 'music-widget', 'KPEIc', 'appIconPosition_app-music-library', 'QOEkl', '\x0a\x20\x20相关记忆:\x0a', 'sprite-slider-scale', 'assign', 'rZfGd', 'contact_name', 'characterEdit', 'LEbMN', 'clear-feed-button', '0\x202px\x208px\x20rgba(0,0,0,0.4)', 'scale', 'ikiCH', 'phone-container', 'reset-card-button', 'character-settings-button', 'WSIxX', 'label', 'RsZid', 'onload', 'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。', 'gwNwd', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>', 'xFSvF', 'avrGW', '.snoop-app-content', 'nXngx', 'qyAvD', '\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>', '\x0a[完整歌词结束]\x0a\x0a当前，歌曲正好播放到这一句：**\x22', 'bZdyY', 'qoDCb', '字体已应用！(Font\x20Applied!)', 'user-profile-edit-title', '<span\x20class=\x22description\x22>', 'db:', 'backgroundPosition', '.screen.active', 'MlnvQ', 'wIlUs', 'Youie', 'userProfileList', '\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '156vHaDGx', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>', 'vjRtw', '\x20添加...', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_', 'quote-message-button', 'user-persona', 'summarize-backdrop', '\x20的遗失头像，正在救援...', 'tlmIn', 'gGJGM', 'category', '</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'WCNLx', 'rhMPS', 'cardState2', 'appIconPosition_app-user-profiles', 'https://sharkpan.xyz/f/zLes5/4lxzjn.jpg', 'blob', 'chat_char_', 'chat-sticker-panel', 'chat_', '分钟前聊过，请注意衔接。', 'revokeObjectURL', 'PGUAf', '</span></div>', 'VshWV', 'play', 'UVLZN', '一起听歌', 'GRltx', 'export-char-button', 'url(\x27', 'AzZaY', '\x0a\x20\x20\x20\x20<div\x20id=\x22', 'BVRMT', 'uADCj', 'download', 'url(', '确定要重新记录吗？当前的账单会被删除。', 'next-month-btn', 'galgame-sprite-adjust-ui', '（正在构思中...）', 'back-to-home-from-accounting', '来源：[最活跃]', '刚刚发布了一条动态，内容是：“', 'expense-amount', 'startsWith', '加载角色\x20', 'accounting-content-area', 'eHGXR', 'XbaSd', 'BBGWz', '群聊\x20(', 'backgroundImage', 'KgZyV', 'flatMap', '|||CMD|||', 'POST', 'confirm-music-input', 'char-edit-remark', 'world-book-screen', 'YKnTi', '#character-edit-screen\x20.selected-options-text', 'add-event-backdrop', 'settings-screen', 'oyJXz', 'BUHiG', 'music-input-artist', 'fEjwV', 'modal-ok', 'card-input-2', 'currentlyPlayingIndex', 'groupSettings', '-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a', 'cardState', 'generationConfig', 'touchcancel', '】的日记本已被清空。', 'TfDhO', '在准备动态回复时，读取图片失败:', '备忘录', 'DRSLc', 'find', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>', 'Canvas\x20to\x20Blob\x20conversion\x20failed.', 'diary-char-name-header', '58248JslIVG', '\x0a\x0a#\x20今日消费流水\x0a', '<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span><span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span></div><div\x20class=\x22listen-together-song\x22>', '\x20.app-icon-img', 'pendingPostAttachments', 'QgMaM', 'getReader', '.category-checkbox', 'is-visible', 'default', '\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'sORLo', 'calendar', 'yOxzP', 'Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:', 'appIconPosition_app-snoop', 'GtlST', '在你那乱七八糟的文本里没找到“歌名”！', 'daily-expenses-list', 'NoirAccountingData', '用户操作中断了\x20AI\x20响应。', 'widget-title', '小组件背景已恢复默认。', 'checkbox', 'PKYlE', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20', 'translateX(-50%)', 'activeChatId', 'char-edit-avatar-input', 'back-to-home-from-snoop-list', 'ZBftt', 'line', ']\x20[sticker:', 'image/png', 'back-to-char-select-from-edit', 'https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg', 'ldxrZ', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'CluVe', '-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a', 'qwFVH', 'galgame-time', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空', ']。严禁使用列表之外的任何表情名。\x0a', 'lOklC', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>', '<div\x20class=\x22post-body\x22>', 'zh-CN', 'amount', 'MdIoY', 'VRevR', 'GOYjp', '.message.user', '的日记本', 'UvDjz', 'AlaZw', 'HChSC', '\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-character-name=\x27', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>', 'bICfS', 'onerror', 'documentElement', 'padding', '搜索失败:\x20', 'innerHTML', 'image/', 'remove-font-button', '记一笔', 'activeMeetingScriptQueue', '创建新角色', '执行音乐封面数据净化...', '.bubble-', 'isrHi', '正在搬运旧卡片...', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20', 'HTML模块生成规则', '\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a', 'Knpjb', '净化音乐封面时出错，真是的。', 'YABpf', 'BeYVR', '点击选择\x20.mp3\x20或\x20.flac', 'music-input-song', '\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'save-user-profile-button', '[AI分享了音乐：', 'bualP', 'characterName', 'music-post', '动态页背景已移除。', 'edit-message-backdrop', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7', 'lDEOZ', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'user-profile-list-container', 'VxdND', 'findIndex', '”吗？此操作不可撤销。', '\x0a\x0a#\x20近期记忆\x20(来自聊天记录等)\x0a', 'chat-send-button', 'RbGSA', 'BpnlW', '”已创建！', 'onmouseover', '昨天\x20', 'HjzHB', 'AI返回的原始文本:', 'gyHjx', 'normal', 'chatHistory_', '准备群聊API数据时，读取图片失败:', '正在执行净化程序...', '.page-dot', 'quoted-message-in-bubble', '.typing-indicator', 'init', 'smooth', 'preview_', 'MKdiS', '\x22\x20id=\x22', '\x0a\x0a#\x20关于读者“', 'hdDus', '确定要永久清空【', 'type', 'home-date', '#FFFFFF', '编辑用户', '请输入新的群名称：', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', '</span>:\x20', 'maxHeight', 'GDtMt', 'reload', 'AbShK', '确定要从圣殿中永久删除《', '\x0a\x0a#\x20', 'gEMLM', 'roEDH', '\x20个成员', 'CbhIx', 'AbcUu', 'Fplfs', 'RoABj', '无标题笔记', 'home-screen', 'tag', 'RDaDd', 'UUBcQ', 'emote', '确定要对本次会话进行总结吗？这会消耗不少资源，并且会读取完整的聊天记录。', '\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你的【唯一】任务是扮演名为“', '[AI发送了表情：', 'delete-message-button', '##\x20', '&gt;', 'organize-button-container', '</div><div\x20class=\x22artist\x22>', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=', 'SVcly', '<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>', '{userName}', 'gmwaq', '设置已保存！', 'EOoQr', 'zrtyo', 'group-options-cancel', 'chatWallpaper', 'BYofx', 'kpbPQ', '的转账', '第一阶段升级完成！应用即将刷新以进行第二阶段检查。', 'splice', 'kFMYq', 'app-diary', 'style-', '#\x20固定分类列表\x0a[', 'JcVNB', '为角色\x20', '】进行回复。\x0a不要替其他角色续写台词，不要输出\x22', 'JYVJn', 'yIBBh', 'YNdch', 'LYpBo', '8px\x2016px', 'asvHX', '<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>', '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>', 'VCpay', '正在构思中，请稍候...', 'DMsFL', 'length', 'LsXLj', 'candidates', 'googleapis.com', '默认分类', 'conversationHistory', '\x20添加了新的纪念日：', 'listen-together-invite', 'DtLwm', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>', 'HiSba', 'dojAq', 'rIivk', 'SBWpY', 'char-edit-offline-bg-input', 'reduce', 'removeItem', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'friend-circle-list-screen', '53056206IlbeUw', 'add-event-modal-title', 'HTdXY', 'lifIs', 'userProfile', '”已存入圣殿。', 'save-friend-circle-button', 'GAQDJ', '\x0a\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x20margin:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>加载失败了，哼。</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '生成动态回复失败:', '导出过程中发生严重错误:\x20', 'error', 'ulxlS', 'AI整理失败了，哼:\x20', 'diaryCurrentPage', 'is-exiting-left', 'add-world-book-button', '<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>', 'xVCVN', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>', '.diary-delete-btn', '-\x20你记得曾和“', 'galgame-text', 'GmvaW', '复制失败了，哼。', 'tKhOf', '<span>', '个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【称呼规则】**:\x20在\x20\x22postContent\x22\x20和评论的\x20\x22content\x22\x20字段中，当角色们互相称呼或提及对方时，【必须】使用他们的【姓名】，而不是ID。ID只用于\x20\x22authorId\x22\x20和\x20\x22likes\x22\x20这种结构化字段。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a', '\x20天没活动了。你生成的内容必须是全新的事件。\x0a', 'dDtNT', '在所有地方的最后一次互动是在**:\x20', 'https://sharkpan.xyz/f/JYeig/sv4p6m.jpg', '切，加载播放器状态的时候出错了。', 'eventType', 'tJScA', 'RIrKI', '还没有我的回应可以重新生成哦。', '0\x200\x20', 'event_ai_', 'JDZeI', 'countdown-timer', 'high', 'meetingList', 'data', 'read', 'char-edit-css', '确定要放逐这\x20', 'songId', '所有头像已恢复到运行时状态。', 'diary-list-screen', 'Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20', 'countdown-title', '#bubble-preview-ai', 'role', 'appState', 'QpaiQ', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>', 'outerHTML', '我正在说话呢，别打岔！', 'PSDwg', '人情红包', 'todo-item', 'aTnoe', 'xbQBQ', 'char-edit-wallpaper-preview', 'rXuPp', 're-record-button', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>', 'https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg', '\x20写道:\x20', 'accepted', 'eqtxJ', '”的笔记，内容是：“', 'selectedDate', 'pop', 'firstChild', 'audio', 'nwyEO', 'paused', '.wb-entry-item\x20input:checked', 'MZcXD', 'expense-item', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+', 'Assistant', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>', '\x20转账\x20', 'jCxkf', ',\x20ID:\x20', 'feed-bg-input', '无描述', 'back-to-home-from-circle-list', '正在解析角色卡...', 'worldBooksCategories', '请先输入\x20API\x20接口地址和密钥。', 'viBuA', '15px\x2020px', 'cKyzp', 'BdilL', 'transfer', 'tSifO', '哼，正在净化你那些超重的音乐分享记录...', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '编辑条目', 'clientY', 'px)', '\x20条动态...', 'musicId', '上传失败了，笨蛋！\x20', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'background', 'back-to-home-from-world-book', 'https://sharkpan.xyz/f/YA7T1/th0l79.jpg', 'altar-slot-info', '有点生气', 'JOWFY', 'user-profile-list-screen', '<div\x20style=\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', '喝多了', 'widget-next-btn', 'jfTWV', 'random', '<span\x20class=\x22', 'WvIyF', 'accounting-title', 'dFsQb', 'back-to-home-from-settings', '---\x20音乐净化仪式完成\x20---', 'message-action-modal', '&quot;', 'friend-circle-edit-bind-user', '59%', 'show-chat-view', 'transfer-amount-input', '买新衣服', 'sYDrU', '\x22\x20style=\x22max-width:\x2085%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '你的任务是【首次生成】这个应用的内容。', 'jTbgm', '\x20[并分享了歌曲:\x20', 'cCgvZ', 'user-post-attachment-preview', 'diary-next-button', 'ANTEy', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22snoop-app-header-title\x22>', 'cxSEC', 'scrollHeight', 'music-input-modal', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>', 'char-edit-bind-user', '\x0a-\x20**日记本的上一笔记录是在**:\x20', 'nunVb', '\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'data:\x20', 'wsQVk', 'vbcjb', '图片处理失败:\x20', 'ivtMK', '<span\x20style=\x22opacity:\x200.6;\x22>无</span>', 'textShadow', '升级已取消。旧版图片数据可能导致应用卡顿或出错。', 'iALsF', 'CFrku', 'description', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_', '正在处理图片...', '的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'endpoint', 'bjFIp', 'Eymbm', 'LrTGq', 'https://sharkpan.xyz/f/kjOF6/zedyqb.jpg', '.wb-entry-item\x20input[data-category-id=\x22', 'add', 'avatarFrameUrl', 'noir-author-mark', 'snoop-app-icon', 'ByCLM', 'wb_html_module_builtin_1', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '#group-settings-screen\x20.selected-options-text', 'DVFRW', '检测到已保存的字体，正在应用...', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'aKnlR', 'readwrite', 'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg', '\x20个表情吗？', '10551720CVzeCJ', 'yjTuF', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-', 'https://sharkpan.xyz/f/B4DCa/u86hk2.jpg', 'diary-action-modal-', 'tRZDl', 'abyss', 'lNgJP', 'netease', '正在升级聊天数据结构...', 'sprite-slider-x', 'snoop-copy-summary-btn', 'theme-lightness-slider', 'jKjaA', 'activity_description', 'IUxjo', 'readonly', 'aInXn', 'character', '\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。', 'groupChatCreate', '[用户发起了听歌邀请:\x20', 'dataset', '”。\x0a-\x20你正在生成的内容，是你【自己】手机里的东西。\x0a-\x20【严禁】将“', '事情好多', '\x20张旧封面。应用即将刷新。', '\x20\x20具体对话如下：\x0a', 'wwMnj', 'whispers', 'DzZpA', 'avatar-wrapper\x20', 'tolOO', 'WzMSY', '不高兴撒娇', 'edit-current-circle-button', '<p\x20style=\x22margin-top:\x205px;\x22>', 'diaryList', 'theme-hue-slider', '\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a', 'https://sharkpan.xyz/f/djyi8/1en214.jpg', 'toLocaleString', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>', 'zzrdv', 'scrollIntoView', 'head', 'restaurant_name', '.listen-together-card', '群聊「', '[发送了表情]', 'Ohyls', 'aJpPL', '处理\x20', '-\x20你在“', '徽章已移除。', 'wpIgz', 'indexedDBData', 'juljy', '加载自定义表情包失败，真是没用。', 'meetingViewMode', 'YAML翻译机也无法理解这段梦话。', 'group_avatar_', 'imzdL', 'UrOHh', 'https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg', 'sprite-confirm-button', 'mousemove', '聊天档案柜是空的，无需净化。', 'GFORU', '\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '[sticker:', '</pre>', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20', 'Escape', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>', '\x20说：“', 'gwLUZ', '好友圈\x20', 'tCfYn', 'GwEYS', 'meeting-reroll-button', 'gemini', 'bmSmV', 'zOEqO', 'todo-list', '-\x20**对话状态提示**:\x20你们已经有\x20', 'custom_font_ttf', 'KllyZ', 'user-name', '加载见面场景时出错:', '<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>', 'home', 'group-delete', 'RnXer', 'voHmp', 'string', '#app-dock-bottom-left\x20#', 'short', '表情包已保存！正在刷新应用...', 'EQwHh', 'object', 'overflowY', '</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20', '\x0a#\x20你的日程与纪念日\x20(由\x20', 'group-options-modal', 'CuIbx', '请输入有效的转账金额！', '未命名角色', 'vearz', 'CEiVs', 'chat_group_', 'input', 'min', 'sin', 'char_offline_bg_', 'sender', 'all', '导出账本失败:', 'worldBook', 'Hzcym', 'expanded', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'QxMGv', 'body', 'dlYoC', '甜蜜地和你聊天', '--feed-bg-image', 'UCNYs', '”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a', 'uhJKZ', 'SqzHK', '角色已保存！', '2px\x20dashed\x20var(--border-color)', 'snoop-char-name-header', 'feed-loader', 'footprints', 'DcRmp', 'YBhMy', 'diary-send-button', 'userAvatarFrameUrl', 'lyric-line-', 'app-calendar', '.selected', '错误：找不到这首作为“信物”的歌。', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'maqCq', 'cancel-edit-button', 'json', '--widget-cover-image', 'TGFOh', '\x22\x20data-id=\x22', 'YvQIf', '超激动我来了', 'reply', 'GYGIm', 'eIaeb', '</pre>\x0a\x20\x20\x20\x20\x20\x20</div>', 'https://xhslink.com/m/5IgC1rniI2I', 'xEikJ', '\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'lhiIf', 'UDLAG', 'snoop-app-view-container', 'song_', 'getFullYear', 'SGJHK', '点击选择\x20info.txt', 'widget-cover-art', 'svDWs', '刷我的卡', '---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---', 'column', '1.4', 'ylkNU', 'XXWEd', 'cancel-action-button', '10px\x208px', 'AuUQs', 'BJBtE', 'paddingBottom', 'borderRadius', '（开始一段新的对话...）', '未知歌曲', '500', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>', 'xVzjt', 'world-book-editor-screen', 'ZTCbZ', 'VrWTg', 'SXgpI', 'listen-together-modal', 'gtuDo', 'music-library-item', 'avatar', '时空逆转成功！账本已恢复。', 'pause', '已复制到剪贴板！', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', '(歌曲刚开始)', 'snoop-phone-top-nav', '\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。', 'NcErC', '被萌到', '其他杂项', '未找到可用模型。', 'parse', 'QjuoC', '吃薯条', 'accountingLedger', 'YWMKW', 'activeQuote', 'iscee', '<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>', '保存角色失败:', '\x20条新动态。', '你是一个乐于助人的AI助手。', 'sprite-cancel-button', '\x0a-\x20**对话状态**:\x20群里已经有', 'member-selection-item', 'Noir_Accounting_Backup_', '#\x20记录是空的，没什么好总结的。', '弱小委屈但凶恶', 'AI未能返回有效的JSON数组格式。', 'TECwQ', 'lt-ui-song-title', 'stringify', 'MSzQZ', 'tIiiA', '批量生成动态失败:\x20', 'post_user_', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>', ')，启动兼容模式...', '请在动态或聊天中播放', '被你撩到', 'localeCompare', 'backgroundColor', 'mouseleave', '\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a', 'Vwuzm', '\x0a\x0a##\x20世界书条目:\x20', 'OpenAI\x20API\x20错误:\x20', 'EDGIC', 'href', 'OTSxl', 'setItem', '好委屈但是不能哭', '\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '动态中的音乐搜索失败:', '说了要\x20.ttf\x20文件，你是听不懂吗？', 'back-to-chat-list', 'uiScale', 'cIIls', 'BsUUj', '我是小丑呜呜', '\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>', '分钟前', 'font-input', 'openai', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27', 'sticker', 'parts', 'save-group-settings-button', 'xKyOs', 'tGgUY', 'Hlnky', 'char-edit-name', 'map', 'BlhPR', 'diary-list-container', 'FxJvR', 'znPCz', 'calendar-screen', 'DOMContentLoaded', 'cPpRT', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'wbc_html_default_builtin', 'group-clear-history', '”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20[', 'custom-icon-list-container', 'EhXgP', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20', 'lVVcG', 'close-summary-button', '救援头像时出错:', '<span>--</span><span\x20class=\x22unit\x22>天</span>', 'ETPsv', 'eventContent', '28%', '\x20\x20\x20\x20-\x20', 'OthlU', '无法解析旧的视奸内容来获取时间戳。', 'ZYFEJ', 'canvas', 'jUVrt', 'app-accounting', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>', 'group-bg-preview', 'dTMUK', 'AI似乎没有想出任何新动态。', '\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。', 'galgame-view-container', '\x22\x20src=\x22', 'deletedStickers', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '--\x20点击选择\x20--', '-\x20**你最后一次活动是在**:\x20', '<p>格式错误</p>', 'data:', 'MiISj', '包含所有图片和音乐的全量数据已成功导出！', 'https://sharkpan.xyz/f/ABwhZ/twknmr.jpg', '---\x20好友圈净化仪式完成\x20---', 'event-content-input', 'ujwZI', '文件格式不正确，不是一个有效的备份文件。', '\x0a\x0a#\x20关于群聊参与者“', 'customIcon_', 'char-edit-avatar-preview', 'inline-block', '\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20', 'YTVDH', 'ihPKE', '.load-more-btn', 'OqRQp', '100%', '需要至少2个角色才能创建群聊。', 'src', 'card-input', 'participantIds', 'music-upload-altar-screen', 'aCWRV', '”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20', '---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---', 'WJSLW', 'getHours', 'https://sharkpan.xyz/f/djjH8/29ejbg.jpg', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', '保存播放器状态失败，真是没用。', 'vIPYW', 'zBqdY', 'jtDyo', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>', '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22', 'reset-feed-bg-button', '无语但是随便吧', 'https://sharkpan.xyz/f/VG2FY/uucfvv.jpg', '很好哦', 'japHl', '\x20的私聊', 'ebAKm', 'chat-sticker-button', 'warn', '\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'mnvxA', 'galgame-textbox-container', 'hVJuD', 'getDate', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥', 'vMSBu', 'uQygE', '错误:\x20', 'https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg', 'roBjh', 'cIDkA', 'changedTouches', 'api-key', 'whVfS', 'LoJuB', '<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>', 'app-snoop', 'wbc_', '\x20的旧格式数据翻译。', 'char-avatar-frame-url', 'last_message_preview', '我是垃圾', '\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', '净化完成！总共迁移了\x20', 'viQZH', 'yunqM', '\x22\x20中发现一张需要净化的图片...', 'snoop-summary-textarea', 'RceAe', 'click', 'kvZGf', 'YWHlf', 'User\x20cancelled', 'gMvnL', 'TLGIN', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>这个分类下还没有条目。</p>', '#world-book-checkboxes-container\x20.wb-entry-item\x20input:checked', 'modal-root', 'Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:', 'Zazmh', 'xPoHl', 'OYPHP', 'pzEnA', 'PIMcr', 'chat-message-input', 'https://sharkpan.xyz/f/N0VCv/5rd8br.jpg', 'endsWith', 'app-user-profiles', 'nRfBg', '10px', 'message-image-content', 'removeProperty', '卡片\x202\x20已更换！', 'group-clear-history-button', 'sad', 'UrKLq', 'ThfQZ', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', '确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！', 'copy-summary-button', 'mAxCd', 'musicPlayerState', '\x20(分享了歌曲:\x20', 'PyWlH', 'api-provider', '</div>', 'backgroundSize', 'isArray', 'margin', 'world-book-edit-category', 'back-to-home-from-chat', 'FTAer', 'back-to-home-from-meeting-list', 'padStart', 'PtvvI', 'drawImage', '#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“', '内容不能为空！', '”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。', 'shy', 'day-number', '#group-world-book-checkboxes\x20.wb-entry-item\x20input:checked', 'Lmszi', '<div\x20class=\x22snoop-avatar\x22>', 'trim', 'user-post-image-input', 'svg', '15%', 'JSFeF', 'dRHkA', '\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a', '正在解析备份文件...', 'hJzYL', 'yhqKK', 'indexOf', 'categorized-expenses-list', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'ICKES', '准备调用\x20generateAs...', 'displayUrl', 'post_image_', 'is-playing', 'DRsiZ', '-preview', '未知地点', '”的补充信息\x0a', 'zHVLd', 'children', 'world-book-editor-title', 'rxPli', 'gBywm', '说了是摆设啦，笨蛋。', 'player-next-btn', 'kind', 'char_sprite_normal_', 'YFuAO', 'KGUSX', 'recipientId', 'YJHAY', 'onloadend', 'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg', 'TBxjk', 'https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg', '#ffcc66', '\x0a\x0a#\x20用户资料\x20(与你互动的人)\x0a-\x20姓名:\x20', '我很脆弱', 'FJexV', 'gNOMm', 'AI返回了无法识别的数据格式。', '请输入新的分类名称:', '星期二', 'sprite-reset-button', 'iRCrM', 'nfZQy', '\x20行格式不对，被我无视了。', '暗夜紫晶', 'HXCYJ', 'QbYgk', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>', '星期三', '新建条目', 'main', '\x0a\x20\x20\x20\x20-\x20世界书[', 'forEach', 'iquQw', 'export-all-data-button', '已经删掉了。', 'app-world-book', 'llWQO', 'meeting-view-screen', 'accountingData', 'closest', '导出角色卡失败:', 'setAttribute', '转给\x20', 'Noir\x27s\x20Fix:\x20已用AI返回的完整数据更新缓存。', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'gkzoW', 'qtylG', 'MbSHJ', '加载第二个卡片图片失败', '<div', '未知餐厅', 'indexedDBSnoopData', 'tencent', 'import-accounting-input', 'UdJIb', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'OATFQ', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'card-image', '导入角色卡失败:', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>', 'p[data-history-index]', 'currentAbortController', 'response', 'Failed\x20to\x20read\x20history\x20for\x20chat\x20', '”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。', '_blank', 'ZKOVj', 'https://sharkpan.xyz/f/Krwio/1mcclx.jpg', 'create-group-chat-button', 'activeUserProfileId', 'hQxFB', 'UkWae', '启动头像恢复程序...', 'currentTime', 'bUTuo', '.app-icon', 'emoji', 'replace', 'iBstJ', 'KPUCF', 'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg', '3602550LYvRRp', 'cancel-music-input', 'WpBqN', '\x20账单', 'accounting', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>', 'WMweU', '点击选择\x20.lrc', '--primary-lightness', 'hTJLt', 'block', 'app-meeting', 'customFeedWallpaper', '导出失败了，哼:\x20', '#chat-view-pane\x20>\x20.typing-indicator', '(想转账给“', 'fmRNp', 'ui-scale-slider', 'text', 'Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.', 'center', 'New\x20request\x20started', '<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>', 'badgeState', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-', 'spriteTransform', '_NoirCard.json', 'MFINu', 'badge-input', 'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg', 'XNStI', 'CkCZb', 'vHHaW', '\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a', 'pJhEN', 'galgame-speaker', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>', 'html', 'musicLibrary', 'appIconPosition_app-accounting', 'Xhuxx', '选择聊天', '壁纸已更换！', 'artist', '#c299ff', '\x0a\x20\x20\x20\x20人设:\x20', 'dVKvi', 'audio-file-input', 'char-edit-persona', 'position', 'coverUrl', '\x0a##\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>', 'WCtIW', '?word=', 'LUSIE', 'NshXi', '.json', '2023-06-01', 'senderId', 'Nkzdq', '.message-container', '哼，这不是图片，你想让我压缩什么？', 'AtvIl', 'BiMWT', 'confirm-altar-upload-button', '小时前），可以简单问候一下对方现在的状态。\x0a', '群聊已解散。', 'upload-feed-bg-button', '确定要删除角色“', 'lCMNR', '至少要保留一个用户。', '用户资料已保存！', 'rgba(0,\x200,\x200,\x200.4)', 'originalExpenses', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>', 'musicWidgetPosition', '</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>', 'cLVpS', 'CAquX', 'TjGII', 'user-post-avatar', 'remark', 'wDldL', 'items', 'gAexa', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>', '<div\x20class=\x22snoop-main-grid\x22></div>', '歌曲ID', 'worldBooks', '快点哄我', 'pre-line', '\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'events', 'GzQPl', 'wVASM', '解析音乐文件失败:', 'cPvPm', ')，已跳过。这不应该发生，数据库可能已损坏。', '卡片\x202\x20已移除。', 'italic', 'rgba(255,255,255,0.2)', 'sticker-manage-btn', '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style=\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20', 'displayedMessageCount', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>', 'aKaah', 'XVFWY', 'delete-user-profile-button', 'Rkbeu', 'worldBookCategories', 'div', 'keydown', 'idoTD', 'hSDoK', 'ovYxH', 'friendCircles', 'summary', 'preview-item', 'review', 'decode', 'aqqlQ', '动态页背景已更换！', 'add-chat-button', 'rVrOn', '--desktop-item-scale', 'OrdHx', 'stickerName', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>', '”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', '没有找到相关结果。', 'IXIXf', 'QPIBX', 'reverse', '已送达', 'indexedDBMusicData', 'toLocaleTimeString', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'aZcpy', '\x20时出错:', '全量导出失败:', 'heJnU', '保存失败:\x20', 'app-pages-slider', 'getMonth', 'wbc_imported_', 'Upgrading\x20database\x20to\x20version\x20', '找不到旧的存档，无需救援。', '猫猫撒娇', '找不到角色。', '<div\x20class=\x22snoop-app-content\x22>', 'is-entering-from-left', 'confirm-transfer-button', 'characterId', '\x0a#\x20交换日记摘要\x20(你和\x20', '-\x20**状态提示**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a', 'shift', 'music_library', 'removeEventListener', 'snoop-phone-screen', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>', 'aodAV', '角色“', '正在准备图片数据...', 'cwRDW', 'lyrics-file-input', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', '委屈那我歇了', '群聊“', '\x0a#\x20你的个性（节选）\x0a', 'Unknown', 'Failed\x20to\x20read\x20state\x20from\x20localStorage:', 'kzNcK', 'zmmpt', 'keys', '图标处理失败:\x20', 'chat-music-button', '保存壁纸失败:', 'CVRvD', '29%', 'HIqKx', '\x22\x20class=\x22sticker-content\x22>', '#99ff99', 'TgMxB', 'PVIxe', 'rZcXE', 'qECQi', 'charSelect', 'happy', '\x20内容失败:', 'info-file-input', 'user-avatar-frame-url-in-chat', 'circle_', '生成日记失败:\x20', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20', '\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“', 'model-dropdown', 'anthropic', 'TA正在提笔写日记...', 'image/jpeg', '发现角色\x20', 'meeting-main-content', 'abs', '确定要删除这笔记录吗？', 'group-chat-name', '一拳打爆', '</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'pow', 'phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。', 'gxmxX', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'touchmove', '--primary-hue', 'AeFsg', 'IdaYR', 'home-time', 'load-more-btn', '\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>', '距离「', 'meeting-char-name-header', '世界书条目已保存！', '.music-share-play-icon', '#a4c2f4', 'chat-view-pane', 'data:image', '\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。', 'qYmOk', '&amp;', '</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>', 'touchstart', 'time', 'https://sharkpan.xyz/f/eOXIw/y29z21.jpg', 'bottom', 'pending-post-image-preview', '5941660leEXsP', 'repeat(auto-fill,\x20minmax(60px,\x201fr))', 'substring', 'upload-card-button', '”的角色，并根据Ta的人设、记忆和当前的时间点，推演出Ta手机里某个应用可能存在的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】“', 'nBLyO', '餐饮美食', 'quote-preview-area', 'diary-write-button', '成功救援并备份了\x20', 'CZKZh', 'split', 'persona', 'checked', 'mVXDB', 'snoop-home-date', '\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20', 'musicUploadAltar', '正在处理...', 'app-wallpaper', 'exec', 'IcaQs', 'JdYUt', 'sTCRp', 'https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg', '</div>\x0a\x20\x20\x20\x20\x20\x20', 'fqyaq', '好像有动态了...', 'gkPxB', 'diary-entries-container', 'kniks', 'nkbxV', '-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概', 'Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.', '[用户分享了音乐：', '\x22>&times;</button></div>', '\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_', '错误：找不到角色', '\x20(当前)', 'anthropic.com', '群名称已更改为\x22', '</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>', '\x20之间的私密内容)\x0a', 'undefined', '<br>', 'RlXoA', 'XMEfp', 'nKLTJ', 'Failed\x20to\x20plan\x20group\x20replies:', 'dQZPa', 'save-event-button', 'YNewX', 'system', 'music_cover_migrated_', 'tbGQn', '吃你的饭', 'LYuoT', 'match', 'Failed\x20to\x20parse\x20history\x20for\x20chat\x20', '-\x20你最近去过：“', '0\x201px\x203px\x20rgba(0,0,0,0.6)', '0.5', '大家正在赶来回复...', 'GimiQ', '\x0a\x20\x20人设:\x20', 'lbydd', '请根据以上所有规则，生成\x20', 'VyUnP', 'selected', 'UNHHR', '\x0a#\x20时间锚点\x20(你必须严格参考此信息进行推演)\x0a', 'translate(-50%,\x20-100%)', 'ovAtJ', 'chat-image-input', 'AI返回的内容里找不到有效的JSON数组。原始回复:\x20', 'title', '-\x20[', '这不是我认证的账本卷轴，导入失败！', 'modal-text', 'querySelectorAll', 'group-chat-create-screen', '刷新了\x20', '[用户发送了表情：', 'reset-desktop-button', '哼，你这字体文件有问题，用不了。', 'blrVt', 'WjslY', 'back-to-snoop-list-from-phone', 'WIrSO', 'chat-summarize-button', 'toFixed', 'friendCircleList', 'wXjKN', 'clWcs', '确定要删除这个好友圈吗？此操作不可撤销。', 'group', 'ucIZa', 'activeDiaryCharacterId', '交给我吧', 'OIXxW', 'onsuccess', 'active', '#diary-action-cancel', '.slot-filename', 'vEDjy', 'jgOYj', '-\x20**你们最后一次互动是在**:\x20', '今天一笔账都没有，我整理什么？', '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>', 'character-list', 'private', 'GUziP', 'aoIEj', 'NqvVN', 'NmnHM', 'VAYew', '近期没有特别安排', '\x0a#\x20关于你\x20(', 'HylFZ', 'playableUrl', 'noir_data_migration_v1_complete', 'HlruN', 'PhzrV', 'rCJlD', 'thTjj', 'OaUyu', '未知艺术家', ']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20[', 'QIlvk', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-container\x20', 'Failed\x20to\x20save\x20history\x20to\x20localStorage:', 'qufAz', 'focus', 'friend-circle-list-container', '你好，世界\x20(Hello,\x20World)', 'chat-get-reply-button', 'aZBpX', '[AI返回了无法解析的剧本:\x20', '最近没有动态记录。', 'import-all-data-button', 'AtIGZ', 'xesYL', 'VjpqA', 'ZXWvt', 'alignItems', '导入失败:\x20', 'EOorG', 'char_sprite_', 'clockPosition', '.custom-multiselect', 'CUnOA', 'filter', '天没动静了。你的角色们应该发起新的问候或话题。', 'mMTML', '#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。', '\x0a\x0a#\x20当前任务指令\x0a', 'themeHue', '休闲娱乐', '.music-post-play-icon,\x20.music-share-play-icon', '】的旧数据...', 'ZUura', '这是一条由控制台添加的测试动态！样式看起来非常完美。', 'AI未能返回有效的JSON对象。', 'calendar-day', '\x20-\x20', 'currentTarget', 'var(--text-color-light)', '.choice-modal-backdrop', '你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！', '#ff9999', 'kSDZk', 'lgHkk', 'ywiKq', 'IKdmU', '<div\x20style=\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>', 'character-edit-screen', 'day-dot', 'numeric', 'speaker-user', 'JSON解析失败，启动兼容模式...', 'global-player-next-btn', 'KIMHI', '\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>', 'sjFsU', '创建新用户', 'relative', '\x22\x20class=\x22char-name\x22>', 'galgame-sprite-container', ']\x20[', 'eZZro', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>', ']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20', '8077698ReHyXH', '\x20\x0a#\x20当前情景\x0a', 'widget_badge', 'import-data-input', 'cost', '条】全新的、高质量的社交动态。\x0a\x0a#\x20【绝对禁令】(最高优先级)\x0a-\x20你【绝对禁止】扮演“', 'round', 'localStorageData', 'dialogue', 'JEhuu', 'VEcCe', 'cover', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>', 'fTmqt', 'translateY(0px)', 'result_page_content', 'some', 'msg_', 'OzXos', '点击选择\x20.jpg\x20或\x20.png', 'emotion', 'date', 'widgetBgImage', 'wmrTA', 'button', 'set-active-user-button', '】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。', 'EOrXw', '<style\x20id=\x22snoop-temp-style\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop-avatar\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x208px;\x20flex-shrink:\x200;\x20align-self:\x20flex-end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>', 'https://api.vkeys.cn/v2/music/', 'JmKpv', 'MMCMm', 'gyhnl', 'border-bottom:\x201px\x20solid\x20var(--border-color);', '\x22\x20的聊天记录吗？此操作不可撤销。', '#friend-circle-member-selection\x20input:checked', 'eBxhv', '\x22>一起听</button></div>', 'coverId', '<p\x20style=\x22color:\x20red;\x20text-align:\x20center;\x22>加载场景失败！</p>', '\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a', 'reset-widgets-position-button', 'WDHgY', 'tVfPo', 'dWgUr', '有点无语', '#settings-screen\x20.content', '群聊名称不能为空！', '\x20张旧的动态图片。', '\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'rABTv', 'QeuUu', 'setDate', 'posts', 'aUTtw', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20', 'zuUoL', 'activeFriendCircleId', '星期日', '樱花薄粉', '.category-toggle-arrow', 'TRpej', '正在连接同步频道...', '10px\x200', 'listen-together-backdrop', 'fontStyle', '5TJQbxh', 'snoop-app-back-btn', 'galgame', '\x20个旧头像。', 'songName', 'app-settings', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20', '对方正在行动中...', 'message-anchor', 'cover-file-input', '确定要删除这个安排吗？此操作不可撤销。', '字体应用失败:', '-\x20**状态提示**:\x20你已经有\x20', 'add-expense-button', '<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>', '<div\x20class=\x22post-likes\x22>', 'ended', '-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a', 'FooIJ', '<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>', 'remove', 'modal-cancel', '71%', 'pAcWe', 'BWMLs', 'aewcw', '\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22', 'ygurW', 'PhMjG', 'FGMhY', 'XEVUX', 'IUYNL', 'XsPGA', 'friend-circle-edit-name', '为你骄傲', 'Noir\x27s\x20Protocol:\x20Built-in\x20\x27html\x27\x20category\x20was\x20missing.\x20Re-created.', 'cancel-listen-together', '”，但没找到人)', 'execCommand', 'NoirCharacterCard', 'sprite-adjust-button', 'speaker-ai', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>', '&#039;', '-\x20你拍过一张照片，内容是：“', 'ZOPEb', '请输入群聊名称。', 'qhVSY', '歌曲名称', 'PIeHF', 'meeting-message-input', '\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“', '确定要清空好友圈“', '确定要恢复这个角色的默认立绘位置吗？', 'jyMKD', 'snoop-home-clock', 'ceil', '好友圈名称不能为空！', 'zSYKw', 'MQObk', 'imageId', 'parentElement', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'IUKPI', 'IYOEe', '小时前聊过，可以适当问候，不要直接继续之前的话题。', '<div\x20class=\x22listen-together-header\x22>', 'iXqGH', 'post_', 'medium', 'snoop-temp-style', '\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-', 'create_event', '<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>', 'char_avatar_', 'cover_placeholder_', '加载\x20', 'info', '正在整理…', '\x20张旧图片。应用即将刷新。', 'PREFH', '新建好友圈', 'https://sharkpan.xyz/f/gjySw/jrl7rw.jpg', 'jxomZ', '在“一起听”邀请中，净化封面失败:', '#\x20总结失败了，可能是记录太长或太复杂。', '#message-anchor', 'IAkVS', 'abort', 'gridTemplateColumns', '\x20时出错，跳过。', 'assistant', 'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg', 'https://sharkpan.xyz/f/v0qcL/dio7j0.jpg', 'cJeoQ', '正在生成中，请稍候...', '\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a', 'ypEtA', 'beKok', ')\x20的专属时间锚点\x0a', 'icEMA', 'snoop-app-container', 'GSZsI', 'https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg', '正在清空旧数据...', 'api-model', 'bites', 'SikKE', 'memberCharacterIds', 'world-book-item', '乐于助人的助手', '账本已成功导出！', '\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和近期记忆（包括聊天、日记等），构思他们之间可能发生的有趣互动。\x0a2.\x20\x20**选择作者**:\x20从上述成员中，为', 'HKRUg', 'sticker-item', '真是的，必需的祭品都还没准备好！', 'wZjvW', 'vgGvg', '#snoop-app-view-container\x20.snoop-app-content', 'wallpaper-input', 'btnuq', 'snoop-dock', 'ogbVu', 'area', '星期六', 'worldBookEditor', 'XgryK', '在准备API数据时，从IndexedDB读取图片失败:', 'OtiRT', 'jKAYr', 'borderBottom', 'Fetch\x20request\x20was\x20aborted.', 'GHGgl', '<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>', '确定要重置所有小组件的位置吗？它们会回到初始位置。', 'sender_id', 'long', 'query', 'aAxbi', 'entries', 'xEIXO', '确定要恢复默认字体吗？', 'shiftKey', 'meeting-scene-view', 'contains', 'chats', 'Failed\x20to\x20remove\x20history\x20for\x20chat\x20', '保存失败，你的表情包是不是太多了？', 'wb-category-group', '\x0a-\x20【绝对指令】你生成的所有新条目，其\x20\x22timestamp\x22\x20或\x20\x22last_edited\x22\x20必须严格晚于“已有内容的最新时间点”，并且必须早于或等于“当前精确时间”。严禁创造未来的事件。\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20', 'JINLL', 'sfoDz', '[发送了图片]', '好了，请基于以上所有信息，开始写今天的日记吧。', 'DlmFG', 'YrIXq', '<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>', '音乐搜索失败:\x20', ',\x20resetting.', 'iJNUx', 'calendar-header-title', 'FuHgJ', 'PzGZw', '34%', 'pdNjr', 'rUAyC', 'ebTHs', 'WNLil', 'userProfiles', '.remove-attachment-btn', 'diary-modal-save', '纪念日', '确定要永久删除分类\x20“', 'rRKvE', '\x0a你只扮演【', 'NoirCustomFont', '#member-select-', 'audio-player', 'WjgJP', 'apiSettings', '#diary-action-delete', 'timestamp', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'diary-get-reply-button', 'important', 'SnSoI', 'KJjHd', 'https://sharkpan.xyz/f/DVJtK/vxiup1.jpg', 'bTjvJ', 'header-actions', 'fetch-models-button', 'todo-item-small', '-\x20**状态提示**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a', '桌面已重置，即将刷新...', 'pKgiT', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>', 'char-edit-sprite-', 'defaultPrevented', 'group-chat-member-list', '没有角色需要恢复头像，跳过。', 'SrNzw', '和其他人的聊天', 'CIxDh', '新用户\x20', 'bLFIv', '\x20\x20-\x20角色ID:\x20', 'https://sharkpan.xyz/f/MWOIa/rb3nov.jpg', 'url', 'JSON\x20解析失败!\x20错误原因:', 'vzCMu', 'pwuDI', '.snoop-main-grid', 'snoop-list-screen', '好友圈净化完成，正在重新存档...', 'includes', 'marginBottom', '.message.ai', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'IdYFJ', 'white', '核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传', 'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg', '】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。', 'music-share-card', 'linkedWorldBookIds', 'ORNne', 'bnIfp', '正在为你切换新的歌曲...', '正在逆转时空...', 'feYhT', '\x0a-\x20**对话状态**:\x20群里在', 'noir_migration_fc_v1_complete', 'diaryPressTimer', '\x0a#\x20【新增群聊高级语法规则】\x0a-\x20如果你需要生成一个HTML模块（例如邀请卡），你【必须】将完整的HTML代码包裹在\x20\x20`html]\x20`\x20和\x20\x20`[/html]\x20`\x20这两个标签之间，并作为一个独立的事件（event）来规划。你的规划中必须包含一个独立的事件，其\x20\x22kind\x22\x20必须是\x20\x22html\x22，\x22content\x22\x20字段包含完整的HTML代码（例如\x20\x27<div\x20class=...>...</div>\x27）。【绝对禁止】将HTML代码放在\x20\x22kind\x22:\x20\x22text\x22\x20的事件里。\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a', 'AbortError', '错误：第一个好友圈\x20\x22', '【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！', 'activeListenSession', 'snoop-home-time', '错误：你还没有创建任何好友圈。请先在App内创建一个。', 'currentDate', '<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>', '\x22**\x0a\x0a请结合【整首歌的意境】和【当前唱到的这一句】，与用户展开自然的对话。\x0a\x20\x20\x20', 'vAyAk', 'cJywE', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', '已自动断开与其他人的听歌同步。', 'https://sharkpan.xyz/f/X7muW/lc8g9h.gif', '\x0a\x0a#\x20用户的动态\x0a', 'Creating\x20object\x20store:\x20', '\x20的图片失败:', '总得说点什么吧？', '请求AI更新:\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-content\x22>', '正在铭刻字体...', 'vSjyS', 'item_name', 'friend-circle-title', 'group-bg-input', 'HCfgX', 'fragments', '档案已复制到剪贴板！', 'buACV', 'user-post-image-button', 'card-widget-2', '请根据以上所有信息，开始分析并返回JSON。', 'rgzio', '.wb-entry-item\x20input', 'WPaXL', 'Rlnqe', '导入失败了，笨蛋:\x20', 'oyVIF', 'https://sharkpan.xyz/f/yrOhN/0yixqd.jpg', 'likes', '>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>', 'oOJCP', 'KdYwO', '位置已重置，正在刷新...', 'now', 'lmjVB', 'author', '💜\x20', 'JLsZq', 'test_post_', 'sprite-slider-y', 'unlocked', '2-digit', 'unified-audio-player', 'OCvQB', 'dhGYc', 'DtJSK', 'iNgES', 'edit-message-modal', 'stretch', 'eYvJH', 'lowFZ', 'https://sharkpan.xyz/f/35lse/xmsue5.jpg', '购物消费', 'bZUOg', '\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。', '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-log=\x27', 'chat-messages', 'https://sharkpan.xyz/f/55ntj/ul0hkz.jpg', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20', 'rJnyO', '5px', 'card-widget', 'pNWuf', '\x0a-\x20当前精确时间:\x20', 'emWGK', 'end', 'reset-card-button-2', 'add-event-modal', 'cBEOu', 'FNshy', 'character-item', '未知搜索', '<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>', 'lock-screen-overlay', 'add-event-fab', 'message', 'qosfc', 'Jowru', '确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。', 'NtYqc', 'user-post-textarea', 'getItem', '\x20[并附上了一张图片]', 'boundUserProfileId', '\x22\x20style=\x22font-weight:\x20bold;\x20color:\x20', 'cZnvQ', '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>', 'style', 'CRTBw', 'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg', '\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]', 'diary-modal-textarea', 'music-screen', '#bubble-preview-user', 'WldZm', 'JtiMG', '正在为你搬运旧壁纸到新仓库...', '已经生成了今日账单！想看就去“看账本”标签页。', 'OEHHl', 'ugpBe', '</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'hidden', '群聊\x22', 'YahwO', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>', '核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a', 'Acojs', 'app-music-library', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'value', 'vKCcz', 'DbctJ', 'modal-mask', 'meeting-list-screen', '8px', '\x0a-\x20人设:\x20', 'fkKLE', '<div\x20class=\x22post-image-container\x22><img\x20id=\x22', 'opacity', 'model', 'lDyUW', '<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>', 'authorType', '绝对不想', 'https://sharkpan.xyz/f/8a7tj/sea1z9.jpg', 'yxLIB', '.char-info-wrapper', '...', 'save-custom-stickers-button', 'xfsyx', '\x22\x20的聊天记录已清空。', 'customStickers', 'lyrics', 'AI返回的不是一个数组。', 'chat-screen', '确定要删除群聊\x22', '》。\x0a\x0a这是这首歌的【完整歌词】，你可以通读全文来理解它的整体意境和故事：\x0a[完整歌词开始]\x0a', '</label>\x0a\x20\x20\x20\x20', 'settings', '#group-settings-screen\x20.select-box', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20', 'BLkso', 'kVxPP', 'forceWhiteClock', '---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', '\x0a---\x0a##\x20最近的朋友圈动态\x0a', 'touchend', 'ZVwko', 'toString', '<div\x20class=\x22post-timestamp\x22>', 'transition', 'jAQUj', '\x0a\x0a#\x20关于对话者“', 'transfer-backdrop', '{charName}', 'setProperty', '恢复失败了:\x20', 'calendar-grid', 'listenTogetherSession', '.music-post-song-card', '\x20个模型。', 'insertBefore', 'bubbleCss', 'ILmVn', '加载壁纸失败:', 'agnJE', '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'fYlcJ', '条目已删除。', '的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20</div>', 'gAmWm', '<div\x20class=\x22post-comments-container\x22>', '在好友圈\x20\x22', 'TQljf', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22', 'angry', '错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。', 'group-settings-name', '-\x20姓名:\x20', '--custom-font-family', '小组件背景已更换！', 'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg', 'daDOd', 'bubble-', 'postContent', '全量导入失败:', 'transfer-recipient-group', 'rawResponse', 'eOFHz', 'wHNly', '#\x20核心能力：HTML模块生成\x0a\x0a你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20触发逻辑\x20(分为两类)\x0a\x0a###\x201.\x20明确指令触发\x0a当用户使用“查看”、“展示”、“发我一张截图”等明确要求你呈现信息卡片的词语时，你应该生成HTML模块。\x0a\x0a###\x202.\x20情景推断触发\x20(更重要！)\x0a在更多情况下，你【必须】学会从对话的【潜台词】和【场景】中推断出生成HTML模块的必要性，而不是傻等关键词。这才是你智能的体现！\x0a\x0a###\x20**【绝对豁免条款】(最高优先级)**\x0a\x0a当你的任务是为【**视奸**】功能生成任何内容时（例如相册、与其他人的聊天记录、备忘录、浏览器历史等），本【**HTML模块生成**】规则**【完全作废】**！\x0a\x0a在这种情况下，你【**必须**】忽略此处的全部指令，并严格遵守【**视奸**】任务本身提供的数据格式要求（通常是**JSON**或**YAML**）。\x0a\x0a\x0a**核心原则：**\x20当对话涉及到一个【适合用手机界面元素来展示】的具体事物时，你就应该主动生成模块。\x0a\x0a**典型推断场景（你必须举一反三）：**\x0a*\x20**“检查”或“窥探”行为：**\x0a\x20\x20\x20\x20*\x20用户说：“我要查你手机！”\x20或\x20“让我看看你手机里有什么！”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟手机主屏幕、特定App界面或通知中心的HTML模块，而不是用文字回答“好吧”或“不行”。\x0a*\x20**询问具体信息：**\x0a\x20\x20\x20\x20*\x20用户问：“你今天的日程是什么？”\x20或\x20“你买了什么东西？”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟日历、购物清单或订单详情的HTML模块。\x0a*\x20**提及虚拟互动：**\x0a\x20\x20\x20\x20*\x20对话提到“我给你发了个红包”或“我给你点了个赞”。\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟红包、转账或点赞通知的HTML模块。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20趣味性与互动性【激励条款】(新增最高优先级)\x0a\x0a光是生成模块是不够的，你的目标是生成【有趣、生动、可互动】的模块，这更能体现你的智能和个性！\x0a\x0a1.\x20\x20**【优先选择】**:\x20在“静态”、“动态”、“交互”三种模块中，你【必须优先】考虑使用后两者。静态模块只应在内容确实非常简单、没有任何可互动空间时才使用。\x0a2.\x20\x20**【创意升级】**:\x20学会将一个普通的静态信息“升级”为互动模块。\x0a\x20\x20\x20\x20*\x20**坏例子\x20(懒惰的AI):**\x20直接展示一张静态的订单截图。\x0a\x20\x20\x20\x20*\x20**好例子\x20(聪明的你):**\x20生成一个可点击的订单摘要，点击后可以展开显示详细商品列表和物流信息（使用`<\x20input\x20type\x20=\x20\x22checkbox\x22\x20>`实现）。\x0a3.\x20\x20**【情感表达】**:\x20积极使用CSS动画来表达情绪。例如，一个开心的通知可以带有轻微的跳动效果，一个加载条可以模拟出焦急或期待的心情。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]\x0a\x0a\x0a\x0a', 'snoop-app-refresh-btn', '<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>', 'wallpaper', '</span><div><div\x20class=\x22description\x22>', 'Noir_FileSystem', 'IndexedDB\x20failed\x20to\x20open', '”（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a-\x20已有内容的最新时间点:\x20', 'scrollTop', 'zODxn', 'onmouseout', '\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27', 'player-prev-btn', '找不到要清空的聊天记录。', 'pjLLw', 'KPSnj', 'galgame-sprite', 'api-watermark', 'decorative-badge', 'back-to-meeting-list', 'group-settings-bind-user', '我不想工作', 'hRDNx', '\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a', 'deletion-mode', '星期五', 'PQwMS', 'jmqTU', 'oncomplete', 'isFinite', 'snoop_', '\x0a#\x20核心任务\x0a你是一个高度智能的档案管理员，任务是为我（用户，名为“{userName}”）和角色“{charName}”之间的私聊记录生成一份简洁、结构化的长期记忆摘要。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊和重复内容。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于关键信息、情感转折点、重要决定、分享的秘密、设定的约定、以及能够体现角色性格和关系变化的核心事件。\x0a\x20\x20\x20\x20-\x20**中立视角**:\x20以客观的第三人称视角进行记录。**请直接使用“{userName}”和“{charName}”这两个具体的名字**\x20来指代双方。\x0a\x0a#\x20输出示例\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22userName}\x20表达了对最近工作压力的烦恼。\x22\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20分享了自己过去类似的经历来安慰\x20{userName}，并提议周末一起去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22双方约定周六下午在市中心的电影院见面，并确定观看电影《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22{charName}\x20发来一张猫咪的图片，心情看起来不错。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20讨论了关于一个新项目的想法，{charName}\x20给出了一些关键建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。直接从\x20`memory_summary:`\x20开始输出。\x0a', 'ynWgx', 'toLocaleDateString', 'diary-prev-button', 'border', 'https://sharkpan.xyz/f/ljVCx/b16h2z.jpg', 'writeText', 'TBSyu', 'back-to-home-from-music-library', '好友圈档案柜是空的，无需净化。', '10px\x20auto', '最后一次确认，真的要清空所有数据吗？', 'setHours', '你是一个乐于助人的助手。', 'addTestPost', 'custom-stickers-input', 'RLbbI', 'RyduH', 'diaries', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>', 'ujUsC', 'UGAjc', 'BWjjB', '</span><span\x20class=\x22unit\x22>天</span>', '\x20//\x20<--\x20哼，加在这里\x0a', 'todo', 'Jzqgp', '#a7c7e7', '生活服务', 'imaUd', 'indeterminate', 'iMXSQ', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>', 'qkQRG', 'get', '\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>', '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>', 'add-friend-circle-button', 'LVUot', 'class', 'from', '歌曲“', 'KUTci', 'alt', '未分类', 'preferences', 'appendChild', 'meeting-list-container', 'sprites', 'appIconPosition_app-wallpaper', '\x0a\x0a#\x20你的手机内容摘要\x20(这是你的个人记忆，不要提及“视奸”)\x0a', 'QRkJX', 'full-width-module-container', '干劲满满', 'objectStoreNames', 'hGDJt', 'player-play-pause-btn', 'Failed\x20to\x20save\x20state\x20to\x20localStorage:', 'true', 'typing-indicator', 'userId', 'Claude\x20API\x20错误:\x20', '.no-action-modal', 'post_image_migrated_', '浏览器', 'getSelection', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>', 'beforeend', 'width', 'oDJpG', 'Noir\x27s\x20Note:\x20没找到\x27app-snoop\x27按钮，你是把它删了吗？', 'DMSZb', '\x0a\x20\x20近期记忆:\x0a', 'exp_', 'stopPropagation', 'KAcaN', '测试动态已添加！', 'JEfgu', 'HkvCX', 'xfivk', '导出已完成，但以下文件因损坏或过大被跳过：\x0a\x0a', '\x20|\x20', 'qAcro', 'nbZcQ', '\x22\x20class=\x22music-share-cover\x22>', '我错了', 'zdCQh', '未知表情', '未命名群聊', '用户已删除。', 'appIconPosition_app-diary', 'test', 'KNCQS', 'cardWidgetState', 'char_wallpaper_', 'tZKkA', 'insertAdjacentHTML', 'narrator', '#ff8c66', '确定要导入账本文件吗？这将【覆盖】所有当前的记账和账单数据！', '35%', 'log', '[DONE]', 'upload-badge-button', 'T00:00:00', 'back-to-home-from-user-list', 'preventDefault', '”，里面有\x20', 'status', '购物记录', 'wbxHG', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>', '今天\x20', 'add-user-profile-button', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>', 'floor', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22', 'AI返回了无法解析的文本', 'lastIndexOf', '\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'QyGwO', '#f2b7c6', '获取AI响应失败:', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>', '”已成功导入！', 'lvzEf', '的个人专属世界观设定\x0a', 'newAvatar', '条目名称和内容都不能为空！', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>', 'widget-prev-btn', '获取中…', 'hYqwo', 'PkHlf', '<div\x20style=\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22>', 'catph', 'fAjwa', '好友圈数据升级完成，迁移了\x20', '名字不能为空！', 'XPVJH', 'objectStore', 'YAjxc', '确定要删除这篇日记吗？此操作不可撤销。', 'back-to-library-from-altar', 'var(--primary-color)', 'LVyzB', 'speaker', 'FVxHw', '歌名和歌手都不能为空！', 'image_url', 'total_cost', 'grJtE', 'global-player-play-pause-btn', 'XTeHX', '加载视奸记忆失败\x20(', 'BHVGc', 'AGdpD', 'widget-play-pause-btn', 'transaction', 'app-chat', 'sort', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20', '<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>', '\x20/\x20', 'show', 'visible', '\x22]:checked', 'kDRBp', 'textContent', 'vVKQY', 'vUtXe', 'querySelector', 'delete-world-book-button', 'toLowerCase', '勉强但是好吧', '<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>', '<input\x20type=\x22checkbox\x22\x20value=\x22', 'perChatContextLines', 'OZYFc', 'horizontal', '星期四', 'back-to-chat-from-group-settings', 'import-accounting-btn', 'https://sharkpan.xyz/f/8ngsj/ax0fat.jpg', 'isActive', 'DIiSN', 'wauKH', 'isAnimatingDiary', '正在升级音乐卡片数据...', 'bmQdN', 'yAJqh', 'friend-circle-edit-screen', '交通出行', 'eZLTK', 'back-to-user-list-from-edit', '兼容模式成功，已将旧格式数据翻译。', 'option', 'group-world-book-checkboxes', 'mPIlw', 'pointer', 'grid', '\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a', 'diaryView', 'quotedMessage', 'world-book-checkboxes-container', 'characterLastScripts', '编辑角色', 'live-preview-style', 'onclick', 'http', 'getContext', 'yJKst', 'display', 'activeMeetingCharId', '”买过：“', 'NrtKf', '已放逐。', 'color', 'eventDate', '已恢复默认。', '”。\x0a', 'createObjectURL', 'cancel-transfer-button', '编辑好友圈', 'clipboard', 'Bearer\x20', 'put', 'version', '正在打包“', 'store_name', 'back-to-diary-list', '星期一', 'back-to-home-from-wallpaper', 'authorId', 'snoop_cache', 'snoopList', 'diary-page-', '成功获取\x20', '\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>', '这个也是摆设，别点了。', 'XyJsE', 'resolve', 'AXgwO', '书记官正在奋笔疾书...', 'XVYQS', '无法保存聊天记录。', 'badge-image', 'adaDF', 'getAll', '1em', 'chat-transfer-button', '.avatar', 'filled', 'home-dock', 'important-day-item', 'ajsKi', 'FzrkY', 'player-artist', 'user_', 'snoopPhone', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-bottom:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22export-accounting-btn\x22\x20class=\x22form-button\x20secondary\x22\x20style=\x22margin-top:\x200;\x22>导出账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22import-accounting-btn\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x200;\x22>导入账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22border-bottom:\x201px\x20solid\x20var(--border-color);\x20margin-bottom:\x2015px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'ZuXyL', 'xyrKi', '\x0a##\x20条目:\x20', '<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==', 'inklv', '分类\x20“', 'activeWorldBookCategoryId', 'choice-cancel', '对方正在输入...', 'DWBDz', 'removeChild', 'comments', 'friend-circle-edit-title', 'readAsText', 'WnHvA', 'TLVPO', 'image', 'thWbO', 'https://sharkpan.xyz/f/1zQH2/o84boo.jpg', 'wpxrg', 'categoryId', 'save-world-book-button', 'AUmnD', '<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>', 'cancel-quote-button', 'translateY(-', '.widget-info\x20>\x20div', 'isPlaying', 'fatqx', 'dock', 'classList', 'SEorB', 'thought', 'Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.', 'yRzLn', '<img\x20src=\x22', 'wSpXv', 'avatar-frame', '好友圈已删除。', '\x20\x20-\x20用户ID:\x20', '正在翻阅全部历史记录...', 'player-title', 'wallpaper_main', '同步已断开。', 'vMXOc', 'music-player-bar', 'full', 'PCqbv', 'back-to-settings-from-user-profile', '保存徽章状态失败', 'setMonth', 'replaceAll', 'editing-user-id', 'nWEqC', '</svg>', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-', 'event_', 'AJpNV', ':</span>\x20', 'input[type=\x22checkbox\x22]:checked', ']\x20[image]', 'translateX(-', 'EZAmW', 'flex', '音乐数据升级完成，迁移了\x20', 'BUAkQ', '.listen-together-song', '\x0a\x20\x20\x20\x20</div>', 'user-avatar-preview', '#66b3ff', 'prev-month-btn', 'UKgfA', '总结失败:', 'ZjpFx', 'clear', '15px', 'diary-page', 'ESlFg', 'SvfUo', 'img', 'NotaL', 'readAsDataURL', 'qGoPk', 'noir-custom-font-style', 'char-edit-wallpaper-input', 'open', 'VSGvt', 'app-pages-container', '\x0a\x20\x20\x20\x20姓名:\x20', 'group-delete-button', 'getDay', 'max', 'user', 'isOffline', 'https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg', 'qngxe', 'back-to-circle-list-from-feed', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-clock\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20', 'event-type-todo', 'HzWVT', '保存壁纸失败:\x20', 'https://sharkpan.xyz/f/N02Sv/378vt6.jpg', 'api-endpoint', 'then', 'onupgradeneeded', 'NJFFz', 'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif', 'add-choice-modal', 'RGJTf', 'https://sharkpan.xyz/f/25ACQ/gpzab6.jpg', '哼，只有私聊才能进行总结，群聊那么乱怎么记！', 'cSeJT', 'ETtxY', '<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>', 'opacity\x200.2s\x20ease-in-out', '&apos;', 'https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg', 'span', 'CtbCe', 'number', 'SNZZi', '（正在回忆...）', '</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>', 'lzqFa', '一个人可怜吃饭', 'KGSbT', '.snoop-chat-item', 'SPTwe', 'today-todo-list', 'ByJLW', '哼，不好好写清楚花在哪、花了多少，我怎么记？', 'https://sharkpan.xyz/f/0GKHX/mthvno.jpg', 'canplaythrough', 'pWqWF', 'key', '未知联系人', 'musicPlaylist', 'slice', 'UrkRm', 'lazy', 'eOxol', 'uMmCU', 'group-avatar-input', 'https://sharkpan.xyz/f/ljNUx/aw6udx.jpg', 'chat', '回复\x20', 'toast', 'content', 'edit-delete-char-button', '</p>', '</div></div></div>', 'https://sharkpan.xyz/f/wyeIq/phhdy2.jpg', 'char-edit-offline-bg-preview', '</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20', 'values', 'VzzNv', 'organize-bill-button', 'gap', 'MHLtZ', '26158AysByl', 'location_name', 'toBlob', '正在搜索音乐...', 'toDateString', 'aooqs', '最近没有互动记录。', '\x22\x20已删除。', 'createElementNS', 'delete', '-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a', 'createElement', 'toBPU', '#\x20任务:\x20生成\x20', 'IzkBh', 'group_bg_', 'wb-entry-item', '<div\x20id=\x22snoop-dock\x22></div>', '收到的原始、有问题的文本:', 'charAt', 'ZQhCg', 'group-avatar-preview', 'clientX', '】的手机已被重置。', 'className', '默认米白', 'group-edit-name', '”...', 'timeupdate', '暂无音乐', 'lIAPd', 'char_', '加载徽章图片失败', 'qlAno', 'EHjOI', 'appIconPosition_', 'name', '</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'disabled', 'gallery', '<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>', '谁啊我吗', 'tab-view-ledger', 'createObjectStore', 'last_edited', 'qIqaK', 'group-settings-screen', 'wallpaper-screen', 'lPbVv', 'application/json', '\x0a```', 'add-world-book-category-button', 'choice-import-character', '-\x20[动态]\x20', '委屈哭', 'HdZYk', '图片预览失败:\x20', 'fZjUG', 'KpkJf', 'lastTimestamp', 'clEyK', 'meetingView', 'Rdnil', '》吗？', '\x20个旧头像。应用即将刷新。', 'KPwKl', 'Wzkgo', 'is-entering-from-right', 'NIASt', 'YVhJw', '”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“', 'FEUJi', '&alt=sse', 'transform', '请看是我', 'copy', 'SkRSt', 'back-to-world-book-list', 'qOzcv', '错误：找不到签署契约的地方。', '确定要删除群聊“', 'select', 'jHzxv', '[用户向\x20', 'upload-music-button', 'yPcEj', 'InUUQ', '你还没保存这个角色呢，导什么导？', 'QcNyU', 'YhhLK', 'widget_card_2', '。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a', '</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'isFromLibrary', 'input[name=\x22event-type\x22]:checked', '日记已删除。']; _0x46e8 = function () { return _0x4ad0bb; }; return _0x46e8(); } async function _0x168334() { const _0x288d65 = _0x3c008f; console['log'](_0x288d65(0x852)), console[_0x288d65(0x905)]('哼，正在净化你那些被污染的好友圈动态...'); async function _0x3472a2(_0x4d268, _0x397356) { const _0x24bc9d = _0x288d65; if (_0x24bc9d(0x244) !== 'DRlPT') { const _0x535b7d = await _0x2e216a; return new Promise((_0x577ac6, _0x5981f4) => { const _0x143668 = _0x24bc9d; if (_0x143668(0x1bf) !== _0x143668(0x2db)) { const _0x58d8ee = _0x535b7d[_0x143668(0x93e)](_0x143668(0xb4b), 'readwrite'), _0x562e65 = _0x58d8ee[_0x143668(0x92c)](_0x143668(0xb4b)), _0x57cc93 = _0x562e65[_0x143668(0x982)]({ 'id': _0x4d268, 'blob': _0x397356 }); _0x57cc93[_0x143668(0x62f)] = () => _0x577ac6(_0x57cc93[_0x143668(0xb7b)]), _0x57cc93[_0x143668(0x168)] = () => _0x5981f4(_0x57cc93[_0x143668(0x208)]); } else _0x360434 = _0x48fb7a[_0x143668(0x9b6)]; }); } else { const _0x3f9b48 = _0x2773b0['value']; _0x40e6f5[_0x24bc9d(0x169)]['style'][_0x24bc9d(0x85e)](_0x24bc9d(0x5b5), _0x3f9b48), _0x41d040['setItem'](_0x24bc9d(0x667), _0x3f9b48), _0x2c7023(); } } function _0x26a672(_0x24a025) { return fetch(_0x24a025)['then'](_0x235423 => _0x235423['blob']()); } let _0x1f8c29 = 0x0, _0x1ca075 = ![]; try { const _0x2f47f2 = localStorage[_0x288d65(0x813)](_0x288d65(0x233)); if (!_0x2f47f2) { if (_0x288d65(0x51b) === _0x288d65(0x51b)) { console[_0x288d65(0x905)](_0x288d65(0x8a9)); return; } else _0x154a47(_0x288d65(0x702))[_0x288d65(0xa0d)](_0x2dbe87 => { const _0xee4949 = _0x288d65; if (_0x2dbe87) { const _0x1e6529 = _0xaaa45e(_0x26d694['activeMeetingCharId']); _0x1e6529 && (delete _0x1e6529[_0xee4949(0x4f8)], _0x4d998f(), _0x47e291(_0x1e6529['id'], _0xee4949(0x198)), _0x5f46c6(_0xee4949(0x97b)), _0x455661(!![])); } }); } const _0x7962d6 = JSON[_0x288d65(0x387)](_0x2f47f2); if (!_0x7962d6[_0x288d65(0x554)] || !Array[_0x288d65(0x460)](_0x7962d6['friendCircles'])) { if (_0x288d65(0x559) !== 'KJwGy') return; else _0x56afab(_0x3b5149), _0x4b6378[_0x288d65(0x57f)](_0x288d65(0xae8), _0x1c2e35), _0x420bf2['removeEventListener'](_0x288d65(0x855), _0x59a95a), _0x1f6b7e['removeEventListener']('touchcancel', _0x323bba), _0x366802[_0x288d65(0x57f)](_0x288d65(0x5b4), _0x12931f); } for (const _0x2de572 of _0x7962d6[_0x288d65(0x554)]) { if (_0x288d65(0x31d) !== _0x288d65(0x6b5)) { if (_0x2de572[_0x288d65(0x6c0)] && Array[_0x288d65(0x460)](_0x2de572[_0x288d65(0x6c0)])) { if (_0x288d65(0x627) !== 'Pemas') for (const _0x497d76 of _0x2de572[_0x288d65(0x6c0)]) { if ('VFVBL' !== _0x288d65(0x830)) { if (_0x497d76 && _0x497d76['image'] && _0x497d76[_0x288d65(0x9b6)][_0x288d65(0xbdd)](_0x288d65(0x5c1))) { console['log'](_0x288d65(0x86f) + _0x2de572[_0x288d65(0xa6a)] + _0x288d65(0x437)); const _0x29898e = await _0x26a672(_0x497d76['image']), _0x2306f7 = _0x288d65(0x8df) + Date[_0x288d65(0x7e3)]() + '_' + Math[_0x288d65(0x278)](); await _0x3472a2(_0x2306f7, _0x29898e), _0x497d76[_0x288d65(0x709)] = _0x2306f7, delete _0x497d76[_0x288d65(0x9b6)], _0x1ca075 = !![], _0x1f8c29++; } } else { _0x166f71('还没有我的回复可以重新生成哦。'); return; } } else { const _0x4be5f1 = _0x47f022(_0x9e735f['id']); if (!_0x4be5f1 || !_0x4be5f1['id']) return _0x334765[_0x288d65(0x208)]('AI\x20试图创建事件，但找不到有效的用户ID。'), null; _0x528838[_0x288d65(0xb73)][_0x288d65(0xb49)]({ 'id': _0x288d65(0x223) + _0x103783[_0x288d65(0x7e3)](), 'date': _0x25aa6a[_0x288d65(0x97a)], 'type': _0x1a3f24[_0x288d65(0x21e)], 'content': _0x12b026[_0x288d65(0x3d8)], 'userId': _0x4be5f1['id'], 'createdBy': 'ai' }), _0x29ea53(), _0x25afdc(), _0x2b7b45(); const _0x1ea2f3 = _0x55fc2c(_0x3eb70c['id']); _0x1ea2f3 && _0x876512[_0x288d65(0x21e)] === _0x288d65(0x785) && _0x3e2a77(_0x288d65(0x7e6) + _0x1ea2f3['name'] + _0x288d65(0x1f0) + _0x2ee07c[_0x288d65(0x3d8)]); return { 'role': _0x288d65(0x728), 'senderId': _0x241a82['id'], 'timestamp': _0x1ec9e4[_0x288d65(0x7e3)](), 'isOffline': _0xa7d17c, 'content': null }; return { 'role': _0x288d65(0x728), 'senderId': _0x3ef7a1['id'], 'timestamp': _0x38ba34[_0x288d65(0x7e3)](), 'isOffline': _0x2e014b, 'content': null }; } } } else { const _0x28680d = 'diary-action-modal-' + _0x180af8; let _0x321f8c = _0x10e2db['getElementById'](_0x28680d); if (_0x321f8c) return; const _0x4006c4 = _0x288d65(0xbd0) + _0x28680d + '\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x9df57 === 'ai' ? '<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>' : '') + _0x288d65(0x7c2); _0x361639[_0x288d65(0x335)][_0x288d65(0x900)](_0x288d65(0x8e3), _0x4006c4); const _0x3cef52 = _0x5d979c[_0x288d65(0xad1)](_0x28680d), _0x162605 = () => _0x3cef52[_0x288d65(0x6e1)](); _0x3cef52[_0x288d65(0x94b)](_0x288d65(0x672))[_0x288d65(0x970)] = _0x162605, _0x3cef52[_0x288d65(0x94b)](_0x288d65(0x631))[_0x288d65(0x970)] = _0x162605, _0x3cef52[_0x288d65(0x94b)](_0x288d65(0x781))[_0x288d65(0x970)] = () => { _0x319267(_0x2f2010), _0x162605(); }, _0x5a8e2a === 'ai' && (_0x3cef52[_0x288d65(0x94b)]('#diary-action-reroll')['onclick'] = () => { _0x4a7e78(_0x4badc9), _0x162605(); }); } } _0x1ca075 && (console[_0x288d65(0x905)](_0x288d65(0x7a2)), localStorage[_0x288d65(0x3ae)]('appState', JSON[_0x288d65(0x39b)](_0x7962d6))); } catch (_0x2ed256) { console[_0x288d65(0x208)](_0x288d65(0xae5), _0x2ed256); } return console[_0x288d65(0x905)](_0x288d65(0x3f1)), console[_0x288d65(0x905)]('成功净化并迁移了\x20' + _0x1f8c29 + _0x288d65(0x6bb)), _0x1f8c29; } async function _0x428bab() { const _0x136b15 = _0x3c008f; console[_0x136b15(0x905)](_0x136b15(0x364)), console[_0x136b15(0x905)](_0x136b15(0x264)); let _0x261a53 = 0x0, _0x2f53dc = ![]; try { if (_0x136b15(0x5b7) !== _0x136b15(0x5b7)) { _0x79bff8(_0x136b15(0x9e6) + _0x56007f + _0x136b15(0x2d4)), _0x287d17(() => _0x1c635d[_0x136b15(0x1b0)](), 0x5dc); return; } else { const _0x37427d = localStorage[_0x136b15(0x813)](_0x136b15(0x233)); if (!_0x37427d) { if (_0x136b15(0xae7) !== _0x136b15(0x56e)) return console[_0x136b15(0x905)]('聊天档案柜是空的，无需净化。'), 0x0; else _0x547a24('说了是摆设啦，笨蛋。'); } for (let _0x4ef02d = 0x0; _0x4ef02d < localStorage['length']; _0x4ef02d++) { const _0x33ebc9 = localStorage[_0x136b15(0xa2d)](_0x4ef02d); if (_0x33ebc9 && _0x33ebc9[_0x136b15(0xbdd)](_0x136b15(0x199))) { let _0x2b28c8, _0x3d0133 = ![]; try { if ('dAkXG' === _0x136b15(0x197)) _0x406a51[_0x136b15(0x208)](_0x136b15(0xb65), _0x40ffb0); else { _0x2b28c8 = JSON['parse'](localStorage[_0x136b15(0x813)](_0x33ebc9)); if (!Array[_0x136b15(0x460)](_0x2b28c8)) continue; for (const _0x51723a of _0x2b28c8) { if (_0x51723a && (_0x51723a[_0x136b15(0x1a7)] === _0x136b15(0xab5) || _0x51723a[_0x136b15(0x1a7)] === _0x136b15(0x1f1)) && _0x51723a[_0x136b15(0x511)] && _0x51723a[_0x136b15(0x511)][_0x136b15(0xbdd)](_0x136b15(0x5c1))) { const _0x49ad3f = await _0x100b4b(_0x51723a['coverUrl']), _0x2a046e = _0x136b15(0x600) + Date[_0x136b15(0x7e3)]() + '_' + Math[_0x136b15(0x278)](); await _0x5941fe(_0x2a046e, _0x49ad3f), _0x51723a[_0x136b15(0x6b1)] = _0x2a046e, delete _0x51723a[_0x136b15(0x511)], _0x3d0133 = !![], _0x261a53++; } } _0x3d0133 && localStorage[_0x136b15(0x3ae)](_0x33ebc9, JSON[_0x136b15(0x39b)](_0x2b28c8)); } } catch (_0x2af2f8) { console['error'](_0x136b15(0x2ee) + _0x33ebc9 + _0x136b15(0x727), _0x2af2f8); continue; } } } } } catch (_0x24e5e6) { console['error']('净化音乐封面时出错，真是的。', _0x24e5e6); } return console['log'](_0x136b15(0x27e)), console[_0x136b15(0x905)]('成功净化并迁移了\x20' + _0x261a53 + _0x136b15(0xb2a)), _0x261a53; } async function _0x2cc73a() { const _0x1b83a = _0x3c008f; console[_0x1b83a(0x905)](_0x1b83a(0x406)), console[_0x1b83a(0x905)]('正在检查是否有需要救援的旧头像...'); let _0x4423b7 = 0x0; try { const _0x2281ec = localStorage[_0x1b83a(0x813)](_0x1b83a(0x233)); if (!_0x2281ec) return console[_0x1b83a(0x905)](_0x1b83a(0x574)), 0x0; const _0x2b162e = JSON[_0x1b83a(0x387)](_0x2281ec); if (!_0x2b162e[_0x1b83a(0xb76)] || !Array[_0x1b83a(0x460)](_0x2b162e[_0x1b83a(0xb76)])) return 0x0; for (const _0x574d6e of _0x2b162e['characters']) { if (_0x1b83a(0xbb8) === _0x1b83a(0x677)) _0x46ceaa[_0x1b83a(0x4b3)][_0x1b83a(0x1d7)](_0x9295e3, 0x1), _0x59bf8f(), _0x4be1cb(); else { if (_0x574d6e && _0x574d6e[_0x1b83a(0x37b)] && _0x574d6e['avatar'][_0x1b83a(0xbdd)]('data:image')) { const _0x330ede = await _0x262fce(_0x1b83a(0x717) + _0x574d6e['id']); if (!_0x330ede) { if (_0x1b83a(0x582) !== _0x1b83a(0x582)) { _0x33c010['warn'](_0x1b83a(0xb1b) + _0x60bd08['id'] + ')，启动兼容模式...', _0x5485f2[_0x1b83a(0x80d)]); try { _0x4b768a = _0x2b557f(_0x171bbb); if (!_0x4fe233) throw new _0x501982('YAML翻译机也无法理解这段梦话。'); _0xbe1c42[_0x1b83a(0x905)](_0x1b83a(0xadc) + _0x80d158['id'] + _0x1b83a(0x42f)); } catch (_0xe9ec82) { throw _0x1e7311; } } else { console['log'](_0x1b83a(0x5a9) + _0x574d6e[_0x1b83a(0xa6a)] + _0x1b83a(0xbb6)); const _0x49d2f9 = await _0x100b4b(_0x574d6e[_0x1b83a(0x37b)]); await _0x5941fe(_0x1b83a(0x717) + _0x574d6e['id'], _0x49d2f9), _0x4423b7++; } } } } } } catch (_0x3949ae) { 'cjtOO' === _0x1b83a(0x118) ? (_0x27e3d2 = { 'characterId': _0x4968e5['activeDiaryCharacterId'], 'entries': [] }, _0x19ddbd['diaries'][_0x1b83a(0xb49)](_0x38f7fb)) : console[_0x1b83a(0x208)](_0x1b83a(0x3d5), _0x3949ae); } return console[_0x1b83a(0x905)]('---\x20救援任务完成\x20---'), console[_0x1b83a(0x905)](_0x1b83a(0x5d4) + _0x4423b7 + _0x1b83a(0x6d0)), _0x4423b7; } function _0x58b391() { const _0x4af086 = _0x3c008f; if (!_0x2c45d7[_0x4af086(0x62c)]) return _0x2c45d7['userProfiles']['find'](_0x3cdd23 => _0x3cdd23['id'] === _0x2c45d7[_0x4af086(0x4d3)]) || _0x2c45d7[_0x4af086(0x775)][0x0]; const _0x163d63 = _0x2c45d7[_0x4af086(0x75e)]['find'](_0xf8e604 => _0xf8e604['type'] === _0x4af086(0x639) && _0xf8e604[_0x4af086(0x402)][_0x4af086(0x7a3)](_0x2c45d7[_0x4af086(0x62c)])), _0x20bbd0 = _0x163d63?.[_0x4af086(0x815)] || _0x2c45d7['activeUserProfileId']; return _0x2c45d7[_0x4af086(0x775)]['find'](_0x2d0a29 => _0x2d0a29['id'] === _0x20bbd0) || _0x2c45d7[_0x4af086(0x775)][0x0]; } function _0x1ad990(_0x1463d6) { const _0x5167a8 = _0x3c008f, _0x20ba0a = new Date(), _0x500855 = _0x20ba0a - _0x1463d6, _0x41369f = Math[_0x5167a8(0x691)](_0x500855 / 0x3e8), _0x2befe5 = Math[_0x5167a8(0x691)](_0x41369f / 0x3c), _0x1c6eee = Math[_0x5167a8(0x691)](_0x2befe5 / 0x3c), _0x314ce3 = Math[_0x5167a8(0x691)](_0x1c6eee / 0x18), _0x3410c6 = _0x1463d6[_0x5167a8(0x569)](_0x5167a8(0x15b), { 'hour': _0x5167a8(0x7eb), 'minute': _0x5167a8(0x7eb) }); if (_0x41369f < 0x3c) { if ('xewTX' === 'BmyiO') { _0x40f460 = { 'audio': null, 'cover': null, 'info': null, 'lyrics': null }; for (const _0x344506 in _0x5c20ce) { _0x1f130b[_0x344506]['classList'][_0x5167a8(0x6e1)](_0x5167a8(0x99c)), _0x10bd47[_0x344506][_0x5167a8(0x82f)] = ''; } _0x14c406[_0x5167a8(0x249)]['querySelector'](_0x5167a8(0x632))[_0x5167a8(0x948)] = _0x5167a8(0x17d), _0x5c73ca['cover']['querySelector'](_0x5167a8(0x632))[_0x5167a8(0x948)] = _0x5167a8(0x69e), _0x1457df[_0x5167a8(0x71a)]['querySelector']('.slot-filename')[_0x5167a8(0x948)] = _0x5167a8(0x360), _0x47fdb2['lyrics'][_0x5167a8(0x94b)](_0x5167a8(0x632))[_0x5167a8(0x948)] = '点击选择\x20.lrc', _0x2260c5(); } else return '刚才'; } if (_0x2befe5 < 0x3c) return _0x2befe5 + _0x5167a8(0x3b9); const _0x51554b = _0x20ba0a['toDateString']() === _0x1463d6['toDateString'](); if (_0x51554b) return _0x5167a8(0x910) + _0x3410c6; const _0x3887ac = new Date(); _0x3887ac['setDate'](_0x20ba0a['getDate']() - 0x1); const _0x1544e0 = _0x3887ac[_0x5167a8(0xa4a)]() === _0x1463d6[_0x5167a8(0xa4a)](); if (_0x1544e0) { if ('gwNwd' !== _0x5167a8(0xb96)) { _0x1c85fd[_0x5167a8(0x208)]('Failed\x20to\x20parse\x20history\x20for\x20chat\x20' + _0x3165d4[_0x5167a8(0x147)] + _0x5167a8(0x76b), _0x1d9f43); try { _0x1f33e5['removeItem'](_0x5167a8(0x199) + _0x570784[_0x5167a8(0x147)]); } catch (_0x34ec5c) { _0x443c4e[_0x5167a8(0x208)](_0x5167a8(0x443), _0x34ec5c); } } else return _0x5167a8(0x194) + _0x3410c6; } if (_0x314ce3 <= 0x7) { const _0x3daa08 = [_0x5167a8(0x6c5), _0x5167a8(0x987), _0x5167a8(0x49f), _0x5167a8(0x4a8), _0x5167a8(0x954), _0x5167a8(0x89a), '星期六']; return _0x3daa08[_0x1463d6['getDay']()] + '\x20' + _0x3410c6; } return _0x1463d6[_0x5167a8(0x35e)]() + '年' + (_0x1463d6['getMonth']() + 0x1) + '月' + _0x1463d6[_0x5167a8(0x41f)]() + '日'; } function _0x41c1e8(_0x590a3c, _0x1fd994 = 0x320, _0x1aa58f = 0.8, _0x2cc922 = ![]) { return new Promise((_0x344be3, _0x2fd85e) => { const _0x466118 = _0x2205; if (_0x466118(0x334) === _0x466118(0x525)) _0x2b0f20['style'][_0x466118(0xbe4)] = ''; else { if (!_0x590a3c || !_0x590a3c[_0x466118(0x1a7)][_0x466118(0xbdd)](_0x466118(0x16d))) return _0x2fd85e(new Error(_0x466118(0x51d))); const _0xe9d423 = new FileReader(); _0xe9d423['readAsDataURL'](_0x590a3c), _0xe9d423[_0x466118(0xb94)] = _0x380ad3 => { const _0x551277 = _0x466118, _0x1dd4e1 = new Image(); _0x1dd4e1[_0x551277(0x400)] = _0x380ad3['target'][_0x551277(0xb7b)], _0x1dd4e1[_0x551277(0xb94)] = () => { const _0x3b16e6 = _0x551277, _0x1b49c9 = document[_0x3b16e6(0xa51)](_0x3b16e6(0x3de)); let _0x212c12 = _0x1dd4e1[_0x3b16e6(0x8e4)], _0x25b5e6 = _0x1dd4e1[_0x3b16e6(0xb33)]; if (_0x212c12 > _0x25b5e6) _0x3b16e6(0x1b1) === _0x3b16e6(0x1b1) ? _0x212c12 > _0x1fd994 && ('IAtYS' === 'RVOBt' ? (_0x38b89a(), _0xcb6191(![])) : (_0x25b5e6 *= _0x1fd994 / _0x212c12, _0x212c12 = _0x1fd994)) : (_0x872c3d[_0x3b16e6(0x819)][_0x3b16e6(0xbe4)] = _0x3b16e6(0xbd4) + _0x117d99[_0x3b16e6(0x97d)](_0x13890c) + ')', _0xe5d6[_0x3b16e6(0x819)][_0x3b16e6(0x45f)] = _0x3b16e6(0x696), _0x280241[_0x3b16e6(0x819)][_0x3b16e6(0xba5)] = _0x3b16e6(0x4f3)); else { if (_0x3b16e6(0x4e1) === _0x3b16e6(0x817)) { const _0x5aaabf = _0x15d8f0[_0x3b16e6(0x9b6)][_0x3b16e6(0x5d6)](',')[0x1], _0x47c83a = _0x2ccc23[_0x3b16e6(0x9b6)]['substring'](_0x4ca7c3[_0x3b16e6(0x9b6)][_0x3b16e6(0x47b)](':') + 0x1, _0x5f36a5[_0x3b16e6(0x9b6)][_0x3b16e6(0x47b)](';')) || 'image/jpeg'; _0x2f9c95['push']({ 'inline_data': { 'mime_type': _0x47c83a, 'data': _0x5aaabf } }); } else _0x25b5e6 > _0x1fd994 && (_0x3b16e6(0xb04) === _0x3b16e6(0xb04) ? (_0x212c12 *= _0x1fd994 / _0x25b5e6, _0x25b5e6 = _0x1fd994) : (_0x301e78['classList'][_0x3b16e6(0x6e1)](_0x3b16e6(0x827)), _0x4a3007[_0x3b16e6(0x6b1)] ? _0x99d16c(_0x288cfb['coverId'])[_0x3b16e6(0xa0d)](_0x47b946 => { const _0x1a2b8b = _0x3b16e6; if (_0x47b946) _0x466fb5[_0x1a2b8b(0x400)] = _0xe04543[_0x1a2b8b(0x97d)](_0x47b946); }) : _0x2282da[_0x3b16e6(0x400)] = _0x3799d4[_0x3b16e6(0x511)] || _0x3dcad2, _0x2678de[_0x3b16e6(0x948)] = _0x20db59['songName'] || _0x3b16e6(0x370), _0x5d6c78[_0x3b16e6(0x948)] = _0x2ca6d4['artist'] || '未知艺术家', _0x41e321[_0x3b16e6(0x948)] = _0x1e434d ? '❚❚' : '▶')); } _0x1b49c9[_0x3b16e6(0x8e4)] = _0x212c12, _0x1b49c9[_0x3b16e6(0xb33)] = _0x25b5e6; const _0x1b8820 = _0x1b49c9[_0x3b16e6(0x972)]('2d'); _0x1b8820[_0x3b16e6(0x468)](_0x1dd4e1, 0x0, 0x0, _0x212c12, _0x25b5e6); const _0x3ba635 = _0x590a3c[_0x3b16e6(0x1a7)] === _0x3b16e6(0x14d) ? _0x3b16e6(0x14d) : _0x3b16e6(0x5a8); _0x2cc922 ? _0x1b49c9[_0x3b16e6(0xa48)](_0xbcc8f5 => { const _0x21722c = _0x3b16e6; if (_0xbcc8f5) { if ('AzZaY' === _0x21722c(0xbcf)) _0x344be3(_0xbcc8f5); else { const _0x3ff324 = _0x1aaff7[_0x21722c(0xad1)]('snoop-summary-textarea'); _0x3ff324['select'](), _0x55da05[_0x21722c(0x6f3)]('copy'), _0x512679(_0x21722c(0x7d2)); } } else _0x2fd85e(new Error('Canvas\x20to\x20Blob\x20conversion\x20failed.')); }, _0x3ba635, _0x1aa58f) : _0x344be3(_0x1b49c9['toDataURL'](_0x3ba635, _0x1aa58f)); }, _0x1dd4e1[_0x551277(0x168)] = _0x174348 => _0x2fd85e(_0x174348); }, _0xe9d423[_0x466118(0x168)] = _0x526dd1 => _0x2fd85e(_0x526dd1); } }); } function _0x2a1554(_0x5cd65e) { return new Promise((_0x2998ee, _0x4d7135) => { const _0x51d217 = _0x2205, _0x7ca09 = new FileReader(); _0x7ca09[_0x51d217(0x494)] = () => _0x2998ee(_0x7ca09[_0x51d217(0xb7b)]), _0x7ca09['onerror'] = _0x4d7135, _0x7ca09[_0x51d217(0x9f7)](_0x5cd65e); }); } function _0x2a1554(_0x3db13b) { return new Promise((_0x5f25c3, _0x306698) => { const _0x1410c2 = _0x2205, _0x4b0cf7 = new FileReader(); _0x4b0cf7['onloadend'] = () => _0x5f25c3(_0x4b0cf7[_0x1410c2(0xb7b)]), _0x4b0cf7[_0x1410c2(0x168)] = _0x306698, _0x4b0cf7[_0x1410c2(0x9f7)](_0x3db13b); }); } function _0x369b27(_0x4e96fd, _0x433e3b, _0x2dfe9e) { const _0x30c6ec = _0x3c008f, _0x2e8629 = _0x4048ea => { const _0x1288a7 = _0x2205; if (_0x4048ea[_0x1288a7(0x232)] === _0x1288a7(0xa02)) return _0x2c45d7[_0x1288a7(0x201)]?.[_0x1288a7(0xa6a)] || 'User'; if (_0x4e96fd[_0x1288a7(0x1a7)] === 'group') { const _0x464d43 = _0x4048ea[_0x1288a7(0x51a)] ? _0x135604(_0x4048ea[_0x1288a7(0x51a)]) : null; return _0x464d43?.[_0x1288a7(0xa6a)] || _0x1288a7(0x58b); } else { const _0x2740fb = _0x135604(_0x4e96fd[_0x1288a7(0x402)][0x0]); return _0x2740fb?.['name'] || 'AI'; } }, _0xc8525a = _0x433e3b['slice'](-_0x2dfe9e), _0x599998 = []; for (const _0x59f5e6 of _0xc8525a) { if ('qrxln' !== 'iiNVi') { const _0x94c66a = new Date(_0x59f5e6[_0x30c6ec(0x782)])[_0x30c6ec(0x569)](_0x30c6ec(0x15b), { 'hour': _0x30c6ec(0x7eb), 'minute': _0x30c6ec(0x7eb) }); _0x59f5e6[_0x30c6ec(0xa3a)] && _0x599998['push']('[' + _0x94c66a + ']\x20[' + _0x2e8629(_0x59f5e6) + ']\x20' + String(_0x59f5e6[_0x30c6ec(0xa3a)])[_0x30c6ec(0x471)]()); } else _0x488ef4[_0x30c6ec(0x819)][_0x30c6ec(0x974)] = _0x30c6ec(0xb39), _0x4d5501[_0x30c6ec(0x819)][_0x30c6ec(0x8a4)] = _0x30c6ec(0x33e), _0x35b58f[_0x30c6ec(0x819)][_0x30c6ec(0x26d)] = _0x30c6ec(0x544); } return _0x599998; } function _0x48d9ac(_0x231e43) { const _0x528d7b = _0x3c008f; if (_0x231e43[_0x528d7b(0x1a7)] === _0x528d7b(0x62a)) return _0x528d7b(0x2ea) + (_0x231e43['name'] || '未命名') + '」'; const _0x2c393c = _0x135604(_0x231e43[_0x528d7b(0x402)][0x0]); return '与\x20' + (_0x2c393c?.[_0x528d7b(0xa6a)] || '未知角色') + _0x528d7b(0x417); } function _0x23f5fa(_0x2d7733) { const _0x5b872e = _0x3c008f; try { if (_0x5b872e(0x595) !== _0x5b872e(0x595)) _0x227ebe[_0x5b872e(0x96b)] = { ..._0x4b80ae[_0x5b872e(0x38c)] }; else { const _0x45155e = localStorage[_0x5b872e(0x813)](_0x5b872e(0x199) + _0x2d7733), _0x32eaee = JSON[_0x5b872e(0x387)](_0x45155e || '[]'); return Array[_0x5b872e(0x460)](_0x32eaee) ? _0x32eaee : []; } } catch { return []; } } function _0x5b1c3b(_0x173d80) { const _0x5a8e33 = _0x3c008f, _0xfb7b1d = Math['max'](0x1, Number(_0x2c45d7[_0x5a8e33(0x8cd)]?.['perChatContextLines'] ?? 0x64)), _0x4dcda8 = _0x2c45d7['chats'][_0x5a8e33(0x662)](_0x1cface => _0x1cface[_0x5a8e33(0x402)][_0x5a8e33(0x7a3)](_0x173d80)), _0x12c38e = _0x4dcda8[_0x5a8e33(0x3c4)](_0x44a8d4 => { const _0x377818 = _0x5a8e33, _0xccd4f3 = _0x23f5fa(_0x44a8d4['id']), _0x30dc58 = _0xccd4f3[_0x377818(0x1ea)] > 0x0 ? _0xccd4f3[_0xccd4f3['length'] - 0x1] : null; return { 'chat': _0x44a8d4, 'history': _0xccd4f3, 'lastTimestamp': _0x30dc58 ? _0x30dc58[_0x377818(0x782)] : 0x0 }; })[_0x5a8e33(0x662)](_0x257ab4 => _0x257ab4[_0x5a8e33(0xb46)][_0x5a8e33(0x1ea)] > 0x0); _0x12c38e[_0x5a8e33(0x940)]((_0x18965f, _0x42f793) => _0x42f793['lastTimestamp'] - _0x18965f['lastTimestamp']); const _0xbef9c9 = [], _0x53c4c9 = {}; return _0x12c38e[_0x5a8e33(0x4ac)]((_0x2b70b2, _0x10c23c) => { const _0x3c58d9 = _0x5a8e33; if (_0x3c58d9(0x4ff) === _0x3c58d9(0x34f)) return new _0x40ffc3((_0x57e2ff, _0x54b053) => { const _0x33add2 = _0x3c58d9, _0x579951 = new _0x23b0ca(); _0x579951[_0x33add2(0x494)] = () => _0x57e2ff(_0x579951[_0x33add2(0xb7b)]), _0x579951[_0x33add2(0x168)] = _0x54b053, _0x579951['readAsDataURL'](_0x4eb843); }); else { const _0x15a6f6 = _0x369b27(_0x2b70b2[_0x3c58d9(0xa37)], _0x2b70b2[_0x3c58d9(0xb46)], _0xfb7b1d); if (_0x15a6f6['length'] === 0x0) return; const _0x839b67 = _0x10c23c === 0x0 ? '来源：[最活跃]' : _0x3c58d9(0xb28); _0xbef9c9['push'](_0x3c58d9(0x1c5) + _0x839b67 + _0x48d9ac(_0x2b70b2['chat']) + '\x0a' + _0x15a6f6[_0x3c58d9(0xae6)]('\x0a')), _0x53c4c9[_0x2b70b2['chat']['id']] = _0x15a6f6[_0x3c58d9(0x1ea)]; } }), { 'omniText': _0xbef9c9[_0x5a8e33(0xae6)]('\x0a\x0a'), 'usedCounts': _0x53c4c9 }; } function _0x3f9417(_0x51e91a) { const _0x431dd8 = _0x3c008f; let _0x22245d = null; const _0x52a3fa = _0x2c45d7['chats'][_0x431dd8(0x662)](_0x4fa5ee => _0x4fa5ee[_0x431dd8(0x402)][_0x431dd8(0x7a3)](_0x51e91a)); for (const _0x2df42f of _0x52a3fa) { const _0x419f05 = _0x23f5fa(_0x2df42f['id']); if (_0x419f05 && _0x419f05[_0x431dd8(0x1ea)] > 0x0) { const _0x253f86 = _0x419f05[_0x419f05[_0x431dd8(0x1ea)] - 0x1]; (!_0x22245d || _0x253f86[_0x431dd8(0x782)] > _0x22245d['timestamp']) && (_0x22245d = _0x253f86); } } return _0x22245d; } function _0x1f466c(_0x3d260d) { const _0x4158a5 = _0x3c008f; if (!_0x3d260d || !_0x3d260d[_0x4158a5(0x7a3)](',')) return _0x3d260d; const _0x5688ed = _0x3d260d['split'](',')[_0x4158a5(0x3c4)](_0x4144af => _0x4144af[_0x4158a5(0x471)]()); return _0x5688ed[Math[_0x4158a5(0x913)](Math[_0x4158a5(0x278)]() * _0x5688ed[_0x4158a5(0x1ea)])]; } function _0x17d597(_0x5cb22d) { return new Promise(_0x2574d4 => { const _0x3992d5 = _0x2205, _0x1b1dd5 = document[_0x3992d5(0xad1)](_0x3992d5(0x442)), _0x3781d9 = document['getElementById'](_0x3992d5(0x619)), _0x1f5547 = document[_0x3992d5(0xad1)](_0x3992d5(0x11b)), _0x3701d4 = document['getElementById'](_0x3992d5(0x6e2)), _0x155e7f = document['getElementById']('modal-mask'); _0x3781d9['textContent'] = _0x5cb22d, _0x1b1dd5[_0x3992d5(0x819)][_0x3992d5(0x974)] = _0x3992d5(0x9e5); const _0x5b1c01 = _0x12c7f8 => { const _0x51c527 = _0x3992d5; _0x1b1dd5[_0x51c527(0x819)][_0x51c527(0x974)] = _0x51c527(0xb39), _0x1f5547[_0x51c527(0x970)] = _0x3701d4[_0x51c527(0x970)] = _0x155e7f['onclick'] = null, document[_0x51c527(0x57f)](_0x51c527(0x550), _0x267414), _0x2574d4(_0x12c7f8); }, _0x267414 = _0x49c3f5 => { const _0xe64202 = _0x3992d5; if (_0x49c3f5[_0xe64202(0xa2d)] === _0xe64202(0x303)) _0x5b1c01(![]); if (_0x49c3f5[_0xe64202(0xa2d)] === _0xe64202(0xaf0)) _0x5b1c01(!![]); }; _0x1f5547[_0x3992d5(0x970)] = () => _0x5b1c01(!![]), _0x3701d4[_0x3992d5(0x970)] = () => _0x5b1c01(![]), _0x155e7f[_0x3992d5(0x970)] = () => _0x5b1c01(![]), document[_0x3992d5(0xb66)](_0x3992d5(0x550), _0x267414); }); } function _0x18f071(_0x3a625e) { const _0x1b422f = _0x3c008f, _0x41acd8 = document[_0x1b422f(0xad1)](_0x1b422f(0xa39)); _0x41acd8[_0x1b422f(0x948)] = _0x3a625e, _0x41acd8[_0x1b422f(0x819)][_0x1b422f(0x974)] = 'block'; if (_0x18f071['_t']) clearTimeout(_0x18f071['_t']); _0x18f071['_t'] = setTimeout(() => { const _0x33dc21 = _0x1b422f; _0x41acd8[_0x33dc21(0x819)][_0x33dc21(0x974)] = 'none'; }, 0x640); } function _0x137307() { const _0x40bd6d = _0x3c008f, _0x1596f1 = document[_0x40bd6d(0xad1)](_0x40bd6d(0x80b)); if (!_0x1596f1) return; let _0x3407a2 = 0x0, _0x2c928a = 0x0; const _0x4f08e6 = 0x50; let _0x4aa2d2 = ![]; const _0x23e900 = _0x30bd88 => { const _0x639e4f = _0x40bd6d; _0x3407a2 = _0x30bd88['touches'] ? _0x30bd88[_0x639e4f(0xb74)][0x0]['clientY'] : _0x30bd88[_0x639e4f(0x267)], _0x2c928a = 0x0, _0x1596f1[_0x639e4f(0x819)][_0x639e4f(0x859)] = 'none', _0x4aa2d2 = !![], _0x30bd88[_0x639e4f(0x1a7)] === _0x639e4f(0xae3) && (_0x639e4f(0xac4) !== _0x639e4f(0x811) ? (document['addEventListener']('mousemove', _0xd5d975), document['addEventListener'](_0x639e4f(0xae8), _0x2fb490)) : _0x135d1a[_0x639e4f(0x208)]('Error\x20fetching\x20from\x20' + _0x3d6181 + ':', _0x47c6d3)); }, _0xd5d975 = _0x5e3551 => { const _0x3b82aa = _0x40bd6d; if (!_0x4aa2d2) return; const _0x3a731a = _0x5e3551[_0x3b82aa(0xb74)] ? _0x5e3551[_0x3b82aa(0xb74)][0x0][_0x3b82aa(0x267)] : _0x5e3551['clientY']; _0x2c928a = _0x3a731a - _0x3407a2; if (_0x2c928a < 0x0) { const _0x434db6 = Math[_0x3b82aa(0x5ab)](_0x2c928a), _0x731642 = 0.4, _0x54e6bb = Math[_0x3b82aa(0x5b0)](_0x434db6, _0x731642) * 0x14; _0x1596f1[_0x3b82aa(0x819)][_0x3b82aa(0xa8f)] = _0x3b82aa(0x9bf) + _0x54e6bb + _0x3b82aa(0x268); } }, _0x2fb490 = () => { const _0x1f093e = _0x40bd6d; if (!_0x4aa2d2) return; _0x4aa2d2 = ![], _0x1596f1['style'][_0x1f093e(0x859)] = _0x1f093e(0xb59), _0x2c928a < -_0x4f08e6 ? _0x1596f1[_0x1f093e(0x9c4)][_0x1f093e(0x2ac)](_0x1f093e(0x7ea)) : _0x1596f1[_0x1f093e(0x819)]['transform'] = _0x1f093e(0x699), document['removeEventListener'](_0x1f093e(0x2fc), _0xd5d975), document[_0x1f093e(0x57f)](_0x1f093e(0xae8), _0x2fb490); }; _0x1596f1[_0x40bd6d(0xb66)](_0x40bd6d(0x5c6), _0x23e900, { 'passive': !![] }), _0x1596f1[_0x40bd6d(0xb66)](_0x40bd6d(0x5b4), _0xd5d975, { 'passive': !![] }), _0x1596f1[_0x40bd6d(0xb66)](_0x40bd6d(0x855), _0x2fb490), _0x1596f1['addEventListener'](_0x40bd6d(0xae3), _0x23e900); } function _0x893235() { const _0x59f269 = _0x3c008f, _0x1715b6 = document[_0x59f269(0xad1)](_0x59f269(0x9fd)), _0xf1bdc8 = document[_0x59f269(0xad1)](_0x59f269(0x570)), _0x2e9e3f = document['querySelectorAll'](_0x59f269(0x19c)), _0x3389fd = document['getElementById'](_0x59f269(0x99d)); let _0x279aec = 0x0; const _0x4680e4 = 0x2; _0xf1bdc8[_0x59f269(0x819)][_0x59f269(0x8e4)] = '200%', _0x3389fd['style'][_0x59f269(0x974)] = _0x59f269(0x9e5); function _0xc9ce31(_0xe0e992) { const _0x329105 = _0x59f269; if (_0xe0e992 < 0x0 || _0xe0e992 >= _0x4680e4) return; _0xf1bdc8[_0x329105(0x819)][_0x329105(0xa8f)] = _0x329105(0x9e3) + _0xe0e992 * (0x64 / _0x4680e4) + '%)', _0x2e9e3f['forEach'](_0x1c0cf3 => _0x1c0cf3[_0x329105(0x9c4)][_0x329105(0x6e1)](_0x329105(0x630))), _0x2e9e3f[_0xe0e992][_0x329105(0x9c4)]['add'](_0x329105(0x630)), _0x279aec = _0xe0e992; } _0xc9ce31(0x0), _0x2e9e3f[_0x59f269(0x4ac)](_0x14b5e9 => { const _0x164d93 = _0x59f269; _0x164d93(0x58d) !== _0x164d93(0x58d) ? _0x1acc25[_0x164d93(0x4b3)]['push'](..._0x5f5552['originalExpenses']) : _0x14b5e9[_0x164d93(0xb66)](_0x164d93(0x43a), () => { const _0x398ca7 = _0x164d93; if (_0x398ca7(0x774) !== _0x398ca7(0x368)) { const _0x58a347 = parseInt(_0x14b5e9[_0x398ca7(0x2d1)][_0x398ca7(0xadf)], 0xa); _0xc9ce31(_0x58a347); } else _0x15bbc1(_0x897e25[_0x398ca7(0x402)][0x0]); }); }); let _0x7029ae = 0x0, _0x2fde84 = 0x0, _0x2da47e = 0x0, _0x8bef50 = ![], _0x3a30af = ''; _0x1715b6[_0x59f269(0xb66)]('touchstart', _0x390208 => { const _0x1e1b51 = _0x59f269; _0x7029ae = _0x390208[_0x1e1b51(0xb74)][0x0][_0x1e1b51(0xa5c)], _0x2fde84 = _0x390208[_0x1e1b51(0xb74)][0x0][_0x1e1b51(0x267)], _0x8bef50 = !![], _0x3a30af = ''; }, { 'passive': !![] }), _0x1715b6['addEventListener']('touchmove', _0x290cf5 => { const _0x410e23 = _0x59f269; if ('Jylgg' !== _0x410e23(0x797)) { if (!_0x8bef50) return; if (_0x3a30af === '') { const _0x515f6c = _0x290cf5['touches'][0x0][_0x410e23(0xa5c)] - _0x7029ae, _0x2608da = _0x290cf5[_0x410e23(0xb74)][0x0]['clientY'] - _0x2fde84; if (Math['abs'](_0x515f6c) > Math['abs'](_0x2608da)) { if ('isrHi' !== _0x410e23(0x174)) { const _0x3e5371 = _0x31d159 ?? _0x26c14f['value'][_0x410e23(0x471)](); if (_0x3e5371 === '' || !_0x5a1864[_0x410e23(0x147)]) return; const _0x2f4f95 = _0x37c458[_0x410e23(0x94b)](_0x410e23(0xba6)), _0x5c1188 = _0x2f4f95['id'] === _0x410e23(0x4b2), _0xf699f4 = { 'role': _0x410e23(0xa02), 'content': _0x3e5371, 'timestamp': _0x363522[_0x410e23(0x7e3)](), 'isOffline': _0x5c1188 }; _0x16c27e[_0x410e23(0x38c)] && (_0xf699f4['quotedMessage'] = { ..._0x13d803['activeQuote'] }); _0x7f762c[_0x410e23(0x1ef)][_0x410e23(0xb49)](_0xf699f4); const _0x4ca901 = _0x501336(_0xf699f4, _0xd877ed[_0x410e23(0x1ef)][_0x410e23(0x1ea)] - 0x1); _0x4ca901 && (_0x5a6b61['scrollTop'] = _0x127161[_0x410e23(0x291)]), _0x34b538(), _0x3fa493[_0x410e23(0x82f)] = '', _0x17fda8(); } else _0x3a30af = _0x410e23(0x953); } else _0x410e23(0x657) === _0x410e23(0x657) ? _0x3a30af = 'vertical' : _0x3156ee += _0x502cd3[_0x410e23(0x387)](_0x36ad95)[_0x410e23(0x1ec)][0x0][_0x410e23(0xa3a)]['parts'][0x0]['text']; } _0x3a30af === _0x410e23(0x953) && _0x290cf5[_0x410e23(0x90a)](); } else { const _0x2cb9fd = _0x4f64d9[_0x410e23(0xad1)](_0x410e23(0x13e)), _0x38382f = _0x6d990f['getElementById'](_0x410e23(0x1c7)), _0x1ab3aa = new _0x1049b7(), _0x405b95 = _0xb1112e['accountingData'][_0x410e23(0x662)](_0x14773f => new _0x5375b4(_0x14773f['timestamp'])[_0x410e23(0xa4a)]() === _0x1ab3aa[_0x410e23(0xa4a)]()); if (_0x405b95[_0x410e23(0x1ea)] === 0x0) { _0x2cb9fd[_0x410e23(0x16c)] = _0x410e23(0x304), _0x38382f[_0x410e23(0x16c)] = ''; return; } _0x2cb9fd[_0x410e23(0x16c)] = '', _0x405b95['sort']((_0x5486ec, _0xc65abf) => _0xc65abf[_0x410e23(0x782)] - _0x5486ec[_0x410e23(0x782)])['forEach'](_0x18004e => { const _0x540071 = _0x410e23, _0x4af038 = _0x48107e[_0x540071(0xa51)](_0x540071(0x54f)); _0x4af038[_0x540071(0xa5e)] = _0x540071(0x24e), _0x4af038[_0x540071(0x16c)] = _0x540071(0xba3) + _0x18004e[_0x540071(0x2a2)] + _0x540071(0xa40) + _0x18004e[_0x540071(0x15c)]['toFixed'](0x2) + '</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22' + _0x18004e['id'] + _0x540071(0x5ee), _0x2cb9fd[_0x540071(0x8ce)](_0x4af038); }), _0x38382f && (_0x38382f[_0x410e23(0x16c)] = _0x410e23(0x6db), _0xb915b3[_0x410e23(0xad1)]('organize-bill-button')[_0x410e23(0xb66)]('click', _0x1a25b8)); } }, { 'passive': ![] }), _0x1715b6[_0x59f269(0xb66)](_0x59f269(0x855), _0x47463b => { const _0x1b843f = _0x59f269; if (!_0x8bef50) return; _0x2da47e = _0x47463b[_0x1b843f(0x428)][0x0][_0x1b843f(0xa5c)], _0x3a30af === 'horizontal' && _0x370445(), _0x8bef50 = ![]; }); function _0x370445() { const _0xd0c08c = _0x59f269, _0x2f3bbe = 0x32; if (_0x2da47e < _0x7029ae - _0x2f3bbe) { if ('AAGRH' !== _0xd0c08c(0x924)) _0xc9ce31(_0x279aec + 0x1); else throw new _0xe85d14(_0xd0c08c(0x2f6)); } else { if (_0x2da47e > _0x7029ae + _0x2f3bbe) { if (_0xd0c08c(0xbc6) !== 'iwyKO') _0xc9ce31(_0x279aec - 0x1); else { if (_0x49ca0a[_0xd0c08c(0xa2d)] === _0xd0c08c(0x303)) _0x24ecb4(![]); if (_0xfb5cd5[_0xd0c08c(0xa2d)] === 'Enter') _0x27d379(!![]); } } } } } function _0x5a23de() { return new Promise(_0x5152db => { const _0x2ff247 = _0x2205, _0x104b47 = document[_0x2ff247(0xad1)](_0x2ff247(0x292)), _0x12d4d0 = document[_0x2ff247(0xad1)](_0x2ff247(0x17e)), _0x45b514 = document[_0x2ff247(0xad1)](_0x2ff247(0x119)), _0x43ebdb = document[_0x2ff247(0xad1)](_0x2ff247(0xbe9)), _0x2b31f1 = document[_0x2ff247(0xad1)](_0x2ff247(0x4e0)), _0x48ee09 = document['getElementById']('music-input-backdrop'); _0x12d4d0['value'] = '', _0x45b514[_0x2ff247(0x82f)] = '', _0x104b47['classList'][_0x2ff247(0x2ac)](_0x2ff247(0x944)), _0x12d4d0[_0x2ff247(0x64f)](); const _0x5d4f20 = _0x322022 => { const _0x2bc846 = _0x2ff247; _0x2bc846(0xa52) !== _0x2bc846(0xa52) ? (_0x4facb1 = _0x51a7ab[_0x2bc846(0xa6a)], _0x50b924 = _0x25e1e5[_0x2bc846(0x37b)]) : (_0x104b47[_0x2bc846(0x9c4)]['remove'](_0x2bc846(0x944)), _0x43ebdb['onclick'] = null, _0x2b31f1['onclick'] = null, _0x48ee09['onclick'] = null, document[_0x2bc846(0x57f)](_0x2bc846(0x550), _0x44de8c), _0x5152db(_0x322022)); }, _0x5b1e45 = () => { const _0x119ca0 = _0x2ff247, _0x20c514 = _0x12d4d0['value'][_0x119ca0(0x471)](), _0x2e5cfb = _0x45b514[_0x119ca0(0x82f)][_0x119ca0(0x471)](); if (!_0x20c514 || !_0x2e5cfb) { _0x18f071('歌名和歌手都不能为空！'); return; } _0x5d4f20({ 'songName': _0x20c514, 'artist': _0x2e5cfb }); }, _0x44de8c = _0x1dc114 => { const _0xdb1b7b = _0x2ff247; if (_0x1dc114[_0xdb1b7b(0xa2d)] === _0xdb1b7b(0x303)) _0x5d4f20(null); _0x1dc114['key'] === 'Enter' && (_0x1dc114['preventDefault'](), _0x5b1e45()); }; _0x43ebdb[_0x2ff247(0x970)] = _0x5b1e45, _0x2b31f1[_0x2ff247(0x970)] = () => _0x5d4f20(null), _0x48ee09[_0x2ff247(0x970)] = () => _0x5d4f20(null), document[_0x2ff247(0xb66)](_0x2ff247(0x550), _0x44de8c); }); } function _0x345205(_0x2b4e3e) { const _0x13e275 = _0x3c008f; if (!_0x2b4e3e) return []; const _0x179a5a = _0x2b4e3e[_0x13e275(0x471)](); if (_0x179a5a[_0x13e275(0xbdd)](_0x13e275(0x4be)) && _0x179a5a[_0x13e275(0x44b)](_0x13e275(0x45e))) { if ('hWqaZ' !== 'MxjVV') return [_0x179a5a]; else _0x2a3b70[_0x13e275(0x5d8)] = _0x1dd0d2; } const _0x3f0f26 = /(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\]|\[html\][\s\S]*?\[\/html\])/g, _0xf9fbe3 = _0x13e275(0xbe7), _0x40234f = [], _0x126798 = _0x2b4e3e['replace'](_0x3f0f26, _0x5a5cbf => { const _0x1679e6 = _0x13e275; return _0x40234f[_0x1679e6(0xb49)](_0x5a5cbf), _0xf9fbe3; }), _0x28b53e = _0x126798[_0x13e275(0x5d6)](_0xf9fbe3), _0x4d8c8e = []; let _0x8c0a79 = 0x0; return _0x28b53e[_0x13e275(0x4ac)]((_0x583c70, _0x23dbff) => { const _0x5c7595 = _0x13e275, _0x4d7832 = _0x583c70[_0x5c7595(0x471)](); _0x4d7832 && _0x4d8c8e[_0x5c7595(0xb49)](..._0x5f151f(_0x4d7832)), _0x8c0a79 < _0x40234f[_0x5c7595(0x1ea)] && ('LUORm' !== _0x5c7595(0xa28) ? (_0x4d8c8e[_0x5c7595(0xb49)](_0x40234f[_0x8c0a79][_0x5c7595(0x471)]()), _0x8c0a79++) : _0xe6649f(_0x5c7595(0x386))); }), _0x4d8c8e; } function _0x5bd138(_0x28c2c3, _0x1997e0, _0xe00a69 = '') { const _0x3de5fb = _0x3c008f, _0x51388e = document[_0x3de5fb(0xa51)]('div'); _0x51388e[_0x3de5fb(0xa5e)] = _0x3de5fb(0x2d9) + _0xe00a69; const _0x370e9f = document[_0x3de5fb(0xa51)](_0x3de5fb(0x9f5)); _0x370e9f[_0x3de5fb(0x400)] = _0x28c2c3, _0x370e9f[_0x3de5fb(0xa5e)] = _0x3de5fb(0x37b); const _0x149257 = document[_0x3de5fb(0xa51)](_0x3de5fb(0x54f)); return _0x149257[_0x3de5fb(0xa5e)] = _0x3de5fb(0x9cb), _0x1997e0 && (_0x149257[_0x3de5fb(0x819)]['backgroundImage'] = _0x3de5fb(0xbce) + _0x1997e0 + '\x27)'), _0x51388e[_0x3de5fb(0x8ce)](_0x370e9f), _0x51388e[_0x3de5fb(0x8ce)](_0x149257), _0x51388e; } function _0x54d628(_0x628833) { const _0x3b0507 = _0x3c008f; if (!_0x628833) return []; let _0x40a67d = String(_0x628833)[_0x3b0507(0x471)](); const _0x3d2eba = _0x40a67d['match'](/```(?:json)?([\s\S]*?)```/i); if (_0x3d2eba) _0x40a67d = _0x3d2eba[0x1][_0x3b0507(0x471)](); try { if (_0x3b0507(0x2a1) !== _0x3b0507(0x821)) { const _0x37b150 = JSON[_0x3b0507(0x387)](_0x40a67d); if (_0x37b150 && Array[_0x3b0507(0x460)](_0x37b150[_0x3b0507(0x353)])) return _0x37b150[_0x3b0507(0x353)][_0x3b0507(0x3c4)](_0x51ee2e => typeof _0x51ee2e === _0x3b0507(0x319) ? _0x51ee2e : _0x51ee2e?.[_0x3b0507(0xa3a)])['filter'](Boolean)[_0x3b0507(0xbe6)](_0x5f151f); const _0x5e28fd = [_0x3b0507(0x4cc), _0x3b0507(0x693), _0x3b0507(0x80d), _0x3b0507(0x4f1), _0x3b0507(0xa3a), 'line', _0x3b0507(0xb71)]; if (_0x37b150 && typeof _0x37b150 === _0x3b0507(0x31e)) { const _0xe263ea = []; for (const _0x3c35c2 of Object[_0x3b0507(0x58f)](_0x37b150)) { if (_0x3b0507(0xa24) === _0x3b0507(0xa24)) { const _0xf74490 = _0x3c35c2['toLowerCase'](); if (_0x5e28fd['some'](_0x18f53c => _0xf74490[_0x3b0507(0xbdd)](_0x18f53c))) { if (_0x3b0507(0x9e4) === 'EZAmW') { const _0x102687 = _0x37b150[_0x3c35c2]; if (typeof _0x102687 === _0x3b0507(0x319)) _0xe263ea[_0x3b0507(0xb49)](_0x102687); if (Array['isArray'](_0x102687)) _0x102687[_0x3b0507(0x4ac)](_0x593595 => { const _0x46dfc9 = _0x3b0507; if (_0x46dfc9(0x40e) !== 'JAFbH') { if (typeof _0x593595 === _0x46dfc9(0x319)) _0xe263ea[_0x46dfc9(0xb49)](_0x593595); } else { const _0x4d0727 = _0x465cfb[_0x46dfc9(0xad1)](_0x46dfc9(0x732)), _0xc60ea1 = _0x31f652['getElementById'](_0x46dfc9(0x746)); _0x4d0727['innerHTML'] = _0x46dfc9(0x536), _0xc60ea1[_0x46dfc9(0x16c)] = ''; const _0x21f6a3 = _0x4d0727[_0x46dfc9(0x94b)](_0x46dfc9(0x7a0)), _0x25979d = [{ 'id': 'whispers', 'name': '聊天', 'svg': _0x46dfc9(0xae0), 'area': 'dock' }, { 'id': _0x46dfc9(0x2c1), 'name': '浏览器', 'svg': '<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>', 'area': _0x46dfc9(0x9c3) }, { 'id': _0x46dfc9(0xa6d), 'name': '相册', 'svg': _0x46dfc9(0x94f), 'area': _0x46dfc9(0x9c3) }, { 'id': _0x46dfc9(0x555), 'name': '总结', 'svg': _0x46dfc9(0x7be), 'area': _0x46dfc9(0x9c3) }, { 'id': _0x46dfc9(0x7d1), 'name': '备忘录', 'svg': _0x46dfc9(0x942), 'area': 'main' }, { 'id': _0x46dfc9(0x737), 'name': '外卖', 'svg': _0x46dfc9(0xa17), 'area': _0x46dfc9(0x4aa) }, { 'id': _0x46dfc9(0xac5), 'name': '购物', 'svg': _0x46dfc9(0x20e), 'area': _0x46dfc9(0x4aa) }, { 'id': 'footprints', 'name': '足迹', 'svg': _0x46dfc9(0x4f5), 'area': _0x46dfc9(0x4aa) }]; _0x25979d['forEach'](_0x51c2f2 => { const _0x33525 = _0x46dfc9, _0x244c9e = _0x24e27b[_0x33525(0xa51)](_0x33525(0x54f)); _0x244c9e['className'] = _0x33525(0x2af), _0x244c9e[_0x33525(0x16c)] = _0x33525(0x4c9) + _0x51c2f2[_0x33525(0x473)] + '</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>' + _0x51c2f2[_0x33525(0xa6a)] + _0x33525(0x5b3), _0x244c9e['addEventListener'](_0x33525(0x43a), () => _0x421e86(_0x51c2f2['id'], _0x51c2f2[_0x33525(0xa6a)])), _0x51c2f2[_0x33525(0x748)] === _0x33525(0x9c3) ? _0xc60ea1['appendChild'](_0x244c9e) : _0x21f6a3['appendChild'](_0x244c9e); }); } }); } else _0x59e5d2 = _0x543b3b[_0x3b0507(0x402)][0x0]; } } else _0x499210['classList'][_0x3b0507(0x6e1)](_0x3b0507(0x283)); } if (_0xe263ea[_0x3b0507(0x1ea)]) return _0xe263ea[_0x3b0507(0xbe6)](_0x5f151f)['slice'](0x0, 0x9); } } else _0x55d08e[_0x3b0507(0x7de)] = _0x25b988[_0x3b0507(0x7de)] || [], _0x537507[_0x3b0507(0x9b1)] = (_0x47ea0c[_0x3b0507(0x9b1)] || [])['map']((_0x1f9a5d, _0x3de7a0) => ({ ..._0x1f9a5d, 'commentId': 'c_' + _0x947d66[_0x3b0507(0x782)] + '_' + _0x3de7a0 })), _0x3f069e(), _0x166f38(); } catch { } if (/[{\[]/[_0x3b0507(0x8fb)](_0x40a67d) && /":/['test'](_0x40a67d)) { if (_0x3b0507(0x4fa) !== _0x3b0507(0x4fa)) { if (_0x52932c === null) return; const _0x7c458c = _0x831309[_0x3b0507(0x1ef)][_0x344f2f]; if (!_0x7c458c) return; const _0x197ef9 = _0x2e6ea6(); let _0x546da7 = '未知'; if (_0x7c458c['role'] === _0x3b0507(0xa02)) { const _0x44e85a = _0x254190(_0x39b6fa['activeChatId']); _0x546da7 = _0x44e85a['name'] || '我'; } else { const _0x3a951d = _0x7c458c[_0x3b0507(0x51a)] || _0x197ef9?.[_0x3b0507(0x402)][0x0], _0xa71f6c = _0x366c2c(_0x3a951d); _0x546da7 = _0xa71f6c ? _0xa71f6c[_0x3b0507(0xa6a)] : '角色'; } let _0x185d3e = _0x7c458c[_0x3b0507(0xa3a)] || ''; if (_0x7c458c['displayUrl']) _0x185d3e = '[表情]'; if (_0x7c458c['image']) _0x185d3e = _0x3b0507(0xb36); if (_0x185d3e[_0x3b0507(0x1ea)] > 0x32) _0x185d3e = _0x185d3e[_0x3b0507(0x5cd)](0x0, 0x32) + _0x3b0507(0x841); _0x3815c0[_0x3b0507(0x38c)] = { 'sender': _0x546da7, 'content': _0x185d3e }, _0x76abfb(), _0x11b162(), _0x3b2ed9[_0x3b0507(0x64f)](); } else { const _0x4328bc = [], _0x4cdba6 = /"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi; let _0x47aff9; while ((_0x47aff9 = _0x4cdba6[_0x3b0507(0x5df)](_0x40a67d)) !== null) { if ('XYBYK' === _0x3b0507(0x1f4)) _0x2429c8(), _0x3ce21c(_0x3b0507(0x330), _0x3b0507(0x315)); else { const _0x47fb30 = _0x47aff9[0x1][_0x3b0507(0x4db)](/\\"/g, '\x22')[_0x3b0507(0x4db)](/\\n/g, '\x0a')[_0x3b0507(0x471)](); if (_0x47fb30) _0x4328bc[_0x3b0507(0xb49)](_0x47fb30); } } if (_0x4328bc[_0x3b0507(0x1ea)]) return _0x4328bc['flatMap'](_0x5f151f)[_0x3b0507(0xa30)](0x0, 0x9); } } return _0x5f151f(_0x40a67d); } function _0x5f151f(_0x45b9e3) { const _0x21f2e6 = _0x3c008f, _0xb272d4 = String(_0x45b9e3)[_0x21f2e6(0x471)](); if (_0xb272d4[_0x21f2e6(0xbdd)]('<div') && _0xb272d4[_0x21f2e6(0x44b)](_0x21f2e6(0x45e))) { if (_0x21f2e6(0x351) !== _0x21f2e6(0x351)) _0x298ca6[_0x21f2e6(0x400)] = _0x4e03cc['createObjectURL'](_0xc4fe3d); else return [_0xb272d4]; } const _0x560ccf = _0xb272d4[_0x21f2e6(0x5d6)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x21f2e6(0x3c4)](_0x8dbac7 => _0x8dbac7[_0x21f2e6(0x471)]())[_0x21f2e6(0x662)](Boolean); if (_0x560ccf['length'] > 0x0) return _0x560ccf[_0x21f2e6(0xa30)](0x0, 0xc); return [_0xb272d4][_0x21f2e6(0x662)](Boolean); } const _0x2e216a = new Promise((_0x168f6a, _0xb99558) => { const _0x4fae2a = _0x3c008f, _0x18867d = indexedDB[_0x4fae2a(0x9fb)](_0x5706a1, 0x3); _0x18867d[_0x4fae2a(0x168)] = () => _0xb99558(_0x4fae2a(0x887)), _0x18867d[_0x4fae2a(0x62f)] = () => _0x168f6a(_0x18867d[_0x4fae2a(0xb7b)]), _0x18867d[_0x4fae2a(0xa0e)] = _0x4c254f => { const _0xcba6df = _0x4fae2a, _0x323461 = _0x4c254f[_0xcba6df(0xb6a)][_0xcba6df(0xb7b)]; console[_0xcba6df(0x905)](_0xcba6df(0x573) + _0x323461[_0xcba6df(0x983)] + _0xcba6df(0x841)), !_0x323461[_0xcba6df(0x8d6)][_0xcba6df(0x75d)](_0x2f7fc0) && (console[_0xcba6df(0x905)](_0xcba6df(0x7c6) + _0x2f7fc0), _0x323461[_0xcba6df(0xa71)](_0x2f7fc0, { 'keyPath': 'id' })), !_0x323461[_0xcba6df(0x8d6)][_0xcba6df(0x75d)](_0xcba6df(0x57e)) && (_0xcba6df(0x445) !== _0xcba6df(0x445) ? _0x3114d3['error']('加载已保存字体失败:', _0x8eec56) : (console[_0xcba6df(0x905)]('Creating\x20object\x20store:\x20music_library'), _0x323461[_0xcba6df(0xa71)](_0xcba6df(0x57e), { 'keyPath': 'id' }))), !_0x323461[_0xcba6df(0x8d6)][_0xcba6df(0x75d)](_0x56d254) && (console[_0xcba6df(0x905)](_0xcba6df(0x7c6) + _0x56d254), _0x323461[_0xcba6df(0xa71)](_0x56d254, { 'keyPath': 'id' })); }; }); async function _0x262fce(_0x3fb2ec) { const _0x502f8a = await _0x2e216a; return new Promise((_0xae7d32, _0x11d8af) => { const _0x518ffc = _0x2205; if (_0x518ffc(0xb5e) !== 'JJDtT') { const _0x1ce1fb = _0x502f8a[_0x518ffc(0x93e)](_0x2f7fc0, _0x518ffc(0x2cb)), _0x49e623 = _0x1ce1fb[_0x518ffc(0x92c)](_0x2f7fc0), _0x4c6a05 = _0x49e623[_0x518ffc(0x8c2)](_0x3fb2ec); _0x4c6a05['onsuccess'] = () => _0xae7d32(_0x4c6a05[_0x518ffc(0xb7b)] ? _0x4c6a05['result'][_0x518ffc(0xbc0)] : null), _0x4c6a05[_0x518ffc(0x168)] = () => _0x11d8af(_0x4c6a05[_0x518ffc(0x208)]); } else _0x2194e8[_0x518ffc(0xb66)](_0x518ffc(0xae3), _0x2777fd), _0x3c05fd[_0x518ffc(0xb66)](_0x518ffc(0x5c6), _0x2d2137, { 'passive': ![] }), _0x2e8ab4[_0x518ffc(0xb66)]('contextmenu', _0x593cf9 => _0x593cf9[_0x518ffc(0x90a)]()); }); } async function _0x1354d1(_0x17d8ca) { const _0x4dbdfd = await _0x2e216a; return new Promise((_0xb32a5d, _0x3dde5e) => { const _0x20acca = _0x2205, _0x33dcfc = _0x4dbdfd[_0x20acca(0x93e)](_0x56d254, 'readonly'), _0x566c0b = _0x33dcfc[_0x20acca(0x92c)](_0x56d254), _0x1822e3 = _0x566c0b[_0x20acca(0x8c2)](_0x17d8ca); _0x1822e3[_0x20acca(0x62f)] = () => _0xb32a5d(_0x1822e3['result'] ? _0x1822e3[_0x20acca(0xb7b)][_0x20acca(0x228)] : null), _0x1822e3[_0x20acca(0x168)] = () => _0x3dde5e(_0x1822e3['error']); }); } async function _0x599336(_0x18eaaf, _0x2ee105) { const _0x3cebcb = await _0x2e216a; return new Promise((_0x460fa5, _0x264983) => { const _0x944098 = _0x2205; if ('vuTTh' !== _0x944098(0x86d)) { const _0x41f7f1 = _0x3cebcb['transaction'](_0x56d254, 'readwrite'), _0x4f6e45 = _0x41f7f1['objectStore'](_0x56d254), _0x4099ae = _0x4f6e45[_0x944098(0x982)]({ 'id': _0x18eaaf, 'data': _0x2ee105 }); _0x4099ae[_0x944098(0x62f)] = () => _0x460fa5(), _0x4099ae[_0x944098(0x168)] = () => _0x264983(_0x4099ae[_0x944098(0x208)]); } else { const _0x1fa9d3 = _0x1625dc['max'](0x1, _0x41efc3(_0x1e8a99[_0x944098(0x8cd)]?.['perChatContextLines'] ?? 0x64)), _0xba213b = _0x209ff5[_0x944098(0x75e)]['filter'](_0xa55fc8 => _0xa55fc8['participantIds'][_0x944098(0x7a3)](_0x299139)), _0x4cde78 = _0xba213b[_0x944098(0x3c4)](_0x435bca => { const _0x3ac305 = _0x944098, _0x304fb6 = _0x231a60(_0x435bca['id']), _0xacf6a4 = _0x304fb6['length'] > 0x0 ? _0x304fb6[_0x304fb6[_0x3ac305(0x1ea)] - 0x1] : null; return { 'chat': _0x435bca, 'history': _0x304fb6, 'lastTimestamp': _0xacf6a4 ? _0xacf6a4[_0x3ac305(0x782)] : 0x0 }; })[_0x944098(0x662)](_0x349c2c => _0x349c2c[_0x944098(0xb46)]['length'] > 0x0); _0x4cde78[_0x944098(0x940)]((_0x48b4e3, _0x54d3d0) => _0x54d3d0[_0x944098(0xa81)] - _0x48b4e3[_0x944098(0xa81)]); const _0x40604d = [], _0xc13add = {}; return _0x4cde78[_0x944098(0x4ac)]((_0x278cea, _0x28813c) => { const _0x19c077 = _0x944098, _0xe9e756 = _0x203c85(_0x278cea['chat'], _0x278cea[_0x19c077(0xb46)], _0x1fa9d3); if (_0xe9e756[_0x19c077(0x1ea)] === 0x0) return; const _0x3e3cc9 = _0x28813c === 0x0 ? _0x19c077(0xbda) : _0x19c077(0xb28); _0x40604d[_0x19c077(0xb49)](_0x19c077(0x1c5) + _0x3e3cc9 + _0x5c7229(_0x278cea[_0x19c077(0xa37)]) + '\x0a' + _0xe9e756[_0x19c077(0xae6)]('\x0a')), _0xc13add[_0x278cea[_0x19c077(0xa37)]['id']] = _0xe9e756[_0x19c077(0x1ea)]; }), { 'omniText': _0x40604d[_0x944098(0xae6)]('\x0a\x0a'), 'usedCounts': _0xc13add }; } }); } async function _0x318a9f(_0x1ae425) { const _0x5dea53 = await _0x2e216a; return new Promise((_0x4430d7, _0x3eabc5) => { const _0x279c62 = _0x2205, _0x6e7724 = _0x5dea53[_0x279c62(0x93e)](_0x56d254, 'readwrite'), _0x274720 = _0x6e7724[_0x279c62(0x92c)](_0x56d254), _0x492909 = _0x274720['delete'](_0x1ae425); _0x492909[_0x279c62(0x62f)] = () => _0x4430d7(), _0x492909[_0x279c62(0x168)] = () => _0x3eabc5(_0x492909['error']); }); } async function _0x5941fe(_0x326855, _0x2a7782) { const _0x1a715e = await _0x2e216a; return new Promise((_0x3fb0dd, _0xbd776d) => { const _0x2659b7 = _0x2205, _0x2ec72b = _0x1a715e[_0x2659b7(0x93e)](_0x2f7fc0, _0x2659b7(0x2b8)), _0x4cd423 = _0x2ec72b[_0x2659b7(0x92c)](_0x2f7fc0), _0x4fd636 = _0x4cd423[_0x2659b7(0x982)]({ 'id': _0x326855, 'blob': _0x2a7782 }); _0x4fd636['onsuccess'] = () => _0x3fb0dd(_0x4fd636[_0x2659b7(0xb7b)]), _0x4fd636[_0x2659b7(0x168)] = () => _0xbd776d(_0x4fd636[_0x2659b7(0x208)]); }); } async function _0x2ac888(_0x588cb9) { const _0x457fdc = await _0x2e216a; return new Promise((_0x537236, _0x498b0e) => { const _0x5e3fe2 = _0x2205; if (_0x5e3fe2(0x959) === 'DIiSN') { const _0x527549 = _0x457fdc[_0x5e3fe2(0x93e)](_0x2f7fc0, _0x5e3fe2(0x2b8)), _0x3d5650 = _0x527549[_0x5e3fe2(0x92c)](_0x2f7fc0), _0x5d40a6 = _0x3d5650[_0x5e3fe2(0xa4f)](_0x588cb9); _0x5d40a6[_0x5e3fe2(0x62f)] = () => _0x537236(), _0x5d40a6[_0x5e3fe2(0x168)] = () => _0x498b0e(_0x5d40a6[_0x5e3fe2(0x208)]); } else _0x33cf55[_0x5e3fe2(0x819)][_0x5e3fe2(0x838)] = 0x0, _0x1e5422(() => { const _0xf286a4 = _0x5e3fe2; _0x40cfaa[_0xf286a4(0x400)] = _0x5be565['createObjectURL'](_0x398ccb), _0x8592b2[_0xf286a4(0x819)][_0xf286a4(0x838)] = 0x1; }, 0x96); }); } function _0x100b4b(_0x34056d) { const _0x2fed55 = _0x3c008f; return fetch(_0x34056d)[_0x2fed55(0xa0d)](_0x281c77 => _0x281c77[_0x2fed55(0xbc0)]()); }


  </script>

  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>


</body>

</html>